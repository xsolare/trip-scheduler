const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C-oYBGWQ.js","assets/index-CyevbZoA.js","assets/use-database-DKumFCDg.js","assets/index-WE5xPX2m.js","assets/index-BkTaEfRN.css","assets/kit-btn-cBAf5fdj.js","assets/kit-btn-BNRn-9uq.css","assets/use-database-Dak-QrN0.css","assets/v4-BJ1IUc58.js","assets/index-C5i2mW5U.js","assets/index-BLMWxFuR.js","assets/index-SBiTxufC.js","assets/index-BCMHbg4W.js","assets/index-BRGIxz56.js","assets/index-CIH103EO.js","assets/index-BWG2bqak.js","assets/index-DoDzCXhf.js","assets/index-C50HKa74.js","assets/index-B7CxOOSp.js","assets/index-CByJlDyO.js","assets/index-Dw8J53dj.js","assets/index-BA1_aEAl.js","assets/index-DDq_OnFj.js","assets/index-CtNNNjNr.js","assets/index-V283pSAx.js","assets/index-BAAsDmwc.js","assets/index-BsW1pRV8.js","assets/dockerfile-BU1Ap__c.js","assets/simple-mode-CKxFYdZi.js","assets/factor-BPndPnYX.js","assets/nsis-ClDXqMnM.js","assets/pug-DukmZTjD.js","assets/javascript-qCveANmP.js","assets/index-z390HYIB.js","assets/index-He2vepbV.js"])))=>i.map(i=>d[i]);
import{u as xF,S as Ys,_ as wF}from"./use-database-DKumFCDg.js";import{d as SF,r as le,i as kF,c as Te,w as oa,a as He,t as s7,u as o7,b as mA,e as s0,o as ko,f as a7,g as bt,h as ve,j as Qe,k as mn,l as lt,m as $,n as pi,P as Sr,p as wl,q as gs,s as gg,v as yg,x as Tb,y as Y0,z as J0,A as CF,B as TF,C as EF,D as Ey,E as AF,F as We,G as MF,H as OF,I as IF,J as DF,K as l7,L as NF,M as gA,N as PF,T as RF,O as LF,Q as _F,R as BF,S as FF,U as gt,V as _s,_ as ni,W as Z0,X as ar,Y as er,Z as ea,$ as Ay,a0 as ku,a1 as Q0,a2 as Co,a3 as rh,a4 as Ed,a5 as aa,a6 as tr,a7 as Vp,a8 as u7,a9 as $F,aa as yA,ab as ml,ac as zF,ad as vA,ae as VF,af as Yo,ag as bA,ah as D8,ai as HF,aj as jF,ak as WF,al as qF,am as UF,an as My,ao as GF,ap as KF,aq as XF,ar as xA,as as YF,at as Y,au as vg,av as Sl,aw as $s,ax as X,ay as Ws,az as Rh,aA as N8,aB as ih,aC as JF,aD as ZF}from"./index-WE5xPX2m.js";import{A as Rs,a as Jm,v as QF}from"./v4-BJ1IUc58.js";import{o as e$}from"./index-C5i2mW5U.js";import{K as t$}from"./kit-btn-cBAf5fdj.js";function Hp(n){return n==null}function Hc(n,e){return n-e*Math.floor(n/e)}const wA=1721426;function pu(n,e,t,r){e=ep(n,e);let i=e-1,s=-2;return t<=2?s=0:sl(e)&&(s=-1),wA-1+365*i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400)+Math.floor((367*t-362)/12+s+r)}function sl(n){return n%4===0&&(n%100!==0||n%400===0)}function ep(n,e){return n==="BC"?1-e:e}function Oy(n){let e="AD";return n<=0&&(e="BC",n=1-n),[e,n]}const n$={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class zs{fromJulianDay(e){let t=e,r=t-wA,i=Math.floor(r/146097),s=Hc(r,146097),o=Math.floor(s/36524),a=Hc(s,36524),l=Math.floor(a/1461),u=Hc(a,1461),c=Math.floor(u/365),h=i*400+o*100+l*4+c+(o!==4&&c!==4?1:0),[f,d]=Oy(h),p=t-pu(f,d,1,1),m=2;t<pu(f,d,3,1)?m=0:sl(d)&&(m=1);let g=Math.floor(((p+m)*12+373)/367),y=t-pu(f,d,g,1)+1;return new Bn(f,d,g,y)}toJulianDay(e){return pu(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return n$[sl(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return sl(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const r$={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function Lu(n,e){return e=mi(e,n.calendar),n.era===e.era&&n.year===e.year&&n.month===e.month&&n.day===e.day}function SA(n,e){return e=mi(e,n.calendar),n=Eb(n),e=Eb(e),n.era===e.era&&n.year===e.year&&n.month===e.month}function Zm(n,e){return c7(n.calendar,e.calendar)&&Lu(n,e)}function P8(n,e){return c7(n.calendar,e.calendar)&&SA(n,e)}function c7(n,e){var t,r,i,s;return(s=(i=(t=n.isEqual)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:(r=e.isEqual)===null||r===void 0?void 0:r.call(e,n))!==null&&s!==void 0?s:n.identifier===e.identifier}function i$(n,e){return Lu(n,h7(e))}function kA(n,e,t){let r=n.calendar.toJulianDay(n),i=a$(e),s=Math.ceil(r+1-i)%7;return s<0&&(s+=7),s}function s$(n){return ta(Date.now(),n)}function h7(n){return c$(s$(n))}function CA(n,e){return n.calendar.toJulianDay(n)-e.calendar.toJulianDay(e)}function TA(n,e){return R8(n)-R8(e)}function R8(n){return n.hour*36e5+n.minute*6e4+n.second*1e3+n.millisecond}let f2=null;function Lh(){return f2==null&&(f2=new Intl.DateTimeFormat().resolvedOptions().timeZone),f2}function Eb(n){return n.subtract({days:n.day-1})}function L8(n){return n.add({days:n.calendar.getDaysInMonth(n)-n.day})}const _8=new Map;function o$(n){if(Intl.Locale){let t=_8.get(n);return t||(t=new Intl.Locale(n).maximize().region,t&&_8.set(n,t)),t}let e=n.split("-")[1];return e==="u"?void 0:e}function a$(n){let e=o$(n);return e&&r$[e]||0}function sh(n){n=mi(n,new zs);let e=ep(n.era,n.year);return EA(e,n.month,n.day,n.hour,n.minute,n.second,n.millisecond)}function EA(n,e,t,r,i,s,o){let a=new Date;return a.setUTCHours(r,i,s,o),a.setUTCFullYear(n,e-1,t),a.getTime()}function Ab(n,e){if(e==="UTC")return 0;if(n>0&&e===Lh())return new Date(n).getTimezoneOffset()*-6e4;let{year:t,month:r,day:i,hour:s,minute:o,second:a}=AA(n,e);return EA(t,r,i,s,o,a,0)-Math.floor(n/1e3)*1e3}const B8=new Map;function AA(n,e){let t=B8.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),B8.set(e,t));let r=t.formatToParts(new Date(n)),i={};for(let s of r)s.type!=="literal"&&(i[s.type]=s.value);return{year:i.era==="BC"||i.era==="B"?-i.year+1:+i.year,month:+i.month,day:+i.day,hour:i.hour==="24"?0:+i.hour,minute:+i.minute,second:+i.second}}const F8=864e5;function l$(n,e,t,r){return(t===r?[t]:[t,r]).filter(s=>u$(n,e,s))}function u$(n,e,t){let r=AA(t,e);return n.year===r.year&&n.month===r.month&&n.day===r.day&&n.hour===r.hour&&n.minute===r.minute&&n.second===r.second}function Jo(n,e,t="compatible"){let r=_u(n);if(e==="UTC")return sh(r);if(e===Lh()&&t==="compatible"){r=mi(r,new zs);let l=new Date,u=ep(r.era,r.year);return l.setFullYear(u,r.month-1,r.day),l.setHours(r.hour,r.minute,r.second,r.millisecond),l.getTime()}let i=sh(r),s=Ab(i-F8,e),o=Ab(i+F8,e),a=l$(r,e,i-s,i-o);if(a.length===1)return a[0];if(a.length>1)switch(t){case"compatible":case"earlier":return a[0];case"later":return a[a.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(i-s,i-o);case"compatible":case"later":return Math.max(i-s,i-o);case"reject":throw new RangeError("No such absolute time found")}}function MA(n,e,t="compatible"){return new Date(Jo(n,e,t))}function ta(n,e){let t=Ab(n,e),r=new Date(n+t),i=r.getUTCFullYear(),s=r.getUTCMonth()+1,o=r.getUTCDate(),a=r.getUTCHours(),l=r.getUTCMinutes(),u=r.getUTCSeconds(),c=r.getUTCMilliseconds();return new lh(i<1?"BC":"AD",i<1?-i+1:i,s,o,e,t,a,l,u,c)}function c$(n){return new Bn(n.calendar,n.era,n.year,n.month,n.day)}function _u(n,e){let t=0,r=0,i=0,s=0;if("timeZone"in n)({hour:t,minute:r,second:i,millisecond:s}=n);else if("hour"in n&&!e)return n;return e&&({hour:t,minute:r,second:i,millisecond:s}=e),new ah(n.calendar,n.era,n.year,n.month,n.day,t,r,i,s)}function mi(n,e){if(c7(n.calendar,e))return n;let t=e.fromJulianDay(n.calendar.toJulianDay(n)),r=n.copy();return r.calendar=e,r.era=t.era,r.year=t.year,r.month=t.month,r.day=t.day,Bu(r),r}function h$(n,e,t){if(n instanceof lh)return n.timeZone===e?n:d$(n,e);let r=Jo(n,e,t);return ta(r,e)}function f$(n){let e=sh(n)-n.offset;return new Date(e)}function d$(n,e){let t=sh(n)-n.offset;return mi(ta(t,e),n.calendar)}const vf=36e5;function Iy(n,e){let t=n.copy(),r="hour"in t?NA(t,e):0;Mb(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,n),t.month+=e.months||0,Ob(t),OA(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=r,p$(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let i=t.calendar.getYearsInEra(t);if(t.year>i){var s,o;let l=(s=(o=t.calendar).isInverseEra)===null||s===void 0?void 0:s.call(o,t);t.year=i,t.month=l?1:t.calendar.getMonthsInYear(t),t.day=l?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let a=t.calendar.getMonthsInYear(t);return t.month>a&&(t.month=a,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function Mb(n,e){var t,r;!((t=(r=n.calendar).isInverseEra)===null||t===void 0)&&t.call(r,n)&&(e=-e),n.year+=e}function Ob(n){for(;n.month<1;)Mb(n,-1),n.month+=n.calendar.getMonthsInYear(n);let e=0;for(;n.month>(e=n.calendar.getMonthsInYear(n));)n.month-=e,Mb(n,1)}function p$(n){for(;n.day<1;)n.month--,Ob(n),n.day+=n.calendar.getDaysInMonth(n);for(;n.day>n.calendar.getDaysInMonth(n);)n.day-=n.calendar.getDaysInMonth(n),n.month++,Ob(n)}function OA(n){n.month=Math.max(1,Math.min(n.calendar.getMonthsInYear(n),n.month)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day))}function Bu(n){n.calendar.constrainDate&&n.calendar.constrainDate(n),n.year=Math.max(1,Math.min(n.calendar.getYearsInEra(n),n.year)),OA(n)}function f7(n){let e={};for(let t in n)typeof n[t]=="number"&&(e[t]=-n[t]);return e}function IA(n,e){return Iy(n,f7(e))}function d7(n,e){let t=n.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),Bu(t),t}function o0(n,e){let t=n.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),DA(t),t}function m$(n){n.second+=Math.floor(n.millisecond/1e3),n.millisecond=jp(n.millisecond,1e3),n.minute+=Math.floor(n.second/60),n.second=jp(n.second,60),n.hour+=Math.floor(n.minute/60),n.minute=jp(n.minute,60);let e=Math.floor(n.hour/24);return n.hour=jp(n.hour,24),e}function DA(n){n.millisecond=Math.max(0,Math.min(n.millisecond,1e3)),n.second=Math.max(0,Math.min(n.second,59)),n.minute=Math.max(0,Math.min(n.minute,59)),n.hour=Math.max(0,Math.min(n.hour,23))}function jp(n,e){let t=n%e;return t<0&&(t+=e),t}function NA(n,e){return n.hour+=e.hours||0,n.minute+=e.minutes||0,n.second+=e.seconds||0,n.millisecond+=e.milliseconds||0,m$(n)}function PA(n,e){let t=n.copy();return NA(t,e),t}function g$(n,e){return PA(n,f7(e))}function p7(n,e,t,r){let i=n.copy();switch(e){case"era":{let a=n.calendar.getEras(),l=a.indexOf(n.era);if(l<0)throw new Error("Invalid era: "+n.era);l=na(l,t,0,a.length-1,r?.round),i.era=a[l],Bu(i);break}case"year":var s,o;!((s=(o=i.calendar).isInverseEra)===null||s===void 0)&&s.call(o,i)&&(t=-t),i.year=na(n.year,t,-1/0,9999,r?.round),i.year===-1/0&&(i.year=1),i.calendar.balanceYearMonth&&i.calendar.balanceYearMonth(i,n);break;case"month":i.month=na(n.month,t,1,n.calendar.getMonthsInYear(n),r?.round);break;case"day":i.day=na(n.day,t,1,n.calendar.getDaysInMonth(n),r?.round);break;default:throw new Error("Unsupported field "+e)}return n.calendar.balanceDate&&n.calendar.balanceDate(i),Bu(i),i}function m7(n,e,t,r){let i=n.copy();switch(e){case"hour":{let s=n.hour,o=0,a=23;if(r?.hourCycle===12){let l=s>=12;o=l?12:0,a=l?23:11}i.hour=na(s,t,o,a,r?.round);break}case"minute":i.minute=na(n.minute,t,0,59,r?.round);break;case"second":i.second=na(n.second,t,0,59,r?.round);break;case"millisecond":i.millisecond=na(n.millisecond,t,0,999,r?.round);break;default:throw new Error("Unsupported field "+e)}return i}function na(n,e,t,r,i=!1){if(i){n+=Math.sign(e),n<t&&(n=r);let s=Math.abs(e);e>0?n=Math.ceil(n/s)*s:n=Math.floor(n/s)*s,n>r&&(n=t)}else n+=e,n<t?n=r-(t-n-1):n>r&&(n=t+(n-r-1));return n}function RA(n,e){let t;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let i=Iy(_u(n),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});t=Jo(i,n.timeZone)}else t=sh(n)-n.offset;t+=e.milliseconds||0,t+=(e.seconds||0)*1e3,t+=(e.minutes||0)*6e4,t+=(e.hours||0)*36e5;let r=ta(t,n.timeZone);return mi(r,n.calendar)}function y$(n,e){return RA(n,f7(e))}function v$(n,e,t,r){switch(e){case"hour":{let i=0,s=23;if(r?.hourCycle===12){let p=n.hour>=12;i=p?12:0,s=p?23:11}let o=_u(n),a=mi(o0(o,{hour:i}),new zs),l=[Jo(a,n.timeZone,"earlier"),Jo(a,n.timeZone,"later")].filter(p=>ta(p,n.timeZone).day===a.day)[0],u=mi(o0(o,{hour:s}),new zs),c=[Jo(u,n.timeZone,"earlier"),Jo(u,n.timeZone,"later")].filter(p=>ta(p,n.timeZone).day===u.day).pop(),h=sh(n)-n.offset,f=Math.floor(h/vf),d=h%vf;return h=na(f,t,Math.floor(l/vf),Math.floor(c/vf),r?.round)*vf+d,mi(ta(h,n.timeZone),n.calendar)}case"minute":case"second":case"millisecond":return m7(n,e,t,r);case"era":case"year":case"month":case"day":{let i=p7(_u(n),e,t,r),s=Jo(i,n.timeZone);return mi(ta(s,n.timeZone),n.calendar)}default:throw new Error("Unsupported field "+e)}}function b$(n,e,t){let r=_u(n),i=o0(d7(r,e),e);if(i.compare(r)===0)return n;let s=Jo(i,n.timeZone,t);return mi(ta(s,n.timeZone),n.calendar)}const x$=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/;function w$(n){let e=n.match(x$);if(!e)throw new Error("Invalid ISO 8601 date string: "+n);let t=new Bn(d2(e[1],0,9999),d2(e[2],1,12),1);return t.day=d2(e[3],1,t.calendar.getDaysInMonth(t)),t}function d2(n,e,t){let r=Number(n);if(r<e||r>t)throw new RangeError(`Value out of range: ${e} <= ${r} <= ${t}`);return r}function LA(n){return`${String(n.hour).padStart(2,"0")}:${String(n.minute).padStart(2,"0")}:${String(n.second).padStart(2,"0")}${n.millisecond?String(n.millisecond/1e3).slice(1):""}`}function _A(n){let e=mi(n,new zs),t;return e.era==="BC"?t=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):t=String(e.year).padStart(4,"0"),`${t}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function BA(n){return`${_A(n)}T${LA(n)}`}function S$(n){let e=Math.sign(n)<0?"-":"+";n=Math.abs(n);let t=Math.floor(n/36e5),r=n%36e5/6e4;return`${e}${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function k$(n){return`${BA(n)}${S$(n.offset)}[${n.timeZone}]`}function C$(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dy(n,e,t){C$(n,e),e.set(n,t)}function g7(n){let e=typeof n[0]=="object"?n.shift():new zs,t;if(typeof n[0]=="string")t=n.shift();else{let o=e.getEras();t=o[o.length-1]}let r=n.shift(),i=n.shift(),s=n.shift();return[e,t,r,i,s]}var T$=new WeakMap;class Bn{copy(){return this.era?new Bn(this.calendar,this.era,this.year,this.month,this.day):new Bn(this.calendar,this.year,this.month,this.day)}add(e){return Iy(this,e)}subtract(e){return IA(this,e)}set(e){return d7(this,e)}cycle(e,t,r){return p7(this,e,t,r)}toDate(e){return MA(this,e)}toString(){return _A(this)}compare(e){return CA(this,e)}constructor(...e){Dy(this,T$,{writable:!0,value:void 0});let[t,r,i,s,o]=g7(e);this.calendar=t,this.era=r,this.year=i,this.month=s,this.day=o,Bu(this)}}var E$=new WeakMap;class oh{copy(){return new oh(this.hour,this.minute,this.second,this.millisecond)}add(e){return PA(this,e)}subtract(e){return g$(this,e)}set(e){return o0(this,e)}cycle(e,t,r){return m7(this,e,t,r)}toString(){return LA(this)}compare(e){return TA(this,e)}constructor(e=0,t=0,r=0,i=0){Dy(this,E$,{writable:!0,value:void 0}),this.hour=e,this.minute=t,this.second=r,this.millisecond=i,DA(this)}}var A$=new WeakMap;class ah{copy(){return this.era?new ah(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new ah(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return Iy(this,e)}subtract(e){return IA(this,e)}set(e){return d7(o0(this,e),e)}cycle(e,t,r){switch(e){case"era":case"year":case"month":case"day":return p7(this,e,t,r);default:return m7(this,e,t,r)}}toDate(e,t){return MA(this,e,t)}toString(){return BA(this)}compare(e){let t=CA(this,e);return t===0?TA(this,_u(e)):t}constructor(...e){Dy(this,A$,{writable:!0,value:void 0});let[t,r,i,s,o]=g7(e);this.calendar=t,this.era=r,this.year=i,this.month=s,this.day=o,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Bu(this)}}var M$=new WeakMap;class lh{copy(){return this.era?new lh(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new lh(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return RA(this,e)}subtract(e){return y$(this,e)}set(e,t){return b$(this,e,t)}cycle(e,t,r){return v$(this,e,t,r)}toDate(){return f$(this)}toString(){return k$(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-h$(e,this.timeZone).toDate().getTime()}constructor(...e){Dy(this,M$,{writable:!0,value:void 0});let[t,r,i,s,o]=g7(e),a=e.shift(),l=e.shift();this.calendar=t,this.era=r,this.year=i,this.month=s,this.day=o,this.timeZone=a,this.offset=l,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Bu(this)}}const jc=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],O$=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],Qm=[1867,1911,1925,1988,2018],Ga=["meiji","taisho","showa","heisei","reiwa"];function $8(n){const e=jc.findIndex(([t,r,i])=>n.year<t||n.year===t&&n.month<r||n.year===t&&n.month===r&&n.day<i);return e===-1?jc.length-1:e===0?0:e-1}function p2(n){let e=Qm[Ga.indexOf(n.era)];if(!e)throw new Error("Unknown era: "+n.era);return new Bn(n.year+e,n.month,n.day)}class I$ extends zs{fromJulianDay(e){let t=super.fromJulianDay(e),r=$8(t);return new Bn(this,Ga[r],t.year-Qm[r],t.month,t.day)}toJulianDay(e){return super.toJulianDay(p2(e))}balanceDate(e){let t=p2(e),r=$8(t);Ga[r]!==e.era&&(e.era=Ga[r],e.year=t.year-Qm[r]),this.constrainDate(e)}constrainDate(e){let t=Ga.indexOf(e.era),r=O$[t];if(r!=null){let[i,s,o]=r,a=i-Qm[t];e.year=Math.max(1,Math.min(a,e.year)),e.year===a&&(e.month=Math.min(s,e.month),e.month===s&&(e.day=Math.min(o,e.day)))}if(e.year===1&&t>=0){let[,i,s]=jc[t];e.month=Math.max(i,e.month),e.month===i&&(e.day=Math.max(s,e.day))}}getEras(){return Ga}getYearsInEra(e){let t=Ga.indexOf(e.era),r=jc[t],i=jc[t+1];if(i==null)return 9999-r[0]+1;let s=i[0]-r[0];return(e.month<i[1]||e.month===i[1]&&e.day<i[2])&&s++,s}getDaysInMonth(e){return super.getDaysInMonth(p2(e))}getMinimumMonthInYear(e){let t=z8(e);return t?t[1]:1}getMinimumDayInMonth(e){let t=z8(e);return t&&e.month===t[1]?t[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function z8(n){if(n.year===1){let e=Ga.indexOf(n.era);return jc[e]}}const FA=-543;class D$ extends zs{fromJulianDay(e){let t=super.fromJulianDay(e),r=ep(t.era,t.year);return new Bn(this,r-FA,t.month,t.day)}toJulianDay(e){return super.toJulianDay(V8(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth(V8(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function V8(n){let[e,t]=Oy(n.year+FA);return new Bn(e,t,n.month,n.day)}const bg=1911;function $A(n){return n.era==="minguo"?n.year+bg:1-n.year+bg}function H8(n){let e=n-bg;return e>0?["minguo",e]:["before_minguo",1-e]}class N$ extends zs{fromJulianDay(e){let t=super.fromJulianDay(e),r=ep(t.era,t.year),[i,s]=H8(r);return new Bn(this,i,s,t.month,t.day)}toJulianDay(e){return super.toJulianDay(j8(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[t,r]=H8($A(e));e.era=t,e.year=r}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth(j8(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-bg}constructor(...e){super(...e),this.identifier="roc"}}function j8(n){let[e,t]=Oy($A(n));return new Bn(e,t,n.month,n.day)}const W8=1948320,q8=[0,31,62,93,124,155,186,216,246,276,306,336];class P${fromJulianDay(e){let t=e-W8,r=1+Math.floor((33*t+3)/12053),i=365*(r-1)+Math.floor((8*r+21)/33),s=t-i,o=s<216?Math.floor(s/31):Math.floor((s-6)/30),a=s-q8[o]+1;return new Bn(this,r,o+1,a)}toJulianDay(e){let t=W8-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return t+=q8[e.month-1],t+=e.day,t}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||Hc(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const m2=78,U8=80;class R$ extends zs{fromJulianDay(e){let t=super.fromJulianDay(e),r=t.year-m2,i=e-pu(t.era,t.year,1,1),s;i<U8?(r--,s=sl(t.year-1)?31:30,i+=s+155+90+10):(s=sl(t.year)?31:30,i-=U8);let o,a;if(i<s)o=1,a=i+1;else{let l=i-s;l<155?(o=Math.floor(l/31)+2,a=l%31+1):(l-=155,o=Math.floor(l/30)+7,a=l%30+1)}return new Bn(this,r,o,a)}toJulianDay(e){let t=e.year+m2,[r,i]=Oy(t),s,o;return sl(i)?(s=31,o=pu(r,i,3,21)):(s=30,o=pu(r,i,3,22)),e.month===1?o+e.day-1:(o+=s+Math.min(e.month-2,5)*31,e.month>=8&&(o+=(e.month-7)*30),o+=e.day-1,o)}getDaysInMonth(e){return e.month===1&&sl(e.year+m2)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const xg=1948440,G8=1948439,Zi=1300,pc=1600,L$=460322;function wg(n,e,t,r){return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+n-1}function zA(n,e,t){let r=Math.floor((30*(t-e)+10646)/10631),i=Math.min(12,Math.ceil((t-(29+wg(e,r,1,1)))/29.5)+1),s=t-wg(e,r,i,1)+1;return new Bn(n,r,i,s)}function K8(n){return(14+11*n)%30<11}class y7{fromJulianDay(e){return zA(this,xg,e)}toJulianDay(e){return wg(xg,e.year,e.month,e.day)}getDaysInMonth(e){let t=29+e.month%2;return e.month===12&&K8(e.year)&&t++,t}getMonthsInYear(){return 12}getDaysInYear(e){return K8(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class _$ extends y7{fromJulianDay(e){return zA(this,G8,e)}toJulianDay(e){return wg(G8,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const B$="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let Ib,Wc;function e1(n){return L$+Wc[n-Zi]}function $f(n,e){let t=n-Zi,r=1<<11-(e-1);return(Ib[t]&r)===0?29:30}function X8(n,e){let t=e1(n);for(let r=1;r<e;r++)t+=$f(n,r);return t}function Y8(n){return Wc[n+1-Zi]-Wc[n-Zi]}class F$ extends y7{fromJulianDay(e){let t=e-xg,r=e1(Zi),i=e1(pc);if(t<r||t>i)return super.fromJulianDay(e);{let s=Zi-1,o=1,a=1;for(;a>0;){s++,a=t-e1(s)+1;let l=Y8(s);if(a===l){o=12;break}else if(a<l){let u=$f(s,o);for(o=1;a>u;)a-=u,o++,u=$f(s,o);break}}return new Bn(this,s,o,t-X8(s,o)+1)}}toJulianDay(e){return e.year<Zi||e.year>pc?super.toJulianDay(e):xg+X8(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<Zi||e.year>pc?super.getDaysInMonth(e):$f(e.year,e.month)}getDaysInYear(e){return e.year<Zi||e.year>pc?super.getDaysInYear(e):Y8(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",Ib||(Ib=new Uint16Array(Uint8Array.from(atob(B$),e=>e.charCodeAt(0)).buffer)),!Wc){Wc=new Uint32Array(pc-Zi+1);let e=0;for(let t=Zi;t<=pc;t++){Wc[t-Zi]=e;for(let r=1;r<=12;r++)e+=$f(t,r)}}}}const J8=347997,VA=1080,HA=24*VA,$$=29,z$=12*VA+793,V$=$$*HA+z$;function cu(n){return Hc(n*7+1,19)<7}function t1(n){let e=Math.floor((235*n-234)/19),t=12084+13753*e,r=e*29+Math.floor(t/25920);return Hc(3*(r+1),7)<3&&(r+=1),r}function H$(n){let e=t1(n-1),t=t1(n);return t1(n+1)-t===356?2:t-e===382?1:0}function Ad(n){return t1(n)+H$(n)}function jA(n){return Ad(n+1)-Ad(n)}function j$(n){let e=jA(n);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function Wp(n,e){if(e>=6&&!cu(n)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let t=j$(n);return e===2?t===2?30:29:e===3?t===0?29:30:e===6?cu(n)?30:0:30}class W${fromJulianDay(e){let t=e-J8,r=t*HA/V$,i=Math.floor((19*r+234)/235)+1,s=Ad(i),o=Math.floor(t-s);for(;o<1;)i--,s=Ad(i),o=Math.floor(t-s);let a=1,l=0;for(;l<o;)l+=Wp(i,a),a++;a--,l-=Wp(i,a);let u=o-l;return new Bn(this,i,a,u)}toJulianDay(e){let t=Ad(e.year);for(let r=1;r<e.month;r++)t+=Wp(e.year,r);return t+e.day+J8}getDaysInMonth(e){return Wp(e.year,e.month)}getMonthsInYear(e){return cu(e.year)?13:12}getDaysInYear(e){return jA(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,t){t.year!==e.year&&(cu(t.year)&&!cu(e.year)&&t.month>6?e.month--:!cu(t.year)&&cu(e.year)&&t.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const Db=1723856,Z8=1824665,Nb=5500;function Sg(n,e,t,r){return n+365*e+Math.floor(e/4)+30*(t-1)+r-1}function v7(n,e){let t=Math.floor(4*(e-n)/1461),r=1+Math.floor((e-Sg(n,t,1,1))/30),i=e+1-Sg(n,t,r,1);return[t,r,i]}function WA(n){return Math.floor(n%4/3)}function qA(n,e){return e%13!==0?30:WA(n)+5}class b7{fromJulianDay(e){let[t,r,i]=v7(Db,e),s="AM";return t<=0&&(s="AA",t+=Nb),new Bn(this,s,t,r,i)}toJulianDay(e){let t=e.year;return e.era==="AA"&&(t-=Nb),Sg(Db,t,e.month,e.day)}getDaysInMonth(e){return qA(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+WA(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class q$ extends b7{fromJulianDay(e){let[t,r,i]=v7(Db,e);return t+=Nb,new Bn(this,"AA",t,r,i)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class U$ extends b7{fromJulianDay(e){let[t,r,i]=v7(Z8,e),s="CE";return t<=0&&(s="BCE",t=1-t),new Bn(this,s,t,r,i)}toJulianDay(e){let t=e.year;return e.era==="BCE"&&(t=1-t),Sg(Z8,t,e.month,e.day)}getDaysInMonth(e){let t=e.year;return e.era==="BCE"&&(t=1-t),qA(t,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function G$(n){switch(n){case"buddhist":return new D$;case"ethiopic":return new b7;case"ethioaa":return new q$;case"coptic":return new U$;case"hebrew":return new W$;case"indian":return new R$;case"islamic-civil":return new y7;case"islamic-tbla":return new _$;case"islamic-umalqura":return new F$;case"japanese":return new I$;case"persian":return new P$;case"roc":return new N$;case"gregory":default:return new zs}}let g2=new Map;class zo{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,t){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} – ${this.formatter.format(t)}`}formatRangeToParts(e,t){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let r=this.formatter.formatToParts(e),i=this.formatter.formatToParts(t);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return Y$()&&(this.resolvedHourCycle||(this.resolvedHourCycle=J$(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,t={}){this.formatter=UA(e,t),this.options=t}}const K$={true:{ja:"h11"},false:{}};function UA(n,e={}){if(typeof e.hour12=="boolean"&&X$()){e={...e};let i=K$[String(e.hour12)][n.split("-")[0]],s=e.hour12?"h12":"h23";e.hourCycle=i??s,delete e.hour12}let t=n+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(g2.has(t))return g2.get(t);let r=new Intl.DateTimeFormat(n,e);return g2.set(t,r),r}let y2=null;function X$(){return y2==null&&(y2=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),y2}let v2=null;function Y$(){return v2==null&&(v2=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),v2}function J$(n,e){if(!e.timeStyle&&!e.hour)return;n=n.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),n+=(n.includes("-u-")?"":"-u")+"-nu-latn";let t=UA(n,{...e,timeZone:void 0}),r=parseInt(t.formatToParts(new Date(2020,2,3,0)).find(s=>s.type==="hour").value,10),i=parseInt(t.formatToParts(new Date(2020,2,3,23)).find(s=>s.type==="hour").value,10);if(r===0&&i===23)return"h23";if(r===24&&i===23)return"h24";if(r===0&&i===11)return"h11";if(r===12&&i===11)return"h12";throw new Error("Unexpected hour cycle result")}function ns(n,e=Lh()){return Ny(n)?n.toDate():n.toDate(e)}function Z$(n){return n instanceof ah}function Ny(n){return n instanceof lh}function Q$(n){return Z$(n)||Ny(n)}function ga(n){if(n instanceof Date){const e=n.getFullYear(),t=n.getMonth()+1;return new Date(e,t,0).getDate()}else return n.set({day:100}).day}function Md(n,e){return n.compare(e)<0}function b2(n,e){return n.compare(e)>0}function ez(n,e,t){const r=kA(n,t);return e>r?n.subtract({days:r+7-e}):e===r?n:n.subtract({days:r-e})}function tz(n,e,t){const r=kA(n,t),i=e===0?6:e-1;return r===i?n:r>i?n.add({days:7-r+i}):n.add({days:i-r})}function nz(n){const{defaultValue:e,defaultPlaceholder:t,granularity:r="day",locale:i="en"}=n;if(Array.isArray(e)&&e.length)return e.at(-1).copy();if(e&&!Array.isArray(e))return e.copy();if(t)return t.copy();const s=new Date,o=s.getFullYear(),a=s.getMonth()+1,l=s.getDate(),u=["hour","minute","second"],c=new zo(i),h=G$(c.resolvedOptions().calendar);return u.includes(r??"day")?mi(new ah(o,a,l,0,0,0),h):mi(new Bn(o,a,l),h)}function rz(n){const{defaultValue:e,defaultPlaceholder:t}=n;return e?e.copy():t?t.copy():new oh(0,0,0)}function iz(n,e){const t=[];for(let r=0;r<n.length;r+=e)t.push(n.slice(r,r+e));return t}function sz(n,e,t=!1){const r={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short",hourCycle:kg(e),hour12:lz(e)};return t&&(delete r.year,delete r.month,delete r.day),n==="day"&&(delete r.second,delete r.hour,delete r.minute,delete r.timeZoneName),n==="hour"&&(delete r.minute,delete r.second),n==="minute"&&delete r.second,r}function oz(n){return SF(n?.step,{year:1,month:1,day:1,hour:1,minute:1,second:1,millisecond:1})}function az(n){const e=n.querySelector("[data-selected]");if(e)return e.focus();const t=n.querySelector("[data-today]");if(t)return t.focus();const r=n.querySelector("[data-reka-calendar-day]");if(r)return r.focus()}function kg(n){if(n===24)return"h23";if(n===12)return"h11"}function lz(n){if(n===24)return!1;if(n===12)return!0}function Q8(n,e){const t=[];let r=n.add({days:1});const i=e;for(;r.compare(i)<0;)t.push(r),r=r.add({days:1});return t}function x2(n){const{dateObj:e,weekStartsOn:t,fixedWeeks:r,locale:i}=n,s=ga(e),o=Array.from({length:s},(g,y)=>e.set({day:y+1})),a=Eb(e),l=L8(e),u=ez(a,t,i),c=tz(l,t,i),h=Q8(u.subtract({days:1}),a),f=Q8(l,c.add({days:1})),d=h.length+o.length+f.length;if(r&&d<42){const g=42-d;let y=f[f.length-1];y||(y=L8(e));const v=Array.from({length:g},(x,k)=>{const C=k+1;return y.add({days:C})});f.push(...v)}const p=h.concat(o,f),m=iz(p,7);return{value:e,cells:p,rows:m}}function Wl(n){const{numberOfMonths:e,dateObj:t,...r}=n,i=[];if(!e||e===1)return i.push(x2({...r,dateObj:t})),i;i.push(x2({...r,dateObj:t}));for(let s=1;s<e;s++){const o=t.add({months:s});i.push(x2({...r,dateObj:o}))}return i}function GA(n,e={}){const t=le(n);function r(){return t.value}function i(g){t.value=g}function s(g,y){return new zo(t.value,{...e,...y}).format(g)}function o(g,y=!0){return Q$(g)&&y?s(ns(g),{dateStyle:"long",timeStyle:"long"}):s(ns(g),{dateStyle:"long"})}function a(g,y={}){return new zo(t.value,{...e,month:"long",year:"numeric",...y}).format(g)}function l(g,y={}){return new zo(t.value,{...e,month:"long",...y}).format(g)}function u(){const g=h7(Lh());return[1,2,3,4,5,6,7,8,9,10,11,12].map(v=>({label:l(ns(g.set({month:v}))),value:v}))}function c(g,y={}){return new zo(t.value,{...e,year:"numeric",...y}).format(g)}function h(g,y){return Ny(g)?new zo(t.value,{...e,...y,timeZone:g.timeZone}).formatToParts(ns(g)):new zo(t.value,{...e,...y}).formatToParts(ns(g))}function f(g,y="narrow"){return new zo(t.value,{...e,weekday:y}).format(g)}function d(g){return new zo(t.value,{...e,hour:"numeric",minute:"numeric"}).formatToParts(g).find(x=>x.type==="dayPeriod")?.value==="PM"?"PM":"AM"}const p={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function m(g,y,v={}){const x={...p,...v},C=h(g,x).find(w=>w.type===y);return C?C.value:""}return{setLocale:i,getLocale:r,fullMonth:l,fullYear:c,fullMonthAndYear:a,toParts:h,custom:s,part:m,dayPeriod:d,selectedDate:o,dayOfWeek:f,getMonths:u}}function tp(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function KA(n){const e=kF({locale:le("en")});return Te(()=>n?.value||e.locale?.value||"en")}const XA=["day","month","year"],x7=["hour","minute","second","dayPeriod"],uz=[...XA,...x7];function cz(n){return XA.includes(n)}function YA(n){return uz.includes(n)}const hz=["ach","af","am","an","ar","ast","az","be","bg","bn","br","bs","ca","cak","ckb","cs","cy","da","de","dsb","el","en","eo","es","et","eu","fa","ff","fi","fr","fy","ga","gd","gl","he","hr","hsb","hu","ia","id","it","ja","ka","kk","kn","ko","lb","lo","lt","lv","meh","ml","ms","nl","nn","no","oc","pl","pt","rm","ro","ru","sc","scn","sk","sl","sr","sv","szl","tg","th","tr","uk","zh-CN","zh-TW"],fz=["year","month","day"],w2={ach:{year:"mwaka",month:"dwe",day:"nino"},af:{year:"jjjj",month:"mm",day:"dd"},am:{year:"ዓዓዓዓ",month:"ሚሜ",day:"ቀቀ"},an:{year:"aaaa",month:"mm",day:"dd"},ar:{year:"سنة",month:"شهر",day:"يوم"},ast:{year:"aaaa",month:"mm",day:"dd"},az:{year:"iiii",month:"aa",day:"gg"},be:{year:"гггг",month:"мм",day:"дд"},bg:{year:"гггг",month:"мм",day:"дд"},bn:{year:"yyyy",month:"মিমি",day:"dd"},br:{year:"bbbb",month:"mm",day:"dd"},bs:{year:"gggg",month:"mm",day:"dd"},ca:{year:"aaaa",month:"mm",day:"dd"},cak:{year:"jjjj",month:"ii",day:"q'q'"},ckb:{year:"ساڵ",month:"مانگ",day:"ڕۆژ"},cs:{year:"rrrr",month:"mm",day:"dd"},cy:{year:"bbbb",month:"mm",day:"dd"},da:{year:"åååå",month:"mm",day:"dd"},de:{year:"jjjj",month:"mm",day:"tt"},dsb:{year:"llll",month:"mm",day:"źź"},el:{year:"εεεε",month:"μμ",day:"ηη"},en:{year:"yyyy",month:"mm",day:"dd"},eo:{year:"jjjj",month:"mm",day:"tt"},es:{year:"aaaa",month:"mm",day:"dd"},et:{year:"aaaa",month:"kk",day:"pp"},eu:{year:"uuuu",month:"hh",day:"ee"},fa:{year:"سال",month:"ماه",day:"روز"},ff:{year:"hhhh",month:"ll",day:"ññ"},fi:{year:"vvvv",month:"kk",day:"pp"},fr:{year:"aaaa",month:"mm",day:"jj"},fy:{year:"jjjj",month:"mm",day:"dd"},ga:{year:"bbbb",month:"mm",day:"ll"},gd:{year:"bbbb",month:"mm",day:"ll"},gl:{year:"aaaa",month:"mm",day:"dd"},he:{year:"שנה",month:"חודש",day:"יום"},hr:{year:"gggg",month:"mm",day:"dd"},hsb:{year:"llll",month:"mm",day:"dd"},hu:{year:"éééé",month:"hh",day:"nn"},ia:{year:"aaaa",month:"mm",day:"dd"},id:{year:"tttt",month:"bb",day:"hh"},it:{year:"aaaa",month:"mm",day:"gg"},ja:{year:" 年 ",month:"月",day:"日"},ka:{year:"წწწწ",month:"თთ",day:"რრ"},kk:{year:"жжжж",month:"аа",day:"кк"},kn:{year:"ವವವವ",month:"ಮಿಮೀ",day:"ದಿದಿ"},ko:{year:"연도",month:"월",day:"일"},lb:{year:"jjjj",month:"mm",day:"dd"},lo:{year:"ປປປປ",month:"ດດ",day:"ວວ"},lt:{year:"mmmm",month:"mm",day:"dd"},lv:{year:"gggg",month:"mm",day:"dd"},meh:{year:"aaaa",month:"mm",day:"dd"},ml:{year:"വർഷം",month:"മാസം",day:"തീയതി"},ms:{year:"tttt",month:"mm",day:"hh"},nl:{year:"jjjj",month:"mm",day:"dd"},nn:{year:"åååå",month:"mm",day:"dd"},no:{year:"åååå",month:"mm",day:"dd"},oc:{year:"aaaa",month:"mm",day:"jj"},pl:{year:"rrrr",month:"mm",day:"dd"},pt:{year:"aaaa",month:"mm",day:"dd"},rm:{year:"oooo",month:"mm",day:"dd"},ro:{year:"aaaa",month:"ll",day:"zz"},ru:{year:"гггг",month:"мм",day:"дд"},sc:{year:"aaaa",month:"mm",day:"dd"},scn:{year:"aaaa",month:"mm",day:"jj"},sk:{year:"rrrr",month:"mm",day:"dd"},sl:{year:"llll",month:"mm",day:"dd"},sr:{year:"гггг",month:"мм",day:"дд"},sv:{year:"åååå",month:"mm",day:"dd"},szl:{year:"rrrr",month:"mm",day:"dd"},tg:{year:"сссс",month:"мм",day:"рр"},th:{year:"ปปปป",month:"ดด",day:"วว"},tr:{year:"yyyy",month:"aa",day:"gg"},uk:{year:"рррр",month:"мм",day:"дд"},"zh-CN":{year:"年",month:"月",day:"日"},"zh-TW":{year:"年",month:"月",day:"日"}};function dz(n){if(eS(n))return w2[n];{const e=yz(n);return eS(e)?w2[e]:w2.en}}function S2(n,e,t){return pz(n)?dz(t)[n]:gz(n)?e:mz(n)?"––":""}function eS(n){return hz.includes(n)}function pz(n){return fz.includes(n)}function mz(n){return n==="hour"||n==="minute"||n==="second"}function gz(n){return n==="era"||n==="dayPeriod"}function yz(n){return Intl.Locale?new Intl.Locale(n).language:n.split("-")[0]}function tS(n){return Object.fromEntries(x7.map(e=>e==="dayPeriod"?[e,n.formatter.dayPeriod(ns(n.value))]:[e,n.value[e]]))}function vz(n){return Object.fromEntries(x7.map(e=>e==="dayPeriod"?[e,"AM"]:[e,null]).filter(([e])=>!(e==="literal"||e===null||n==="minute"&&e==="second"||n==="hour"&&(e==="second"||e==="minute"))))}function bz(n){const{segmentValues:e,formatter:t,locale:r}=n;function i(o){if("hour"in e){const a=e[o];return a!==null?o==="day"?t.part(n.dateRef.set({[o]:a,month:e.month??1}),o,{hourCycle:kg(n.hourCycle)}):t.part(n.dateRef.set({[o]:a}),o,{hourCycle:kg(n.hourCycle)}):S2(o,"",r.value)}else{if(cz(o)){const a=e[o];return a!==null?o==="day"?t.part(n.dateRef.set({[o]:a,month:e.month??1}),o):t.part(n.dateRef.set({[o]:a}),o):S2(o,"",r.value)}return""}}return Object.keys(e).reduce((o,a)=>{if(!YA(a))return o;if("hour"in e&&a==="dayPeriod"){const l=e[a];l!==null?o[a]=l:o[a]=S2(a,"AM",r.value)}else o[a]=i(a);return o},{})}function xz(n){const{granularity:e,formatter:t,contentObj:r,hideTimeZone:i,hourCycle:s,isTimeValue:o}=n;return t.toParts(n.dateRef,sz(e,s,o)).map(u=>["literal","timeZoneName",null].includes(u.type)||!YA(u.type)?{part:u.type,value:u.value}:{part:u.type,value:r[u.type]}).filter(u=>!(u.part===null||u.value===null||u.part==="timeZoneName"&&(!Ny(n.dateRef)||i)))}function wz(n){const e=bz(n),t=xz({contentObj:e,...n});return{obj:e,arr:t}}function Ha(n){const e=tp();return n===e.ARROW_RIGHT||n===e.ARROW_LEFT}function nu(n){return!Number.isNaN(Number.parseInt(n))}function La(n){const e=tp();return!!([e.ENTER,e.ARROW_UP,e.ARROW_DOWN,e.ARROW_LEFT,e.ARROW_RIGHT,e.BACKSPACE,e.SPACE,"a","A","p","P"].includes(n)||nu(n))}function nS(n){return Array.from(n.querySelectorAll("[data-reka-time-field-segment]")).filter(e=>e.getAttribute("data-reka-time-field-segment")!=="literal")}function Rl(n){return{role:"spinbutton",contenteditable:!0,tabindex:n.disabled?void 0:0,spellcheck:!1,inputmode:"numeric",autocorrect:"off",enterkeyhint:"next",style:"caret-color: transparent;"}}function Sz(n){const{segmentValues:e,placeholder:t}=n,r=e.day===null,i=e.day?t.set({day:e.day}):t,s=i.day,o=1,a=ga(i),l=r?"Empty":`${s}`;return{...Rl(n),"aria-label":"day,","aria-valuemin":o,"aria-valuemax":a,"aria-valuenow":s,"aria-valuetext":l,"data-placeholder":r?"":void 0}}function kz(n){const{segmentValues:e,placeholder:t,formatter:r}=n,i=e.month===null,s=e.month?t.set({month:e.month}):t,o=s.month,a=1,l=12,u=i?"Empty":`${o} - ${r.fullMonth(ns(s))}`;return{...Rl(n),"aria-label":"month, ",contenteditable:!0,"aria-valuemin":a,"aria-valuemax":l,"aria-valuenow":o,"aria-valuetext":u,"data-placeholder":i?"":void 0}}function Cz(n){const{segmentValues:e,placeholder:t}=n,r=e.year===null,i=e.year?t.set({year:e.year}):t,s=1,o=9999,a=i.year,l=r?"Empty":`${a}`;return{...Rl(n),"aria-label":"year, ","aria-valuemin":s,"aria-valuemax":o,"aria-valuenow":a,"aria-valuetext":l,"data-placeholder":r?"":void 0}}function Tz(n){const{segmentValues:e,hourCycle:t,placeholder:r}=n;if(!("hour"in e)||!("hour"in r))return{};const i=e.hour===null,s=e.hour?r.set({hour:e.hour}):r,o=t===12?1:0,a=t===12?12:23,l=s.hour,u=i?"Empty":`${l} ${e.dayPeriod??""}`;return{...Rl(n),"aria-label":"hour, ","aria-valuemin":o,"aria-valuemax":a,"aria-valuenow":l,"aria-valuetext":u,"data-placeholder":i?"":void 0}}function Ez(n){const{segmentValues:e,placeholder:t}=n;if(!("minute"in e)||!("minute"in t))return{};const r=e.minute===null,s=(e.minute?t.set({minute:e.minute}):t).minute,o=0,a=59,l=r?"Empty":`${s}`;return{...Rl(n),"aria-label":"minute, ","aria-valuemin":o,"aria-valuemax":a,"aria-valuenow":s,"aria-valuetext":l,"data-placeholder":r?"":void 0}}function Az(n){const{segmentValues:e,placeholder:t}=n;if(!("second"in e)||!("second"in t))return{};const r=e.second===null,s=(e.second?t.set({second:e.second}):t).second,o=0,a=59,l=r?"Empty":`${s}`;return{...Rl(n),"aria-label":"second, ","aria-valuemin":o,"aria-valuemax":a,"aria-valuenow":s,"aria-valuetext":l,"data-placeholder":r?"":void 0}}function Mz(n){const{segmentValues:e}=n;if(!("dayPeriod"in e))return{};const t=0,r=12,i=e.hour?e.hour>12?e.hour-12:e.hour:0,s=e.dayPeriod??"AM";return{...Rl(n),inputmode:"text","aria-label":"AM/PM","aria-valuemin":t,"aria-valuemax":r,"aria-valuenow":i,"aria-valuetext":s}}function Oz(n){return{"aria-hidden":!0,"data-segment":"literal"}}function Iz(n){return{role:"textbox","aria-label":"timezone, ","data-readonly":!0,"data-segment":"timeZoneName",tabindex:n.disabled?void 0:0,style:"caret-color: transparent;"}}function Dz(n){const{segmentValues:e,placeholder:t}=n,r=0,i=0,s=0,o="era"in e?e.era:t.era;return{...Rl(n),"aria-label":"era","aria-valuemin":r,"aria-valuemax":i,"aria-valuenow":s,"aria-valuetext":o}}const Nz={day:{attrs:Sz},month:{attrs:kz},year:{attrs:Cz},hour:{attrs:Tz},minute:{attrs:Ez},second:{attrs:Az},dayPeriod:{attrs:Mz},literal:{attrs:Oz},timeZoneName:{attrs:Iz},era:{attrs:Dz}};function Pz(n){const e=tp();function t({e:x,part:k,dateRef:C,prevValue:w}){const M=n.step.value[k]??1,D=x.key===e.ARROW_UP?M:-M,A=0,E=59;if(w===null)return D>0?A:E;const N=[k,D];return C.set({[k]:w}).cycle(...N)[k]}function r(x){if(n.hasLeftFocus.value=!1,x===null)return x;const k=x.toString();return k.length===1?(n.modelValue.value=void 0,null):Number.parseInt(k.slice(0,-1))}function i({e:x,part:k,dateRef:C,prevValue:w,hourCycle:M}){const D=n.step.value[k]??1,A=x.key===e.ARROW_UP?D:-D;if(w===null)return C[k];if(k==="hour"&&"hour"in C){const N=[k,A,{hourCycle:M}];return C.set({[k]:w}).cycle(...N)[k]}const E=[k,A];return k==="day"?C.set({[k]:w,month:n.segmentValues.value.month??1}).cycle(...E)[k]:C.set({[k]:w}).cycle(...E)[k]}function s(x,k,C){let w=!1;const M=Math.floor(x/10);if(n.hasLeftFocus.value&&(n.hasLeftFocus.value=!1,C=null),C===null)return k===0?(n.lastKeyZero.value=!0,{value:null,moveToNext:w}):((n.lastKeyZero.value||k>M)&&(w=!0),n.lastKeyZero.value=!1,{value:k,moveToNext:w});const D=C.toString().length,A=Number.parseInt(C.toString()+k.toString());return D===2||A>x?((k>M||A>x)&&(w=!0),{value:k,moveToNext:w}):(w=!0,{value:A,moveToNext:w})}function o(x,k){let w=!1;const M=Math.floor(59/10);if(n.hasLeftFocus.value&&(n.hasLeftFocus.value=!1,k=null),k===null)return x===0?(n.lastKeyZero.value=!0,{value:0,moveToNext:w}):((n.lastKeyZero.value||x>M)&&(w=!0),n.lastKeyZero.value=!1,{value:x,moveToNext:w});const D=k.toString().length,A=Number.parseInt(k.toString()+x.toString());return D===2||A>59?(x>M&&(w=!0),{value:x,moveToNext:w}):(w=!0,{value:A,moveToNext:w})}function a(x,k){let w=!1;const M=Math.floor(24/10);if(n.hasLeftFocus.value&&(n.hasLeftFocus.value=!1,k=null),k===null)return x===0?(n.lastKeyZero.value=!0,{value:0,moveToNext:w}):((n.lastKeyZero.value||x>M)&&(w=!0),n.lastKeyZero.value=!1,{value:x,moveToNext:w});const D=k.toString().length,A=Number.parseInt(k.toString()+x.toString());return D===2||A>24?(x>M&&(w=!0),{value:x,moveToNext:w}):(w=!0,{value:A,moveToNext:w})}function l(x,k){let C=!1;if(n.hasLeftFocus.value&&(n.hasLeftFocus.value=!1,k=null),k===null)return{value:x===0?1:x,moveToNext:C};const w=k.toString()+x.toString();return w.length>4?{value:x===0?1:x,moveToNext:C}:(w.length===4&&(C=!0),{value:Number.parseInt(w),moveToNext:C})}const u=Te(()=>Nz[n.part]?.attrs({disabled:n.disabled.value,placeholder:n.placeholder.value,hourCycle:n.hourCycle,segmentValues:n.segmentValues.value,formatter:n.formatter})??{});function c(x){if(!La(x.key)||Ha(x.key))return;const k=n.segmentValues.value.day;if(x.key===e.ARROW_DOWN||x.key===e.ARROW_UP){n.segmentValues.value.day=i({e:x,part:"day",dateRef:n.placeholder.value,prevValue:k});return}if(nu(x.key)){const C=Number.parseInt(x.key),w=n.segmentValues.value.month,M=w?ga(n.placeholder.value.set({month:w})):31,{value:D,moveToNext:A}=s(M,C,k);n.segmentValues.value.day=D,A&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.day=r(k))}function h(x){if(!La(x.key)||Ha(x.key))return;const k=n.segmentValues.value.month;if(x.key===e.ARROW_DOWN||x.key===e.ARROW_UP){n.segmentValues.value.month=i({e:x,part:"month",dateRef:n.placeholder.value,prevValue:k});return}if(nu(x.key)){const C=Number.parseInt(x.key),{value:w,moveToNext:M}=s(12,C,k);n.segmentValues.value.month=w,M&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.month=r(k))}function f(x){if(!La(x.key)||Ha(x.key))return;const k=n.segmentValues.value.year;if(x.key===e.ARROW_DOWN||x.key===e.ARROW_UP){n.segmentValues.value.year=i({e:x,part:"year",dateRef:n.placeholder.value,prevValue:k});return}if(nu(x.key)){const C=Number.parseInt(x.key),{value:w,moveToNext:M}=l(C,k);n.segmentValues.value.year=w,M&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.year=r(k))}function d(x){const k=n.placeholder.value;if(!La(x.key)||Ha(x.key)||!("hour"in k)||!("hour"in n.segmentValues.value))return;const C=n.segmentValues.value.hour,w=n.hourCycle;if(x.key===e.ARROW_UP||x.key===e.ARROW_DOWN){n.segmentValues.value.hour=i({e:x,part:"hour",dateRef:n.placeholder.value,prevValue:C,hourCycle:w}),"dayPeriod"in n.segmentValues.value&&(n.segmentValues.value.hour<12?n.segmentValues.value.dayPeriod="AM":n.segmentValues.value.hour&&(n.segmentValues.value.dayPeriod="PM"));return}if(nu(x.key)){const M=Number.parseInt(x.key),{value:D,moveToNext:A}=a(M,C);"dayPeriod"in n.segmentValues.value&&D&&D>12?n.segmentValues.value.dayPeriod="PM":"dayPeriod"in n.segmentValues.value&&D&&(n.segmentValues.value.dayPeriod="AM"),n.segmentValues.value.hour=D,A&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.hour=r(C))}function p(x){const k=n.placeholder.value;if(!La(x.key)||Ha(x.key)||!("minute"in k)||!("minute"in n.segmentValues.value))return;const C=n.segmentValues.value.minute;if((x.key===e.ARROW_UP||x.key===e.ARROW_DOWN)&&(n.segmentValues.value.minute=t({e:x,part:"minute",dateRef:n.placeholder.value,prevValue:C})),nu(x.key)){const w=Number.parseInt(x.key),{value:M,moveToNext:D}=o(w,C);n.segmentValues.value.minute=M,D&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.minute=r(C))}function m(x){const k=n.placeholder.value;if(!La(x.key)||Ha(x.key)||!("second"in k)||!("second"in n.segmentValues.value))return;const C=n.segmentValues.value.second;if((x.key===e.ARROW_UP||x.key===e.ARROW_DOWN)&&(n.segmentValues.value.second=t({e:x,part:"second",dateRef:n.placeholder.value,prevValue:C})),nu(x.key)){const w=Number.parseInt(x.key),{value:M,moveToNext:D}=o(w,C);n.segmentValues.value.second=M,D&&n.focusNext()}x.key===e.BACKSPACE&&(n.hasLeftFocus.value=!1,n.segmentValues.value.second=r(C))}function g(x){if(!((!La(x.key)||Ha(x.key))&&x.key!=="a"&&x.key!=="p"||!("hour"in n.placeholder.value)||!("dayPeriod"in n.segmentValues.value))){if(x.key===e.ARROW_UP||x.key===e.ARROW_DOWN){if(n.segmentValues.value.dayPeriod==="AM"){n.segmentValues.value.dayPeriod="PM",n.segmentValues.value.hour=n.segmentValues.value.hour+12;return}n.segmentValues.value.dayPeriod="AM",n.segmentValues.value.hour=n.segmentValues.value.hour-12;return}if(["a","A"].includes(x.key)&&n.segmentValues.value.dayPeriod!=="AM"){n.segmentValues.value.dayPeriod="AM",n.segmentValues.value.hour=n.segmentValues.value.hour-12;return}["p","P"].includes(x.key)&&n.segmentValues.value.dayPeriod!=="PM"&&(n.segmentValues.value.dayPeriod="PM",n.segmentValues.value.hour=n.segmentValues.value.hour+12)}}function y(x){n.disabled.value&&x.preventDefault()}function v(x){const k=n.disabled.value,C=n.readonly.value;if(x.key!==e.TAB&&x.preventDefault(),k||C)return;if({day:c,month:h,year:f,hour:d,minute:p,second:m,dayPeriod:g,timeZoneName:()=>{}}[n.part](x),![e.ARROW_LEFT,e.ARROW_RIGHT].includes(x.key)&&x.key!==e.TAB&&x.key!==e.SHIFT&&La(x.key)&&Object.values(n.segmentValues.value).every(M=>M!==null)){const M={...n.segmentValues.value};let D=n.placeholder.value.copy();Object.keys(M).forEach(A=>{const E=M[A];D=D.set({[A]:E})}),n.modelValue.value=D.copy()}}return{handleSegmentClick:y,handleSegmentKeydown:v,attributes:u}}function Rz(n){function e(r){return Array.isArray(n.date.value)?n.date.value.some(i=>Lu(i,r)):n.date.value?Lu(n.date.value,r):!1}const t=Te(()=>{if(Array.isArray(n.date.value)){if(!n.date.value.length)return!1;for(const r of n.date.value)if(n.isDateDisabled?.(r)||n.isDateUnavailable?.(r))return!0}else{if(!n.date.value)return!1;if(n.isDateDisabled?.(n.date.value)||n.isDateUnavailable?.(n.date.value))return!0}return!1});return{isDateSelected:e,isInvalid:t}}function Lz(n,e){const t=e(n),r=t.compare(n),i={};return r>=7&&(i.day=1),r>=ga(n)&&(i.month=1),t.set({...i})}function _z(n,e){const t=e(n),r=n.compare(t),i={};return r>=7&&(i.day=35),r>=ga(n)&&(i.month=13),t.set({...i})}function Bz(n,e){return e(n)}function Fz(n,e){return e(n)}function $z(n){const e=GA(n.locale.value),t=Te(()=>{const m={calendar:n.placeholder.value.calendar.identifier};return n.placeholder.value.calendar.identifier==="gregory"&&n.placeholder.value.era==="BC"&&(m.era="short"),m}),r=le(Wl({dateObj:n.placeholder.value,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value})),i=Te(()=>r.value.map(m=>m.value));function s(m){return!i.value.some(g=>P8(m,g))}const o=m=>{if(!n.maxValue.value||!r.value.length)return!1;if(n.disabled.value)return!0;const g=r.value[r.value.length-1].value;if(!m&&!n.nextPage.value){const v=g.add({months:1}).set({day:1});return b2(v,n.maxValue.value)}const y=Lz(g,m||n.nextPage.value);return b2(y,n.maxValue.value)},a=m=>{if(!n.minValue.value||!r.value.length)return!1;if(n.disabled.value)return!0;const g=r.value[0].value;if(!m&&!n.prevPage.value){const v=g.subtract({months:1}).set({day:35});return Md(v,n.minValue.value)}const y=_z(g,m||n.prevPage.value);return Md(y,n.minValue.value)};function l(m){return!!(n.isDateDisabled?.(m)||n.disabled.value||n.maxValue.value&&b2(m,n.maxValue.value)||n.minValue.value&&Md(m,n.minValue.value))}const u=m=>!!n.isDateUnavailable?.(m),c=Te(()=>r.value.length?r.value[0].rows[0].map(m=>e.dayOfWeek(ns(m),n.weekdayFormat.value)):[]),h=m=>{const g=r.value[0].value;if(!m&&!n.nextPage.value){const k=g.add({months:n.pagedNavigation.value?n.numberOfMonths.value:1}),C=Wl({dateObj:k,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});r.value=C,n.placeholder.value=C[0].value.set({day:1});return}const y=Bz(g,m||n.nextPage.value),v=Wl({dateObj:y,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});r.value=v;const x={};if(!m){const k=v[0].value.compare(g);k>=ga(g)&&(x.day=1),k>=365&&(x.month=1)}n.placeholder.value=v[0].value.set({...x})},f=m=>{const g=r.value[0].value;if(!m&&!n.prevPage.value){const k=g.subtract({months:n.pagedNavigation.value?n.numberOfMonths.value:1}),C=Wl({dateObj:k,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});r.value=C,n.placeholder.value=C[0].value.set({day:1});return}const y=Fz(g,m||n.prevPage.value),v=Wl({dateObj:y,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value});r.value=v;const x={};if(!m){const k=g.compare(v[0].value);k>=ga(g)&&(x.day=1),k>=365&&(x.month=1)}n.placeholder.value=v[0].value.set({...x})};oa(n.placeholder,m=>{i.value.some(g=>P8(g,m))||(r.value=Wl({dateObj:m,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value}))}),oa([n.locale,n.weekStartsOn,n.fixedWeeks,n.numberOfMonths],()=>{r.value=Wl({dateObj:n.placeholder.value,weekStartsOn:n.weekStartsOn.value,locale:n.locale.value,fixedWeeks:n.fixedWeeks.value,numberOfMonths:n.numberOfMonths.value})});const d=Te(()=>{if(!r.value.length)return"";if(n.locale.value!==e.getLocale()&&e.setLocale(n.locale.value),r.value.length===1){const w=r.value[0].value;return`${e.fullMonthAndYear(ns(w),t.value)}`}const m=ns(r.value[0].value),g=ns(r.value[r.value.length-1].value),y=e.fullMonth(m,t.value),v=e.fullMonth(g,t.value),x=e.fullYear(m,t.value),k=e.fullYear(g,t.value);return x===k?`${y} - ${v} ${k}`:`${y} ${x} - ${v} ${k}`}),p=Te(()=>`${n.calendarLabel.value??"Event Date"}, ${d.value}`);return{isDateDisabled:l,isDateUnavailable:u,isNextButtonDisabled:o,isPrevButtonDisabled:a,grid:r,weekdays:c,visibleView:i,isOutsideVisibleView:s,formatter:e,nextPage:h,prevPage:f,headingValue:d,fullCalendarLabel:p}}const zz={style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"}},Vz={role:"heading","aria-level":"2"},[_h,Hz]=a7("CalendarRoot");var jz=He({__name:"CalendarRoot",props:{defaultValue:{type:null,required:!1,default:void 0},defaultPlaceholder:{type:null,required:!1},placeholder:{type:null,required:!1,default:void 0},pagedNavigation:{type:Boolean,required:!1,default:!1},preventDeselect:{type:Boolean,required:!1,default:!1},weekStartsOn:{type:Number,required:!1,default:0},weekdayFormat:{type:String,required:!1,default:"narrow"},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1,default:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1,default:1},disabled:{type:Boolean,required:!1,default:!1},readonly:{type:Boolean,required:!1,default:!1},initialFocus:{type:Boolean,required:!1,default:!1},isDateDisabled:{type:Function,required:!1,default:void 0},isDateUnavailable:{type:Function,required:!1,default:void 0},dir:{type:String,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1,default:!1},disableDaysOutsideCurrentView:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["update:modelValue","update:placeholder"],setup(n,{emit:e}){const t=n,r=e,{disabled:i,readonly:s,initialFocus:o,pagedNavigation:a,weekStartsOn:l,weekdayFormat:u,fixedWeeks:c,multiple:h,minValue:f,maxValue:d,numberOfMonths:p,preventDeselect:m,isDateDisabled:g,isDateUnavailable:y,calendarLabel:v,defaultValue:x,nextPage:k,prevPage:C,dir:w,locale:M,disableDaysOutsideCurrentView:D}=s7(t),{primitiveElement:A,currentElement:E}=o7(),N=KA(M),I=mA(w),L=s0(t,"modelValue",r,{defaultValue:x.value,passive:t.modelValue===void 0}),F=nz({defaultPlaceholder:t.placeholder,defaultValue:L.value,locale:t.locale}),W=s0(t,"placeholder",r,{defaultValue:t.defaultPlaceholder??F.copy(),passive:t.placeholder===void 0});function G(at){W.value=at.copy()}const{fullCalendarLabel:ee,headingValue:de,isDateDisabled:ge,isDateUnavailable:R,isNextButtonDisabled:fe,isPrevButtonDisabled:xe,weekdays:P,isOutsideVisibleView:$e,nextPage:Z,prevPage:we,formatter:Se,grid:Ie}=$z({locale:N,placeholder:W,weekStartsOn:l,fixedWeeks:c,numberOfMonths:p,minValue:f,maxValue:d,disabled:i,weekdayFormat:u,pagedNavigation:a,isDateDisabled:g.value,isDateUnavailable:y.value,calendarLabel:v,nextPage:k,prevPage:C}),{isInvalid:Je,isDateSelected:Ct}=Rz({date:L,isDateDisabled:ge,isDateUnavailable:R});oa(L,at=>{if(Array.isArray(at)&&at.length){const It=at[at.length-1];It&&!Zm(W.value,It)&&G(It)}else!Array.isArray(at)&&at&&!Zm(W.value,at)&&G(at)});function tn(at){if(h.value){if(!L.value)L.value=[at.copy()];else if(Array.isArray(L.value)){if(L.value.findIndex(vt=>Lu(vt,at))===-1)L.value=[...L.value,at];else if(!m.value){const vt=L.value.filter(ln=>!Lu(ln,at));if(!vt.length){W.value=at.copy(),L.value=void 0;return}L.value=vt.map(ln=>ln.copy())}}}else{if(!L.value){L.value=at.copy();return}!m.value&&Zm(L.value,at)?(W.value=at.copy(),L.value=void 0):L.value=at.copy()}}return ko(()=>{o.value&&az(E.value)}),Hz({isDateUnavailable:R,dir:I,isDateDisabled:ge,locale:N,formatter:Se,modelValue:L,placeholder:W,disabled:i,initialFocus:o,pagedNavigation:a,grid:Ie,weekDays:P,weekStartsOn:l,weekdayFormat:u,fixedWeeks:c,multiple:h,numberOfMonths:p,readonly:s,preventDeselect:m,fullCalendarLabel:ee,headingValue:de,isInvalid:Je,isDateSelected:Ct,isNextButtonDisabled:fe,isPrevButtonDisabled:xe,isOutsideVisibleView:$e,nextPage:Z,prevPage:we,parentElement:E,onPlaceholderChange:G,onDateChange:tn,disableDaysOutsideCurrentView:D}),(at,It)=>(ve(),bt($(Sr),{ref_key:"primitiveElement",ref:A,as:at.as,"as-child":at.asChild,role:"application","aria-label":$(ee),"data-readonly":$(s)?"":void 0,"data-disabled":$(i)?"":void 0,"data-invalid":$(Je)?"":void 0,dir:$(I)},{default:Qe(()=>[mn(at.$slots,"default",{date:$(W),grid:$(Ie),weekDays:$(P),weekStartsOn:$(l),locale:$(N),fixedWeeks:$(c),modelValue:$(L)}),lt("div",zz,[lt("div",Vz,pi($(ee)),1)])]),_:3},8,["as","as-child","aria-label","data-readonly","data-disabled","data-invalid","dir"]))}}),Wz=jz,qz=He({__name:"CalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"td"}},setup(n){const e=_h();return(t,r)=>(ve(),bt($(Sr),{as:t.as,"as-child":t.asChild,role:"gridcell","aria-selected":$(e).isDateSelected(t.date)?!0:void 0,"aria-disabled":$(e).isDateDisabled(t.date)||$(e).isDateUnavailable?.(t.date)||$(e).disableDaysOutsideCurrentView.value,"data-disabled":$(e).isDateDisabled(t.date)||$(e).disableDaysOutsideCurrentView.value?"":void 0},{default:Qe(()=>[mn(t.$slots,"default")]),_:3},8,["as","as-child","aria-selected","aria-disabled","data-disabled"]))}}),Uz=qz;const Gz="[data-reka-calendar-cell-trigger]:not([data-outside-view]):not([data-outside-visible-view])";function k2(n){return Array.from(n.querySelectorAll(Gz))??[]}var Kz=He({__name:"CalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n,t=tp(),r=_h(),{primitiveElement:i,currentElement:s}=o7(),o=Te(()=>e.day.day.toLocaleString(r.locale.value)),a=Te(()=>r.formatter.custom(ns(e.day),{weekday:"long",month:"long",day:"numeric",year:"numeric"})),l=Te(()=>r.isDateUnavailable?.(e.day)??!1),u=Te(()=>i$(e.day,Lh())),c=Te(()=>!SA(e.day,e.month)),h=Te(()=>r.isOutsideVisibleView(e.day)),f=Te(()=>r.isDateDisabled(e.day)||r.disableDaysOutsideCurrentView.value&&c.value),d=Te(()=>!r.disabled.value&&Lu(e.day,r.placeholder.value)),p=Te(()=>r.isDateSelected(e.day));function m(v){r.readonly.value||r.isDateDisabled(v)||r.isDateUnavailable?.(v)||r.onDateChange(v)}function g(){f.value||m(e.day)}function y(v){if(f.value)return;v.preventDefault(),v.stopPropagation();const x=r.parentElement.value,k=7,C=r.dir.value==="rtl"?-1:1;switch(v.code){case t.ARROW_RIGHT:w(s.value,C);break;case t.ARROW_LEFT:w(s.value,-C);break;case t.ARROW_UP:w(s.value,-k);break;case t.ARROW_DOWN:w(s.value,k);break;case t.ENTER:case t.SPACE_CODE:m(e.day)}function w(M,D){const A=k2(x);if(!A.length)return;const N=A.indexOf(M)+D;if(N>=0&&N<A.length){A[N].hasAttribute("data-disabled")&&w(A[N],D),A[N].focus();return}if(N<0){if(r.isPrevButtonDisabled())return;r.prevPage(),Tb(()=>{const I=k2(x);if(!I.length)return;if(!r.pagedNavigation.value&&r.numberOfMonths.value>1){const W=ga(r.placeholder.value)-Math.abs(N);I[W].hasAttribute("data-disabled")&&w(I[W],D),I[W].focus();return}const L=I.length-Math.abs(N);I[L].hasAttribute("data-disabled")&&w(I[L],D),I[L].focus()});return}if(N>=A.length){if(r.isNextButtonDisabled())return;r.nextPage(),Tb(()=>{const I=k2(x);if(!I.length)return;if(!r.pagedNavigation.value&&r.numberOfMonths.value>1){const F=ga(r.placeholder.value.add({months:r.numberOfMonths.value-1})),W=N-A.length+(I.length-F);I[W].hasAttribute("data-disabled")&&w(I[W],D),I[W].focus();return}const L=N-A.length;I[L].hasAttribute("data-disabled")&&w(I[L],D),I[L].focus()})}}}return(v,x)=>(ve(),bt($(Sr),gs({ref_key:"primitiveElement",ref:i},e,{role:"button","aria-label":a.value,"data-reka-calendar-cell-trigger":"","aria-disabled":f.value||l.value?!0:void 0,"data-selected":p.value?!0:void 0,"data-value":v.day.toString(),"data-disabled":f.value?"":void 0,"data-unavailable":l.value?"":void 0,"data-today":u.value?"":void 0,"data-outside-view":c.value?"":void 0,"data-outside-visible-view":h.value?"":void 0,"data-focused":d.value?"":void 0,tabindex:d.value?0:c.value||f.value?void 0:-1,onClick:g,onKeydown:[gg(y,["up","down","left","right","space","enter"]),x[0]||(x[0]=gg(yg(()=>{},["prevent"]),["enter"]))]}),{default:Qe(()=>[mn(v.$slots,"default",{dayValue:o.value,disabled:f.value,today:u.value,selected:p.value,outsideView:c.value,outsideVisibleView:h.value,unavailable:l.value},()=>[wl(pi(o.value),1)])]),_:3},16,["aria-label","aria-disabled","data-selected","data-value","data-disabled","data-unavailable","data-today","data-outside-view","data-outside-visible-view","data-focused","tabindex"]))}}),Xz=Kz,Yz=He({__name:"CalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"table"}},setup(n){const e=n,t=_h(),r=Te(()=>t.disabled.value?!0:void 0),i=Te(()=>t.readonly.value?!0:void 0);return(s,o)=>(ve(),bt($(Sr),gs(e,{tabindex:"-1",role:"grid","aria-readonly":i.value,"aria-disabled":r.value,"data-readonly":i.value&&"","data-disabled":r.value&&""}),{default:Qe(()=>[mn(s.$slots,"default")]),_:3},16,["aria-readonly","aria-disabled","data-readonly","data-disabled"]))}}),Jz=Yz,Zz=He({__name:"CalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"tbody"}},setup(n){const e=n;return(t,r)=>(ve(),bt($(Sr),Y0(J0(e)),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),Qz=Zz,eV=He({__name:"CalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"thead"}},setup(n){const e=n;return(t,r)=>(ve(),bt($(Sr),gs(e,{"aria-hidden":"true"}),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),tV=eV,nV=He({__name:"CalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"tr"}},setup(n){const e=n;return(t,r)=>(ve(),bt($(Sr),Y0(J0(e)),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),rS=nV,rV=He({__name:"CalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"th"}},setup(n){const e=n;return(t,r)=>(ve(),bt($(Sr),Y0(J0(e)),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),iV=rV,sV=He({__name:"CalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n;return(t,r)=>(ve(),bt($(Sr),Y0(J0(e)),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),oV=sV,aV=He({__name:"CalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n,t=_h();return(r,i)=>(ve(),bt($(Sr),gs(e,{"data-disabled":$(t).disabled.value?"":void 0}),{default:Qe(()=>[mn(r.$slots,"default",{headingValue:$(t).headingValue.value},()=>[wl(pi($(t).headingValue.value),1)])]),_:3},16,["data-disabled"]))}}),lV=aV,uV=He({__name:"CalendarNext",props:{nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=Te(()=>r.disabled.value||r.isNextButtonDisabled(e.nextPage)),r=_h();return(i,s)=>(ve(),bt($(Sr),{as:e.as,"as-child":e.asChild,"aria-label":"Next page",type:i.as==="button"?"button":void 0,"aria-disabled":t.value||void 0,"data-disabled":t.value||void 0,disabled:t.value,onClick:s[0]||(s[0]=o=>$(r).nextPage(e.nextPage))},{default:Qe(()=>[mn(i.$slots,"default",{disabled:t.value},()=>[s[1]||(s[1]=wl(" Next page "))])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),cV=uV,hV=He({__name:"CalendarPrev",props:{prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=Te(()=>r.disabled.value||r.isPrevButtonDisabled(e.prevPage)),r=_h();return(i,s)=>(ve(),bt($(Sr),{"aria-label":"Previous page",as:e.as,"as-child":e.asChild,type:i.as==="button"?"button":void 0,"aria-disabled":t.value||void 0,"data-disabled":t.value||void 0,disabled:t.value,onClick:s[0]||(s[0]=o=>$(r).prevPage(e.prevPage))},{default:Qe(()=>[mn(i.$slots,"default",{disabled:t.value},()=>[s[1]||(s[1]=wl(" Prev page "))])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),fV=hV,dV=He({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){return(e,t)=>(ve(),bt($(Sr),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:Qe(()=>[mn(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),pV=dV;const[np,mV]=a7("PopoverRoot");var gV=He({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},modal:{type:Boolean,required:!1,default:!1}},emits:["update:open"],setup(n,{emit:e}){const t=n,r=e,{modal:i}=s7(t),s=s0(t,"open",r,{defaultValue:t.defaultOpen,passive:t.open===void 0}),o=le(),a=le(!1);return mV({contentId:"",triggerId:"",modal:i,open:s,onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},triggerElement:o,hasCustomAnchor:a}),(l,u)=>(ve(),bt($(CF),null,{default:Qe(()=>[mn(l.$slots,"default",{open:$(s),close:()=>s.value=!1})]),_:3}))}}),yV=gV,vV=He({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=TF(EF(t,"trapFocus","disableOutsidePointerEvents")),{forwardRef:s}=Ey(),o=np();return AF(),(a,l)=>(ve(),bt($(IF),{"as-child":"",loop:"",trapped:a.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>r("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>r("closeAutoFocus",u))},{default:Qe(()=>[We($(MF),{"as-child":"","disable-outside-pointer-events":a.disableOutsidePointerEvents,onPointerDownOutside:l[0]||(l[0]=u=>r("pointerDownOutside",u)),onInteractOutside:l[1]||(l[1]=u=>r("interactOutside",u)),onEscapeKeyDown:l[2]||(l[2]=u=>r("escapeKeyDown",u)),onFocusOutside:l[3]||(l[3]=u=>r("focusOutside",u)),onDismiss:l[4]||(l[4]=u=>$(o).onOpenChange(!1))},{default:Qe(()=>[We($(OF),gs($(i),{id:$(o).contentId,ref:$(s),"data-state":$(o).open.value?"open":"closed","aria-labelledby":$(o).triggerId,style:{"--reka-popover-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-popover-content-available-width":"var(--reka-popper-available-width)","--reka-popover-content-available-height":"var(--reka-popper-available-height)","--reka-popover-trigger-width":"var(--reka-popper-anchor-width)","--reka-popover-trigger-height":"var(--reka-popper-anchor-height)"},role:"dialog"}),{default:Qe(()=>[mn(a.$slots,"default")]),_:3},16,["id","data-state","aria-labelledby"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),JA=vV,bV=He({__name:"PopoverContentModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=np(),s=le(!1);DF(!0);const o=l7(t,r),{forwardRef:a,currentElement:l}=Ey();return NF(l),(u,c)=>(ve(),bt(JA,gs($(o),{ref:$(a),"trap-focus":$(i).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:c[0]||(c[0]=yg(h=>{r("closeAutoFocus",h),s.value||$(i).triggerElement.value?.focus()},["prevent"])),onPointerDownOutside:c[1]||(c[1]=h=>{r("pointerDownOutside",h);const f=h.detail.originalEvent,d=f.button===0&&f.ctrlKey===!0,p=f.button===2||d;s.value=p}),onFocusOutside:c[2]||(c[2]=yg(()=>{},["prevent"]))}),{default:Qe(()=>[mn(u.$slots,"default")]),_:3},16,["trap-focus"]))}}),xV=bV,wV=He({__name:"PopoverContentNonModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=np(),s=le(!1),o=le(!1),a=l7(t,r);return(l,u)=>(ve(),bt(JA,gs($(a),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{r("closeAutoFocus",c),c.defaultPrevented||(s.value||$(i).triggerElement.value?.focus(),c.preventDefault()),s.value=!1,o.value=!1}),onInteractOutside:u[1]||(u[1]=async c=>{r("interactOutside",c),c.defaultPrevented||(s.value=!0,c.detail.originalEvent.type==="pointerdown"&&(o.value=!0));const h=c.target;$(i).triggerElement.value?.contains(h)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.value&&c.preventDefault()})}),{default:Qe(()=>[mn(l.$slots,"default")]),_:3},16))}}),SV=wV,kV=He({__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=np(),s=l7(t,r),{forwardRef:o}=Ey();return i.contentId||=gA(void 0,"reka-popover-content"),(a,l)=>(ve(),bt($(PF),{present:a.forceMount||$(i).open.value},{default:Qe(()=>[$(i).modal.value?(ve(),bt(xV,gs({key:0},$(s),{ref:$(o)}),{default:Qe(()=>[mn(a.$slots,"default")]),_:3},16)):(ve(),bt(SV,gs({key:1},$(s),{ref:$(o)}),{default:Qe(()=>[mn(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),CV=kV,TV=He({__name:"PopoverPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,r)=>(ve(),bt($(RF),Y0(J0(e)),{default:Qe(()=>[mn(t.$slots,"default")]),_:3},16))}}),EV=TV,AV=He({__name:"PopoverTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=np(),{forwardRef:r,currentElement:i}=Ey();return t.triggerId||=gA(void 0,"reka-popover-trigger"),ko(()=>{t.triggerElement.value=i.value}),(s,o)=>(ve(),bt(LF($(t).hasCustomAnchor.value?$(Sr):$(_F)),{"as-child":""},{default:Qe(()=>[We($(Sr),{id:$(t).triggerId,ref:$(r),type:s.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":$(t).open.value,"aria-controls":$(t).contentId,"data-state":$(t).open.value?"open":"closed",as:s.as,"as-child":e.asChild,onClick:$(t).onOpenToggle},{default:Qe(()=>[mn(s.$slots,"default")]),_:3},8,["id","type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),MV=AV;const[OV,IV]=a7("TimeFieldRoot");function qp(n,e=h7(Lh())){return n&&"day"in n?n:_u(e,n)}var DV=He({inheritAttrs:!1,__name:"TimeFieldRoot",props:{defaultValue:{type:Object,required:!1,default:void 0},defaultPlaceholder:{type:Object,required:!1},placeholder:{type:Object,required:!1,default:void 0},modelValue:{type:[Object,null],required:!1},hourCycle:{type:null,required:!1},step:{type:Object,required:!1},granularity:{type:String,required:!1},hideTimeZone:{type:Boolean,required:!1},maxValue:{type:Object,required:!1},minValue:{type:Object,required:!1},locale:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},readonly:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1},dir:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:placeholder"],setup(n,{expose:e,emit:t}){const r=n,i=t,{disabled:s,readonly:o,granularity:a,defaultValue:l,minValue:u,maxValue:c,dir:h,locale:f}=s7(r),d=KA(f),p=mA(h),m=GA(d.value,{hourCycle:kg(r.hourCycle)}),{primitiveElement:g,currentElement:y}=o7(),v=le(new Set),x=Te(()=>oz(r)),k=Te(()=>u.value?qp(u.value):void 0),C=Te(()=>c.value?qp(c.value):void 0);ko(()=>{nS(y.value).forEach(Z=>v.value.add(Z))});const w=s0(r,"modelValue",i,{defaultValue:l.value,passive:r.modelValue===void 0}),M=Te({get(){return Hp(w.value)?w.value:qp(w.value)},set(Z){return Z?w.value=w.value&&"day"in w.value?Z:new oh(Z.hour,Z.minute,Z.second,w.value?.millisecond):w.value=Z,Z}}),D=rz({defaultPlaceholder:r.placeholder,defaultValue:w.value}),A=s0(r,"placeholder",i,{defaultValue:r.defaultPlaceholder??D.copy(),passive:r.placeholder===void 0}),E=Te({get(){return qp(A.value)},set(Z){return Z&&(A.value="day"in A.value?Z.copy():new oh(Z.hour,Z.minute,Z.second,A.value?.millisecond)),Z}}),N=Te(()=>a.value?a.value:"minute"),I=Te(()=>w.value?!!(k.value&&Md(M.value,k.value)||C.value&&Md(C.value,M.value)):!1),L=vz(N.value),F=le(w.value?{...tS({value:M.value,formatter:m})}:{...L}),W=Te(()=>wz({granularity:N.value,dateRef:E.value,formatter:m,hideTimeZone:r.hideTimeZone,hourCycle:r.hourCycle,segmentValues:F.value,locale:d,isTimeValue:!0})),G=Te(()=>W.value.arr),ee=Te(()=>G.value.filter(({part:Z})=>Z!=="literal"));oa(d,Z=>{m.getLocale()!==Z&&(m.setLocale(Z),Tb(()=>{v.value.clear(),nS(y.value).forEach(we=>v.value.add(we))}))}),oa(M,Z=>{!Hp(Z)&&(!Zm(E.value,Z)||E.value.compare(Z)!==0)&&(A.value=Z.copy())}),oa([M,d],([Z])=>{Hp(Z)?Object.values(F.value).every(we=>we!==null)&&Hp(Z)&&(F.value={...L}):F.value={...tS({value:Z,formatter:m})}});const de=le(null),ge=Te(()=>Array.from(v.value).findIndex(Z=>Z.getAttribute("data-reka-time-field-segment")===de.value?.getAttribute("data-reka-time-field-segment"))),R=Te(()=>{const Z=p.value==="rtl"?-1:1;return(Z<0?ge.value<0:ge.value>v.value.size-1)?null:Array.from(v.value)[ge.value+Z]}),fe=Te(()=>{const Z=p.value==="rtl"?-1:1;return(Z>0?ge.value<0:ge.value>v.value.size-1)?null:Array.from(v.value)[ge.value-Z]}),xe=tp();function P(Z){Ha(Z.key)&&(Z.key===xe.ARROW_LEFT&&fe.value?.focus(),Z.key===xe.ARROW_RIGHT&&R.value?.focus())}function $e(Z){de.value=Z}return IV({locale:d,modelValue:M,placeholder:E,disabled:s,formatter:m,hourCycle:r.hourCycle,step:x,readonly:o,segmentValues:F,isInvalid:I,segmentContents:ee,elements:v,setFocusedElement:$e,focusNext(){R.value?.focus()}}),e({setFocusedElement:$e}),(Z,we)=>(ve(),bt($(Sr),gs(Z.$attrs,{ref_key:"primitiveElement",ref:g,role:"group","aria-disabled":$(s)?!0:void 0,"data-disabled":$(s)?"":void 0,"data-readonly":$(o)?"":void 0,"data-invalid":I.value?"":void 0,dir:$(p),onKeydown:gg(P,["left","right"])}),{default:Qe(()=>[mn(Z.$slots,"default",{modelValue:$(w),segments:G.value,isInvalid:I.value}),We($(pV),{id:Z.id,as:"input",feature:"focusable",tabindex:"-1",value:$(w)?$(w).toString():"",name:Z.name,disabled:$(s),required:Z.required,onFocus:we[0]||(we[0]=Se=>Array.from(v.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["aria-disabled","data-disabled","data-readonly","data-invalid","dir"]))}}),NV=DV,PV=He({__name:"TimeFieldInput",props:{part:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=OV(),r=le(!0),i=le(!1),{handleSegmentClick:s,handleSegmentKeydown:o,attributes:a}=Pz({hasLeftFocus:r,lastKeyZero:i,placeholder:t.placeholder,hourCycle:t.hourCycle,step:t.step,segmentValues:t.segmentValues,formatter:t.formatter,part:e.part,disabled:t.disabled,readonly:t.readonly,focusNext:t.focusNext,modelValue:t.modelValue}),l=Te(()=>t.disabled.value),u=Te(()=>t.readonly.value),c=Te(()=>t.isInvalid.value);return(h,f)=>(ve(),bt($(Sr),gs({as:h.as,"as-child":h.asChild},$(a),{contenteditable:l.value||u.value?!1:h.part!=="literal","data-reka-time-field-segment":h.part,"aria-disabled":l.value?!0:void 0,"aria-readonly":u.value?!0:void 0,"data-disabled":l.value?"":void 0,"data-invalid":c.value?"":void 0,"aria-invalid":c.value?!0:void 0},BF(h.part!=="literal"?{mousedown:$(s),keydown:$(o),focusout:()=>{r.value=!0},focusin:d=>{$(t).setFocusedElement(d.target)}}:{})),{default:Qe(()=>[mn(h.$slots,"default")]),_:3},16,["as","as-child","contenteditable","data-reka-time-field-segment","aria-disabled","aria-readonly","data-disabled","data-invalid","aria-invalid"]))}}),iS=PV;function Pb(n){const[e,t]=n.split(":").map(Number);return e*60+t}function sS(n){const e=Math.floor(n/60),t=n%60;return`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}Rs.TRANSPORT+"",Rs.WALK+"",Rs.FOOD+"",Rs.ATTRACTION+"",Rs.RELAX+"";Rs.TRANSPORT+"",Rs.WALK+"",Rs.FOOD+"",Rs.ATTRACTION+"",Rs.RELAX+"";const To=FF("tripInfo",()=>{const n=le([]),e=le(null),t=le(null),r=le("idle"),i=le(null),s=le(!1),o=le(!1),a=le("edit"),l=Te(()=>r.value==="pending"),u=Te(()=>a.value==="view"),c=Te(()=>n.value),h=Te(()=>t.value?n.value.find(E=>E.id===t.value)??null:null),f=Te(()=>h.value?.activities.slice().sort((E,N)=>Pb(E.startTime)-Pb(N.startTime))??[]);function d(E){const N=n.value.findIndex(I=>I.id===E);return N===-1?(console.warn(`День с ID "${E}" не найден.`),null):{day:n.value[N],index:N}}function p(){s.value=!0}function m(){s.value=!1}function g(){o.value=!o.value}function y(E){a.value=E}async function v(E){e.value=E,r.value="pending",i.value=null,await xF({immediate:!0,fn:N=>N.days.getByTripId(E),onSuccess:N=>{const I=N.sort((L,F)=>new Date(L.date).getTime()-new Date(F.date).getTime());n.value=I,t.value=I.length>0?I[0].id:null,r.value="success"},onError:N=>{n.value=[],t.value=null,i.value=N,r.value="error",console.error(`Ошибка при загрузке дней для путешествия ${E}:`,N)}})}function x(E){t.value=E}async function k(E,N){const I=d(E);if(!I)return;const{index:L}=I,F={...n.value[L]};n.value[L]={...F,...N},N.date&&n.value.sort((W,G)=>new Date(W.date).getTime()-new Date(G.date).getTime())}async function C(E,N){const I=n.value.find(W=>W.id===E);if(!I)return;const L=`temp-activity-${Date.now()}`,F={...N,id:L};I.activities.push(F)}async function w(E,N){const I=n.value.find(F=>F.id===E);if(!I)return;if(I.activities.findIndex(F=>F.id===N)===-1)return null}async function M(E,N){const I=n.value.find(F=>F.id===E);if(!I)return;const L=I.activities.findIndex(F=>F.id===N.id);L!==-1&&(I.activities[L]=N)}async function D(){if(!e.value)return;const E=n.value[n.value.length-1],N=E?new Date(E.date):new Date;E&&N.setDate(N.getDate()+1);const I={tripId:e.value,title:`День ${n.value.length+1}`,description:"",date:N.toISOString(),activities:[]},L=`temp-day-${Date.now()}`,F={...I,id:L};n.value.push(F),t.value=L}function A(E,N){const I=d(E);I&&(I.day.activities=N)}return{days:n,currentTripId:e,currentDayId:t,fetchStatus:r,fetchError:i,isDaysPanelOpen:s,isDaysPanelPinned:o,interactionMode:a,isLoading:l,getAllDays:c,getSelectedDay:h,getActivitiesForSelectedDay:f,isViewMode:u,openDaysPanel:p,closeDaysPanel:m,toggleDaysPanelPinned:g,addNewDay:D,fetchDaysForTrip:v,setCurrentDay:x,updateDayDetails:k,addActivity:C,removeActivity:w,updateActivity:M,reorderActivities:A,setInteractionMode:y}}),RV={class:"add-day-activity"},LV=He({__name:"add-day-activity",emits:["add"],setup(n,{emit:e}){const t=e;return(r,i)=>(ve(),gt("div",RV,[lt("button",{class:"add-button",onClick:i[0]||(i[0]=s=>t("add"))},[We($(_s),{icon:"mdi:plus"}),i[1]||(i[1]=lt("span",null,"Добавить активность",-1))])]))}}),_V=ni(LV,[["__scopeId","data-v-3c599583"]]),BV={class:"calendarWrapper"},FV={key:1,class:"calendarCellEmpty"},$V="ru-RU",zV=He({__name:"calendar",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Z0(n,"modelValue");return(t,r)=>e.value?(ve(),bt($(Wz),{key:0,modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),class:"calendar","fixed-weeks":"",locale:$V},{default:Qe(({weekDays:i,grid:s})=>[We($(oV),{class:"calendarHeader"},{default:Qe(()=>[We($(fV),{class:"calendarNavButton"},{default:Qe(()=>[We($(_s),{icon:"mdi:chevron-left",class:"icon"})]),_:1}),We($(lV),{class:"calendarHeading"}),We($(cV),{class:"calendarNavButton"},{default:Qe(()=>[We($(_s),{icon:"mdi:chevron-right",class:"icon"})]),_:1})]),_:1}),lt("div",BV,[(ve(!0),gt(er,null,ea(s,o=>(ve(),bt($(Jz),{key:o.value.toString(),class:"calendarGrid"},{default:Qe(()=>[We($(tV),null,{default:Qe(()=>[We($(rS),{class:"calendarGridRow"},{default:Qe(()=>[(ve(!0),gt(er,null,ea(i,a=>(ve(),bt($(iV),{key:a,class:"calendarHeadCell"},{default:Qe(()=>[wl(pi(a),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),We($(Qz),{class:"calendarGridWrapper"},{default:Qe(()=>[(ve(!0),gt(er,null,ea(o.rows,(a,l)=>(ve(),bt($(rS),{key:`weekDate-${l}`,class:"calendarGridRow"},{default:Qe(()=>[(ve(!0),gt(er,null,ea(a,u=>(ve(),bt($(Uz),{key:u.toString(),date:u,class:"calendarCell"},{default:Qe(()=>[u.month===o.value.month?(ve(),bt($(Xz),{key:0,day:u,month:o.value,class:"calendarCellTrigger"},null,8,["day","month"])):(ve(),gt("div",FV))]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},8,["modelValue"])):ar("",!0)}}),VV=ni(zV,[["__scopeId","data-v-5a7656ae"]]);function HV(){const n=le(!1),e=()=>{n.value=!0},t=()=>{n.value=!1};return{isOpen:n,openCalendar:e,closeCalendar:t,handleDateSelect:(i,s)=>{s?.(i),t()}}}const jV=He({__name:"calendar-popover",props:Ay({disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Z0(n,"modelValue"),{isOpen:t,handleDateSelect:r}=HV();function i(s){r(s,o=>e.value=o)}return(s,o)=>(ve(),bt($(yV),{open:$(t),"onUpdate:open":o[0]||(o[0]=a=>ku(t)?t.value=a:null)},{default:Qe(()=>[We($(MV),{"as-child":"",class:"date-picker-trigger",disabled:s.disabled},{default:Qe(()=>[mn(s.$slots,"default",{},void 0,!0)]),_:3},8,["disabled"]),We($(EV),null,{default:Qe(()=>[We($(CV),{side:"bottom",align:"start",class:"date-picker-content","avoid-collisions":!0,"collision-padding":4},{default:Qe(()=>[We($(VV),{"model-value":e.value,"onUpdate:modelValue":i},null,8,["model-value"])]),_:1})]),_:1})]),_:3},8,["open"]))}}),WV=ni(jV,[["__scopeId","data-v-a5f692b0"]]),un={sm:600,md:960,lg:1280,xl:1920,xxl:2560};function ZA(){const n=le(0),e=()=>{typeof window<"u"&&(n.value=window.innerWidth)};ko(()=>{e(),window.addEventListener("resize",e)}),Q0(()=>{window.removeEventListener("resize",e)});const t=Te(()=>{const v=n.value;return v<un.sm?"xs":v<un.md?"sm":v<un.lg?"md":v<un.xl?"lg":v<un.xxl?"xl":"xxl"}),r=Te(()=>n.value<un.sm),i=Te(()=>n.value>=un.sm&&n.value<un.md),s=Te(()=>n.value>=un.md&&n.value<un.lg),o=Te(()=>n.value>=un.lg&&n.value<un.xl),a=Te(()=>n.value>=un.xl&&n.value<un.xxl),l=Te(()=>n.value>=un.xxl),u=Te(()=>n.value<un.md),c=Te(()=>n.value>=un.sm),h=Te(()=>n.value>=un.md),f=Te(()=>n.value>=un.lg),d=Te(()=>n.value>=un.xl),p=Te(()=>n.value<un.md),m=Te(()=>n.value<un.lg),g=Te(()=>n.value<un.xl),y=Te(()=>n.value<un.xxl);return{width:n,name:t,xs:r,sm:i,md:s,lg:o,xl:a,xxl:l,mobile:u,smAndUp:c,mdAndUp:h,lgAndUp:f,xlAndUp:d,smAndDown:p,mdAndDown:m,lgAndDown:g,xlAndDown:y}}const qV={class:"panel-header"},UV={class:"header-buttons"},GV=["title"],KV={class:"panel-content"},XV={class:"days-list"},YV=["onClick"],JV={class:"day-item-main"},ZV={class:"day-number"},QV={class:"day-title"},eH={class:"day-item-meta"},tH={class:"day-date"},nH={class:"day-weekday-badge"},rH={key:0,class:"panel-footer"},iH=He({__name:"days-panel",props:{days:{},selectedDayId:{},isOpen:{type:Boolean}},emits:["selectDay","addNewDay","close"],setup(n,{emit:e}){const t=e,r=To(),{mdAndDown:i}=ZA(),{isDaysPanelPinned:s,isViewMode:o}=Co(r),{toggleDaysPanelPinned:a}=r;function l(c){t("selectDay",c),s.value||t("close")}function u(c){return new Date(c).toLocaleDateString("ru-RU",{weekday:"short"}).toUpperCase()}return(c,h)=>(ve(),gt(er,null,[c.isOpen&&!$(s)||c.isOpen&&$(i)?(ve(),gt("div",{key:0,class:"backdrop",onClick:h[0]||(h[0]=f=>c.$emit("close"))})):ar("",!0),lt("aside",{class:rh(["panel",{open:c.isOpen,pinned:!$(i)&&$(s)}])},[lt("header",qV,[h[4]||(h[4]=lt("h2",null,"Дни путешествия",-1)),lt("div",UV,[$(i)?ar("",!0):(ve(),gt("button",{key:0,class:"pin-btn",title:$(s)?"Открепить панель":"Закрепить панель",onClick:h[1]||(h[1]=(...f)=>$(a)&&$(a)(...f))},[We($(_s),{icon:$(s)?"mdi:pin-off":"mdi:pin"},null,8,["icon"])],8,GV)),lt("button",{class:"close-btn",title:"Закрыть",onClick:h[2]||(h[2]=f=>c.$emit("close"))},[We($(_s),{icon:"mdi:close"})])])]),lt("div",KV,[lt("ul",XV,[(ve(!0),gt(er,null,ea(c.days,(f,d)=>(ve(),gt("li",{key:f.id},[lt("button",{class:rh(["day-item",{active:c.selectedDayId===f.id}]),onClick:p=>l(f.id)},[lt("div",JV,[lt("span",ZV,pi(d+1),1),lt("span",QV,pi(f.title||`День ${d+1}`),1)]),lt("div",eH,[lt("span",tH,pi(new Date(f.date).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})),1),lt("span",nH,pi(u(f.date)),1)])],10,YV)]))),128))])]),$(o)?ar("",!0):(ve(),gt("footer",rH,[lt("button",{class:"add-day-btn",onClick:h[3]||(h[3]=f=>c.$emit("addNewDay"))},[We($(_s),{icon:"mdi:plus"}),h[5]||(h[5]=lt("span",null,"Добавить новый день",-1))])]))],2)],64))}}),sH=ni(iH,[["__scopeId","data-v-5b000aa6"]]),oH=["title"],aH=He({__name:"mode-switcher",setup(n){const e=To(),{isViewMode:t}=Co(e),r=Te(()=>t.value?{icon:"mdi:pencil-outline",title:"Перейти в режим редактирования"}:{icon:"mdi:eye-outline",title:"Перейти в режим просмотра"});function i(){e.setInteractionMode(t.value?"edit":"view")}return(s,o)=>(ve(),gt("button",{class:"mode-button",title:$(r).title,onClick:i},[We($(_s),{icon:$(r).icon},null,8,["icon"])],8,oH))}}),lH=ni(aH,[["__scopeId","data-v-8489e3ae"]]),uH={class:"controls"},cH={class:"left-controls"},hH={key:0},fH={key:1},dH=He({__name:"days-controls",setup(n){const e=To(),{getAllDays:t,getSelectedDay:r,isDaysPanelPinned:i,isDaysPanelOpen:s,isViewMode:o}=Co(e),{setCurrentDay:a,addNewDay:l,updateDayDetails:u}=e,c=Te({get:()=>r.value?w$(r.value.date.split("T")[0]):null,set:h=>{if(!h||!r.value)return;const f=r.value,d=f.date,p=h.toString();if(d.startsWith(p))return;const m=new Date(p).toISOString(),g=t.value.find(y=>y.date.startsWith(p)&&y.id!==f.id);g?(u(g.id,{date:d}),u(f.id,{date:m})):u(f.id,{date:m})}});return(h,f)=>(ve(),gt("div",uH,[lt("div",cH,[$(i)?ar("",!0):(ve(),gt("button",{key:0,class:"menu-btn",title:"Открыть меню дней",onClick:f[0]||(f[0]=d=>s.value=!$(s))},[We($(_s),{icon:"mdi:menu"})])),We($(WV),{modelValue:$(c),"onUpdate:modelValue":f[1]||(f[1]=d=>ku(c)?c.value=d:null),disabled:$(o)},{default:Qe(()=>[lt("div",{class:rh(["current-day-info",{disabled:$(o)}]),role:"button"},[$(r)?(ve(),gt("h3",hH,pi(new Date($(r).date).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})),1)):ar("",!0),$(r)?(ve(),gt("span",fH,pi(new Date($(r).date).toLocaleDateString("ru-RU",{weekday:"long"})),1)):ar("",!0)],2)]),_:1},8,["modelValue","disabled"])]),f[3]||(f[3]=lt("div",{class:"spacer"},null,-1)),We(lH),We(sH,{"is-open":$(s),days:$(t),"selected-day-id":$(r)?.id,onClose:f[2]||(f[2]=d=>s.value=!1),onSelectDay:$(a),onAddNewDay:$(l)},null,8,["is-open","days","selected-day-id","onSelectDay","onAddNewDay"])]))}}),pH=ni(dH,[["__scopeId","data-v-2c22d956"]]);var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Py(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ry(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var n1={exports:{}},C2={exports:{}},T2={};/**
* @vue/compiler-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const uh=Symbol(""),qc=Symbol(""),Ly=Symbol(""),a0=Symbol(""),w7=Symbol(""),kl=Symbol(""),S7=Symbol(""),k7=Symbol(""),_y=Symbol(""),By=Symbol(""),Bh=Symbol(""),Fy=Symbol(""),C7=Symbol(""),$y=Symbol(""),zy=Symbol(""),Vy=Symbol(""),Hy=Symbol(""),jy=Symbol(""),Wy=Symbol(""),T7=Symbol(""),E7=Symbol(""),rp=Symbol(""),l0=Symbol(""),qy=Symbol(""),Uy=Symbol(""),ch=Symbol(""),Fh=Symbol(""),Gy=Symbol(""),Cg=Symbol(""),QA=Symbol(""),Tg=Symbol(""),u0=Symbol(""),eM=Symbol(""),tM=Symbol(""),Ky=Symbol(""),nM=Symbol(""),rM=Symbol(""),Xy=Symbol(""),A7=Symbol(""),Fu={[uh]:"Fragment",[qc]:"Teleport",[Ly]:"Suspense",[a0]:"KeepAlive",[w7]:"BaseTransition",[kl]:"openBlock",[S7]:"createBlock",[k7]:"createElementBlock",[_y]:"createVNode",[By]:"createElementVNode",[Bh]:"createCommentVNode",[Fy]:"createTextVNode",[C7]:"createStaticVNode",[$y]:"resolveComponent",[zy]:"resolveDynamicComponent",[Vy]:"resolveDirective",[Hy]:"resolveFilter",[jy]:"withDirectives",[Wy]:"renderList",[T7]:"renderSlot",[E7]:"createSlots",[rp]:"toDisplayString",[l0]:"mergeProps",[qy]:"normalizeClass",[Uy]:"normalizeStyle",[ch]:"normalizeProps",[Fh]:"guardReactiveProps",[Gy]:"toHandlers",[Cg]:"camelize",[QA]:"capitalize",[Tg]:"toHandlerKey",[u0]:"setBlockTracking",[eM]:"pushScopeId",[tM]:"popScopeId",[Ky]:"withCtx",[nM]:"unref",[rM]:"isRef",[Xy]:"withMemo",[A7]:"isMemoSame"};function iM(n){Object.getOwnPropertySymbols(n).forEach(e=>{Fu[e]=n[e]})}const mH={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},gH={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},yH={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},vH={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},rr={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function sM(n,e=""){return{type:0,source:e,children:n,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:rr}}function hh(n,e,t,r,i,s,o,a=!1,l=!1,u=!1,c=rr){return n&&(a?(n.helper(kl),n.helper(Vu(n.inSSR,u))):n.helper(zu(n.inSSR,u)),o&&n.helper(jy)),{type:13,tag:e,props:t,children:r,patchFlag:i,dynamicProps:s,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function gl(n,e=rr){return{type:17,loc:e,elements:n}}function ji(n,e=rr){return{type:15,loc:e,properties:n}}function Tn(n,e){return{type:16,loc:rr,key:tr(n)?ut(n,!0):n,value:e}}function ut(n,e=!1,t=rr,r=0){return{type:4,loc:t,content:n,isStatic:e,constType:e?3:r}}function bH(n,e){return{type:5,loc:e,content:tr(n)?ut(n,!1,e):n}}function cs(n,e=rr){return{type:8,loc:e,children:n}}function jn(n,e=[],t=rr){return{type:14,loc:t,callee:n,arguments:e}}function $u(n,e=void 0,t=!1,r=!1,i=rr){return{type:18,params:n,returns:e,newline:t,isSlot:r,loc:i}}function Eg(n,e,t,r=!0){return{type:19,test:n,consequent:e,alternate:t,newline:r,loc:rr}}function oM(n,e,t=!1,r=!1){return{type:20,index:n,value:e,needPauseTracking:t,inVOnce:r,needArraySpread:!1,loc:rr}}function aM(n){return{type:21,body:n,loc:rr}}function xH(n){return{type:22,elements:n,loc:rr}}function wH(n,e,t){return{type:23,test:n,consequent:e,alternate:t,loc:rr}}function SH(n,e){return{type:24,left:n,right:e,loc:rr}}function kH(n){return{type:25,expressions:n,loc:rr}}function CH(n){return{type:26,returns:n,loc:rr}}function zu(n,e){return n||e?_y:By}function Vu(n,e){return n||e?S7:k7}function Yy(n,{helper:e,removeHelper:t,inSSR:r}){n.isBlock||(n.isBlock=!0,t(zu(r,n.isComponent)),e(kl),e(Vu(r,n.isComponent)))}const oS=new Uint8Array([123,123]),aS=new Uint8Array([125,125]);function lS(n){return n>=97&&n<=122||n>=65&&n<=90}function _i(n){return n===32||n===10||n===9||n===12||n===13}function _a(n){return n===47||n===62||_i(n)}function Ag(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}const Ar={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class TH{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=oS,this.delimiterClose=aS,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=oS,this.delimiterClose=aS}getPos(e){let t=1,r=e+1;for(let i=this.newlines.length-1;i>=0;i--){const s=this.newlines[i];if(e>s){t=i+2,r=e-s;break}}return{column:r,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const t=this.index+1-this.delimiterOpen.length;t>this.sectionStart&&this.cbs.ontext(this.sectionStart,t),this.state=3,this.sectionStart=t}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(!(t?_a(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!t){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||_i(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const r=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=r}this.sectionStart=t+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ar.TitleEnd||this.currentSequence===Ar.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Ar.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ar.Cdata.length&&(this.state=28,this.currentSequence=Ar.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(t===10&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ar.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):lS(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){_a(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(_a(e)){const t=this.buffer.slice(this.sectionStart,this.index);t!=="template"&&this.enterRCDATA(Ag("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){_i(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=lS(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||_i(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):_i(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):_i(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||_a(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||_a(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||_a(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||_a(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||_a(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):_i(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):_i(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){_i(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Ar.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Ar.ScriptEnd[3]?this.startSpecial(Ar.ScriptEnd,4):e===Ar.StyleEnd[3]?this.startSpecial(Ar.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Ar.TitleEnd[3]?this.startSpecial(Ar.TitleEnd,4):e===Ar.TextareaEnd[3]?this.startSpecial(Ar.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);switch(t===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(t);break}case 2:{this.stateInterpolationOpen(t);break}case 3:{this.stateInterpolation(t);break}case 4:{this.stateInterpolationClose(t);break}case 31:{this.stateSpecialStartSequence(t);break}case 32:{this.stateInRCDATA(t);break}case 26:{this.stateCDATASequence(t);break}case 19:{this.stateInAttrValueDoubleQuotes(t);break}case 12:{this.stateInAttrName(t);break}case 13:{this.stateInDirName(t);break}case 14:{this.stateInDirArg(t);break}case 15:{this.stateInDynamicDirArg(t);break}case 16:{this.stateInDirModifier(t);break}case 28:{this.stateInCommentLike(t);break}case 27:{this.stateInSpecialComment(t);break}case 11:{this.stateBeforeAttrName(t);break}case 6:{this.stateInTagName(t);break}case 34:{this.stateInSFCRootTagName(t);break}case 9:{this.stateInClosingTagName(t);break}case 5:{this.stateBeforeTagName(t);break}case 17:{this.stateAfterAttrName(t);break}case 20:{this.stateInAttrValueSingleQuotes(t);break}case 18:{this.stateBeforeAttrValue(t);break}case 8:{this.stateBeforeClosingTagName(t);break}case 10:{this.stateAfterClosingTagName(t);break}case 29:{this.stateBeforeSpecialS(t);break}case 30:{this.stateBeforeSpecialT(t);break}case 21:{this.stateInAttrValueNoQuotes(t);break}case 7:{this.stateInSelfClosingTag(t);break}case 23:{this.stateInDeclaration(t);break}case 22:{this.stateBeforeDeclaration(t);break}case 25:{this.stateBeforeComment(t);break}case 24:{this.stateInProcessingInstruction(t);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Ar.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}const EH={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},AH={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:n=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${n}.sync\` should be changed to \`v-model:${n}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function Rb(n,{compatConfig:e}){const t=e&&e[n];return n==="MODE"?t||3:t}function Cu(n,e){const t=Rb("MODE",e),r=Rb(n,e);return t===3?r===!0:r!==!1}function fh(n,e,t,...r){return Cu(n,e)}function MH(n,e,t,...r){if(Rb(n,e)==="suppress-warning")return;const{message:s,link:o}=AH[n],a=`(deprecation ${n}) ${typeof s=="function"?s(...r):s}${o?`
  Details: ${o}`:""}`,l=new SyntaxError(a);l.code=n,t&&(l.loc=t),e.onWarn(l)}function M7(n){throw n}function lM(n){}function on(n,e,t,r){const i=`https://vuejs.org/error-reference/#compiler-${n}`,s=new SyntaxError(String(i));return s.code=n,s.loc=e,s}const OH={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},IH={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function DH(n,e,t=!1,r=[],i=Object.create(null)){}function NH(n,e,t){return!1}function PH(n,e){if(n&&(n.type==="ObjectProperty"||n.type==="ArrayPattern")){let t=e.length;for(;t--;){const r=e[t];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function RH(n){let e=n.length;for(;e--;){const t=n[e];if(t.type==="NewExpression")return!0;if(t.type!=="MemberExpression")break}return!1}function LH(n,e){for(const t of n.params)for(const r of Zo(t))e(r)}function _H(n,e){for(const t of n.body)if(t.type==="VariableDeclaration"){if(t.declare)continue;for(const r of t.declarations)for(const i of Zo(r.id))e(i)}else if(t.type==="FunctionDeclaration"||t.type==="ClassDeclaration"){if(t.declare||!t.id)continue;e(t.id)}else BH(t)&&FH(t,!0,e)}function BH(n){return n.type==="ForOfStatement"||n.type==="ForInStatement"||n.type==="ForStatement"}function FH(n,e,t){const r=n.type==="ForStatement"?n.init:n.left;if(r&&r.type==="VariableDeclaration"&&(r.kind==="var"?e:!e))for(const i of r.declarations)for(const s of Zo(i.id))t(s)}function Zo(n,e=[]){switch(n.type){case"Identifier":e.push(n);break;case"MemberExpression":let t=n;for(;t.type==="MemberExpression";)t=t.object;e.push(t);break;case"ObjectPattern":for(const r of n.properties)r.type==="RestElement"?Zo(r.argument,e):Zo(r.value,e);break;case"ArrayPattern":n.elements.forEach(r=>{r&&Zo(r,e)});break;case"RestElement":Zo(n.argument,e);break;case"AssignmentPattern":Zo(n.left,e);break}return e}const $H=n=>/Function(?:Expression|Declaration)$|Method$/.test(n.type),uM=n=>n&&(n.type==="ObjectProperty"||n.type==="ObjectMethod")&&!n.computed,zH=(n,e)=>uM(e)&&e.key===n,cM=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function hM(n){return cM.includes(n.type)?hM(n.expression):n}const Ur=n=>n.type===4&&n.isStatic;function O7(n){switch(n){case"Teleport":case"teleport":return qc;case"Suspense":case"suspense":return Ly;case"KeepAlive":case"keep-alive":return a0;case"BaseTransition":case"base-transition":return w7}}const VH=/^$|^\d|[^\$\w\xA0-\uFFFF]/,ip=n=>!VH.test(n),HH=/[A-Za-z_$\xA0-\uFFFF]/,jH=/[\.\?\w$\xA0-\uFFFF]/,WH=/\s+[.[]\s*|\s*[.[]\s+/g,fM=n=>n.type===4?n.content:n.loc.source,dM=n=>{const e=fM(n).trim().replace(WH,a=>a.trim());let t=0,r=[],i=0,s=0,o=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(t){case 0:if(l==="[")r.push(t),t=1,i++;else if(l==="(")r.push(t),t=2,s++;else if(!(a===0?HH:jH).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(r.push(t),t=3,o=l):l==="["?i++:l==="]"&&(--i||(t=r.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")r.push(t),t=3,o=l;else if(l==="(")s++;else if(l===")"){if(a===e.length-1)return!1;--s||(t=r.pop())}break;case 3:l===o&&(t=r.pop(),o=null);break}}return!i&&!s},qH=Ed,I7=dM,UH=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,pM=n=>UH.test(fM(n)),GH=Ed,mM=pM;function KH(n,e,t=e.length){return gM({offset:n.offset,line:n.line,column:n.column},e,t)}function gM(n,e,t=e.length){let r=0,i=-1;for(let s=0;s<t;s++)e.charCodeAt(s)===10&&(r++,i=s);return n.offset+=t,n.line+=r,n.column=i===-1?n.column+t:t-i,n}function XH(n,e){if(!n)throw new Error(e||"unexpected compiler condition")}function Wr(n,e,t=!1){for(let r=0;r<n.props.length;r++){const i=n.props[r];if(i.type===7&&(t||i.exp)&&(tr(e)?i.name===e:e.test(i.name)))return i}}function sp(n,e,t=!1,r=!1){for(let i=0;i<n.props.length;i++){const s=n.props[i];if(s.type===6){if(t)continue;if(s.name===e&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&al(s.arg,e))return s}}function al(n,e){return!!(n&&Ur(n)&&n.content===e)}function yM(n){return n.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function r1(n){return n.type===5||n.type===2}function Lb(n){return n.type===7&&n.name==="pre"}function D7(n){return n.type===7&&n.name==="slot"}function dh(n){return n.type===1&&n.tagType===3}function c0(n){return n.type===1&&n.tagType===2}const YH=new Set([ch,Fh]);function vM(n,e=[]){if(n&&!tr(n)&&n.type===14){const t=n.callee;if(!tr(t)&&YH.has(t))return vM(n.arguments[0],e.concat(n))}return[n,e]}function h0(n,e,t){let r,i=n.type===13?n.props:n.arguments[2],s=[],o;if(i&&!tr(i)&&i.type===14){const a=vM(i);i=a[0],s=a[1],o=s[s.length-1]}if(i==null||tr(i))r=ji([e]);else if(i.type===14){const a=i.arguments[0];!tr(a)&&a.type===15?uS(e,a)||a.properties.unshift(e):i.callee===Gy?r=jn(t.helper(l0),[ji([e]),i]):i.arguments.unshift(ji([e])),!r&&(r=i)}else i.type===15?(uS(e,i)||i.properties.unshift(e),r=i):(r=jn(t.helper(l0),[ji([e]),i]),o&&o.callee===Fh&&(o=s[s.length-2]));n.type===13?o?o.arguments[0]=r:n.props=r:o?o.arguments[0]=r:n.arguments[2]=r}function uS(n,e){let t=!1;if(n.key.type===4){const r=n.key.content;t=e.properties.some(i=>i.key.type===4&&i.key.content===r)}return t}function ph(n,e){return`_${e}_${n.replace(/[^\w]/g,(t,r)=>t==="-"?"_":n.charCodeAt(r).toString())}`}function Ms(n,e){if(!n||Object.keys(e).length===0)return!1;switch(n.type){case 1:for(let t=0;t<n.props.length;t++){const r=n.props[t];if(r.type===7&&(Ms(r.arg,e)||Ms(r.exp,e)))return!0}return n.children.some(t=>Ms(t,e));case 11:return Ms(n.source,e)?!0:n.children.some(t=>Ms(t,e));case 9:return n.branches.some(t=>Ms(t,e));case 10:return Ms(n.condition,e)?!0:n.children.some(t=>Ms(t,e));case 4:return!n.isStatic&&ip(n.content)&&!!e[n.content];case 8:return n.children.some(t=>vA(t)&&Ms(t,e));case 5:case 12:return Ms(n.content,e);case 2:case 3:case 20:return!1;default:return!1}}function bM(n){return n.type===14&&n.callee===Xy?n.arguments[1].returns:n}const xM=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,wM={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:Vp,isPreTag:Vp,isIgnoreNewlineTag:Vp,isCustomElement:Vp,onError:M7,onWarn:lM,comments:!1,prefixIdentifiers:!1};let Bt=wM,f0=null,la="",Ir=null,At=null,li="",Vo=-1,ru=-1,N7=0,Ka=!1,_b=null;const hn=[],Pn=new TH(hn,{onerr:_o,ontext(n,e){Up(mr(n,e),n,e)},ontextentity(n,e,t){Up(n,e,t)},oninterpolation(n,e){if(Ka)return Up(mr(n,e),n,e);let t=n+Pn.delimiterOpen.length,r=e-Pn.delimiterClose.length;for(;_i(la.charCodeAt(t));)t++;for(;_i(la.charCodeAt(r-1));)r--;let i=mr(t,r);i.includes("&")&&(i=Bt.decodeEntities(i,!1)),Bb({type:5,content:s1(i,!1,Rn(t,r)),loc:Rn(n,e)})},onopentagname(n,e){const t=mr(n,e);Ir={type:1,tag:t,ns:Bt.getNamespace(t,hn[0],Bt.ns),tagType:0,props:[],children:[],loc:Rn(n-1,e),codegenNode:void 0}},onopentagend(n){hS(n)},onclosetag(n,e){const t=mr(n,e);if(!Bt.isVoidTag(t)){let r=!1;for(let i=0;i<hn.length;i++)if(hn[i].tag.toLowerCase()===t.toLowerCase()){r=!0,i>0&&_o(24,hn[0].loc.start.offset);for(let o=0;o<=i;o++){const a=hn.shift();i1(a,e,o<i)}break}r||_o(23,SM(n,60))}},onselfclosingtag(n){const e=Ir.tag;Ir.isSelfClosing=!0,hS(n),hn[0]&&hn[0].tag===e&&i1(hn.shift(),n)},onattribname(n,e){At={type:6,name:mr(n,e),nameLoc:Rn(n,e),value:void 0,loc:Rn(n)}},ondirname(n,e){const t=mr(n,e),r=t==="."||t===":"?"bind":t==="@"?"on":t==="#"?"slot":t.slice(2);if(!Ka&&r===""&&_o(26,n),Ka||r==="")At={type:6,name:t,nameLoc:Rn(n,e),value:void 0,loc:Rn(n)};else if(At={type:7,name:r,rawName:t,exp:void 0,arg:void 0,modifiers:t==="."?[ut("prop")]:[],loc:Rn(n)},r==="pre"){Ka=Pn.inVPre=!0,_b=Ir;const i=Ir.props;for(let s=0;s<i.length;s++)i[s].type===7&&(i[s]=aj(i[s]))}},ondirarg(n,e){if(n===e)return;const t=mr(n,e);if(Ka&&!Lb(At))At.name+=t,mu(At.nameLoc,e);else{const r=t[0]!=="[";At.arg=s1(r?t:t.slice(1,-1),r,Rn(n,e),r?3:0)}},ondirmodifier(n,e){const t=mr(n,e);if(Ka&&!Lb(At))At.name+="."+t,mu(At.nameLoc,e);else if(At.name==="slot"){const r=At.arg;r&&(r.content+="."+t,mu(r.loc,e))}else{const r=ut(t,!0,Rn(n,e));At.modifiers.push(r)}},onattribdata(n,e){li+=mr(n,e),Vo<0&&(Vo=n),ru=e},onattribentity(n,e,t){li+=n,Vo<0&&(Vo=e),ru=t},onattribnameend(n){const e=At.loc.start.offset,t=mr(e,n);At.type===7&&(At.rawName=t),Ir.props.some(r=>(r.type===7?r.rawName:r.name)===t)&&_o(2,e)},onattribend(n,e){if(Ir&&At){if(mu(At.loc,e),n!==0)if(li.includes("&")&&(li=Bt.decodeEntities(li,!0)),At.type===6)At.name==="class"&&(li=CM(li).trim()),n===1&&!li&&_o(13,e),At.value={type:2,content:li,loc:n===1?Rn(Vo,ru):Rn(Vo-1,ru+1)},Pn.inSFCRoot&&Ir.tag==="template"&&At.name==="lang"&&li&&li!=="html"&&Pn.enterRCDATA(Ag("</template"),0);else{let t=0;At.exp=s1(li,!1,Rn(Vo,ru),0,t),At.name==="for"&&(At.forParseResult=ZH(At.exp));let r=-1;At.name==="bind"&&(r=At.modifiers.findIndex(i=>i.content==="sync"))>-1&&fh("COMPILER_V_BIND_SYNC",Bt,At.loc,At.arg.loc.source)&&(At.name="model",At.modifiers.splice(r,1))}(At.type!==7||At.name!=="pre")&&Ir.props.push(At)}li="",Vo=ru=-1},oncomment(n,e){Bt.comments&&Bb({type:3,content:mr(n,e),loc:Rn(n-4,e+3)})},onend(){const n=la.length;for(let e=0;e<hn.length;e++)i1(hn[e],n-1),_o(24,hn[e].loc.start.offset)},oncdata(n,e){hn[0].ns!==0?Up(mr(n,e),n,e):_o(1,n-9)},onprocessinginstruction(n){(hn[0]?hn[0].ns:Bt.ns)===0&&_o(21,n-1)}}),cS=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,JH=/^\(|\)$/g;function ZH(n){const e=n.loc,t=n.content,r=t.match(xM);if(!r)return;const[,i,s]=r,o=(h,f,d=!1)=>{const p=e.start.offset+f,m=p+h.length;return s1(h,!1,Rn(p,m),0,d?1:0)},a={source:o(s.trim(),t.indexOf(s,i.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=i.trim().replace(JH,"").trim();const u=i.indexOf(l),c=l.match(cS);if(c){l=l.replace(cS,"").trim();const h=c[1].trim();let f;if(h&&(f=t.indexOf(h,u+l.length),a.key=o(h,f,!0)),c[2]){const d=c[2].trim();d&&(a.index=o(d,t.indexOf(d,a.key?f+h.length:u+l.length),!0))}}return l&&(a.value=o(l,u,!0)),a}function mr(n,e){return la.slice(n,e)}function hS(n){Pn.inSFCRoot&&(Ir.innerLoc=Rn(n+1,n+1)),Bb(Ir);const{tag:e,ns:t}=Ir;t===0&&Bt.isPreTag(e)&&N7++,Bt.isVoidTag(e)?i1(Ir,n):(hn.unshift(Ir),(t===1||t===2)&&(Pn.inXML=!0)),Ir=null}function Up(n,e,t){{const s=hn[0]&&hn[0].tag;s!=="script"&&s!=="style"&&n.includes("&")&&(n=Bt.decodeEntities(n,!1))}const r=hn[0]||f0,i=r.children[r.children.length-1];i&&i.type===2?(i.content+=n,mu(i.loc,t)):r.children.push({type:2,content:n,loc:Rn(e,t)})}function i1(n,e,t=!1){t?mu(n.loc,SM(e,60)):mu(n.loc,QH(e,62)+1),Pn.inSFCRoot&&(n.children.length?n.innerLoc.end=aa({},n.children[n.children.length-1].loc.end):n.innerLoc.end=aa({},n.innerLoc.start),n.innerLoc.source=mr(n.innerLoc.start.offset,n.innerLoc.end.offset));const{tag:r,ns:i,children:s}=n;if(Ka||(r==="slot"?n.tagType=2:fS(n)?n.tagType=3:tj(n)&&(n.tagType=1)),Pn.inRCDATA||(n.children=kM(s)),i===0&&Bt.isIgnoreNewlineTag(r)){const o=s[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}i===0&&Bt.isPreTag(r)&&N7--,_b===n&&(Ka=Pn.inVPre=!1,_b=null),Pn.inXML&&(hn[0]?hn[0].ns:Bt.ns)===0&&(Pn.inXML=!1);{const o=n.props;if(!Pn.inSFCRoot&&Cu("COMPILER_NATIVE_TEMPLATE",Bt)&&n.tag==="template"&&!fS(n)){const l=hn[0]||f0,u=l.children.indexOf(n);l.children.splice(u,1,...n.children)}const a=o.find(l=>l.type===6&&l.name==="inline-template");a&&fh("COMPILER_INLINE_TEMPLATE",Bt,a.loc)&&n.children.length&&(a.value={type:2,content:mr(n.children[0].loc.start.offset,n.children[n.children.length-1].loc.end.offset),loc:a.loc})}}function QH(n,e){let t=n;for(;la.charCodeAt(t)!==e&&t<la.length-1;)t++;return t}function SM(n,e){let t=n;for(;la.charCodeAt(t)!==e&&t>=0;)t--;return t}const ej=new Set(["if","else","else-if","for","slot"]);function fS({tag:n,props:e}){if(n==="template"){for(let t=0;t<e.length;t++)if(e[t].type===7&&ej.has(e[t].name))return!0}return!1}function tj({tag:n,props:e}){if(Bt.isCustomElement(n))return!1;if(n==="component"||nj(n.charCodeAt(0))||O7(n)||Bt.isBuiltInComponent&&Bt.isBuiltInComponent(n)||Bt.isNativeTag&&!Bt.isNativeTag(n))return!0;for(let t=0;t<e.length;t++){const r=e[t];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(fh("COMPILER_IS_ON_ELEMENT",Bt,r.loc))return!0}}else if(r.name==="bind"&&al(r.arg,"is")&&fh("COMPILER_IS_ON_ELEMENT",Bt,r.loc))return!0}return!1}function nj(n){return n>64&&n<91}const rj=/\r\n/g;function kM(n){const e=Bt.whitespace!=="preserve";let t=!1;for(let r=0;r<n.length;r++){const i=n[r];if(i.type===2)if(N7)i.content=i.content.replace(rj,`
`);else if(ij(i.content)){const s=n[r-1]&&n[r-1].type,o=n[r+1]&&n[r+1].type;!s||!o||e&&(s===3&&(o===3||o===1)||s===1&&(o===3||o===1&&sj(i.content)))?(t=!0,n[r]=null):i.content=" "}else e&&(i.content=CM(i.content))}return t?n.filter(Boolean):n}function ij(n){for(let e=0;e<n.length;e++)if(!_i(n.charCodeAt(e)))return!1;return!0}function sj(n){for(let e=0;e<n.length;e++){const t=n.charCodeAt(e);if(t===10||t===13)return!0}return!1}function CM(n){let e="",t=!1;for(let r=0;r<n.length;r++)_i(n.charCodeAt(r))?t||(e+=" ",t=!0):(e+=n[r],t=!1);return e}function Bb(n){(hn[0]||f0).children.push(n)}function Rn(n,e){return{start:Pn.getPos(n),end:e==null?e:Pn.getPos(e),source:e==null?e:mr(n,e)}}function oj(n){return Rn(n.start.offset,n.end.offset)}function mu(n,e){n.end=Pn.getPos(e),n.source=mr(n.start.offset,e)}function aj(n){const e={type:6,name:n.rawName,nameLoc:Rn(n.loc.start.offset,n.loc.start.offset+n.rawName.length),value:void 0,loc:n.loc};if(n.exp){const t=n.exp.loc;t.end.offset<n.loc.end.offset&&(t.start.offset--,t.start.column--,t.end.offset++,t.end.column++),e.value={type:2,content:n.exp.content,loc:t}}return e}function s1(n,e=!1,t,r=0,i=0){return ut(n,e,t,r)}function _o(n,e,t){Bt.onError(on(n,Rn(e,e)))}function lj(){Pn.reset(),Ir=null,At=null,li="",Vo=-1,ru=-1,hn.length=0}function P7(n,e){if(lj(),la=n,Bt=aa({},wM),e){let i;for(i in e)e[i]!=null&&(Bt[i]=e[i])}Pn.mode=Bt.parseMode==="html"?1:Bt.parseMode==="sfc"?2:0,Pn.inXML=Bt.ns===1||Bt.ns===2;const t=e&&e.delimiters;t&&(Pn.delimiterOpen=Ag(t[0]),Pn.delimiterClose=Ag(t[1]));const r=f0=sM([],n);return Pn.parse(la),r.loc=Rn(0,n.length),r.children=kM(r.children),f0=null,r}function uj(n,e){o1(n,void 0,e,!!TM(n))}function TM(n){const e=n.children.filter(t=>t.type!==3);return e.length===1&&e[0].type===1&&!c0(e[0])?e[0]:null}function o1(n,e,t,r=!1,i=!1){const{children:s}=n,o=[];for(let h=0;h<s.length;h++){const f=s[h];if(f.type===1&&f.tagType===0){const d=r?0:gi(f,t);if(d>0){if(d>=2){f.codegenNode.patchFlag=-1,o.push(f);continue}}else{const p=f.codegenNode;if(p.type===13){const m=p.patchFlag;if((m===void 0||m===512||m===1)&&AM(f,t)>=2){const g=MM(f);g&&(p.props=t.hoist(g))}p.dynamicProps&&(p.dynamicProps=t.hoist(p.dynamicProps))}}}else if(f.type===12&&(r?0:gi(f,t))>=2){f.codegenNode.type===14&&f.codegenNode.arguments.length>0&&f.codegenNode.arguments.push("-1"),o.push(f);continue}if(f.type===1){const d=f.tagType===1;d&&t.scopes.vSlot++,o1(f,n,t,!1,i),d&&t.scopes.vSlot--}else if(f.type===11)o1(f,n,t,f.children.length===1,!0);else if(f.type===9)for(let d=0;d<f.branches.length;d++)o1(f.branches[d],n,t,f.branches[d].children.length===1,i)}let a=!1;const l=[];if(o.length===s.length&&n.type===1){if(n.tagType===0&&n.codegenNode&&n.codegenNode.type===13&&Yo(n.codegenNode.children))n.codegenNode.children=u(gl(n.codegenNode.children)),a=!0;else if(n.tagType===1&&n.codegenNode&&n.codegenNode.type===13&&n.codegenNode.children&&!Yo(n.codegenNode.children)&&n.codegenNode.children.type===15){const h=c(n.codegenNode,"default");h&&(l.push(t.cached.length),h.returns=u(gl(h.returns)),a=!0)}else if(n.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!Yo(e.codegenNode.children)&&e.codegenNode.children.type===15){const h=Wr(n,"slot",!0),f=h&&h.arg&&c(e.codegenNode,h.arg);f&&(l.push(t.cached.length),f.returns=u(gl(f.returns)),a=!0)}}if(!a)for(const h of o)l.push(t.cached.length),h.codegenNode=t.cache(h.codegenNode);l.length&&n.type===1&&n.tagType===1&&n.codegenNode&&n.codegenNode.type===13&&n.codegenNode.children&&!Yo(n.codegenNode.children)&&n.codegenNode.children.type===15&&n.codegenNode.children.properties.push(Tn("__",ut(JSON.stringify(l),!1)));function u(h){const f=t.cache(h);return i&&t.hmr&&(f.needArraySpread=!0),f}function c(h,f){if(h.children&&!Yo(h.children)&&h.children.type===15){const d=h.children.properties.find(p=>p.key===f||p.key.content===f);return d&&d.value}}o.length&&t.transformHoist&&t.transformHoist(s,t,n)}function gi(n,e){const{constantCache:t}=e;switch(n.type){case 1:if(n.tagType!==0)return 0;const r=t.get(n);if(r!==void 0)return r;const i=n.codegenNode;if(i.type!==13||i.isBlock&&n.tag!=="svg"&&n.tag!=="foreignObject"&&n.tag!=="math")return 0;if(i.patchFlag===void 0){let o=3;const a=AM(n,e);if(a===0)return t.set(n,0),0;a<o&&(o=a);for(let l=0;l<n.children.length;l++){const u=gi(n.children[l],e);if(u===0)return t.set(n,0),0;u<o&&(o=u)}if(o>1)for(let l=0;l<n.props.length;l++){const u=n.props[l];if(u.type===7&&u.name==="bind"&&u.exp){const c=gi(u.exp,e);if(c===0)return t.set(n,0),0;c<o&&(o=c)}}if(i.isBlock){for(let l=0;l<n.props.length;l++)if(n.props[l].type===7)return t.set(n,0),0;e.removeHelper(kl),e.removeHelper(Vu(e.inSSR,i.isComponent)),i.isBlock=!1,e.helper(zu(e.inSSR,i.isComponent))}return t.set(n,o),o}else return t.set(n,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return gi(n.content,e);case 4:return n.constType;case 8:let s=3;for(let o=0;o<n.children.length;o++){const a=n.children[o];if(tr(a)||u7(a))continue;const l=gi(a,e);if(l===0)return 0;l<s&&(s=l)}return s;case 20:return 2;default:return 0}}const cj=new Set([qy,Uy,ch,Fh]);function EM(n,e){if(n.type===14&&!tr(n.callee)&&cj.has(n.callee)){const t=n.arguments[0];if(t.type===4)return gi(t,e);if(t.type===14)return EM(t,e)}return 0}function AM(n,e){let t=3;const r=MM(n);if(r&&r.type===15){const{properties:i}=r;for(let s=0;s<i.length;s++){const{key:o,value:a}=i[s],l=gi(o,e);if(l===0)return l;l<t&&(t=l);let u;if(a.type===4?u=gi(a,e):a.type===14?u=EM(a,e):u=0,u===0)return u;u<t&&(t=u)}}return t}function MM(n){const e=n.codegenNode;if(e.type===13)return e.props}function OM(n,{filename:e="",prefixIdentifiers:t=!1,hoistStatic:r=!1,hmr:i=!1,cacheHandlers:s=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:u=Ed,isCustomElement:c=Ed,expressionPlugins:h=[],scopeId:f=null,slotted:d=!0,ssr:p=!1,inSSR:m=!1,ssrCssVars:g="",bindingMetadata:y=zF,inline:v=!1,isTS:x=!1,onError:k=M7,onWarn:C=lM,compatConfig:w}){const M=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),D={filename:e,selfName:M&&yA(ml(M[1])),prefixIdentifiers:t,hoistStatic:r,hmr:i,cacheHandlers:s,nodeTransforms:o,directiveTransforms:a,transformHoist:l,isBuiltInComponent:u,isCustomElement:c,expressionPlugins:h,scopeId:f,slotted:d,ssr:p,inSSR:m,ssrCssVars:g,bindingMetadata:y,inline:v,isTS:x,onError:k,onWarn:C,compatConfig:w,root:n,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:n,childIndex:0,inVOnce:!1,helper(A){const E=D.helpers.get(A)||0;return D.helpers.set(A,E+1),A},removeHelper(A){const E=D.helpers.get(A);if(E){const N=E-1;N?D.helpers.set(A,N):D.helpers.delete(A)}},helperString(A){return`_${Fu[D.helper(A)]}`},replaceNode(A){D.parent.children[D.childIndex]=D.currentNode=A},removeNode(A){const E=D.parent.children,N=A?E.indexOf(A):D.currentNode?D.childIndex:-1;!A||A===D.currentNode?(D.currentNode=null,D.onNodeRemoved()):D.childIndex>N&&(D.childIndex--,D.onNodeRemoved()),D.parent.children.splice(N,1)},onNodeRemoved:Ed,addIdentifiers(A){},removeIdentifiers(A){},hoist(A){tr(A)&&(A=ut(A)),D.hoists.push(A);const E=ut(`_hoisted_${D.hoists.length}`,!1,A.loc,2);return E.hoisted=A,E},cache(A,E=!1,N=!1){const I=oM(D.cached.length,A,E,N);return D.cached.push(I),I}};return D.filters=new Set,D}function IM(n,e){const t=OM(n,e);op(n,t),e.hoistStatic&&uj(n,t),e.ssr||hj(n,t),n.helpers=new Set([...t.helpers.keys()]),n.components=[...t.components],n.directives=[...t.directives],n.imports=t.imports,n.hoists=t.hoists,n.temps=t.temps,n.cached=t.cached,n.transformed=!0,n.filters=[...t.filters]}function hj(n,e){const{helper:t}=e,{children:r}=n;if(r.length===1){const i=TM(n);if(i&&i.codegenNode){const s=i.codegenNode;s.type===13&&Yy(s,e),n.codegenNode=s}else n.codegenNode=r[0]}else if(r.length>1){let i=64;n.codegenNode=hh(e,t(uh),void 0,n.children,i,void 0,void 0,!0,void 0,!1)}}function fj(n,e){let t=0;const r=()=>{t--};for(;t<n.children.length;t++){const i=n.children[t];tr(i)||(e.grandParent=e.parent,e.parent=n,e.childIndex=t,e.onNodeRemoved=r,op(i,e))}}function op(n,e){e.currentNode=n;const{nodeTransforms:t}=e,r=[];for(let s=0;s<t.length;s++){const o=t[s](n,e);if(o&&(Yo(o)?r.push(...o):r.push(o)),e.currentNode)n=e.currentNode;else return}switch(n.type){case 3:e.ssr||e.helper(Bh);break;case 5:e.ssr||e.helper(rp);break;case 9:for(let s=0;s<n.branches.length;s++)op(n.branches[s],e);break;case 10:case 11:case 1:case 0:fj(n,e);break}e.currentNode=n;let i=r.length;for(;i--;)r[i]()}function R7(n,e){const t=tr(n)?r=>r===n:r=>n.test(r);return(r,i)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some(D7))return;const o=[];for(let a=0;a<s.length;a++){const l=s[a];if(l.type===7&&t(l.name)){s.splice(a,1),a--;const u=e(r,l,i);u&&o.push(u)}}return o}}}const Jy="/*@__PURE__*/",DM=n=>`${Fu[n]}: _${Fu[n]}`;function dj(n,{mode:e="function",prefixIdentifiers:t=e==="module",sourceMap:r=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:h=!1,inSSR:f=!1}){const d={mode:e,prefixIdentifiers:t,sourceMap:r,filename:i,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:h,inSSR:f,source:n.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(m){return`_${Fu[m]}`},push(m,g=-2,y){d.code+=m},indent(){p(++d.indentLevel)},deindent(m=!1){m?--d.indentLevel:p(--d.indentLevel)},newline(){p(d.indentLevel)}};function p(m){d.push(`
`+"  ".repeat(m),0)}return d}function NM(n,e={}){const t=dj(n,e);e.onContextCreated&&e.onContextCreated(t);const{mode:r,push:i,prefixIdentifiers:s,indent:o,deindent:a,newline:l,scopeId:u,ssr:c}=t,h=Array.from(n.helpers),f=h.length>0,d=!s&&r!=="module";pj(n,t);const m=c?"ssrRender":"render",y=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(i(`function ${m}(${y}) {`),o(),d&&(i("with (_ctx) {"),o(),f&&(i(`const { ${h.map(DM).join(", ")} } = _Vue
`,-1),l())),n.components.length&&(E2(n.components,"component",t),(n.directives.length||n.temps>0)&&l()),n.directives.length&&(E2(n.directives,"directive",t),n.temps>0&&l()),n.filters&&n.filters.length&&(l(),E2(n.filters,"filter",t),l()),n.temps>0){i("let ");for(let v=0;v<n.temps;v++)i(`${v>0?", ":""}_temp${v}`)}return(n.components.length||n.directives.length||n.temps)&&(i(`
`,0),l()),c||i("return "),n.codegenNode?Lr(n.codegenNode,t):i("null"),d&&(a(),i("}")),a(),i("}"),{ast:n,code:t.code,preamble:"",map:t.map?t.map.toJSON():void 0}}function pj(n,e){const{ssr:t,prefixIdentifiers:r,push:i,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,u=a,c=Array.from(n.helpers);if(c.length>0&&(i(`const _Vue = ${u}
`,-1),n.hoists.length)){const h=[_y,By,Bh,Fy,C7].filter(f=>c.includes(f)).map(DM).join(", ");i(`const { ${h} } = _Vue
`,-1)}mj(n.hoists,e),s(),i("return ")}function E2(n,e,{helper:t,push:r,newline:i,isTS:s}){const o=t(e==="filter"?Hy:e==="component"?$y:Vy);for(let a=0;a<n.length;a++){let l=n[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),r(`const ${ph(l,e)} = ${o}(${JSON.stringify(l)}${u?", true":""})${s?"!":""}`),a<n.length-1&&i()}}function mj(n,e){if(!n.length)return;e.pure=!0;const{push:t,newline:r}=e;r();for(let i=0;i<n.length;i++){const s=n[i];s&&(t(`const _hoisted_${i+1} = `),Lr(s,e),r())}e.pure=!1}function L7(n,e){const t=n.length>3||!1;e.push("["),t&&e.indent(),ap(n,e,t),t&&e.deindent(),e.push("]")}function ap(n,e,t=!1,r=!0){const{push:i,newline:s}=e;for(let o=0;o<n.length;o++){const a=n[o];tr(a)?i(a,-3):Yo(a)?L7(a,e):Lr(a,e),o<n.length-1&&(t?(r&&i(","),s()):r&&i(", "))}}function Lr(n,e){if(tr(n)){e.push(n,-3);return}if(u7(n)){e.push(e.helper(n));return}switch(n.type){case 1:case 9:case 11:Lr(n.codegenNode,e);break;case 2:gj(n,e);break;case 4:PM(n,e);break;case 5:yj(n,e);break;case 12:Lr(n.codegenNode,e);break;case 8:RM(n,e);break;case 3:bj(n,e);break;case 13:xj(n,e);break;case 14:Sj(n,e);break;case 15:kj(n,e);break;case 17:Cj(n,e);break;case 18:Tj(n,e);break;case 19:Ej(n,e);break;case 20:Aj(n,e);break;case 21:ap(n.body,e,!0,!1);break}}function gj(n,e){e.push(JSON.stringify(n.content),-3,n)}function PM(n,e){const{content:t,isStatic:r}=n;e.push(r?JSON.stringify(t):t,-3,n)}function yj(n,e){const{push:t,helper:r,pure:i}=e;i&&t(Jy),t(`${r(rp)}(`),Lr(n.content,e),t(")")}function RM(n,e){for(let t=0;t<n.children.length;t++){const r=n.children[t];tr(r)?e.push(r,-3):Lr(r,e)}}function vj(n,e){const{push:t}=e;if(n.type===8)t("["),RM(n,e),t("]");else if(n.isStatic){const r=ip(n.content)?n.content:JSON.stringify(n.content);t(r,-2,n)}else t(`[${n.content}]`,-3,n)}function bj(n,e){const{push:t,helper:r,pure:i}=e;i&&t(Jy),t(`${r(Bh)}(${JSON.stringify(n.content)})`,-3,n)}function xj(n,e){const{push:t,helper:r,pure:i}=e,{tag:s,props:o,children:a,patchFlag:l,dynamicProps:u,directives:c,isBlock:h,disableTracking:f,isComponent:d}=n;let p;l&&(p=String(l)),c&&t(r(jy)+"("),h&&t(`(${r(kl)}(${f?"true":""}), `),i&&t(Jy);const m=h?Vu(e.inSSR,d):zu(e.inSSR,d);t(r(m)+"(",-2,n),ap(wj([s,o,a,p,u]),e),t(")"),h&&t(")"),c&&(t(", "),Lr(c,e),t(")"))}function wj(n){let e=n.length;for(;e--&&n[e]==null;);return n.slice(0,e+1).map(t=>t||"null")}function Sj(n,e){const{push:t,helper:r,pure:i}=e,s=tr(n.callee)?n.callee:r(n.callee);i&&t(Jy),t(s+"(",-2,n),ap(n.arguments,e),t(")")}function kj(n,e){const{push:t,indent:r,deindent:i,newline:s}=e,{properties:o}=n;if(!o.length){t("{}",-2,n);return}const a=o.length>1||!1;t(a?"{":"{ "),a&&r();for(let l=0;l<o.length;l++){const{key:u,value:c}=o[l];vj(u,e),t(": "),Lr(c,e),l<o.length-1&&(t(","),s())}a&&i(),t(a?"}":" }")}function Cj(n,e){L7(n.elements,e)}function Tj(n,e){const{push:t,indent:r,deindent:i}=e,{params:s,returns:o,body:a,newline:l,isSlot:u}=n;u&&t(`_${Fu[Ky]}(`),t("(",-2,n),Yo(s)?ap(s,e):s&&Lr(s,e),t(") => "),(l||a)&&(t("{"),r()),o?(l&&t("return "),Yo(o)?L7(o,e):Lr(o,e)):a&&Lr(a,e),(l||a)&&(i(),t("}")),u&&(n.isNonScopedSlot&&t(", undefined, true"),t(")"))}function Ej(n,e){const{test:t,consequent:r,alternate:i,newline:s}=n,{push:o,indent:a,deindent:l,newline:u}=e;if(t.type===4){const h=!ip(t.content);h&&o("("),PM(t,e),h&&o(")")}else o("("),Lr(t,e),o(")");s&&a(),e.indentLevel++,s||o(" "),o("? "),Lr(r,e),e.indentLevel--,s&&u(),s||o(" "),o(": ");const c=i.type===19;c||e.indentLevel++,Lr(i,e),c||e.indentLevel--,s&&l(!0)}function Aj(n,e){const{push:t,helper:r,indent:i,deindent:s,newline:o}=e,{needPauseTracking:a,needArraySpread:l}=n;l&&t("[...("),t(`_cache[${n.index}] || (`),a&&(i(),t(`${r(u0)}(-1`),n.inVOnce&&t(", true"),t("),"),o(),t("(")),t(`_cache[${n.index}] = `),Lr(n.value,e),a&&(t(`).cacheIndex = ${n.index},`),o(),t(`${r(u0)}(1),`),o(),t(`_cache[${n.index}]`),s()),t(")"),l&&t(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Mj=(n,e)=>{if(n.type===5)n.content=a1(n.content,e);else if(n.type===1){const t=Wr(n,"memo");for(let r=0;r<n.props.length;r++){const i=n.props[r];if(i.type===7&&i.name!=="for"){const s=i.exp,o=i.arg;s&&s.type===4&&!(i.name==="on"&&o)&&!(t&&o&&o.type===4&&o.content==="key")&&(i.exp=a1(s,e,i.name==="slot")),o&&o.type===4&&!o.isStatic&&(i.arg=a1(o,e))}}}};function a1(n,e,t=!1,r=!1,i=Object.create(e.identifiers)){return n}function LM(n){return tr(n)?n:n.type===4?n.content:n.children.map(LM).join("")}const Oj=R7(/^(if|else|else-if)$/,(n,e,t)=>_M(n,e,t,(r,i,s)=>{const o=t.parent.children;let a=o.indexOf(r),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(s)r.codegenNode=pS(i,l,t);else{const u=Ij(r.codegenNode);u.alternate=pS(i,l+r.branches.length-1,t)}}}));function _M(n,e,t,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const i=e.exp?e.exp.loc:n.loc;t.onError(on(28,e.loc)),e.exp=ut("true",!1,i)}if(e.name==="if"){const i=dS(n,e),s={type:9,loc:oj(n.loc),branches:[i]};if(t.replaceNode(s),r)return r(s,i,!0)}else{const i=t.parent.children;let s=i.indexOf(n);for(;s-->=-1;){const o=i[s];if(o&&o.type===3){t.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){t.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&t.onError(on(30,n.loc)),t.removeNode();const a=dS(n,e);o.branches.push(a);const l=r&&r(o,a,!1);op(a,t),l&&l(),t.currentNode=null}else t.onError(on(30,n.loc));break}}}function dS(n,e){const t=n.tagType===3;return{type:10,loc:n.loc,condition:e.name==="else"?void 0:e.exp,children:t&&!Wr(n,"for")?n.children:[n],userKey:sp(n,"key"),isTemplateIf:t}}function pS(n,e,t){return n.condition?Eg(n.condition,mS(n,e,t),jn(t.helper(Bh),['""',"true"])):mS(n,e,t)}function mS(n,e,t){const{helper:r}=t,i=Tn("key",ut(`${e}`,!1,rr,2)),{children:s}=n,o=s[0];if(s.length!==1||o.type!==1)if(s.length===1&&o.type===11){const l=o.codegenNode;return h0(l,i,t),l}else return hh(t,r(uh),ji([i]),s,64,void 0,void 0,!0,!1,!1,n.loc);else{const l=o.codegenNode,u=bM(l);return u.type===13&&Yy(u,t),h0(u,i,t),l}}function Ij(n){for(;;)if(n.type===19)if(n.alternate.type===19)n=n.alternate;else return n;else n.type===20&&(n=n.value)}const BM=(n,e,t)=>{const{modifiers:r,loc:i}=n,s=n.arg;let{exp:o}=n;if(o&&o.type===4&&!o.content.trim()&&(o=void 0),!o){if(s.type!==4||!s.isStatic)return t.onError(on(52,s.loc)),{props:[Tn(s,ut("",!0,i))]};FM(n),o=n.exp}return s.type!==4?(s.children.unshift("("),s.children.push(') || ""')):s.isStatic||(s.content=s.content?`${s.content} || ""`:'""'),r.some(a=>a.content==="camel")&&(s.type===4?s.isStatic?s.content=ml(s.content):s.content=`${t.helperString(Cg)}(${s.content})`:(s.children.unshift(`${t.helperString(Cg)}(`),s.children.push(")"))),t.inSSR||(r.some(a=>a.content==="prop")&&gS(s,"."),r.some(a=>a.content==="attr")&&gS(s,"^")),{props:[Tn(s,o)]}},FM=(n,e)=>{const t=n.arg,r=ml(t.content);n.exp=ut(r,!1,t.loc)},gS=(n,e)=>{n.type===4?n.isStatic?n.content=e+n.content:n.content=`\`${e}\${${n.content}}\``:(n.children.unshift(`'${e}' + (`),n.children.push(")"))},Dj=R7("for",(n,e,t)=>{const{helper:r,removeHelper:i}=t;return $M(n,e,t,s=>{const o=jn(r(Wy),[s.source]),a=dh(n),l=Wr(n,"memo"),u=sp(n,"key",!1,!0);u&&u.type===7&&!u.exp&&FM(u);let h=u&&(u.type===6?u.value?ut(u.value.content,!0):void 0:u.exp);const f=u&&h?Tn("key",h):null,d=s.source.type===4&&s.source.constType>0,p=d?64:u?128:256;return s.codegenNode=hh(t,r(uh),void 0,o,p,void 0,void 0,!0,!d,!1,n.loc),()=>{let m;const{children:g}=s,y=g.length!==1||g[0].type!==1,v=c0(n)?n:a&&n.children.length===1&&c0(n.children[0])?n.children[0]:null;if(v?(m=v.codegenNode,a&&f&&h0(m,f,t)):y?m=hh(t,r(uh),f?ji([f]):void 0,n.children,64,void 0,void 0,!0,void 0,!1):(m=g[0].codegenNode,a&&f&&h0(m,f,t),m.isBlock!==!d&&(m.isBlock?(i(kl),i(Vu(t.inSSR,m.isComponent))):i(zu(t.inSSR,m.isComponent))),m.isBlock=!d,m.isBlock?(r(kl),r(Vu(t.inSSR,m.isComponent))):r(zu(t.inSSR,m.isComponent))),l){const x=$u(Mg(s.parseResult,[ut("_cached")]));x.body=aM([cs(["const _memo = (",l.exp,")"]),cs(["if (_cached",...h?[" && _cached.key === ",h]:[],` && ${t.helperString(A7)}(_cached, _memo)) return _cached`]),cs(["const _item = ",m]),ut("_item.memo = _memo"),ut("return _item")]),o.arguments.push(x,ut("_cache"),ut(String(t.cached.length))),t.cached.push(null)}else o.arguments.push($u(Mg(s.parseResult),m,!0))}})});function $M(n,e,t,r){if(!e.exp){t.onError(on(31,e.loc));return}const i=e.forParseResult;if(!i){t.onError(on(32,e.loc));return}_7(i);const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=t,{source:l,value:u,key:c,index:h}=i,f={type:11,loc:e.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:h,parseResult:i,children:dh(n)?n.children:[n]};t.replaceNode(f),a.vFor++;const d=r&&r(f);return()=>{a.vFor--,d&&d()}}function _7(n,e){n.finalized||(n.finalized=!0)}function Mg({value:n,key:e,index:t},r=[]){return Nj([n,e,t,...r])}function Nj(n){let e=n.length;for(;e--&&!n[e];);return n.slice(0,e+1).map((t,r)=>t||ut("_".repeat(r+1),!1))}const yS=ut("undefined",!1),zM=(n,e)=>{if(n.type===1&&(n.tagType===1||n.tagType===3)){const t=Wr(n,"slot");if(t)return t.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},Pj=(n,e)=>{let t;if(dh(n)&&n.props.some(D7)&&(t=Wr(n,"for"))){const r=t.forParseResult;if(r){_7(r);const{value:i,key:s,index:o}=r,{addIdentifiers:a,removeIdentifiers:l}=e;return i&&a(i),s&&a(s),o&&a(o),()=>{i&&l(i),s&&l(s),o&&l(o)}}}},Rj=(n,e,t,r)=>$u(n,t,!1,!0,t.length?t[0].loc:r);function VM(n,e,t=Rj){e.helper(Ky);const{children:r,loc:i}=n,s=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=Wr(n,"slot",!0);if(l){const{arg:g,exp:y}=l;g&&!Ur(g)&&(a=!0),s.push(Tn(g||ut("default",!0),t(y,void 0,r,i)))}let u=!1,c=!1;const h=[],f=new Set;let d=0;for(let g=0;g<r.length;g++){const y=r[g];let v;if(!dh(y)||!(v=Wr(y,"slot",!0))){y.type!==3&&h.push(y);continue}if(l){e.onError(on(37,v.loc));break}u=!0;const{children:x,loc:k}=y,{arg:C=ut("default",!0),exp:w,loc:M}=v;let D;Ur(C)?D=C?C.content:"default":a=!0;const A=Wr(y,"for"),E=t(w,A,x,k);let N,I;if(N=Wr(y,"if"))a=!0,o.push(Eg(N.exp,Gp(C,E,d++),yS));else if(I=Wr(y,/^else(-if)?$/,!0)){let L=g,F;for(;L--&&(F=r[L],!(F.type!==3&&Fb(F))););if(F&&dh(F)&&Wr(F,/^(else-)?if$/)){let W=o[o.length-1];for(;W.alternate.type===19;)W=W.alternate;W.alternate=I.exp?Eg(I.exp,Gp(C,E,d++),yS):Gp(C,E,d++)}else e.onError(on(30,I.loc))}else if(A){a=!0;const L=A.forParseResult;L?(_7(L),o.push(jn(e.helper(Wy),[L.source,$u(Mg(L),Gp(C,E),!0)]))):e.onError(on(32,A.loc))}else{if(D){if(f.has(D)){e.onError(on(38,M));continue}f.add(D),D==="default"&&(c=!0)}s.push(Tn(C,E))}}if(!l){const g=(y,v)=>{const x=t(y,void 0,v,i);return e.compatConfig&&(x.isNonScopedSlot=!0),Tn("default",x)};u?h.length&&h.some(y=>Fb(y))&&(c?e.onError(on(39,h[0].loc)):s.push(g(void 0,h))):s.push(g(void 0,r))}const p=a?2:l1(n.children)?3:1;let m=ji(s.concat(Tn("_",ut(p+"",!1))),i);return o.length&&(m=jn(e.helper(E7),[m,gl(o)])),{slots:m,hasDynamicSlots:a}}function Gp(n,e,t){const r=[Tn("name",n),Tn("fn",e)];return t!=null&&r.push(Tn("key",ut(String(t),!0))),ji(r)}function l1(n){for(let e=0;e<n.length;e++){const t=n[e];switch(t.type){case 1:if(t.tagType===2||l1(t.children))return!0;break;case 9:if(l1(t.branches))return!0;break;case 10:case 11:if(l1(t.children))return!0;break}}return!1}function Fb(n){return n.type!==2&&n.type!==12?!0:n.type===2?!!n.content.trim():Fb(n.content)}const HM=new WeakMap,jM=(n,e)=>function(){if(n=e.currentNode,!(n.type===1&&(n.tagType===0||n.tagType===1)))return;const{tag:r,props:i}=n,s=n.tagType===1;let o=s?WM(n,e):`"${r}"`;const a=vA(o)&&o.callee===zy;let l,u,c=0,h,f,d,p=a||o===qc||o===Ly||!s&&(r==="svg"||r==="foreignObject"||r==="math");if(i.length>0){const m=B7(n,e,void 0,s,a);l=m.props,c=m.patchFlag,f=m.dynamicPropNames;const g=m.directives;d=g&&g.length?gl(g.map(y=>qM(y,e))):void 0,m.shouldUseBlock&&(p=!0)}if(n.children.length>0)if(o===a0&&(p=!0,c|=1024),s&&o!==qc&&o!==a0){const{slots:g,hasDynamicSlots:y}=VM(n,e);u=g,y&&(c|=1024)}else if(n.children.length===1&&o!==qc){const g=n.children[0],y=g.type,v=y===5||y===8;v&&gi(g,e)===0&&(c|=1),v||y===2?u=g:u=n.children}else u=n.children;f&&f.length&&(h=_j(f)),n.codegenNode=hh(e,o,l,u,c===0?void 0:c,h,d,!!p,!1,s,n.loc)};function WM(n,e,t=!1){let{tag:r}=n;const i=$b(r),s=sp(n,"is",!1,!0);if(s)if(i||Cu("COMPILER_IS_ON_ELEMENT",e)){let a;if(s.type===6?a=s.value&&ut(s.value.content,!0):(a=s.exp,a||(a=ut("is",!1,s.arg.loc))),a)return jn(e.helper(zy),[a])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const o=O7(r)||e.isBuiltInComponent(r);return o?(t||e.helper(o),o):(e.helper($y),e.components.add(r),ph(r,"component"))}function B7(n,e,t=n.props,r,i,s=!1){const{tag:o,loc:a,children:l}=n;let u=[];const c=[],h=[],f=l.length>0;let d=!1,p=0,m=!1,g=!1,y=!1,v=!1,x=!1,k=!1;const C=[],w=E=>{u.length&&(c.push(ji(vS(u),a)),u=[]),E&&c.push(E)},M=()=>{e.scopes.vFor>0&&u.push(Tn(ut("ref_for",!0),ut("true")))},D=({key:E,value:N})=>{if(Ur(E)){const I=E.content,L=bA(I);if(L&&(!r||i)&&I.toLowerCase()!=="onclick"&&I!=="onUpdate:modelValue"&&!D8(I)&&(v=!0),L&&D8(I)&&(k=!0),L&&N.type===14&&(N=N.arguments[0]),N.type===20||(N.type===4||N.type===8)&&gi(N,e)>0)return;I==="ref"?m=!0:I==="class"?g=!0:I==="style"?y=!0:I!=="key"&&!C.includes(I)&&C.push(I),r&&(I==="class"||I==="style")&&!C.includes(I)&&C.push(I)}else x=!0};for(let E=0;E<t.length;E++){const N=t[E];if(N.type===6){const{loc:I,name:L,nameLoc:F,value:W}=N;let G=!0;if(L==="ref"&&(m=!0,M()),L==="is"&&($b(o)||W&&W.content.startsWith("vue:")||Cu("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(Tn(ut(L,!0,F),ut(W?W.content:"",G,W?W.loc:I)))}else{const{name:I,arg:L,exp:F,loc:W,modifiers:G}=N,ee=I==="bind",de=I==="on";if(I==="slot"){r||e.onError(on(40,W));continue}if(I==="once"||I==="memo"||I==="is"||ee&&al(L,"is")&&($b(o)||Cu("COMPILER_IS_ON_ELEMENT",e))||de&&s)continue;if((ee&&al(L,"key")||de&&f&&al(L,"vue:before-update"))&&(d=!0),ee&&al(L,"ref")&&M(),!L&&(ee||de)){if(x=!0,F)if(ee){if(w(),Cu("COMPILER_V_BIND_OBJECT_ORDER",e)){c.unshift(F);continue}M(),w(),c.push(F)}else w({type:14,loc:W,callee:e.helper(Gy),arguments:r?[F]:[F,"true"]});else e.onError(on(ee?34:35,W));continue}ee&&G.some(R=>R.content==="prop")&&(p|=32);const ge=e.directiveTransforms[I];if(ge){const{props:R,needRuntime:fe}=ge(N,n,e);!s&&R.forEach(D),de&&L&&!Ur(L)?w(ji(R,a)):u.push(...R),fe&&(h.push(N),u7(fe)&&HM.set(N,fe))}else $F(I)||(h.push(N),f&&(d=!0))}}let A;if(c.length?(w(),c.length>1?A=jn(e.helper(l0),c,a):A=c[0]):u.length&&(A=ji(vS(u),a)),x?p|=16:(g&&!r&&(p|=2),y&&!r&&(p|=4),C.length&&(p|=8),v&&(p|=32)),!d&&(p===0||p===32)&&(m||k||h.length>0)&&(p|=512),!e.inSSR&&A)switch(A.type){case 15:let E=-1,N=-1,I=!1;for(let W=0;W<A.properties.length;W++){const G=A.properties[W].key;Ur(G)?G.content==="class"?E=W:G.content==="style"&&(N=W):G.isHandlerKey||(I=!0)}const L=A.properties[E],F=A.properties[N];I?A=jn(e.helper(ch),[A]):(L&&!Ur(L.value)&&(L.value=jn(e.helper(qy),[L.value])),F&&(y||F.value.type===4&&F.value.content.trim()[0]==="["||F.value.type===17)&&(F.value=jn(e.helper(Uy),[F.value])));break;case 14:break;default:A=jn(e.helper(ch),[jn(e.helper(Fh),[A])]);break}return{props:A,directives:h,patchFlag:p,dynamicPropNames:C,shouldUseBlock:d}}function vS(n){const e=new Map,t=[];for(let r=0;r<n.length;r++){const i=n[r];if(i.key.type===8||!i.key.isStatic){t.push(i);continue}const s=i.key.content,o=e.get(s);o?(s==="style"||s==="class"||bA(s))&&Lj(o,i):(e.set(s,i),t.push(i))}return t}function Lj(n,e){n.value.type===17?n.value.elements.push(e.value):n.value=gl([n.value,e.value],n.loc)}function qM(n,e){const t=[],r=HM.get(n);r?t.push(e.helperString(r)):(e.helper(Vy),e.directives.add(n.name),t.push(ph(n.name,"directive")));const{loc:i}=n;if(n.exp&&t.push(n.exp),n.arg&&(n.exp||t.push("void 0"),t.push(n.arg)),Object.keys(n.modifiers).length){n.arg||(n.exp||t.push("void 0"),t.push("void 0"));const s=ut("true",!1,i);t.push(ji(n.modifiers.map(o=>Tn(o,s)),i))}return gl(t,n.loc)}function _j(n){let e="[";for(let t=0,r=n.length;t<r;t++)e+=JSON.stringify(n[t]),t<r-1&&(e+=", ");return e+"]"}function $b(n){return n==="component"||n==="Component"}const Bj=(n,e)=>{if(c0(n)){const{children:t,loc:r}=n,{slotName:i,slotProps:s}=UM(n,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),t.length&&(o[3]=$u([],t,!1,!1,r),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),n.codegenNode=jn(e.helper(T7),o,r)}};function UM(n,e){let t='"default"',r;const i=[];for(let s=0;s<n.props.length;s++){const o=n.props[s];if(o.type===6)o.value&&(o.name==="name"?t=JSON.stringify(o.value.content):(o.name=ml(o.name),i.push(o)));else if(o.name==="bind"&&al(o.arg,"name")){if(o.exp)t=o.exp;else if(o.arg&&o.arg.type===4){const a=ml(o.arg.content);t=o.exp=ut(a,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&Ur(o.arg)&&(o.arg.content=ml(o.arg.content)),i.push(o)}if(i.length>0){const{props:s,directives:o}=B7(n,e,i,!1,!1);r=s,o.length&&e.onError(on(36,o[0].loc))}return{slotName:t,slotProps:r}}const F7=(n,e,t,r)=>{const{loc:i,modifiers:s,arg:o}=n;!n.exp&&!s.length&&t.onError(on(35,i));let a;if(o.type===4)if(o.isStatic){let h=o.content;h.startsWith("vue:")&&(h=`vnode-${h.slice(4)}`);const f=e.tagType!==0||h.startsWith("vnode")||!/[A-Z]/.test(h)?VF(ml(h)):`on:${h}`;a=ut(f,!0,o.loc)}else a=cs([`${t.helperString(Tg)}(`,o,")"]);else a=o,a.children.unshift(`${t.helperString(Tg)}(`),a.children.push(")");let l=n.exp;l&&!l.content.trim()&&(l=void 0);let u=t.cacheHandlers&&!l&&!t.inVOnce;if(l){const h=I7(l),f=!(h||mM(l)),d=l.content.includes(";");(f||u&&h)&&(l=cs([`${f?"$event":"(...args)"} => ${d?"{":"("}`,l,d?"}":")"]))}let c={props:[Tn(a,l||ut("() => {}",!1,i))]};return r&&(c=r(c)),u&&(c.props[0].value=t.cache(c.props[0].value)),c.props.forEach(h=>h.key.isHandlerKey=!0),c},Fj=(n,e)=>{if(n.type===0||n.type===1||n.type===11||n.type===10)return()=>{const t=n.children;let r,i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(r1(o)){i=!0;for(let a=s+1;a<t.length;a++){const l=t[a];if(r1(l))r||(r=t[s]=cs([o],o.loc)),r.children.push(" + ",l),t.splice(a,1),a--;else{r=void 0;break}}}}if(!(!i||t.length===1&&(n.type===0||n.type===1&&n.tagType===0&&!n.props.find(s=>s.type===7&&!e.directiveTransforms[s.name])&&n.tag!=="template")))for(let s=0;s<t.length;s++){const o=t[s];if(r1(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&gi(o,e)===0&&a.push("1"),t[s]={type:12,content:o,loc:o.loc,codegenNode:jn(e.helper(Fy),a)}}}}},bS=new WeakSet,$j=(n,e)=>{if(n.type===1&&Wr(n,"once",!0))return bS.has(n)||e.inVOnce||e.inSSR?void 0:(bS.add(n),e.inVOnce=!0,e.helper(u0),()=>{e.inVOnce=!1;const t=e.currentNode;t.codegenNode&&(t.codegenNode=e.cache(t.codegenNode,!0,!0))})},$7=(n,e,t)=>{const{exp:r,arg:i}=n;if(!r)return t.onError(on(41,n.loc)),Kp();const s=r.loc.source.trim(),o=r.type===4?r.content:s,a=t.bindingMetadata[s];if(a==="props"||a==="props-aliased")return t.onError(on(44,r.loc)),Kp();if(!o.trim()||!I7(r))return t.onError(on(42,r.loc)),Kp();const l=i||ut("modelValue",!0),u=i?Ur(i)?`onUpdate:${ml(i.content)}`:cs(['"onUpdate:" + ',i]):"onUpdate:modelValue";let c;const h=t.isTS?"($event: any)":"$event";c=cs([`${h} => ((`,r,") = $event)"]);const f=[Tn(l,n.exp),Tn(u,c)];if(n.modifiers.length&&e.tagType===1){const d=n.modifiers.map(m=>m.content).map(m=>(ip(m)?m:JSON.stringify(m))+": true").join(", "),p=i?Ur(i)?`${i.content}Modifiers`:cs([i,' + "Modifiers"']):"modelModifiers";f.push(Tn(p,ut(`{ ${d} }`,!1,n.loc,2)))}return Kp(f)};function Kp(n=[]){return{props:n}}const zj=/[\w).+\-_$\]]/,Vj=(n,e)=>{Cu("COMPILER_FILTERS",e)&&(n.type===5?Og(n.content,e):n.type===1&&n.props.forEach(t=>{t.type===7&&t.name!=="for"&&t.exp&&Og(t.exp,e)}))};function Og(n,e){if(n.type===4)xS(n,e);else for(let t=0;t<n.children.length;t++){const r=n.children[t];typeof r=="object"&&(r.type===4?xS(r,e):r.type===8?Og(n,e):r.type===5&&Og(r.content,e))}}function xS(n,e){const t=n.content;let r=!1,i=!1,s=!1,o=!1,a=0,l=0,u=0,c=0,h,f,d,p,m=[];for(d=0;d<t.length;d++)if(f=h,h=t.charCodeAt(d),r)h===39&&f!==92&&(r=!1);else if(i)h===34&&f!==92&&(i=!1);else if(s)h===96&&f!==92&&(s=!1);else if(o)h===47&&f!==92&&(o=!1);else if(h===124&&t.charCodeAt(d+1)!==124&&t.charCodeAt(d-1)!==124&&!a&&!l&&!u)p===void 0?(c=d+1,p=t.slice(0,d).trim()):g();else{switch(h){case 34:i=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(h===47){let y=d-1,v;for(;y>=0&&(v=t.charAt(y),v===" ");y--);(!v||!zj.test(v))&&(o=!0)}}p===void 0?p=t.slice(0,d).trim():c!==0&&g();function g(){m.push(t.slice(c,d).trim()),c=d+1}if(m.length){for(d=0;d<m.length;d++)p=Hj(p,m[d],e);n.content=p,n.ast=void 0}}function Hj(n,e,t){t.helper(Hy);const r=e.indexOf("(");if(r<0)return t.filters.add(e),`${ph(e,"filter")}(${n})`;{const i=e.slice(0,r),s=e.slice(r+1);return t.filters.add(i),`${ph(i,"filter")}(${n}${s!==")"?","+s:s}`}}const wS=new WeakSet,jj=(n,e)=>{if(n.type===1){const t=Wr(n,"memo");return!t||wS.has(n)?void 0:(wS.add(n),()=>{const r=n.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(n.tagType!==1&&Yy(r,e),n.codegenNode=jn(e.helper(Xy),[t.exp,$u(void 0,r),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function GM(n){return[[$j,Oj,jj,Dj,Vj,Bj,jM,zM,Fj],{on:F7,bind:BM,model:$7}]}function KM(n,e={}){const t=e.onError||M7,r=e.mode==="module";e.prefixIdentifiers===!0?t(on(47)):r&&t(on(48));const i=!1;e.cacheHandlers&&t(on(49)),e.scopeId&&!r&&t(on(50));const s=aa({},e,{prefixIdentifiers:i}),o=tr(n)?P7(n,s):n,[a,l]=GM();return IM(o,aa({},s,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:aa({},l,e.directiveTransforms||{})})),NM(o,s)}const Wj={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},XM=()=>({props:[]});/**
* @vue/compiler-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const z7=Symbol(""),V7=Symbol(""),H7=Symbol(""),j7=Symbol(""),Ig=Symbol(""),W7=Symbol(""),q7=Symbol(""),U7=Symbol(""),G7=Symbol(""),K7=Symbol("");iM({[z7]:"vModelRadio",[V7]:"vModelCheckbox",[H7]:"vModelText",[j7]:"vModelSelect",[Ig]:"vModelDynamic",[W7]:"withModifiers",[q7]:"withKeys",[U7]:"vShow",[G7]:"Transition",[K7]:"TransitionGroup"});let mc;function qj(n,e=!1){return mc||(mc=document.createElement("div")),e?(mc.innerHTML=`<div foo="${n.replace(/"/g,"&quot;")}">`,mc.children[0].getAttribute("foo")):(mc.innerHTML=n,mc.textContent)}const X7={parseMode:"html",isVoidTag:qF,isNativeTag:n=>HF(n)||jF(n)||WF(n),isPreTag:n=>n==="pre",isIgnoreNewlineTag:n=>n==="pre"||n==="textarea",decodeEntities:qj,isBuiltInComponent:n=>{if(n==="Transition"||n==="transition")return G7;if(n==="TransitionGroup"||n==="transition-group")return K7},getNamespace(n,e,t){let r=e?e.ns:t;if(e&&r===2)if(e.tag==="annotation-xml"){if(n==="svg")return 1;e.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&n!=="mglyph"&&n!=="malignmark"&&(r=0);else e&&r===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(r=0);if(r===0){if(n==="svg")return 1;if(n==="math")return 2}return r}},YM=n=>{n.type===1&&n.props.forEach((e,t)=>{e.type===6&&e.name==="style"&&e.value&&(n.props[t]={type:7,name:"bind",arg:ut("style",!0,e.loc),exp:Uj(e.value.content,e.loc),modifiers:[],loc:e.loc})})},Uj=(n,e)=>{const t=UF(n);return ut(JSON.stringify(t),!1,e,3)};function ua(n,e){return on(n,e)}const Gj={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},Kj={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},Xj=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(ua(53,i)),e.children.length&&(t.onError(ua(54,i)),e.children.length=0),{props:[Tn(ut("innerHTML",!0,i),r||ut("",!0))]}},Yj=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(ua(55,i)),e.children.length&&(t.onError(ua(56,i)),e.children.length=0),{props:[Tn(ut("textContent",!0),r?gi(r,t)>0?r:jn(t.helperString(rp),[r],i):ut("",!0))]}},Jj=(n,e,t)=>{const r=$7(n,e,t);if(!r.props.length||e.tagType===1)return r;n.arg&&t.onError(ua(58,n.arg.loc));const{tag:i}=e,s=t.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||s){let o=H7,a=!1;if(i==="input"||s){const l=sp(e,"type");if(l){if(l.type===7)o=Ig;else if(l.value)switch(l.value.content){case"radio":o=z7;break;case"checkbox":o=V7;break;case"file":a=!0,t.onError(ua(59,n.loc));break}}else yM(e)&&(o=Ig)}else i==="select"&&(o=j7);a||(r.needRuntime=t.helper(o))}else t.onError(ua(57,n.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},Zj=My("passive,once,capture"),Qj=My("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),eW=My("left,right"),JM=My("onkeyup,onkeydown,onkeypress"),tW=(n,e,t,r)=>{const i=[],s=[],o=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&fh("COMPILER_V_ON_NATIVE",t)||Zj(l)?o.push(l):eW(l)?Ur(n)?JM(n.content.toLowerCase())?i.push(l):s.push(l):(i.push(l),s.push(l)):Qj(l)?s.push(l):i.push(l)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:o}},SS=(n,e)=>Ur(n)&&n.content.toLowerCase()==="onclick"?ut(e,!0):n.type!==4?cs(["(",n,`) === "onClick" ? "${e}" : (`,n,")"]):n,nW=(n,e,t)=>F7(n,e,t,r=>{const{modifiers:i}=n;if(!i.length)return r;let{key:s,value:o}=r.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=tW(s,i,t,n.loc);if(l.includes("right")&&(s=SS(s,"onContextmenu")),l.includes("middle")&&(s=SS(s,"onMouseup")),l.length&&(o=jn(t.helper(W7),[o,JSON.stringify(l)])),a.length&&(!Ur(s)||JM(s.content.toLowerCase()))&&(o=jn(t.helper(q7),[o,JSON.stringify(a)])),u.length){const c=u.map(yA).join("");s=Ur(s)?ut(`${s.content}${c}`,!0):cs(["(",s,`) + "${c}"`])}return{props:[Tn(s,o)]}}),rW=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(ua(61,i)),{props:[],needRuntime:t.helper(U7)}},iW=(n,e)=>{n.type===1&&n.tagType===0&&(n.tag==="script"||n.tag==="style")&&e.removeNode()},ZM=[YM],QM={cloak:XM,html:Xj,text:Yj,model:Jj,on:nW,show:rW};function sW(n,e={}){return KM(n,aa({},X7,e,{nodeTransforms:[iW,...ZM,...e.nodeTransforms||[]],directiveTransforms:aa({},QM,e.directiveTransforms||{}),transformHoist:null}))}function oW(n,e={}){return P7(n,aa({},X7,e))}const aW=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:w7,BindingTypes:Wj,CAMELIZE:Cg,CAPITALIZE:QA,CREATE_BLOCK:S7,CREATE_COMMENT:Bh,CREATE_ELEMENT_BLOCK:k7,CREATE_ELEMENT_VNODE:By,CREATE_SLOTS:E7,CREATE_STATIC:C7,CREATE_TEXT:Fy,CREATE_VNODE:_y,CompilerDeprecationTypes:EH,ConstantTypes:vH,DOMDirectiveTransforms:QM,DOMErrorCodes:Gj,DOMErrorMessages:Kj,DOMNodeTransforms:ZM,ElementTypes:yH,ErrorCodes:OH,FRAGMENT:uh,GUARD_REACTIVE_PROPS:Fh,IS_MEMO_SAME:A7,IS_REF:rM,KEEP_ALIVE:a0,MERGE_PROPS:l0,NORMALIZE_CLASS:qy,NORMALIZE_PROPS:ch,NORMALIZE_STYLE:Uy,Namespaces:mH,NodeTypes:gH,OPEN_BLOCK:kl,POP_SCOPE_ID:tM,PUSH_SCOPE_ID:eM,RENDER_LIST:Wy,RENDER_SLOT:T7,RESOLVE_COMPONENT:$y,RESOLVE_DIRECTIVE:Vy,RESOLVE_DYNAMIC_COMPONENT:zy,RESOLVE_FILTER:Hy,SET_BLOCK_TRACKING:u0,SUSPENSE:Ly,TELEPORT:qc,TO_DISPLAY_STRING:rp,TO_HANDLERS:Gy,TO_HANDLER_KEY:Tg,TRANSITION:G7,TRANSITION_GROUP:K7,TS_NODE_TYPES:cM,UNREF:nM,V_MODEL_CHECKBOX:V7,V_MODEL_DYNAMIC:Ig,V_MODEL_RADIO:z7,V_MODEL_SELECT:j7,V_MODEL_TEXT:H7,V_ON_WITH_KEYS:q7,V_ON_WITH_MODIFIERS:W7,V_SHOW:U7,WITH_CTX:Ky,WITH_DIRECTIVES:jy,WITH_MEMO:Xy,advancePositionWithClone:KH,advancePositionWithMutation:gM,assert:XH,baseCompile:KM,baseParse:P7,buildDirectiveArgs:qM,buildProps:B7,buildSlots:VM,checkCompatEnabled:fh,compile:sW,convertToBlock:Yy,createArrayExpression:gl,createAssignmentExpression:SH,createBlockStatement:aM,createCacheExpression:oM,createCallExpression:jn,createCompilerError:on,createCompoundExpression:cs,createConditionalExpression:Eg,createDOMCompilerError:ua,createForLoopParams:Mg,createFunctionExpression:$u,createIfStatement:wH,createInterpolation:bH,createObjectExpression:ji,createObjectProperty:Tn,createReturnStatement:CH,createRoot:sM,createSequenceExpression:kH,createSimpleExpression:ut,createStructuralDirectiveTransform:R7,createTemplateLiteral:xH,createTransformContext:OM,createVNodeCall:hh,errorMessages:IH,extractIdentifiers:Zo,findDir:Wr,findProp:sp,forAliasRE:xM,generate:NM,generateCodeFrame:GF,getBaseTransformPreset:GM,getConstantType:gi,getMemoedVNodeCall:bM,getVNodeBlockHelper:Vu,getVNodeHelper:zu,hasDynamicKeyVBind:yM,hasScopeRef:Ms,helperNameMap:Fu,injectProp:h0,isCoreComponent:O7,isFnExpression:mM,isFnExpressionBrowser:pM,isFnExpressionNode:GH,isFunctionType:$H,isInDestructureAssignment:PH,isInNewExpression:RH,isMemberExpression:I7,isMemberExpressionBrowser:dM,isMemberExpressionNode:qH,isReferencedIdentifier:NH,isSimpleIdentifier:ip,isSlotOutlet:c0,isStaticArgOf:al,isStaticExp:Ur,isStaticProperty:uM,isStaticPropertyKey:zH,isTemplateNode:dh,isText:r1,isVPre:Lb,isVSlot:D7,locStub:rr,noopDirectiveTransform:XM,parse:oW,parserOptions:X7,processExpression:a1,processFor:$M,processIf:_M,processSlotOutlet:UM,registerRuntimeHelpers:iM,resolveComponentType:WM,stringifyExpression:LM,toValidAssetId:ph,trackSlotScopes:zM,trackVForSlotScopes:Pj,transform:IM,transformBind:BM,transformElement:jM,transformExpression:Mj,transformModel:$7,transformOn:F7,transformStyle:YM,traverseNode:op,unwrapTSNode:hM,walkBlockDeclarations:_H,walkFunctionParams:LH,walkIdentifiers:DH,warnDeprecation:MH},Symbol.toStringTag,{value:"Module"})),lW=Ry(aW),uW=Ry(KF),cW=Ry(XF);/**
* vue v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var kS;function hW(){return kS||(kS=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=lW,t=uW,r=cW;function i(l){var u=Object.create(null);if(l)for(var c in l)u[c]=l[c];return u.default=l,Object.freeze(u)}var s=i(t);const o=Object.create(null);function a(l,u){if(!r.isString(l))if(l.nodeType)l=l.innerHTML;else return r.NOOP;const c=r.genCacheKey(l,u),h=o[c];if(h)return h;if(l[0]==="#"){const m=document.querySelector(l);l=m?m.innerHTML:""}const f=r.extend({hoistStatic:!0,onError:void 0,onWarn:r.NOOP},u);!f.isCustomElement&&typeof customElements<"u"&&(f.isCustomElement=m=>!!customElements.get(m));const{code:d}=e.compile(l,f),p=new Function("Vue",d)(s);return p._rc=!0,o[c]=p}t.registerRuntimeCompiler(a),n.compile=a,Object.keys(t).forEach(function(l){l!=="default"&&!Object.prototype.hasOwnProperty.call(n,l)&&(n[l]=t[l])})}(T2)),T2}var CS;function fW(){return CS||(CS=1,C2.exports=hW()),C2.exports}/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function TS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TS(Object(t),!0).forEach(function(r){dW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function u1(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u1=function(e){return typeof e}:u1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u1(n)}function dW(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ys(){return ys=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ys.apply(this,arguments)}function pW(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function mW(n,e){if(n==null)return{};var t=pW(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gW(n){return yW(n)||vW(n)||bW(n)||xW()}function yW(n){if(Array.isArray(n))return zb(n)}function vW(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function bW(n,e){if(n){if(typeof n=="string")return zb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zb(n,e)}}function zb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wW="1.14.0";function ca(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ea=ca(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),lp=ca(/Edge/i),ES=ca(/firefox/i),Od=ca(/safari/i)&&!ca(/chrome/i)&&!ca(/android/i),eO=ca(/iP(ad|od|hone)/i),SW=ca(/chrome/i)&&ca(/android/i),tO={capture:!1,passive:!1};function Mt(n,e,t){n.addEventListener(e,t,!Ea&&tO)}function xt(n,e,t){n.removeEventListener(e,t,!Ea&&tO)}function Dg(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function kW(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Ns(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Dg(n,e):Dg(n,e))||r&&n===t)return n;if(n===t)break}while(n=kW(n))}return null}var AS=/\s+/g;function Sn(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(AS," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(AS," ")}}function _e(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Tu(n,e){var t="";if(typeof n=="string")t=n;else do{var r=_e(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function nO(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function po(){var n=document.scrollingElement;return n||document.documentElement}function fn(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,u,c,h;if(n!==window&&n.parentNode&&n!==po()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Ea))do if(i&&i.getBoundingClientRect&&(_e(i,"transform")!=="none"||t&&_e(i,"position")!=="static")){var f=i.getBoundingClientRect();o-=f.top+parseInt(_e(i,"border-top-width")),a-=f.left+parseInt(_e(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&n!==window){var d=Tu(i||n),p=d&&d.a,m=d&&d.d;d&&(o/=m,a/=p,h/=p,c/=m,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function MS(n,e,t){for(var r=ll(n,!0),i=fn(n)[e];r;){var s=fn(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===po())break;r=ll(r,!1)}return!1}function mh(n,e,t,r){for(var i=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==nt.ghost&&(r||o[s]!==nt.dragged)&&Ns(o[s],t.draggable,n,!1)){if(i===e)return o[s];i++}s++}return null}function Y7(n,e){for(var t=n.lastElementChild;t&&(t===nt.ghost||_e(t,"display")==="none"||e&&!Dg(t,e));)t=t.previousElementSibling;return t||null}function Dn(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==nt.clone&&(!e||Dg(n,e))&&t++;return t}function OS(n){var e=0,t=0,r=po();if(n)do{var i=Tu(n),s=i.a,o=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function CW(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function ll(n,e){if(!n||!n.getBoundingClientRect)return po();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=_e(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return po();if(r||e)return t;r=!0}}while(t=t.parentNode);return po()}function TW(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function A2(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Id;function rO(n,e){return function(){if(!Id){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),Id=setTimeout(function(){Id=void 0},e)}}}function EW(){clearTimeout(Id),Id=void 0}function iO(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function J7(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function IS(n,e){_e(n,"position","absolute"),_e(n,"top",e.top),_e(n,"left",e.left),_e(n,"width",e.width),_e(n,"height",e.height)}function M2(n){_e(n,"position",""),_e(n,"top",""),_e(n,"left",""),_e(n,"width",""),_e(n,"height","")}var Nr="Sortable"+new Date().getTime();function AW(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(_e(i,"display")==="none"||i===nt.ghost)){n.push({target:i,rect:fn(i)});var s=vo({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=Tu(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(CW(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;n.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=fn(u),f=u.prevFromRect,d=u.prevToRect,p=a.rect,m=Tu(u,!0);m&&(h.top-=m.f,h.left-=m.e),u.toRect=h,u.thisAnimationDuration&&A2(f,h)&&!A2(c,h)&&(p.top-h.top)/(p.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=OW(p,f,d,i.options)),A2(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=i.options.animation),i.animate(u,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,o){if(o){_e(r,"transition",""),_e(r,"transform","");var a=Tu(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-s.left)/(l||1),h=(i.top-s.top)/(u||1);r.animatingX=!!c,r.animatingY=!!h,_e(r,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=MW(r),_e(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),_e(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){_e(r,"transition",""),_e(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function MW(n){return n.offsetWidth}function OW(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var gc=[],O2={initializeByDefault:!0},up={mount:function(e){for(var t in O2)O2.hasOwnProperty(t)&&!(t in e)&&(e[t]=O2[t]);gc.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),gc.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";gc.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](vo({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](vo({sortable:t},r)))})},initializePlugins:function(e,t,r,i){gc.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,ys(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return gc.forEach(function(i){typeof i.eventProperties=="function"&&ys(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return gc.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function zf(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,u=n.newIndex,c=n.oldDraggableIndex,h=n.newDraggableIndex,f=n.originalEvent,d=n.putSortable,p=n.extraEventProperties;if(e=e||t&&t[Nr],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ea&&!lp?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||t,m.from=a||t,m.item=i||t,m.clone=s,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=h,m.originalEvent=f,m.pullMode=d?d.lastPutMode:void 0;var v=vo(vo({},p),up.getEventProperties(r,e));for(var x in v)m[x]=v[x];t&&t.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var IW=["evt"],oi=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=mW(r,IW);up.pluginEvent.bind(nt)(e,t,vo({dragEl:me,parentEl:On,ghostEl:dt,rootEl:cn,nextEl:iu,lastDownEl:c1,cloneEl:In,cloneHidden:tl,dragStarted:Vf,putSortable:pr,activeSortable:nt.active,originalEvent:i,oldIndex:Fc,oldDraggableIndex:Dd,newIndex:Li,newDraggableIndex:Xa,hideGhostForTarget:lO,unhideGhostForTarget:uO,cloneNowHidden:function(){tl=!0},cloneNowShown:function(){tl=!1},dispatchSortableEvent:function(a){jr({sortable:t,name:a,originalEvent:i})}},s))};function jr(n){zf(vo({putSortable:pr,cloneEl:In,targetEl:me,rootEl:cn,oldIndex:Fc,oldDraggableIndex:Dd,newIndex:Li,newDraggableIndex:Xa},n))}var me,On,dt,cn,iu,c1,In,tl,Fc,Li,Dd,Xa,Xp,pr,kc=!1,Ng=!1,Pg=[],ql,Ts,I2,D2,DS,NS,Vf,yc,Nd,Pd=!1,Yp=!1,h1,Mr,N2=[],Vb=!1,Rg=[],Zy=typeof document<"u",Jp=eO,PS=lp||Ea?"cssFloat":"float",DW=Zy&&!SW&&!eO&&"draggable"in document.createElement("div"),sO=function(){if(Zy){if(Ea)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),oO=function(e,t){var r=_e(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=mh(e,0,t),o=mh(e,1,t),a=s&&_e(s),l=o&&_e(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+fn(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+fn(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[PS]==="none"||o&&r[PS]==="none"&&u+c>i)?"vertical":"horizontal"},NW=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,u=r?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},PW=function(e,t){var r;return Pg.some(function(i){var s=i[Nr].options.emptyInsertThreshold;if(!(!s||Y7(i))){var o=fn(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=i}}),r},aO=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var f=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===f||s.join&&s.indexOf(f)>-1}}var r={},i=e.group;(!i||u1(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},lO=function(){!sO&&dt&&_e(dt,"display","none")},uO=function(){!sO&&dt&&_e(dt,"display","")};Zy&&document.addEventListener("click",function(n){if(Ng)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Ng=!1,!1},!0);var Ul=function(e){if(me){e=e.touches?e.touches[0]:e;var t=PW(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Nr]._onDragOver(r)}}},RW=function(e){me&&me.parentNode[Nr]._isOutsideThisEl(e.target)};function nt(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=ys({},e),n[Nr]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oO(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:nt.supportPointer!==!1&&"PointerEvent"in window&&!Od,emptyInsertThreshold:5};up.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);aO(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:DW,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Mt(n,"pointerdown",this._onTapStart):(Mt(n,"mousedown",this._onTapStart),Mt(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Mt(n,"dragover",this),Mt(n,"dragenter",this)),Pg.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ys(this,AW())}nt.prototype={constructor:nt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yc=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,me):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(HW(r),!me&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Od&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ns(l,i.draggable,r,!1),!(l&&l.animated)&&c1!==l)){if(Fc=Dn(l),Dd=Dn(l,i.draggable),typeof c=="function"){if(c.call(this,e,l,this)){jr({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),oi("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=Ns(u,h.trim(),r,!1),h)return jr({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),oi("filter",t,{evt:e}),!0}),c)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Ns(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!me&&r.parentNode===s){var u=fn(r);if(cn=s,me=r,On=me.parentNode,iu=me.nextSibling,c1=r,Xp=o.group,nt.dragged=me,ql={target:me,clientX:(t||e).clientX,clientY:(t||e).clientY},DS=ql.clientX-u.left,NS=ql.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,me.style["will-change"]="all",l=function(){if(oi("delayEnded",i,{evt:e}),nt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!ES&&i.nativeDraggable&&(me.draggable=!0),i._triggerDragStart(e,t),jr({sortable:i,name:"choose",originalEvent:e}),Sn(me,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){nO(me,c.trim(),P2)}),Mt(a,"dragover",Ul),Mt(a,"mousemove",Ul),Mt(a,"touchmove",Ul),Mt(a,"mouseup",i._onDrop),Mt(a,"touchend",i._onDrop),Mt(a,"touchcancel",i._onDrop),ES&&this.nativeDraggable&&(this.options.touchStartThreshold=4,me.draggable=!0),oi("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(lp||Ea))){if(nt.eventCanceled){this._onDrop();return}Mt(a,"mouseup",i._disableDelayedDrag),Mt(a,"touchend",i._disableDelayedDrag),Mt(a,"touchcancel",i._disableDelayedDrag),Mt(a,"mousemove",i._delayedDragTouchMoveHandler),Mt(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Mt(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){me&&P2(me),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xt(e,"mouseup",this._disableDelayedDrag),xt(e,"touchend",this._disableDelayedDrag),xt(e,"touchcancel",this._disableDelayedDrag),xt(e,"mousemove",this._delayedDragTouchMoveHandler),xt(e,"touchmove",this._delayedDragTouchMoveHandler),xt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Mt(document,"pointermove",this._onTouchMove):t?Mt(document,"touchmove",this._onTouchMove):Mt(document,"mousemove",this._onTouchMove):(Mt(me,"dragend",this),Mt(cn,"dragstart",this._onDragStart));try{document.selection?f1(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(kc=!1,cn&&me){oi("dragStarted",this,{evt:t}),this.nativeDraggable&&Mt(document,"dragover",RW);var r=this.options;!e&&Sn(me,r.dragClass,!1),Sn(me,r.ghostClass,!0),nt.active=this,e&&this._appendGhost(),jr({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ts){this._lastX=Ts.clientX,this._lastY=Ts.clientY,lO();for(var e=document.elementFromPoint(Ts.clientX,Ts.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ts.clientX,Ts.clientY),e!==t);)t=e;if(me.parentNode[Nr]._isOutsideThisEl(e),t)do{if(t[Nr]){var r=void 0;if(r=t[Nr]._onDragOver({clientX:Ts.clientX,clientY:Ts.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);uO()}},_onTouchMove:function(e){if(ql){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=dt&&Tu(dt,!0),a=dt&&o&&o.a,l=dt&&o&&o.d,u=Jp&&Mr&&OS(Mr),c=(s.clientX-ql.clientX+i.x)/(a||1)+(u?u[0]-N2[0]:0)/(a||1),h=(s.clientY-ql.clientY+i.y)/(l||1)+(u?u[1]-N2[1]:0)/(l||1);if(!nt.active&&!kc){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(dt){o?(o.e+=c-(I2||0),o.f+=h-(D2||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");_e(dt,"webkitTransform",f),_e(dt,"mozTransform",f),_e(dt,"msTransform",f),_e(dt,"transform",f),I2=c,D2=h,Ts=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!dt){var e=this.options.fallbackOnBody?document.body:cn,t=fn(me,!0,Jp,!0,e),r=this.options;if(Jp){for(Mr=e;_e(Mr,"position")==="static"&&_e(Mr,"transform")==="none"&&Mr!==document;)Mr=Mr.parentNode;Mr!==document.body&&Mr!==document.documentElement?(Mr===document&&(Mr=po()),t.top+=Mr.scrollTop,t.left+=Mr.scrollLeft):Mr=po(),N2=OS(Mr)}dt=me.cloneNode(!0),Sn(dt,r.ghostClass,!1),Sn(dt,r.fallbackClass,!0),Sn(dt,r.dragClass,!0),_e(dt,"transition",""),_e(dt,"transform",""),_e(dt,"box-sizing","border-box"),_e(dt,"margin",0),_e(dt,"top",t.top),_e(dt,"left",t.left),_e(dt,"width",t.width),_e(dt,"height",t.height),_e(dt,"opacity","0.8"),_e(dt,"position",Jp?"absolute":"fixed"),_e(dt,"zIndex","100000"),_e(dt,"pointerEvents","none"),nt.ghost=dt,e.appendChild(dt),_e(dt,"transform-origin",DS/parseInt(dt.style.width)*100+"% "+NS/parseInt(dt.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(oi("dragStart",this,{evt:e}),nt.eventCanceled){this._onDrop();return}oi("setupClone",this),nt.eventCanceled||(In=J7(me),In.draggable=!1,In.style["will-change"]="",this._hideClone(),Sn(In,this.options.chosenClass,!1),nt.clone=In),r.cloneId=f1(function(){oi("clone",r),!nt.eventCanceled&&(r.options.removeCloneOnHide||cn.insertBefore(In,me),r._hideClone(),jr({sortable:r,name:"clone"}))}),!t&&Sn(me,s.dragClass,!0),t?(Ng=!0,r._loopId=setInterval(r._emulateDragOver,50)):(xt(document,"mouseup",r._onDrop),xt(document,"touchend",r._onDrop),xt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,me)),Mt(document,"drop",r),_e(me,"transform","translateZ(0)")),kc=!0,r._dragStartId=f1(r._dragStarted.bind(r,t,e)),Mt(document,"selectstart",r),Vf=!0,Od&&_e(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=nt.active,c=Xp===l,h=a.sort,f=pr||u,d,p=this,m=!1;if(Vb)return;function g(de,ge){oi(de,p,vo({evt:e,isOwner:c,axis:d?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:f,target:r,completed:v,onMove:function(fe,xe){return Zp(cn,t,me,i,fe,fn(fe),e,xe)},changed:x},ge))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function v(de){return g("dragOverCompleted",{insertion:de}),de&&(c?u._hideClone():u._showClone(p),p!==f&&(Sn(me,pr?pr.options.ghostClass:u.options.ghostClass,!1),Sn(me,a.ghostClass,!0)),pr!==p&&p!==nt.active?pr=p:p===nt.active&&pr&&(pr=null),f===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===me&&!me.animated||r===t&&!r.animated)&&(yc=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(me.parentNode[Nr]._isOutsideThisEl(e.target),!de&&Ul(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function x(){Li=Dn(me),Xa=Dn(me,a.draggable),jr({sortable:p,name:"change",toEl:t,newIndex:Li,newDraggableIndex:Xa,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ns(r,a.draggable,t,!0),g("dragOver"),nt.eventCanceled)return m;if(me.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return v(!1);if(Ng=!1,u&&!a.disabled&&(c?h||(o=On!==cn):pr===this||(this.lastPutMode=Xp.checkPull(this,u,me,e))&&l.checkPut(this,u,me,e))){if(d=this._getDirection(e,r)==="vertical",i=fn(me),g("dragOverValid"),nt.eventCanceled)return m;if(o)return On=cn,y(),this._hideClone(),g("revert"),nt.eventCanceled||(iu?cn.insertBefore(me,iu):cn.appendChild(me)),v(!0);var k=Y7(t,a.draggable);if(!k||FW(e,d,this)&&!k.animated){if(k===me)return v(!1);if(k&&t===e.target&&(r=k),r&&(s=fn(r)),Zp(cn,t,me,i,r,s,e,!!r)!==!1)return y(),t.appendChild(me),On=t,x(),v(!0)}else if(k&&BW(e,d,this)){var C=mh(t,0,a,!0);if(C===me)return v(!1);if(r=C,s=fn(r),Zp(cn,t,me,i,r,s,e,!1)!==!1)return y(),t.insertBefore(me,C),On=t,x(),v(!0)}else if(r.parentNode===t){s=fn(r);var w=0,M,D=me.parentNode!==t,A=!NW(me.animated&&me.toRect||i,r.animated&&r.toRect||s,d),E=d?"top":"left",N=MS(r,"top","top")||MS(me,"top","top"),I=N?N.scrollTop:void 0;yc!==r&&(M=s[E],Pd=!1,Yp=!A&&a.invertSwap||D),w=$W(e,r,s,d,A?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Yp,yc===r);var L;if(w!==0){var F=Dn(me);do F-=w,L=On.children[F];while(L&&(_e(L,"display")==="none"||L===dt))}if(w===0||L===r)return v(!1);yc=r,Nd=w;var W=r.nextElementSibling,G=!1;G=w===1;var ee=Zp(cn,t,me,i,r,s,e,G);if(ee!==!1)return(ee===1||ee===-1)&&(G=ee===1),Vb=!0,setTimeout(_W,30),y(),G&&!W?t.appendChild(me):r.parentNode.insertBefore(me,G?W:r),N&&iO(N,0,I-N.scrollTop),On=me.parentNode,M!==void 0&&!Yp&&(h1=Math.abs(M-fn(r)[E])),x(),v(!0)}if(t.contains(me))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xt(document,"mousemove",this._onTouchMove),xt(document,"touchmove",this._onTouchMove),xt(document,"pointermove",this._onTouchMove),xt(document,"dragover",Ul),xt(document,"mousemove",Ul),xt(document,"touchmove",Ul)},_offUpEvents:function(){var e=this.el.ownerDocument;xt(e,"mouseup",this._onDrop),xt(e,"touchend",this._onDrop),xt(e,"pointerup",this._onDrop),xt(e,"touchcancel",this._onDrop),xt(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(Li=Dn(me),Xa=Dn(me,r.draggable),oi("drop",this,{evt:e}),On=me&&me.parentNode,Li=Dn(me),Xa=Dn(me,r.draggable),nt.eventCanceled){this._nulling();return}kc=!1,Yp=!1,Pd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hb(this.cloneId),Hb(this._dragStartId),this.nativeDraggable&&(xt(document,"drop",this),xt(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Od&&_e(document.body,"user-select",""),_e(me,"transform",""),e&&(Vf&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),dt&&dt.parentNode&&dt.parentNode.removeChild(dt),(cn===On||pr&&pr.lastPutMode!=="clone")&&In&&In.parentNode&&In.parentNode.removeChild(In),me&&(this.nativeDraggable&&xt(me,"dragend",this),P2(me),me.style["will-change"]="",Vf&&!kc&&Sn(me,pr?pr.options.ghostClass:this.options.ghostClass,!1),Sn(me,this.options.chosenClass,!1),jr({sortable:this,name:"unchoose",toEl:On,newIndex:null,newDraggableIndex:null,originalEvent:e}),cn!==On?(Li>=0&&(jr({rootEl:On,name:"add",toEl:On,fromEl:cn,originalEvent:e}),jr({sortable:this,name:"remove",toEl:On,originalEvent:e}),jr({rootEl:On,name:"sort",toEl:On,fromEl:cn,originalEvent:e}),jr({sortable:this,name:"sort",toEl:On,originalEvent:e})),pr&&pr.save()):Li!==Fc&&Li>=0&&(jr({sortable:this,name:"update",toEl:On,originalEvent:e}),jr({sortable:this,name:"sort",toEl:On,originalEvent:e})),nt.active&&((Li==null||Li===-1)&&(Li=Fc,Xa=Dd),jr({sortable:this,name:"end",toEl:On,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){oi("nulling",this),cn=me=On=dt=iu=In=c1=tl=ql=Ts=Vf=Li=Xa=Fc=Dd=yc=Nd=pr=Xp=nt.dragged=nt.ghost=nt.clone=nt.active=null,Rg.forEach(function(e){e.checked=!0}),Rg.length=I2=D2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":me&&(this._onDragOver(e),LW(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],Ns(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||VW(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Ns(a,this.options.draggable,i,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ns(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=up.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&aO(r)},destroy:function(){oi("destroy",this);var e=this.el;e[Nr]=null,xt(e,"mousedown",this._onTapStart),xt(e,"touchstart",this._onTapStart),xt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xt(e,"dragover",this),xt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Pg.splice(Pg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!tl){if(oi("hideClone",this),nt.eventCanceled)return;_e(In,"display","none"),this.options.removeCloneOnHide&&In.parentNode&&In.parentNode.removeChild(In),tl=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(tl){if(oi("showClone",this),nt.eventCanceled)return;me.parentNode==cn&&!this.options.group.revertClone?cn.insertBefore(In,me):iu?cn.insertBefore(In,iu):cn.appendChild(In),this.options.group.revertClone&&this.animate(me,In),_e(In,"display",""),tl=!1}}};function LW(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Zp(n,e,t,r,i,s,o,a){var l,u=n[Nr],c=u.options.onMove,h;return window.CustomEvent&&!Ea&&!lp?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=s||fn(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function P2(n){n.draggable=!1}function _W(){Vb=!1}function BW(n,e,t){var r=fn(mh(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function FW(n,e,t){var r=fn(Y7(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function $W(n,e,t,r,i,s,o,a){var l=r?n.clientY:n.clientX,u=r?t.height:t.width,c=r?t.top:t.left,h=r?t.bottom:t.right,f=!1;if(!o){if(a&&h1<u*i){if(!Pd&&(Nd===1?l>c+u*s/2:l<h-u*s/2)&&(Pd=!0),Pd)f=!0;else if(Nd===1?l<c+h1:l>h-h1)return-Nd}else if(l>c+u*(1-i)/2&&l<h-u*(1-i)/2)return zW(e)}return f=f||o,f&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function zW(n){return Dn(me)<Dn(n)?1:-1}function VW(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function HW(n){Rg.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&Rg.push(r)}}function f1(n){return setTimeout(n,0)}function Hb(n){return clearTimeout(n)}Zy&&Mt(document,"touchmove",function(n){(nt.active||kc)&&n.cancelable&&n.preventDefault()});nt.utils={on:Mt,off:xt,css:_e,find:nO,is:function(e,t){return!!Ns(e,t,e,!1)},extend:TW,throttle:rO,closest:Ns,toggleClass:Sn,clone:J7,index:Dn,nextTick:f1,cancelNextTick:Hb,detectDirection:oO,getChild:mh};nt.get=function(n){return n[Nr]};nt.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(nt.utils=vo(vo({},nt.utils),r.utils)),up.mount(r)})};nt.create=function(n,e){return new nt(n,e)};nt.version=wW;var zn=[],Hf,jb,Wb=!1,R2,L2,Lg,jf;function jW(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Mt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Mt(document,"touchmove",this._handleFallbackAutoScroll):Mt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?xt(document,"dragover",this._handleAutoScroll):(xt(document,"pointermove",this._handleFallbackAutoScroll),xt(document,"touchmove",this._handleFallbackAutoScroll),xt(document,"mousemove",this._handleFallbackAutoScroll)),RS(),d1(),EW()},nulling:function(){Lg=jb=Hf=Wb=jf=R2=L2=null,zn.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(Lg=t,r||this.options.forceAutoScrollFallback||lp||Ea||Od){_2(t,this.options,a,r);var l=ll(a,!0);Wb&&(!jf||s!==R2||o!==L2)&&(jf&&RS(),jf=setInterval(function(){var u=ll(document.elementFromPoint(s,o),!0);u!==l&&(l=u,d1()),_2(t,i.options,u,r)},10),R2=s,L2=o)}else{if(!this.options.bubbleScroll||ll(a,!0)===po()){d1();return}_2(t,this.options,ll(a,!1),!1)}}},ys(n,{pluginName:"scroll",initializeByDefault:!0})}function d1(){zn.forEach(function(n){clearInterval(n.pid)}),zn=[]}function RS(){clearInterval(jf)}var _2=rO(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=po(),u=!1,c;jb!==t&&(jb=t,d1(),Hf=e.scroll,c=e.scrollFn,Hf===!0&&(Hf=ll(t,!0)));var h=0,f=Hf;do{var d=f,p=fn(d),m=p.top,g=p.bottom,y=p.left,v=p.right,x=p.width,k=p.height,C=void 0,w=void 0,M=d.scrollWidth,D=d.scrollHeight,A=_e(d),E=d.scrollLeft,N=d.scrollTop;d===l?(C=x<M&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),w=k<D&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(C=x<M&&(A.overflowX==="auto"||A.overflowX==="scroll"),w=k<D&&(A.overflowY==="auto"||A.overflowY==="scroll"));var I=C&&(Math.abs(v-i)<=o&&E+x<M)-(Math.abs(y-i)<=o&&!!E),L=w&&(Math.abs(g-s)<=o&&N+k<D)-(Math.abs(m-s)<=o&&!!N);if(!zn[h])for(var F=0;F<=h;F++)zn[F]||(zn[F]={});(zn[h].vx!=I||zn[h].vy!=L||zn[h].el!==d)&&(zn[h].el=d,zn[h].vx=I,zn[h].vy=L,clearInterval(zn[h].pid),(I!=0||L!=0)&&(u=!0,zn[h].pid=setInterval((function(){r&&this.layer===0&&nt.active._onTouchMove(Lg);var W=zn[this.layer].vy?zn[this.layer].vy*a:0,G=zn[this.layer].vx?zn[this.layer].vx*a:0;typeof c=="function"&&c.call(nt.dragged.parentNode[Nr],G,W,n,Lg,zn[this.layer].el)!=="continue"||iO(zn[this.layer].el,G,W)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==l&&(f=ll(f,!1)));Wb=u}},30),cO=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=r||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Z7(){}Z7.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=mh(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:cO};ys(Z7,{pluginName:"revertOnSpill"});function Q7(){}Q7.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:cO};ys(Q7,{pluginName:"removeOnSpill"});var Ji;function WW(){function n(){this.defaults={swapClass:"sortable-swap-highlight"}}return n.prototype={dragStart:function(t){var r=t.dragEl;Ji=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,a=t.changed,l=t.cancel;if(o.options.swap){var u=this.sortable.el,c=this.options;if(i&&i!==u){var h=Ji;s(i)!==!1?(Sn(i,c.swapClass,!0),Ji=i):Ji=null,h&&h!==Ji&&Sn(h,c.swapClass,!1)}a(),r(!0),l()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,a=this.options;Ji&&Sn(Ji,a.swapClass,!1),Ji&&(a.swap||i&&i.options.swap)&&s!==Ji&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),qW(s,Ji),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Ji=null}},ys(n,{pluginName:"swap",eventProperties:function(){return{swapItem:Ji}}})}function qW(n,e){var t=n.parentNode,r=e.parentNode,i,s;!t||!r||t.isEqualNode(e)||r.isEqualNode(n)||(i=Dn(n),s=Dn(e),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(e,t.children[i]),r.insertBefore(n,r.children[s]))}var ct=[],Pi=[],bf,Es,xf=!1,ai=!1,vc=!1,Jt,wf,Qp;function UW(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?Mt(document,"pointerup",this._deselectMultiDrag):(Mt(document,"mouseup",this._deselectMultiDrag),Mt(document,"touchend",this._deselectMultiDrag)),Mt(document,"keydown",this._checkKeyDown),Mt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";ct.length&&Es===e?ct.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;Jt=r},delayEnded:function(){this.isMultiDrag=~ct.indexOf(Jt)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<ct.length;s++)Pi.push(J7(ct[s])),Pi[s].sortableIndex=ct[s].sortableIndex,Pi[s].draggable=!1,Pi[s].style["will-change"]="",Sn(Pi[s],this.options.selectedClass,!1),ct[s]===Jt&&Sn(Pi[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ct.length&&Es===r&&(LS(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(LS(!1,i),Pi.forEach(function(o){_e(o,"display","")}),r(),Qp=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(Pi.forEach(function(o){_e(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Qp=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Es&&Es.multiDrag._deselectMultiDrag(),ct.forEach(function(r){r.sortableIndex=Dn(r)}),ct=ct.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),vc=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){ct.forEach(function(o){o!==Jt&&_e(o,"position","absolute")});var s=fn(Jt,!1,!0,!0);ct.forEach(function(o){o!==Jt&&IS(o,s)}),ai=!0,xf=!0}i.animateAll(function(){ai=!1,xf=!1,r.options.animation&&ct.forEach(function(o){M2(o)}),r.options.sort&&em()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;ai&&~ct.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;ct.length>1&&(ct.forEach(function(a){s.addAnimationState({target:a,rect:ai?fn(a):o}),M2(a),a.fromRect=o,r.removeAnimationState(a)}),ai=!1,GW(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,a=t.parentEl,l=t.putSortable,u=this.options;if(s){if(i&&o._hideClone(),xf=!1,u.animation&&ct.length>1&&(ai||!i&&!o.options.sort&&!l)){var c=fn(Jt,!1,!0,!0);ct.forEach(function(f){f!==Jt&&(IS(f,c),a.appendChild(f))}),ai=!0}if(!i)if(ai||em(),ct.length>1){var h=Qp;o._showClone(r),o.options.animation&&!Qp&&h&&Pi.forEach(function(f){o.addAnimationState({target:f,rect:wf}),f.fromRect=wf,f.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(ct.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){wf=ys({},r);var o=Tu(Jt,!0);wf.top-=o.f,wf.left-=o.e}},dragOverAnimationComplete:function(){ai&&(ai=!1,em())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,u=t.putSortable,c=u||this.sortable;if(r){var h=this.options,f=s.children;if(!vc)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Sn(Jt,h.selectedClass,!~ct.indexOf(Jt)),~ct.indexOf(Jt))ct.splice(ct.indexOf(Jt),1),bf=null,zf({sortable:o,rootEl:i,name:"deselect",targetEl:Jt});else{if(ct.push(Jt),zf({sortable:o,rootEl:i,name:"select",targetEl:Jt}),r.shiftKey&&bf&&o.el.contains(bf)){var d=Dn(bf),p=Dn(Jt);if(~d&&~p&&d!==p){var m,g;for(p>d?(g=d,m=p):(g=p,m=d+1);g<m;g++)~ct.indexOf(f[g])||(Sn(f[g],h.selectedClass,!0),ct.push(f[g]),zf({sortable:o,rootEl:i,name:"select",targetEl:f[g]}))}}else bf=Jt;Es=c}if(vc&&this.isMultiDrag){if(ai=!1,(s[Nr].options.sort||s!==i)&&ct.length>1){var y=fn(Jt),v=Dn(Jt,":not(."+this.options.selectedClass+")");if(!xf&&h.animation&&(Jt.thisAnimationDuration=null),c.captureAnimationState(),!xf&&(h.animation&&(Jt.fromRect=y,ct.forEach(function(k){if(k.thisAnimationDuration=null,k!==Jt){var C=ai?fn(k):y;k.fromRect=C,c.addAnimationState({target:k,rect:C})}})),em(),ct.forEach(function(k){f[v]?s.insertBefore(k,f[v]):s.appendChild(k),v++}),l===Dn(Jt))){var x=!1;ct.forEach(function(k){if(k.sortableIndex!==Dn(k)){x=!0;return}}),x&&a("update")}ct.forEach(function(k){M2(k)}),c.animateAll()}Es=c}(i===s||u&&u.lastPutMode!=="clone")&&Pi.forEach(function(k){k.parentNode&&k.parentNode.removeChild(k)})}},nullingGlobal:function(){this.isMultiDrag=vc=!1,Pi.length=0},destroyGlobal:function(){this._deselectMultiDrag(),xt(document,"pointerup",this._deselectMultiDrag),xt(document,"mouseup",this._deselectMultiDrag),xt(document,"touchend",this._deselectMultiDrag),xt(document,"keydown",this._checkKeyDown),xt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof vc<"u"&&vc)&&Es===this.sortable&&!(t&&Ns(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;ct.length;){var r=ct[0];Sn(r,this.options.selectedClass,!1),ct.shift(),zf({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ys(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[Nr];!r||!r.options.multiDrag||~ct.indexOf(t)||(Es&&Es!==r&&(Es.multiDrag._deselectMultiDrag(),Es=r),Sn(t,r.options.selectedClass,!0),ct.push(t))},deselect:function(t){var r=t.parentNode[Nr],i=ct.indexOf(t);!r||!r.options.multiDrag||!~i||(Sn(t,r.options.selectedClass,!1),ct.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return ct.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;ai&&s!==Jt?o=-1:ai?o=Dn(s,":not(."+t.options.selectedClass+")"):o=Dn(s),i.push({multiDragElement:s,index:o})}),{items:gW(ct),clones:[].concat(Pi),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function GW(n,e){ct.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function LS(n,e){Pi.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function em(){ct.forEach(function(n){n!==Jt&&n.parentNode&&n.parentNode.removeChild(n)})}nt.mount(new jW);nt.mount(Q7,Z7);const KW=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:UW,Sortable:nt,Swap:WW,default:nt},Symbol.toStringTag,{value:"Module"})),XW=Ry(KW);var YW=n1.exports,_S;function JW(){return _S||(_S=1,function(n,e){(function(r,i){n.exports=i(fW(),XW)})(typeof self<"u"?self:YW,function(t,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var c in a)o.d(u,c,(function(h){return a[h]}).bind(null,c));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(h){return l.call(u,h)};case 2:return function(h,f){return l.call(u,h,f)};case 3:return function(h,f,d){return l.call(u,h,f,d)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(f){try{return l(f)}catch{return c.slice()}};i.exports.f=function(d){return c&&u.call(d)=="[object Window]"?h(d):l(a(d))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),c=o("fc6a"),h=o("c04e"),f=o("5135"),d=o("0cfb"),p=Object.getOwnPropertyDescriptor;s.f=a?p:function(g,y){if(g=c(g),y=h(y,!0),d)try{return p(g,y)}catch{}if(f(g,y))return u(!l.f.call(g,y),g[y])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),c=o("ae40"),h=u("reduce"),f=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!h||!f},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(u,c){var h=u.exec;if(typeof h=="function"){var f=h.call(u,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),c=o("9112");for(var h in l){var f=a[h],d=f&&f.prototype;if(d&&d.forEach!==u)try{c(d,"forEach",u)}catch{d.forEach=u}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),c=l("forEach"),h=u("forEach");i.exports=!c||!h?function(d){return a(this,d,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),u=!1;try{var c=0,h={next:function(){return{done:!!c++}},return:function(){u=!0}};h[l]=function(){return this},Array.from(h,function(){throw 2})}catch{}i.exports=function(f,d){if(!d&&!u)return!1;var p=!1;try{var m={};m[l]=function(){return{next:function(){return{done:p=!0}}}},f(m)}catch{}return p}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),u=o("2d00"),c=l("species");i.exports=function(h){return u>=51||!a(function(){var f=[],d=f.constructor={};return d[c]=function(){return{foo:1}},f[h](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,u=Math.min;i.exports=function(c,h){var f=a(c);return f<0?l(f+h,0):u(f,h)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),c=o("6eeb"),h=o("ce4e"),f=o("e893"),d=o("94ca");i.exports=function(p,m){var g=p.target,y=p.global,v=p.stat,x,k,C,w,M,D;if(y?k=a:v?k=a[g]||h(g,{}):k=(a[g]||{}).prototype,k)for(C in m){if(M=m[C],p.noTargetGet?(D=l(k,C),w=D&&D.value):w=k[C],x=d(y?C:g+(v?".":"#")+C,p.forced),!x&&w!==void 0){if(typeof M==typeof w)continue;f(M,w)}(p.sham||w&&w.sham)&&u(M,"sham",!0),c(k,C,M,p)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(h){return a(h,u)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),c=o("ad6d"),h="toString",f=RegExp.prototype,d=f[h],p=u(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),m=d.name!=h;(p||m)&&a(RegExp.prototype,h,function(){var y=l(this),v=String(y.source),x=y.flags,k=String(x===void 0&&y instanceof RegExp&&!("flags"in f)?c.call(y):x);return"/"+v+"/"+k},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),c=o("5a34"),h=o("1d80"),f=o("ab13"),d=o("c430"),p="".startsWith,m=Math.min,g=f("startsWith"),y=!d&&!g&&!!function(){var v=l(String.prototype,"startsWith");return v&&!v.writable}();a({target:"String",proto:!0,forced:!y&&!g},{startsWith:function(x){var k=String(h(this));c(x);var C=u(m(arguments.length>1?arguments[1]:void 0,k.length)),w=String(x);return p?p.call(k,w,C):k.slice(C,C+w.length)===w}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),u=a.process,c=u&&u.versions,h=c&&c.v8,f,d;h?(f=h.split("."),d=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(d=f[1]))),i.exports=d&&+d},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),c=u("iterator");i.exports=function(h){if(h!=null)return h[c]||h["@@iterator"]||l[a(h)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),c=o("df75");i.exports=a?Object.defineProperties:function(f,d){u(f);for(var p=c(d),m=p.length,g=0,y;m>g;)l.f(f,y=p[g++],d[y]);return f}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),c="String Iterator",h=l.set,f=l.getterFor(c);u(String,"String",function(d){h(this,{type:c,string:String(d),index:0})},function(){var p=f(this),m=p.string,g=p.index,y;return g>=m.length?{value:void 0,done:!0}:(y=a(m,g),p.index+=y.length,{value:y,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),c=a("unscopables"),h=Array.prototype;h[c]==null&&u.f(h,c,{configurable:!0,value:l(null)}),i.exports=function(f){h[c][f]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),c=u("match");i.exports=function(h){var f;return a(h)&&((f=h[c])!==void 0?!!f:l(h)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),c=function(h){return function(f,d,p){var m=a(f),g=l(m.length),y=u(p,g),v;if(h&&d!=d){for(;g>y;)if(v=m[y++],v!=v)return!0}else for(;g>y;y++)if((h||y in m)&&m[y]===d)return h||y||0;return!h&&-1}};i.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),c=o("ae40"),h=u("filter"),f=c("filter");a({target:"Array",proto:!0,forced:!h||!f},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),c=o("e95a"),h=o("50c4"),f=o("8418"),d=o("35a1");i.exports=function(m){var g=l(m),y=typeof this=="function"?this:Array,v=arguments.length,x=v>1?arguments[1]:void 0,k=x!==void 0,C=d(g),w=0,M,D,A,E,N,I;if(k&&(x=a(x,v>2?arguments[2]:void 0,2)),C!=null&&!(y==Array&&c(C)))for(E=C.call(g),N=E.next,D=new y;!(A=N.call(E)).done;w++)I=k?u(E,x,[A.value,w],!0):A.value,f(D,w,I);else for(M=h(g.length),D=new y(M);M>w;w++)I=k?x(g[w],w):g[w],f(D,w,I);return D.length=w,D}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),c=o("50c4"),h=o("a691"),f=o("1d80"),d=o("8aa5"),p=o("14c3"),m=Math.max,g=Math.min,y=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g,k=function(C){return C===void 0?C:String(C)};a("replace",2,function(C,w,M,D){var A=D.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=D.REPLACE_KEEPS_$0,N=A?"$":"$0";return[function(F,W){var G=f(this),ee=F?.[C];return ee!==void 0?ee.call(F,G,W):w.call(String(G),F,W)},function(L,F){if(!A&&E||typeof F=="string"&&F.indexOf(N)===-1){var W=M(w,L,this,F);if(W.done)return W.value}var G=l(L),ee=String(this),de=typeof F=="function";de||(F=String(F));var ge=G.global;if(ge){var R=G.unicode;G.lastIndex=0}for(var fe=[];;){var xe=p(G,ee);if(xe===null||(fe.push(xe),!ge))break;var P=String(xe[0]);P===""&&(G.lastIndex=d(ee,c(G.lastIndex),R))}for(var $e="",Z=0,we=0;we<fe.length;we++){xe=fe[we];for(var Se=String(xe[0]),Ie=m(g(h(xe.index),ee.length),0),Je=[],Ct=1;Ct<xe.length;Ct++)Je.push(k(xe[Ct]));var tn=xe.groups;if(de){var at=[Se].concat(Je,Ie,ee);tn!==void 0&&at.push(tn);var It=String(F.apply(void 0,at))}else It=I(Se,ee,Ie,Je,tn,F);Ie>=Z&&($e+=ee.slice(Z,Ie)+It,Z=Ie+Se.length)}return $e+ee.slice(Z)}];function I(L,F,W,G,ee,de){var ge=W+L.length,R=G.length,fe=x;return ee!==void 0&&(ee=u(ee),fe=v),w.call(de,fe,function(xe,P){var $e;switch(P.charAt(0)){case"$":return"$";case"&":return L;case"`":return F.slice(0,W);case"'":return F.slice(ge);case"<":$e=ee[P.slice(1,-1)];break;default:var Z=+P;if(Z===0)return xe;if(Z>R){var we=y(Z/10);return we===0?xe:we<=R?G[we-1]===void 0?P.charAt(1):G[we-1]+P.charAt(1):xe}$e=G[Z-1]}return $e===void 0?"":$e})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),u=o("7418"),c=o("825a");i.exports=a("Reflect","ownKeys")||function(f){var d=l.f(c(f)),p=u.f;return p?d.concat(p(f)):d}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),c=o("50c4"),h=o("1c0b"),f=o("65f0");a({target:"Array",proto:!0},{flatMap:function(p){var m=u(this),g=c(m.length),y;return h(p),y=f(m,0),y.length=l(y,m,m,g,0,1,p,arguments.length>1?arguments[1]:void 0),y}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),u=function(c){return function(h,f){var d=String(l(h)),p=a(f),m=d.length,g,y;return p<0||p>=m?c?"":void 0:(g=d.charCodeAt(p),g<55296||g>56319||p+1===m||(y=d.charCodeAt(p+1))<56320||y>57343?c?d.charAt(p):g:c?d.slice(p,p+2):(g-55296<<10)+(y-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),c=u("species");i.exports=function(h,f){var d;return l(h)&&(d=h.constructor,typeof d=="function"&&(d===Array||l(d.prototype))?d=void 0:a(d)&&(d=d[c],d===null&&(d=void 0))),new(d===void 0?Array:d)(f===0?0:f)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),c=o("9112"),h=o("5135"),f=o("f772"),d=o("d012"),p=l.WeakMap,m,g,y,v=function(A){return y(A)?g(A):m(A,{})},x=function(A){return function(E){var N;if(!u(E)||(N=g(E)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return N}};if(a){var k=new p,C=k.get,w=k.has,M=k.set;m=function(A,E){return M.call(k,A,E),E},g=function(A){return C.call(k,A)||{}},y=function(A){return w.call(k,A)}}else{var D=f("state");d[D]=!0,m=function(A,E){return c(A,D,E),E},g=function(A){return h(A,D)?A[D]:{}},y=function(A){return h(A,D)}}i.exports={set:m,get:g,has:y,enforce:v,getterFor:x}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),u=o("5135"),c=o("ce4e"),h=o("8925"),f=o("69f3"),d=f.get,p=f.enforce,m=String(String).split("String");(i.exports=function(g,y,v,x){var k=x?!!x.unsafe:!1,C=x?!!x.enumerable:!1,w=x?!!x.noTargetGet:!1;if(typeof v=="function"&&(typeof y=="string"&&!u(v,"name")&&l(v,"name",y),p(v).source=m.join(typeof y=="string"?y:"")),g===a){C?g[y]=v:c(y,v);return}else k?!w&&g[y]&&(C=!0):delete g[y];C?g[y]=v:l(g,y,v)})(Function.prototype,"toString",function(){return typeof this=="function"&&d(this).source||h(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),c=o("d1e7").f,h=function(f){return function(d){for(var p=u(d),m=l(p),g=m.length,y=0,v=[],x;g>y;)x=m[y++],(!a||c.call(p,x))&&v.push(f?[x,p[x]]:p[x]);return v}};i.exports={entries:h(!0),values:h(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),u=o("e538"),c=o("9bf2").f;i.exports=function(h){var f=a.Symbol||(a.Symbol={});l(f,h)||c(f,h,{value:u.f(h)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),u=o("7839"),c=o("d012"),h=o("1be4"),f=o("cc12"),d=o("f772"),p=">",m="<",g="prototype",y="script",v=d("IE_PROTO"),x=function(){},k=function(A){return m+y+p+A+m+"/"+y+p},C=function(A){A.write(k("")),A.close();var E=A.parentWindow.Object;return A=null,E},w=function(){var A=f("iframe"),E="java"+y+":",N;return A.style.display="none",h.appendChild(A),A.src=String(E),N=A.contentWindow.document,N.open(),N.write(k("document.F=Object")),N.close(),N.F},M,D=function(){try{M=document.domain&&new ActiveXObject("htmlfile")}catch{}D=M?C(M):w();for(var A=u.length;A--;)delete D[g][u[A]];return D()};c[v]=!0,i.exports=Object.create||function(E,N){var I;return E!==null?(x[g]=a(E),I=new x,x[g]=null,I[v]=E):I=D(),N===void 0?I:l(I,N)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),c=o("d2bb"),h=o("d44e"),f=o("9112"),d=o("6eeb"),p=o("b622"),m=o("c430"),g=o("3f8c"),y=o("ae93"),v=y.IteratorPrototype,x=y.BUGGY_SAFARI_ITERATORS,k=p("iterator"),C="keys",w="values",M="entries",D=function(){return this};i.exports=function(A,E,N,I,L,F,W){l(N,E,I);var G=function(we){if(we===L&&fe)return fe;if(!x&&we in ge)return ge[we];switch(we){case C:return function(){return new N(this,we)};case w:return function(){return new N(this,we)};case M:return function(){return new N(this,we)}}return function(){return new N(this)}},ee=E+" Iterator",de=!1,ge=A.prototype,R=ge[k]||ge["@@iterator"]||L&&ge[L],fe=!x&&R||G(L),xe=E=="Array"&&ge.entries||R,P,$e,Z;if(xe&&(P=u(xe.call(new A)),v!==Object.prototype&&P.next&&(!m&&u(P)!==v&&(c?c(P,v):typeof P[k]!="function"&&f(P,k,D)),h(P,ee,!0,!0),m&&(g[ee]=D))),L==w&&R&&R.name!==w&&(de=!0,fe=function(){return R.call(this)}),(!m||W)&&ge[k]!==fe&&f(ge,k,fe),g[E]=fe,L)if($e={values:G(w),keys:F?fe:G(C),entries:G(M)},W)for(Z in $e)(x||de||!(Z in ge))&&d(ge,Z,$e[Z]);else a({target:E,proto:!0,forced:x||de},$e);return $e}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");i.exports=function(c,h,f){var d=a(h);d in c?l.f(c,d,u(0,f)):c[d]=f}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,u;(function(c,h){l=[],a=h,u=typeof a=="function"?a.apply(s,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function c(){var h=Object.getOwnPropertyDescriptor(document,"currentScript");if(!h&&"currentScript"in document&&document.currentScript||h&&h.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(M){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,d=/@([^@]*):(\d+):(\d+)\s*$/ig,p=f.exec(M.stack)||d.exec(M.stack),m=p&&p[1]||!1,g=p&&p[2]||!1,y=document.location.href.replace(document.location.hash,""),v,x,k,C=document.getElementsByTagName("script");m===y&&(v=document.documentElement.outerHTML,x=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),k=v.replace(x,"$1").trim());for(var w=0;w<C.length;w++)if(C[w].readyState==="interactive"||C[w].src===m||m===y&&C[w].innerHTML&&C[w].innerHTML.trim()===k)return C[w];return null}}return c})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");i.exports=a?function(c,h,f){return l.f(c,h,u(1,f))}:function(c,h,f){return c[h]=f,c}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,h=u,f=function(){var g=/a/,y=/b*/g;return u.call(g,"a"),u.call(y,"a"),g.lastIndex!==0||y.lastIndex!==0}(),d=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,m=f||p||d;m&&(h=function(y){var v=this,x,k,C,w,M=d&&v.sticky,D=a.call(v),A=v.source,E=0,N=y;return M&&(D=D.replace("y",""),D.indexOf("g")===-1&&(D+="g"),N=String(y).slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&y[v.lastIndex-1]!==`
`)&&(A="(?: "+A+")",N=" "+N,E++),k=new RegExp("^(?:"+A+")",D)),p&&(k=new RegExp("^"+A+"$(?!\\s)",D)),f&&(x=v.lastIndex),C=u.call(M?k:v,N),M?C?(C.input=C.input.slice(E),C[0]=C[0].slice(E),C.index=v.lastIndex,v.lastIndex+=C[0].length):v.lastIndex=0:f&&C&&(v.lastIndex=v.global?C.index+C[0].length:x),p&&C&&C.length>1&&c.call(C[0],k,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(C[w]=void 0)}),C}),i.exports=h},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,u=function(p,m){var g=h[c(p)];return g==d?!0:g==f?!1:typeof m=="function"?a(m):!!m},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},h=u.data={},f=u.NATIVE="N",d=u.POLYFILL="P";i.exports=u},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),c=o("861d"),h=o("7b0b"),f=o("50c4"),d=o("8418"),p=o("65f0"),m=o("1dde"),g=o("b622"),y=o("2d00"),v=g("isConcatSpreadable"),x=9007199254740991,k="Maximum allowed index exceeded",C=y>=51||!l(function(){var A=[];return A[v]=!1,A.concat()[0]!==A}),w=m("concat"),M=function(A){if(!c(A))return!1;var E=A[v];return E!==void 0?!!E:u(A)},D=!C||!w;a({target:"Array",proto:!0,forced:D},{concat:function(E){var N=h(this),I=p(N,0),L=0,F,W,G,ee,de;for(F=-1,G=arguments.length;F<G;F++)if(de=F===-1?N:arguments[F],M(de)){if(ee=f(de.length),L+ee>x)throw TypeError(k);for(W=0;W<ee;W++,L++)W in de&&d(I,L,de[W])}else{if(L>=x)throw TypeError(k);d(I,L++,de)}return I.length=L,I}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,u,c,h){try{return h?u(a(c)[0],c[1]):u(c)}catch(d){var f=l.return;throw f!==void 0&&a(f.call(l)),d}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),c=o("c04e"),h=Object.defineProperty;s.f=a?h:function(d,p,m){if(u(d),p=c(p,!0),u(m),l)try{return h(d,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(d[p]=m.value),d}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),c=o("d44e"),h=o("3f8c"),f=function(){return this};i.exports=function(d,p,m){var g=p+" Iterator";return d.prototype=l(a,{next:u(1,m)}),c(d,g,!1,!0),h[g]=f,d}},"9f7f":function(i,s,o){var a=o("d039");function l(u,c){return RegExp(u,c)}s.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),c=function(h,f,d,p,m,g,y,v){for(var x=m,k=0,C=y?u(y,v,3):!1,w;k<p;){if(k in d){if(w=C?C(d[k],k,f):d[k],g>0&&a(w))x=c(h,f,w,l(w.length),x,g-1)-1;else{if(x>=9007199254740991)throw TypeError("Exceed the acceptable array length");h[x]=w}x++}k++}return x};i.exports=c},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),c=o("50c4"),h=o("7b0b"),f=o("65f0"),d=o("8418"),p=o("1dde"),m=o("ae40"),g=p("splice"),y=m("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,x=Math.min,k=9007199254740991,C="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!g||!y},{splice:function(M,D){var A=h(this),E=c(A.length),N=l(M,E),I=arguments.length,L,F,W,G,ee,de;if(I===0?L=F=0:I===1?(L=0,F=E-N):(L=I-2,F=x(v(u(D),0),E-N)),E+L-F>k)throw TypeError(C);for(W=f(A,F),G=0;G<F;G++)ee=N+G,ee in A&&d(W,G,A[ee]);if(W.length=F,L<F){for(G=N;G<E-F;G++)ee=G+F,de=G+L,ee in A?A[de]=A[ee]:delete A[de];for(G=E;G>E-F+L;G--)delete A[G-1]}else if(L>F)for(G=E-F;G>N;G--)ee=G+F-1,de=G+L-1,ee in A?A[de]=A[ee]:delete A[de];for(G=0;G<L;G++)A[G+N]=arguments[G+2];return A.length=E-F+L,W}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),u=o("d066"),c=o("c430"),h=o("83ab"),f=o("4930"),d=o("fdbf"),p=o("d039"),m=o("5135"),g=o("e8b5"),y=o("861d"),v=o("825a"),x=o("7b0b"),k=o("fc6a"),C=o("c04e"),w=o("5c6c"),M=o("7c73"),D=o("df75"),A=o("241c"),E=o("057f"),N=o("7418"),I=o("06cf"),L=o("9bf2"),F=o("d1e7"),W=o("9112"),G=o("6eeb"),ee=o("5692"),de=o("f772"),ge=o("d012"),R=o("90e3"),fe=o("b622"),xe=o("e538"),P=o("746f"),$e=o("d44e"),Z=o("69f3"),we=o("b727").forEach,Se=de("hidden"),Ie="Symbol",Je="prototype",Ct=fe("toPrimitive"),tn=Z.set,at=Z.getterFor(Ie),It=Object[Je],vt=l.Symbol,ln=u("JSON","stringify"),vn=I.f,Ht=L.f,Kn=E.f,Xn=F.f,$n=ee("symbols"),Tr=ee("op-symbols"),Ai=ee("string-to-symbol-registry"),ii=ee("symbol-to-string-registry"),Er=ee("wks"),hr=l.QObject,J=!hr||!hr[Je]||!hr[Je].findChild,he=h&&p(function(){return M(Ht({},"a",{get:function(){return Ht(this,"a",{value:7}).a}})).a!=7})?function(Le,De,ze){var mt=vn(It,De);mt&&delete It[De],Ht(Le,De,ze),mt&&Le!==It&&Ht(It,De,mt)}:Ht,qe=function(Le,De){var ze=$n[Le]=M(vt[Je]);return tn(ze,{type:Ie,tag:Le,description:De}),h||(ze.description=De),ze},H=d?function(Le){return typeof Le=="symbol"}:function(Le){return Object(Le)instanceof vt},j=function(De,ze,mt){De===It&&j(Tr,ze,mt),v(De);var ft=C(ze,!0);return v(mt),m($n,ft)?(mt.enumerable?(m(De,Se)&&De[Se][ft]&&(De[Se][ft]=!1),mt=M(mt,{enumerable:w(0,!1)})):(m(De,Se)||Ht(De,Se,w(1,{})),De[Se][ft]=!0),he(De,ft,mt)):Ht(De,ft,mt)},U=function(De,ze){v(De);var mt=k(ze),ft=D(mt).concat(Ze(mt));return we(ft,function(Yn){(!h||ye.call(mt,Yn))&&j(De,Yn,mt[Yn])}),De},ie=function(De,ze){return ze===void 0?M(De):U(M(De),ze)},ye=function(De){var ze=C(De,!0),mt=Xn.call(this,ze);return this===It&&m($n,ze)&&!m(Tr,ze)?!1:mt||!m(this,ze)||!m($n,ze)||m(this,Se)&&this[Se][ze]?mt:!0},Ne=function(De,ze){var mt=k(De),ft=C(ze,!0);if(!(mt===It&&m($n,ft)&&!m(Tr,ft))){var Yn=vn(mt,ft);return Yn&&m($n,ft)&&!(m(mt,Se)&&mt[Se][ft])&&(Yn.enumerable=!0),Yn}},je=function(De){var ze=Kn(k(De)),mt=[];return we(ze,function(ft){!m($n,ft)&&!m(ge,ft)&&mt.push(ft)}),mt},Ze=function(De){var ze=De===It,mt=Kn(ze?Tr:k(De)),ft=[];return we(mt,function(Yn){m($n,Yn)&&(!ze||m(It,Yn))&&ft.push($n[Yn])}),ft};if(f||(vt=function(){if(this instanceof vt)throw TypeError("Symbol is not a constructor");var De=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ze=R(De),mt=function(ft){this===It&&mt.call(Tr,ft),m(this,Se)&&m(this[Se],ze)&&(this[Se][ze]=!1),he(this,ze,w(1,ft))};return h&&J&&he(It,ze,{configurable:!0,set:mt}),qe(ze,De)},G(vt[Je],"toString",function(){return at(this).tag}),G(vt,"withoutSetter",function(Le){return qe(R(Le),Le)}),F.f=ye,L.f=j,I.f=Ne,A.f=E.f=je,N.f=Ze,xe.f=function(Le){return qe(fe(Le),Le)},h&&(Ht(vt[Je],"description",{configurable:!0,get:function(){return at(this).description}}),c||G(It,"propertyIsEnumerable",ye,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:vt}),we(D(Er),function(Le){P(Le)}),a({target:Ie,stat:!0,forced:!f},{for:function(Le){var De=String(Le);if(m(Ai,De))return Ai[De];var ze=vt(De);return Ai[De]=ze,ii[ze]=De,ze},keyFor:function(De){if(!H(De))throw TypeError(De+" is not a symbol");if(m(ii,De))return ii[De]},useSetter:function(){J=!0},useSimple:function(){J=!1}}),a({target:"Object",stat:!0,forced:!f,sham:!h},{create:ie,defineProperty:j,defineProperties:U,getOwnPropertyDescriptor:Ne}),a({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:je,getOwnPropertySymbols:Ze}),a({target:"Object",stat:!0,forced:p(function(){N.f(1)})},{getOwnPropertySymbols:function(De){return N.f(x(De))}}),ln){var Dt=!f||p(function(){var Le=vt();return ln([Le])!="[null]"||ln({a:Le})!="{}"||ln(Object(Le))!="{}"});a({target:"JSON",stat:!0,forced:Dt},{stringify:function(De,ze,mt){for(var ft=[De],Yn=1,Pa;arguments.length>Yn;)ft.push(arguments[Yn++]);if(Pa=ze,!(!y(ze)&&De===void 0||H(De)))return g(ze)||(ze=function(bn,si){if(typeof Pa=="function"&&(si=Pa.call(this,bn,si)),!H(si))return si}),ft[1]=ze,ln.apply(null,ft)}})}vt[Je][Ct]||W(vt[Je],Ct,vt[Je].valueOf),$e(vt,Ie),ge[Se]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),c=!u(function(h){Array.from(h)});a({target:"Array",stat:!0,forced:c},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("5135"),c=Object.defineProperty,h={},f=function(d){throw d};i.exports=function(d,p){if(u(h,d))return h[d];p||(p={});var m=[][d],g=u(p,"ACCESSORS")?p.ACCESSORS:!1,y=u(p,0)?p[0]:f,v=u(p,1)?p[1]:void 0;return h[d]=!!m&&!l(function(){if(g&&!a)return!0;var x={length:-1};g?c(x,1,{enumerable:!0,get:f}):x[1]=1,m.call(x,y,v)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),u=o("5135"),c=o("b622"),h=o("c430"),f=c("iterator"),d=!1,p=function(){return this},m,g,y;[].keys&&(y=[].keys(),"next"in y?(g=a(a(y)),g!==Object.prototype&&(m=g)):d=!0),m==null&&(m={}),!h&&!u(m,f)&&l(m,f,p),i.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:d}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,c=u.toString,h=/^\s*function ([^ (]*)/,f="name";a&&!(f in u)&&l(u,f,{configurable:!0,get:function(){try{return c.call(this).match(h)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),u=o("5135"),c=o("90e3"),h=o("4930"),f=o("fdbf"),d=l("wks"),p=a.Symbol,m=f?p:p&&p.withoutSetter||c;i.exports=function(g){return u(d,g)||(h&&u(p,g)?d[g]=p[g]:d[g]=m("Symbol."+g)),d[g]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),c=o("d039"),h=c(function(){u(1)});a({target:"Object",stat:!0,forced:h},{keys:function(d){return u(l(d))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),c=o("50c4"),h=o("65f0"),f=[].push,d=function(p){var m=p==1,g=p==2,y=p==3,v=p==4,x=p==6,k=p==5||x;return function(C,w,M,D){for(var A=u(C),E=l(A),N=a(w,M,3),I=c(E.length),L=0,F=D||h,W=m?F(C,I):g?F(C,0):void 0,G,ee;I>L;L++)if((k||L in E)&&(G=E[L],ee=N(G,L,A),p)){if(m)W[L]=ee;else if(ee)switch(p){case 3:return!0;case 5:return G;case 6:return L;case 2:f.call(W,G)}else if(v)return!1}return x?-1:y||v?v:W}};i.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,u){if(!a(l))return l;var c,h;if(u&&typeof(c=l.toString)=="function"&&!a(h=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(h=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(h=c.call(l)))return h;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",c=a[u]||l(u,{});i.exports=c},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),c=o("ae40"),h="findIndex",f=!0,d=c(h);h in[]&&Array(1)[h](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!d},{findIndex:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u(h)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),c=o("ae40"),h=[].indexOf,f=!!h&&1/[1].indexOf(1,-0)<0,d=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:f||!d||!p},{indexOf:function(g){return f?h.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,c=o("d012");i.exports=function(h,f){var d=l(h),p=0,m=[],g;for(g in d)!a(c,g)&&a(d,g)&&m.push(g);for(;f.length>p;)a(d,g=f[p++])&&(~u(m,g)||m.push(g));return m}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),c=o("ae40"),h=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!h},{includes:function(d){return l(this,d,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(h){return c?u.createElement(h):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),u=function(c){return typeof c=="function"?c:void 0};i.exports=function(c,h){return arguments.length<2?u(a[c])||u(l[c]):a[c]&&a[c][h]||l[c]&&l[c][h]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(h){var f=l(this,h);return!!f&&f.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},h;try{h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,h.call(c,[]),u=c instanceof Array}catch{}return function(d,p){return a(d),l(p),u?h.call(d,p):d.__proto__=p,d}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),c=u("toStringTag");i.exports=function(h,f,d){h&&!l(h=d?h:h.prototype,c)&&a(h,c,{configurable:!0,value:f})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),c=o("50c4"),h=function(f){return function(d,p,m,g){a(p);var y=l(d),v=u(y),x=c(y.length),k=f?x-1:0,C=f?-1:1;if(m<2)for(;;){if(k in v){g=v[k],k+=C;break}if(k+=C,f?k<0:x<=k)throw TypeError("Reduce of empty array with no initial value")}for(;f?k>=0:x>k;k+=C)k in v&&(g=p(g,v[k],k,y));return g}};i.exports={left:h(!1),right:h(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),c=o("9263"),h=o("9112"),f=u("species"),d=!l(function(){var v=/./;return v.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(v,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),m=u("replace"),g=function(){return/./[m]?/./[m]("a","$0")==="":!1}(),y=!l(function(){var v=/(?:)/,x=v.exec;v.exec=function(){return x.apply(this,arguments)};var k="ab".split(v);return k.length!==2||k[0]!=="a"||k[1]!=="b"});i.exports=function(v,x,k,C){var w=u(v),M=!l(function(){var L={};return L[w]=function(){return 7},""[v](L)!=7}),D=M&&!l(function(){var L=!1,F=/a/;return v==="split"&&(F={},F.constructor={},F.constructor[f]=function(){return F},F.flags="",F[w]=/./[w]),F.exec=function(){return L=!0,null},F[w](""),!L});if(!M||!D||v==="replace"&&!(d&&p&&!g)||v==="split"&&!y){var A=/./[w],E=k(w,""[v],function(L,F,W,G,ee){return F.exec===c?M&&!ee?{done:!0,value:A.call(F,W,G)}:{done:!0,value:L.call(W,F,G)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),N=E[0],I=E[1];a(String.prototype,v,N),a(RegExp.prototype,w,x==2?function(L,F){return I.call(L,this,F)}:function(L){return I.call(L,this)})}C&&h(RegExp.prototype[w],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),c=o("ae40"),h=u("map"),f=c("map");a({target:"Array",proto:!0,forced:!h||!f},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),c=o("fc6a"),h=o("06cf"),f=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var m=c(p),g=h.f,y=u(m),v={},x=0,k,C;y.length>x;)C=g(m,k=y[x++]),C!==void 0&&f(v,k,C);return v}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),c=o("9112"),h=o("b622"),f=h("iterator"),d=h("toStringTag"),p=u.values;for(var m in l){var g=a[m],y=g&&g.prototype;if(y){if(y[f]!==p)try{c(y,f,p)}catch{y[f]=p}if(y[d]||c(y,d,m),l[m]){for(var v in u)if(y[v]!==u[v])try{c(y,v,u[v])}catch{y[v]=u[v]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(c){return a(c,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),c=o("5135"),h=o("861d"),f=o("9bf2").f,d=o("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var m={},g=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),M=this instanceof g?new p(w):w===void 0?p():p(w);return w===""&&(m[M]=!0),M};d(g,p);var y=g.prototype=p.prototype;y.constructor=g;var v=y.toString,x=String(p("test"))=="Symbol(test)",k=/^Symbol\((.*)\)[^)]+$/;f(y,"description",{configurable:!0,get:function(){var w=h(this)?this.valueOf():this,M=v.call(w);if(c(m,w))return"";var D=x?M.slice(7,-1):M.replace(k,"$1");return D===""?void 0:D}}),a({global:!0,forced:!0},{Symbol:g})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),c=o("e177"),h=u("IE_PROTO"),f=Object.prototype;i.exports=c?Object.getPrototypeOf:function(d){return d=l(d),a(d,h)?d[h]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?f:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),c=o("69f3"),h=o("7dd0"),f="Array Iterator",d=c.set,p=c.getterFor(f);i.exports=h(Array,"Array",function(m,g){d(this,{type:f,target:a(m),index:0,kind:g})},function(){var m=p(this),g=m.target,y=m.kind,v=m.index++;return!g||v>=g.length?(m.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:v,done:!1}:y=="values"?{value:g[v],done:!1}:{value:[v,g[v]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),c=o("06cf").f,h=o("83ab"),f=l(function(){c(1)}),d=!h||f;a({target:"Object",stat:!0,forced:d,sham:!h},{getOwnPropertyDescriptor:function(m,g){return c(u(m),g)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),c=o("9bf2");i.exports=function(h,f){for(var d=l(f),p=c.f,m=u.f,g=0;g<d.length;g++){var y=d[g];a(h,y)||p(h,y,m(f,y))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),c=Array.prototype;i.exports=function(h){return h!==void 0&&(l.Array===h||c[u]===h)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),c=u("toStringTag"),h=l(function(){return arguments}())=="Arguments",f=function(d,p){try{return d[p]}catch{}};i.exports=a?l:function(d){var p,m,g;return d===void 0?"Undefined":d===null?"Null":typeof(m=f(p=Object(d),c))=="string"?m:h?l(p):(g=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":g}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function c(H,j,U){return j in H?Object.defineProperty(H,j,{value:U,enumerable:!0,configurable:!0,writable:!0}):H[j]=U,H}function h(H,j){var U=Object.keys(H);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(H);j&&(ie=ie.filter(function(ye){return Object.getOwnPropertyDescriptor(H,ye).enumerable})),U.push.apply(U,ie)}return U}function f(H){for(var j=1;j<arguments.length;j++){var U=arguments[j]!=null?arguments[j]:{};j%2?h(Object(U),!0).forEach(function(ie){c(H,ie,U[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(U)):h(Object(U)).forEach(function(ie){Object.defineProperty(H,ie,Object.getOwnPropertyDescriptor(U,ie))})}return H}function d(H){if(Array.isArray(H))return H}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function p(H,j){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(H)))){var U=[],ie=!0,ye=!1,Ne=void 0;try{for(var je=H[Symbol.iterator](),Ze;!(ie=(Ze=je.next()).done)&&(U.push(Ze.value),!(j&&U.length===j));ie=!0);}catch(Dt){ye=!0,Ne=Dt}finally{try{!ie&&je.return!=null&&je.return()}finally{if(ye)throw Ne}}return U}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function m(H,j){(j==null||j>H.length)&&(j=H.length);for(var U=0,ie=new Array(j);U<j;U++)ie[U]=H[U];return ie}function g(H,j){if(H){if(typeof H=="string")return m(H,j);var U=Object.prototype.toString.call(H).slice(8,-1);if(U==="Object"&&H.constructor&&(U=H.constructor.name),U==="Map"||U==="Set")return Array.from(H);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return m(H,j)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(H,j){return d(H)||p(H,j)||g(H,j)||y()}function x(H){if(Array.isArray(H))return m(H)}function k(H){if(typeof Symbol<"u"&&Symbol.iterator in Object(H))return Array.from(H)}function C(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(H){return x(H)||k(H)||g(H)||C()}var M=o("a352"),D=o.n(M);function A(H){H.parentElement!==null&&H.parentElement.removeChild(H)}function E(H,j,U){var ie=U===0?H.children[0]:H.children[U-1].nextSibling;H.insertBefore(j,ie)}var N=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function I(H){var j=Object.create(null);return function(ie){var ye=j[ie];return ye||(j[ie]=H(ie))}}var L=/-(\w)/g,F=I(function(H){return H.replace(L,function(j,U){return U.toUpperCase()})});o("5db7"),o("73d9");var W=["Start","Add","Remove","Update","End"],G=["Choose","Unchoose","Sort","Filter","Clone"],ee=["Move"],de=[ee,W,G].flatMap(function(H){return H}).map(function(H){return"on".concat(H)}),ge={manage:ee,manageAndEmit:W,emit:G};function R(H){return de.indexOf(H)!==-1}o("caad"),o("2ca0");var fe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function xe(H){return fe.includes(H)}function P(H){return["transition-group","TransitionGroup"].includes(H)}function $e(H){return["id","class","role","style"].includes(H)||H.startsWith("data-")||H.startsWith("aria-")||H.startsWith("on")}function Z(H){return H.reduce(function(j,U){var ie=v(U,2),ye=ie[0],Ne=ie[1];return j[ye]=Ne,j},{})}function we(H){var j=H.$attrs,U=H.componentData,ie=U===void 0?{}:U,ye=Z(Object.entries(j).filter(function(Ne){var je=v(Ne,2),Ze=je[0];return je[1],$e(Ze)}));return f(f({},ye),ie)}function Se(H){var j=H.$attrs,U=H.callBackBuilder,ie=Z(Ie(j));Object.entries(U).forEach(function(Ne){var je=v(Ne,2),Ze=je[0],Dt=je[1];ge[Ze].forEach(function(Le){ie["on".concat(Le)]=Dt(Le)})});var ye="[data-draggable]".concat(ie.draggable||"");return f(f({},ie),{},{draggable:ye})}function Ie(H){return Object.entries(H).filter(function(j){var U=v(j,2),ie=U[0];return U[1],!$e(ie)}).map(function(j){var U=v(j,2),ie=U[0],ye=U[1];return[F(ie),ye]}).filter(function(j){var U=v(j,2),ie=U[0];return U[1],!R(ie)})}o("c740");function Je(H,j){if(!(H instanceof j))throw new TypeError("Cannot call a class as a function")}function Ct(H,j){for(var U=0;U<j.length;U++){var ie=j[U];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(H,ie.key,ie)}}function tn(H,j,U){return j&&Ct(H.prototype,j),H}var at=function(j){var U=j.el;return U},It=function(j,U){return j.__draggable_context=U},vt=function(j){return j.__draggable_context},ln=function(){function H(j){var U=j.nodes,ie=U.header,ye=U.default,Ne=U.footer,je=j.root,Ze=j.realList;Je(this,H),this.defaultNodes=ye,this.children=[].concat(w(ie),w(ye),w(Ne)),this.externalComponent=je.externalComponent,this.rootTransition=je.transition,this.tag=je.tag,this.realList=Ze}return tn(H,[{key:"render",value:function(U,ie){var ye=this.tag,Ne=this.children,je=this._isRootComponent,Ze=je?{default:function(){return Ne}}:Ne;return U(ye,ie,Ze)}},{key:"updated",value:function(){var U=this.defaultNodes,ie=this.realList;U.forEach(function(ye,Ne){It(at(ye),{element:ie[Ne],index:Ne})})}},{key:"getUnderlyingVm",value:function(U){return vt(U)}},{key:"getVmIndexFromDomIndex",value:function(U,ie){var ye=this.defaultNodes,Ne=ye.length,je=ie.children,Ze=je.item(U);if(Ze===null)return Ne;var Dt=vt(Ze);if(Dt)return Dt.index;if(Ne===0)return 0;var Le=at(ye[0]),De=w(je).findIndex(function(ze){return ze===Le});return U<De?0:Ne}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),H}(),vn=o("8bbf");function Ht(H,j){var U=H[j];return U?U():[]}function Kn(H){var j=H.$slots,U=H.realList,ie=H.getKey,ye=U||[],Ne=["header","footer"].map(function(ze){return Ht(j,ze)}),je=v(Ne,2),Ze=je[0],Dt=je[1],Le=j.item;if(!Le)throw new Error("draggable element must have an item slot");var De=ye.flatMap(function(ze,mt){return Le({element:ze,index:mt}).map(function(ft){return ft.key=ie(ze),ft.props=f(f({},ft.props||{}),{},{"data-draggable":!0}),ft})});if(De.length!==ye.length)throw new Error("Item slot must have only one child");return{header:Ze,footer:Dt,default:De}}function Xn(H){var j=P(H),U=!xe(H)&&!j;return{transition:j,externalComponent:U,tag:U?Object(vn.resolveComponent)(H):j?vn.TransitionGroup:H}}function $n(H){var j=H.$slots,U=H.tag,ie=H.realList,ye=H.getKey,Ne=Kn({$slots:j,realList:ie,getKey:ye}),je=Xn(U);return new ln({nodes:Ne,root:je,realList:ie})}function Tr(H,j){var U=this;Object(vn.nextTick)(function(){return U.$emit(H.toLowerCase(),j)})}function Ai(H){var j=this;return function(U,ie){if(j.realList!==null)return j["onDrag".concat(H)](U,ie)}}function ii(H){var j=this,U=Ai.call(this,H);return function(ie,ye){U.call(j,ie,ye),Tr.call(j,H,ie)}}var Er=null,hr={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(j){return j}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},J=["update:modelValue","change"].concat(w([].concat(w(ge.manageAndEmit),w(ge.emit)).map(function(H){return H.toLowerCase()}))),he=Object(vn.defineComponent)({name:"draggable",inheritAttrs:!1,props:hr,emits:J,data:function(){return{error:!1}},render:function(){try{this.error=!1;var j=this.$slots,U=this.$attrs,ie=this.tag,ye=this.componentData,Ne=this.realList,je=this.getKey,Ze=$n({$slots:j,tag:ie,realList:Ne,getKey:je});this.componentStructure=Ze;var Dt=we({$attrs:U,componentData:ye});return Ze.render(vn.h,Dt)}catch(Le){return this.error=!0,Object(vn.h)("pre",{style:{color:"red"}},Le.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&N.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var j=this;if(!this.error){var U=this.$attrs,ie=this.$el,ye=this.componentStructure;ye.updated();var Ne=Se({$attrs:U,callBackBuilder:{manageAndEmit:function(Dt){return ii.call(j,Dt)},emit:function(Dt){return Tr.bind(j,Dt)},manage:function(Dt){return Ai.call(j,Dt)}}}),je=ie.nodeType===1?ie:ie.parentElement;this._sortable=new D.a(je,Ne),this.targetDomElement=je,je.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var j=this.list;return j||this.modelValue},getKey:function(){var j=this.itemKey;return typeof j=="function"?j:function(U){return U[j]}}},watch:{$attrs:{handler:function(j){var U=this._sortable;U&&Ie(j).forEach(function(ie){var ye=v(ie,2),Ne=ye[0],je=ye[1];U.option(Ne,je)})},deep:!0}},methods:{getUnderlyingVm:function(j){return this.componentStructure.getUnderlyingVm(j)||null},getUnderlyingPotencialDraggableComponent:function(j){return j.__draggable_component__},emitChanges:function(j){var U=this;Object(vn.nextTick)(function(){return U.$emit("change",j)})},alterList:function(j){if(this.list){j(this.list);return}var U=w(this.modelValue);j(U),this.$emit("update:modelValue",U)},spliceList:function(){var j=arguments,U=function(ye){return ye.splice.apply(ye,w(j))};this.alterList(U)},updatePosition:function(j,U){var ie=function(Ne){return Ne.splice(U,0,Ne.splice(j,1)[0])};this.alterList(ie)},getRelatedContextFromMoveEvent:function(j){var U=j.to,ie=j.related,ye=this.getUnderlyingPotencialDraggableComponent(U);if(!ye)return{component:ye};var Ne=ye.realList,je={list:Ne,component:ye};if(U!==ie&&Ne){var Ze=ye.getUnderlyingVm(ie)||{};return f(f({},Ze),je)}return je},getVmIndexFromDomIndex:function(j){return this.componentStructure.getVmIndexFromDomIndex(j,this.targetDomElement)},onDragStart:function(j){this.context=this.getUnderlyingVm(j.item),j.item._underlying_vm_=this.clone(this.context.element),Er=j.item},onDragAdd:function(j){var U=j.item._underlying_vm_;if(U!==void 0){A(j.item);var ie=this.getVmIndexFromDomIndex(j.newIndex);this.spliceList(ie,0,U);var ye={element:U,newIndex:ie};this.emitChanges({added:ye})}},onDragRemove:function(j){if(E(this.$el,j.item,j.oldIndex),j.pullMode==="clone"){A(j.clone);return}var U=this.context,ie=U.index,ye=U.element;this.spliceList(ie,1);var Ne={element:ye,oldIndex:ie};this.emitChanges({removed:Ne})},onDragUpdate:function(j){A(j.item),E(j.from,j.item,j.oldIndex);var U=this.context.index,ie=this.getVmIndexFromDomIndex(j.newIndex);this.updatePosition(U,ie);var ye={element:this.context.element,oldIndex:U,newIndex:ie};this.emitChanges({moved:ye})},computeFutureIndex:function(j,U){if(!j.element)return 0;var ie=w(U.to.children).filter(function(Ze){return Ze.style.display!=="none"}),ye=ie.indexOf(U.related),Ne=j.component.getVmIndexFromDomIndex(ye),je=ie.indexOf(Er)!==-1;return je||!U.willInsertAfter?Ne:Ne+1},onDragMove:function(j,U){var ie=this.move,ye=this.realList;if(!ie||!ye)return!0;var Ne=this.getRelatedContextFromMoveEvent(j),je=this.computeFutureIndex(Ne,j),Ze=f(f({},this.context),{},{futureIndex:je}),Dt=f(f({},j),{},{relatedContext:Ne,draggedContext:Ze});return ie(Dt,U)},onDragEnd:function(){Er=null}}}),qe=he;s.default=qe},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),c=o("23cb"),h=o("50c4"),f=o("fc6a"),d=o("8418"),p=o("b622"),m=o("1dde"),g=o("ae40"),y=m("slice"),v=g("slice",{ACCESSORS:!0,0:0,1:2}),x=p("species"),k=[].slice,C=Math.max;a({target:"Array",proto:!0,forced:!y||!v},{slice:function(M,D){var A=f(this),E=h(A.length),N=c(M,E),I=c(D===void 0?E:D,E),L,F,W;if(u(A)&&(L=A.constructor,typeof L=="function"&&(L===Array||u(L.prototype))?L=void 0:l(L)&&(L=L[x],L===null&&(L=void 0)),L===Array||L===void 0))return k.call(A,N,I);for(F=new(L===void 0?Array:L)(C(I-N,0)),W=0;N<I;N++,W++)N in A&&d(F,W,A[N]);return F.length=W,F}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})}(n1)),n1.exports}var ZW=JW();const QW=Py(ZW),e6=Symbol("editorInfoCtxKey");function eq(){const{dom:n,loading:e,editor:t,editorFactory:r}=xA(e6,{}),i=le();return ko(()=>{if(!n.value)return;const s=r.value(n.value);s&&(e.value=!0,i.value=s,s.create().then(o=>{t.value=o}).finally(()=>{e.value=!1}).catch(console.error))}),Q0(()=>{i.value?.destroy().catch(console.error)}),n}const tq=He({name:"Milkdown",setup:()=>{const n=eq();return()=>We("div",{"data-milkdown-root":!0,ref:n},null)}}),nq=He({name:"MilkdownProvider",setup:(n,{slots:e})=>{const t=le(null),r=le(void 0),i=le(void 0),s=le(!0);return YF(e6,{loading:s,dom:t,editor:i,editorFactory:r}),()=>We(er,null,[e.default?.()])}});function rq(n){const{editorFactory:e,loading:t,editor:r}=xA(e6);return e.value=n,{loading:t,get:()=>r.value}}const _g=He({__name:"inline-editor-wrapper",props:Ay({disabled:{type:Boolean},placeholder:{},features:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Z0(n,"modelValue");return(r,i)=>(ve(),gt("div",null,[We($(nq),null,{default:Qe(()=>[We($(Tge),gs({modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=s=>t.value=s)},e),null,16,["modelValue"])]),_:1})]))}});var hO=typeof global=="object"&&global&&global.Object===Object&&global,iq=typeof self=="object"&&self&&self.Object===Object&&self,$h=hO||iq||Function("return this")(),Bg=$h.Symbol,fO=Object.prototype,sq=fO.hasOwnProperty,oq=fO.toString,Sf=Bg?Bg.toStringTag:void 0;function aq(n){var e=sq.call(n,Sf),t=n[Sf];try{n[Sf]=void 0;var r=!0}catch{}var i=oq.call(n);return r&&(e?n[Sf]=t:delete n[Sf]),i}var lq=Object.prototype,uq=lq.toString;function cq(n){return uq.call(n)}var hq="[object Null]",fq="[object Undefined]",BS=Bg?Bg.toStringTag:void 0;function Qy(n){return n==null?n===void 0?fq:hq:BS&&BS in Object(n)?aq(n):cq(n)}function cp(n){return n!=null&&typeof n=="object"}var qb=Array.isArray;function ya(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function dO(n){return n}var dq="[object AsyncFunction]",pq="[object Function]",mq="[object GeneratorFunction]",gq="[object Proxy]";function t6(n){if(!ya(n))return!1;var e=Qy(n);return e==pq||e==mq||e==dq||e==gq}var B2=$h["__core-js_shared__"],FS=function(){var n=/[^.]+$/.exec(B2&&B2.keys&&B2.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function yq(n){return!!FS&&FS in n}var vq=Function.prototype,bq=vq.toString;function xq(n){if(n!=null){try{return bq.call(n)}catch{}try{return n+""}catch{}}return""}var wq=/[\\^$.*+?()[\]{}|]/g,Sq=/^\[object .+?Constructor\]$/,kq=Function.prototype,Cq=Object.prototype,Tq=kq.toString,Eq=Cq.hasOwnProperty,Aq=RegExp("^"+Tq.call(Eq).replace(wq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mq(n){if(!ya(n)||yq(n))return!1;var e=t6(n)?Aq:Sq;return e.test(xq(n))}function Oq(n,e){return n?.[e]}function n6(n,e){var t=Oq(n,e);return Mq(t)?t:void 0}var $S=Object.create,Iq=function(){function n(){}return function(e){if(!ya(e))return{};if($S)return $S(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function pO(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Dq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Nq=800,Pq=16,Rq=Date.now;function Lq(n){var e=0,t=0;return function(){var r=Rq(),i=Pq-(r-t);if(t=r,i>0){if(++e>=Nq)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function _q(n){return function(){return n}}var Fg=function(){try{var n=n6(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Bq=Fg?function(n,e){return Fg(n,"toString",{configurable:!0,enumerable:!1,value:_q(e),writable:!0})}:dO,Fq=Lq(Bq),$q=9007199254740991,zq=/^(?:0|[1-9]\d*)$/;function mO(n,e){var t=typeof n;return e=e??$q,!!e&&(t=="number"||t!="symbol"&&zq.test(n))&&n>-1&&n%1==0&&n<e}function r6(n,e,t){e=="__proto__"&&Fg?Fg(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function ev(n,e){return n===e||n!==n&&e!==e}var Vq=Object.prototype,Hq=Vq.hasOwnProperty;function jq(n,e,t){var r=n[e];(!(Hq.call(n,e)&&ev(r,t))||t===void 0&&!(e in n))&&r6(n,e,t)}function Wq(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),i?r6(t,a,l):jq(t,a,l)}return t}var zS=Math.max;function qq(n,e,t){return e=zS(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=zS(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),pO(n,this,a)}}function gO(n,e){return Fq(qq(n,e,dO),n+"")}var Uq=9007199254740991;function yO(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Uq}function i6(n){return n!=null&&yO(n.length)&&!t6(n)}function Gq(n,e,t){if(!ya(t))return!1;var r=typeof e;return(r=="number"?i6(t)&&mO(e,t.length):r=="string"&&e in t)?ev(t[e],n):!1}function Kq(n){return gO(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&Gq(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var Xq=Object.prototype;function vO(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Xq;return n===t}function Yq(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Jq="[object Arguments]";function VS(n){return cp(n)&&Qy(n)==Jq}var bO=Object.prototype,Zq=bO.hasOwnProperty,Qq=bO.propertyIsEnumerable,Ub=VS(function(){return arguments}())?VS:function(n){return cp(n)&&Zq.call(n,"callee")&&!Qq.call(n,"callee")};function eU(){return!1}var xO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HS=xO&&typeof module=="object"&&module&&!module.nodeType&&module,tU=HS&&HS.exports===xO,jS=tU?$h.Buffer:void 0,nU=jS?jS.isBuffer:void 0,wO=nU||eU,rU="[object Arguments]",iU="[object Array]",sU="[object Boolean]",oU="[object Date]",aU="[object Error]",lU="[object Function]",uU="[object Map]",cU="[object Number]",hU="[object Object]",fU="[object RegExp]",dU="[object Set]",pU="[object String]",mU="[object WeakMap]",gU="[object ArrayBuffer]",yU="[object DataView]",vU="[object Float32Array]",bU="[object Float64Array]",xU="[object Int8Array]",wU="[object Int16Array]",SU="[object Int32Array]",kU="[object Uint8Array]",CU="[object Uint8ClampedArray]",TU="[object Uint16Array]",EU="[object Uint32Array]",nn={};nn[vU]=nn[bU]=nn[xU]=nn[wU]=nn[SU]=nn[kU]=nn[CU]=nn[TU]=nn[EU]=!0;nn[rU]=nn[iU]=nn[gU]=nn[sU]=nn[yU]=nn[oU]=nn[aU]=nn[lU]=nn[uU]=nn[cU]=nn[hU]=nn[fU]=nn[dU]=nn[pU]=nn[mU]=!1;function AU(n){return cp(n)&&yO(n.length)&&!!nn[Qy(n)]}function MU(n){return function(e){return n(e)}}var SO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rd=SO&&typeof module=="object"&&module&&!module.nodeType&&module,OU=Rd&&Rd.exports===SO,F2=OU&&hO.process,WS=function(){try{var n=Rd&&Rd.require&&Rd.require("util").types;return n||F2&&F2.binding&&F2.binding("util")}catch{}}(),qS=WS&&WS.isTypedArray,kO=qS?MU(qS):AU;function IU(n,e){var t=qb(n),r=!t&&Ub(n),i=!t&&!r&&wO(n),s=!t&&!r&&!i&&kO(n),o=t||r||i||s,a=o?Yq(n.length,String):[],l=a.length;for(var u in n)o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mO(u,l))||a.push(u);return a}function DU(n,e){return function(t){return n(e(t))}}function NU(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var PU=Object.prototype,RU=PU.hasOwnProperty;function LU(n){if(!ya(n))return NU(n);var e=vO(n),t=[];for(var r in n)r=="constructor"&&(e||!RU.call(n,r))||t.push(r);return t}function CO(n){return i6(n)?IU(n):LU(n)}var d0=n6(Object,"create");function _U(){this.__data__=d0?d0(null):{},this.size=0}function BU(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var FU="__lodash_hash_undefined__",$U=Object.prototype,zU=$U.hasOwnProperty;function VU(n){var e=this.__data__;if(d0){var t=e[n];return t===FU?void 0:t}return zU.call(e,n)?e[n]:void 0}var HU=Object.prototype,jU=HU.hasOwnProperty;function WU(n){var e=this.__data__;return d0?e[n]!==void 0:jU.call(e,n)}var qU="__lodash_hash_undefined__";function UU(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=d0&&e===void 0?qU:e,this}function Hu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Hu.prototype.clear=_U;Hu.prototype.delete=BU;Hu.prototype.get=VU;Hu.prototype.has=WU;Hu.prototype.set=UU;function GU(){this.__data__=[],this.size=0}function tv(n,e){for(var t=n.length;t--;)if(ev(n[t][0],e))return t;return-1}var KU=Array.prototype,XU=KU.splice;function YU(n){var e=this.__data__,t=tv(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():XU.call(e,t,1),--this.size,!0}function JU(n){var e=this.__data__,t=tv(e,n);return t<0?void 0:e[t][1]}function ZU(n){return tv(this.__data__,n)>-1}function QU(n,e){var t=this.__data__,r=tv(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Aa(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Aa.prototype.clear=GU;Aa.prototype.delete=YU;Aa.prototype.get=JU;Aa.prototype.has=ZU;Aa.prototype.set=QU;var TO=n6($h,"Map");function eG(){this.size=0,this.__data__={hash:new Hu,map:new(TO||Aa),string:new Hu}}function tG(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function nv(n,e){var t=n.__data__;return tG(e)?t[typeof e=="string"?"string":"hash"]:t.map}function nG(n){var e=nv(this,n).delete(n);return this.size-=e?1:0,e}function rG(n){return nv(this,n).get(n)}function iG(n){return nv(this,n).has(n)}function sG(n,e){var t=nv(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function zh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}zh.prototype.clear=eG;zh.prototype.delete=nG;zh.prototype.get=rG;zh.prototype.has=iG;zh.prototype.set=sG;var EO=DU(Object.getPrototypeOf,Object),oG="[object Object]",aG=Function.prototype,lG=Object.prototype,AO=aG.toString,uG=lG.hasOwnProperty,cG=AO.call(Object);function hG(n){if(!cp(n)||Qy(n)!=oG)return!1;var e=EO(n);if(e===null)return!0;var t=uG.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&AO.call(t)==cG}function fG(){this.__data__=new Aa,this.size=0}function dG(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function pG(n){return this.__data__.get(n)}function mG(n){return this.__data__.has(n)}var gG=200;function yG(n,e){var t=this.__data__;if(t instanceof Aa){var r=t.__data__;if(!TO||r.length<gG-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new zh(r)}return t.set(n,e),this.size=t.size,this}function Vh(n){var e=this.__data__=new Aa(n);this.size=e.size}Vh.prototype.clear=fG;Vh.prototype.delete=dG;Vh.prototype.get=pG;Vh.prototype.has=mG;Vh.prototype.set=yG;var MO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,US=MO&&typeof module=="object"&&module&&!module.nodeType&&module,vG=US&&US.exports===MO,GS=vG?$h.Buffer:void 0;GS&&GS.allocUnsafe;function bG(n,e){return n.slice()}var KS=$h.Uint8Array;function xG(n){var e=new n.constructor(n.byteLength);return new KS(e).set(new KS(n)),e}function wG(n,e){var t=xG(n.buffer);return new n.constructor(t,n.byteOffset,n.length)}function SG(n){return typeof n.constructor=="function"&&!vO(n)?Iq(EO(n)):{}}function kG(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(t(s[l],l,s)===!1)break}return e}}var CG=kG();function Gb(n,e,t){(t!==void 0&&!ev(n[e],t)||t===void 0&&!(e in n))&&r6(n,e,t)}function TG(n){return cp(n)&&i6(n)}function Kb(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function EG(n){return Wq(n,CO(n))}function AG(n,e,t,r,i,s,o){var a=Kb(n,t),l=Kb(e,t),u=o.get(l);if(u){Gb(n,t,u);return}var c=s?s(a,l,t+"",n,e,o):void 0,h=c===void 0;if(h){var f=qb(l),d=!f&&wO(l),p=!f&&!d&&kO(l);c=l,f||d||p?qb(a)?c=a:TG(a)?c=Dq(a):d?(h=!1,c=bG(l)):p?(h=!1,c=wG(l)):c=[]:hG(l)||Ub(l)?(c=a,Ub(a)?c=EG(a):(!ya(a)||t6(a))&&(c=SG(l))):h=!1}h&&(o.set(l,c),i(c,l,r,s,o),o.delete(l)),Gb(n,t,c)}function s6(n,e,t,r,i){n!==e&&CG(e,function(s,o){if(i||(i=new Vh),ya(s))AG(n,e,o,t,s6,r,i);else{var a=r?r(Kb(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),Gb(n,o,a)}},CO)}function OO(n,e,t,r,i,s){return ya(n)&&ya(e)&&(s.set(e,n),s6(n,e,void 0,OO,s),s.delete(e)),n}var MG=Kq(function(n,e,t,r){s6(n,e,t,r)}),OG=gO(function(n){return n.push(void 0,OO),pO(MG,void 0,n)});const IG=1024;let DG=0,is=class{constructor(e,t){this.from=e,this.to=t}};class kt{constructor(e={}){this.id=DG++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ui.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}kt.closedBy=new kt({deserialize:n=>n.split(" ")});kt.openedBy=new kt({deserialize:n=>n.split(" ")});kt.group=new kt({deserialize:n=>n.split(" ")});kt.isolate=new kt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});kt.contextHash=new kt({perNode:!0});kt.lookAhead=new kt({perNode:!0});kt.mounted=new kt({perNode:!0});class p0{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[kt.mounted.id]}}const NG=Object.create(null);let Ui=class IO{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):NG,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new IO(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(kt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(kt.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}};Ui.none=new Ui("",Object.create(null),0,8);class o6{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new Ui(r.name,i,r.id,r.flags):r)}return new o6(t)}}const tm=new WeakMap,XS=new WeakMap;var kn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(kn||(kn={}));class Qt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=p0.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new $g(this.topNode,e)}cursorAt(e,t=0,r=0){let i=tm.get(this)||this.topNode,s=new $g(i);return s.moveTo(e,t),tm.set(this,s._tree),s}get topNode(){return new _r(this,0,0,null)}resolve(e,t=0){let r=m0(tm.get(this)||this.topNode,e,t,!1);return tm.set(this,r),r}resolveInner(e,t=0){let r=m0(XS.get(this)||this.topNode,e,t,!0);return XS.set(this,r),r}resolveStack(e,t=0){return LG(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&kn.IncludeAnonymous)>0;for(let l=this.cursor(o|kn.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:u6(Ui.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new Qt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new Qt(Ui.none,t,r,i)))}static build(e){return _G(e)}}Qt.empty=new Qt(Ui.none,[],[],0);class a6{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new a6(this.buffer,this.index)}}class Cl{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Ui.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(DO(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new Cl(s,o,this.set)}}function DO(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function m0(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof _r&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:kn.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof _r&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class NO{cursor(e=0){return new $g(this,e)}getChild(e,t=null,r=null){let i=YS(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return YS(this,e,t,r)}resolve(e,t=0){return m0(this,e,t,!1)}resolveInner(e,t=0){return m0(this,e,t,!0)}matchContext(e){return Xb(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class _r extends NO{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],h=l[e]+o.from;if(DO(i,r,h,h+c.length)){if(c instanceof Cl){if(s&kn.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,r-h,i);if(f>-1)return new lo(new PG(o,c,e,h),null,f)}else if(s&kn.IncludeAnonymous||!c.type.isAnonymous||l6(c)){let f;if(!(s&kn.IgnoreMounts)&&(f=p0.get(c))&&!f.overlay)return new _r(f.tree,h,e,o);let d=new _r(c,h,e,o);return s&kn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(s&kn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&kn.IgnoreOverlays)&&(i=p0.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new _r(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function YS(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Xb(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class PG{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class lo extends NO{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new lo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&kn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new lo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new lo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new lo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new Qt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function PO(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof _r&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new RG(i,t)}class RG{constructor(e,t){this.heads=e,this.node=t}get next(){return PO(this.heads)}}function LG(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof _r?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=p0.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new _r(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(m0(a,e,t,!1))}}return i?PO(i):r}class $g{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof _r)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof _r?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&kn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&kn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&kn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&kn.IncludeAnonymous||a instanceof Cl||!a.type.isAnonymous||l6(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new lo(this.buffer,t,this.stack[i]);return this.bufferNode=new lo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Xb(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Xb(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function l6(n){return n.children.some(e=>e instanceof Cl||!e.type.isAnonymous||l6(e))}function _G(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=IG,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new a6(t,t.length):t,l=r.types,u=0,c=0;function h(C,w,M,D,A,E){let{id:N,start:I,end:L,size:F}=a,W=c,G=u;for(;F<0;)if(a.next(),F==-1){let fe=s[N];M.push(fe),D.push(I-C);return}else if(F==-3){u=N;return}else if(F==-4){c=N;return}else throw new RangeError(`Unrecognized record size: ${F}`);let ee=l[N],de,ge,R=I-C;if(L-I<=i&&(ge=g(a.pos-w,A))){let fe=new Uint16Array(ge.size-ge.skip),xe=a.pos-ge.size,P=fe.length;for(;a.pos>xe;)P=y(ge.start,fe,P);de=new Cl(fe,L-ge.start,r),R=ge.start-C}else{let fe=a.pos-F;a.next();let xe=[],P=[],$e=N>=o?N:-1,Z=0,we=L;for(;a.pos>fe;)$e>=0&&a.id==$e&&a.size>=0?(a.end<=we-i&&(p(xe,P,I,Z,a.end,we,$e,W,G),Z=xe.length,we=a.end),a.next()):E>2500?f(I,fe,xe,P):h(I,fe,xe,P,$e,E+1);if($e>=0&&Z>0&&Z<xe.length&&p(xe,P,I,Z,I,we,$e,W,G),xe.reverse(),P.reverse(),$e>-1&&Z>0){let Se=d(ee,G);de=u6(ee,xe,P,0,xe.length,0,L-I,Se,Se)}else de=m(ee,xe,P,L-I,W-L,G)}M.push(de),D.push(R)}function f(C,w,M,D){let A=[],E=0,N=-1;for(;a.pos>w;){let{id:I,start:L,end:F,size:W}=a;if(W>4)a.next();else{if(N>-1&&L<N)break;N<0&&(N=F-i),A.push(I,L,F),E++,a.next()}}if(E){let I=new Uint16Array(E*4),L=A[A.length-2];for(let F=A.length-3,W=0;F>=0;F-=3)I[W++]=A[F],I[W++]=A[F+1]-L,I[W++]=A[F+2]-L,I[W++]=W;M.push(new Cl(I,A[2]-L,r)),D.push(L-C)}}function d(C,w){return(M,D,A)=>{let E=0,N=M.length-1,I,L;if(N>=0&&(I=M[N])instanceof Qt){if(!N&&I.type==C&&I.length==A)return I;(L=I.prop(kt.lookAhead))&&(E=D[N]+I.length+L)}return m(C,M,D,A,E,w)}}function p(C,w,M,D,A,E,N,I,L){let F=[],W=[];for(;C.length>D;)F.push(C.pop()),W.push(w.pop()+M-A);C.push(m(r.types[N],F,W,E-A,I-E,L)),w.push(A-M)}function m(C,w,M,D,A,E,N){if(E){let I=[kt.contextHash,E];N=N?[I].concat(N):[I]}if(A>25){let I=[kt.lookAhead,A];N=N?[I].concat(N):[I]}return new Qt(C,w,M,D,N)}function g(C,w){let M=a.fork(),D=0,A=0,E=0,N=M.end-i,I={size:0,start:0,skip:0};e:for(let L=M.pos-C;M.pos>L;){let F=M.size;if(M.id==w&&F>=0){I.size=D,I.start=A,I.skip=E,E+=4,D+=4,M.next();continue}let W=M.pos-F;if(F<0||W<L||M.start<N)break;let G=M.id>=o?4:0,ee=M.start;for(M.next();M.pos>W;){if(M.size<0)if(M.size==-3)G+=4;else break e;else M.id>=o&&(G+=4);M.next()}A=ee,D+=F,E+=G}return(w<0||D==C)&&(I.size=D,I.start=A,I.skip=E),I.size>4?I:void 0}function y(C,w,M){let{id:D,start:A,end:E,size:N}=a;if(a.next(),N>=0&&D<o){let I=M;if(N>4){let L=a.pos-(N-4);for(;a.pos>L;)M=y(C,w,M)}w[--M]=I,w[--M]=E-C,w[--M]=A-C,w[--M]=D}else N==-3?u=D:N==-4&&(c=D);return M}let v=[],x=[];for(;a.pos>0;)h(n.start||0,n.bufferStart||0,v,x,-1,0);let k=(e=n.length)!==null&&e!==void 0?e:v.length?x[0]+v[0].length:0;return new Qt(l[n.topID],v.reverse(),x.reverse(),k)}const JS=new WeakMap;function p1(n,e){if(!n.isAnonymous||e instanceof Cl||e.type!=n)return 1;let t=JS.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Qt)){t=1;break}t+=p1(n,r)}JS.set(e,t)}return t}function u6(n,e,t,r,i,s,o,a,l){let u=0;for(let p=r;p<i;p++)u+=p1(n,e[p]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(p,m,g,y,v){for(let x=g;x<y;){let k=x,C=m[x],w=p1(n,p[x]);for(x++;x<y;x++){let M=p1(n,p[x]);if(w+M>=c)break;w+=M}if(x==k+1){if(w>c){let M=p[k];d(M.children,M.positions,0,M.children.length,m[k]+v);continue}h.push(p[k])}else{let M=m[x-1]+p[x-1].length-C;h.push(u6(n,p,m,k,x,C,M,null,l))}f.push(C+v-s)}}return d(e,t,r,i,0),(a||l)(h,f,o)}class yye{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof lo?this.setBuffer(e.context.buffer,e.index,t):e instanceof _r&&this.map.set(e.tree,t)}get(e){return e instanceof lo?this.getBuffer(e.context.buffer,e.index):e instanceof _r?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ha{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new ha(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,h=c?c.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||u){let d=Math.max(f.from,l)-u,p=Math.min(f.to,h)-u;f=d>=p?null:new ha(d,p,f.tree,f.offset+u,a>0,!!c)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let RO=class{startParse(e,t,r){return typeof e=="string"&&(e=new BG(e)),r=r?r.length?r.map(i=>new is(i.from,i.to)):[new is(0,0)]:[new is(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}};class BG{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function bye(n){return(e,t,r,i)=>new $G(e,n,t,r,i)}class ZS{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=s}}function QS(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class FG{constructor(e,t,r,i,s,o,a){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Yb=new kt({perNode:!0});class $G{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Qt(r.type,r.children,r.positions,r.length,r.propValues.concat([[Yb,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[kt.mounted.id]=new p0(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new HG(this.fragments),t=null,r=null,i=new $g(new _r(this.baseTree,this.ranges[0].from,0,null),kn.IncludeAnonymous|kn.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(t){let u=t.mounts.find(c=>c.frag.from<=i.from&&c.frag.to>=i.to&&c.mount.overlay);if(u)for(let c of u.mount.overlay){let h=c.from+u.pos,f=c.to+u.pos;h>=i.from&&f<=i.to&&!t.ranges.some(d=>d.from<f&&d.to>h)&&t.ranges.push({from:h,to:f})}}a=!1}else if(r&&(o=zG(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||VG(i);let u=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new FG(s.parser,s.overlay,u,this.inner.length,i.from,i.tree,t);else{let c=n9(this.ranges,s.overlay||(i.from<i.to?[new is(i.from,i.to)]:[]));c.length&&QS(c),(c.length||!s.overlay)&&this.inner.push(new ZS(s.parser,c.length?s.parser.startParse(this.input,r9(u,c),c):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new is(h.from-i.from,h.to-i.from)):null,i.tree,c.length?c[0].from:i.from)),s.overlay?c.length&&(r={ranges:c,depth:0,prev:r}):a=!1}}else if(t&&(l=t.predicate(i))&&(l===!0&&(l=new is(i.from,i.to)),l.from<l.to)){let u=t.ranges.length-1;u>=0&&t.ranges[u].to==l.from?t.ranges[u]={from:t.ranges[u].from,to:l.to}:t.ranges.push(l)}if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let u=n9(this.ranges,t.ranges);u.length&&(QS(u),this.inner.splice(t.index,0,new ZS(t.parser,t.parser.startParse(this.input,r9(t.mounts,u),u),t.ranges.map(c=>new is(c.from-t.start,c.to-t.start)),t.target,u[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function zG(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function e9(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function VG(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function u(c,h,f,d,p,m){let g=t[m],y=[],v=[];e9(o,c,g,y,v,d);let x=a[g+1],k=a[g+2];l.push(y.length);let C=m?u(g+4,a[g+3],o.set.types[a[g]],x,k-x,m-1):e.toTree();return y.push(C),v.push(x-d),e9(o,a[g+3],h,y,v,d),new Qt(f,y,v,p)}i.children[s]=u(0,a.length,Ui.none,0,o.length,t.length-1);for(let c of l){let h=n.tree.children[c],f=n.tree.positions[c];n.yield(new _r(h,f+n.from,c,n._tree))}}class t9{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(kn.IncludeAnonymous|kn.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,kn.IgnoreOverlays|kn.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Qt)t=t.children[0];else break}return!1}}class HG{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Yb))!==null&&t!==void 0?t:r.to,this.inner=new t9(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Yb))!==null&&e!==void 0?e:t.to,this.inner=new t9(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(kt.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function n9(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,a=n[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(t||(r=t=e.slice()),l.from<o?(t[s]=new is(l.from,o),l.to>a&&t.splice(s+1,0,new is(a,l.to))):l.to>a?t[s--]=new is(a,l.to):t.splice(s--,1))}}return r}function jG(n,e,t,r){let i=0,s=0,o=!1,a=!1,l=-1e9,u=[];for(;;){let c=i==n.length?1e9:o?n[i].to:n[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,t),d=Math.min(c,h,r);f<d&&u.push(new is(f,d))}if(l=Math.min(c,h),l==1e9)break;c==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return u}function r9(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),u=Math.min(s.to,a);if(i.overlay){let c=i.overlay.map(f=>new is(f.from+r,f.to+r)),h=jG(e,c,l,u);for(let f=0,d=l;;f++){let p=f==h.length,m=p?u:h[f].from;if(m>d&&t.push(new ha(d,m,i.tree,-o,s.from>=d||s.openStart,s.to<=m||s.openEnd)),p)break;d=h[f].to}}else t.push(new ha(l,u,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return t}let Jb=[],LO=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?LO:Jb).push(t=t+n[e])})();function WG(n){if(n<768)return!1;for(let e=0,t=Jb.length;;){let r=e+t>>1;if(n<Jb[r])t=r;else if(n>=LO[r])e=r+1;else return!0;if(e==t)return!1}}function i9(n){return n>=127462&&n<=127487}const s9=8205;function qG(n,e,t=!0,r=!0){return(t?_O:UG)(n,e,r)}function _O(n,e,t){if(e==n.length)return e;e&&BO(n.charCodeAt(e))&&FO(n.charCodeAt(e-1))&&e--;let r=$2(n,e);for(e+=o9(r);e<n.length;){let i=$2(n,e);if(r==s9||i==s9||t&&WG(i))e+=o9(i),r=i;else if(i9(i)){let s=0,o=e-2;for(;o>=0&&i9($2(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function UG(n,e,t){for(;e>0;){let r=_O(n,e-2,t);if(r<e)return r;e--}return 0}function $2(n,e){let t=n.charCodeAt(e);if(!FO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return BO(r)?(t-55296<<10)+(r-56320)+65536:t}function BO(n){return n>=56320&&n<57344}function FO(n){return n>=55296&&n<56320}function o9(n){return n<65536?1:2}class Pt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=gh(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),m1.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=gh(this,e,t);let r=[];return this.decompose(e,t,r,0),m1.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ld(this),s=new Ld(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Ld(this,e)}iterRange(e,t=this.length){return new $O(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new zO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Pt.empty:e.length<=32?new Ln(e):m1.from(Ln.split(e,[]))}}class Ln extends Pt{constructor(e,t=GG(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new KG(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Ln(a9(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=g1(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Ln(a,o.length+s.length));else{let l=a.length>>1;r.push(new Ln(a.slice(0,l)),new Ln(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Ln))return super.replace(e,t,r);[e,t]=gh(this,e,t);let i=g1(this.text,g1(r.text,a9(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Ln(i,s):m1.from(Ln.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=gh(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Ln(r,i)),r=[],i=-1);return i>-1&&t.push(new Ln(r,i)),t}}let m1=class Cc extends Pt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?r.push(a):a.decompose(e-o,t-o,r,u)}o=l+1}}replace(e,t,r){if([e,t]=gh(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new Cc(c,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=gh(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Cc))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new Ln(d,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function h(d){let p;if(d.lines>s&&d instanceof Cc)for(let m of d.children)h(m);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Ln&&l&&(p=c[c.length-1])instanceof Ln&&d.lines+p.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new Ln(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,u+=d.length+1,c.push(d))}function f(){l!=0&&(a.push(c.length==1?c[0]:Cc.from(c,u)),u=-1,l=c.length=0)}for(let d of e)h(d);return f(),a.length==1?a[0]:new Cc(a,t)}};Pt.empty=new Ln([""],0);function GG(n){let e=-1;for(let t of n)e+=t.length+1;return e}function g1(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function a9(n,e,t){return g1(n,[""],e,t)}class Ld{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ln?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Ln?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ln){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Ln?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class $O{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Ld(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class zO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Pt.prototype[Symbol.iterator]=function(){return this.iter()},Ld.prototype[Symbol.iterator]=$O.prototype[Symbol.iterator]=zO.prototype[Symbol.iterator]=function(){return this});class KG{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function gh(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function wr(n,e,t=!0,r=!0){return qG(n,e,t,r)}function XG(n){return n>=56320&&n<57344}function YG(n){return n>=55296&&n<56320}function hi(n,e){let t=n.charCodeAt(e);if(!YG(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return XG(r)?(t-55296<<10)+(r-56320)+65536:t}function c6(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function oo(n){return n<65536?1:2}const Zb=/\r\n?|\n/;var xr=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(xr||(xr={}));class mo{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){Qb(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new mo(e)}composeDesc(e){return this.empty?e:e.empty?this:VO(this,e)}mapDesc(e,t=!1){return e.empty?this:e5(this,e,t)}mapPos(e,t=-1,r=xr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=xr.Simple&&u>=e&&(r==xr.TrackDel&&i<e&&u>e||r==xr.TrackBefore&&i<e||r==xr.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mo(e)}static create(e){return new mo(e)}}class Qn extends mo{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Qb(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return e5(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Pt.empty);r.push(o?e.slice(s,s+o):Pt.empty)}s+=o}return new Qn(t,r)}compose(e){return this.empty?e:e.empty?this:VO(this,e,!0)}map(e,t=!1){return e.empty?this:e5(this,e,t,!0)}iterChanges(e,t=!1){Qb(this,e,t)}get desc(){return mo.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new g0(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Dr(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Dr(t,c,h),h>0&&ul(r,t,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Dr(t,c,-1),Dr(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Qn(t,r),filtered:mo.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<t&&Dr(i,t-o,-1);let h=new Qn(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Qn){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>t)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?Pt.of(d.split(r||Zb)):d:Pt.empty,m=p.length;if(h==f&&m==0)return;h<o&&l(),h>o&&Dr(i,h-o,-1),Dr(i,f-h,m),ul(s,i,p),o=f}}return u(e),l(!a),a}static empty(e){return new Qn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Pt.empty);r[i]=Pt.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new Qn(t,r)}static createSet(e,t){return new Qn(e,t)}}function Dr(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function ul(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Pt.empty);n.push(t)}}function Qb(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,h=Pt.empty;for(;u+=a,c+=l,l&&r&&(h=h.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,u,s,c,h),i=u,s=c}}}function e5(n,e,t,r=!1){let i=[],s=r?[]:null,o=new g0(n),a=new g0(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Dr(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let u=a.len;for(Dr(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Dr(i,0,o.ins),s&&ul(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let h=Math.min(c,a.len);u+=h,c-=h,a.forward(h)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Dr(i,u,l<o.i?o.ins:0),s&&l<o.i&&ul(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Qn.createSet(i,s):mo.create(i);throw new Error("Mismatched change set lengths")}}}function VO(n,e,t=!1){let r=[],i=t?[]:null,s=new g0(n),o=new g0(e);for(let a=!1;;){if(s.done&&o.done)return i?Qn.createSet(r,i):mo.create(r);if(s.ins==0)Dr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Dr(r,0,o.ins,a),i&&ul(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Dr(r,l,c,a),i&&c&&ul(i,r,o.text)}else o.ins==-1?(Dr(r,s.off?0:s.len,l,a),i&&ul(i,r,s.textBit(l))):(Dr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&ul(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class g0{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Pt.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Pt.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let nm=class t5{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new t5(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ne.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ne.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ne.range(e.anchor,e.head)}static create(e,t,r){return new t5(e,t,r)}};class ne{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ne.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ne([this.main],0)}addRange(e,t=!0){return ne.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ne.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ne(e.ranges.map(t=>nm.fromJSON(t)),e.main)}static single(e,t=e){return new ne([ne.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return ne.normalized(e.slice(),t);r=s.to}return new ne(e,t)}static cursor(e,t=0,r,i){return nm.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?nm.create(t,e,48|s):nm.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?ne.range(l,a):ne.range(a,l))}}return new ne(e,t)}}function HO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let h6=0;class Ae{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=h6++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ae(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:f6),!!e.static,e.enables)}of(e){return new y1([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new y1(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new y1(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function f6(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class y1{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=h6++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,f){if(l&&f.docChanged||u&&(f.docChanged||f.selection)||n5(h,c)){let d=r(h);if(a?!l9(d,h.values[o],i):!i(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,p=f.config.address[s];if(p!=null){let m=zg(f,p);if(this.dependencies.every(g=>g instanceof Ae?f.facet(g)===h.facet(g):g instanceof cr?f.field(g,!1)==h.field(g,!1):!0)||(a?l9(d=r(h),m,i):i(d=r(h),m)))return h.values[o]=m,0}else d=r(h);return h.values[o]=d,1}}}}function l9(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function n5(n,e){let t=!1;for(let r of e)_d(n,r)&1&&(t=!0);return t}function JG(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let h=zg(l,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(l){for(let u of r)_d(l,u);return l.values[o]=a(l),1},update(l,u){if(!n5(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=n5(l,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&f6(t,h))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const rm=Ae.define({static:!0});class cr{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new cr(h6++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(rm).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(rm),o=i.facet(rm),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[t]=a.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,rm.of({field:this,create:e})]}get extension(){return this}}const hu={lowest:4,low:3,default:2,high:1,highest:0};function kf(n){return e=>new jO(e,n)}const Ll={highest:kf(hu.highest),high:kf(hu.high),default:kf(hu.default),low:kf(hu.low),lowest:kf(hu.lowest)};class jO{constructor(e,t){this.inner=e,this.prec=t}}class yh{of(e){return new r5(this,e)}reconfigure(e){return yh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class r5{constructor(e,t){this.compartment=e,this.inner=t}}let u9=class WO{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let f of ZG(e,t,o))f instanceof cr?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],u=[];for(let f of i)a[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r?.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=c&&c[f]||[];if(d.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,f6(m,d))l.push(r.facet(p));else{let g=p.combine(d.map(y=>y.value));l.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=u.length<<1,u.push(y=>g.dynamicSlot(y)));a[p.id]=u.length<<1,u.push(g=>JG(g,p,d))}}let h=u.map(f=>f(a));return new WO(e,o,h,a,l,s)}};function ZG(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof r5&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof r5){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),s(u,a)}else if(o instanceof jO)s(o.inner,o.prec);else if(o instanceof cr)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof y1)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,hu.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(n,hu.default),r.reduce((o,a)=>o.concat(a))}function _d(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function zg(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const qO=Ae.define(),i5=Ae.define({combine:n=>n.some(e=>e),static:!0}),UO=Ae.define({combine:n=>n.length?n[0]:void 0,static:!0}),GO=Ae.define(),KO=Ae.define(),XO=Ae.define(),YO=Ae.define({combine:n=>n.length?n[0]:!1});class Ma{constructor(e,t){this.type=e,this.value=t}static define(){return new QG}}class QG{of(e){return new Ma(this,e)}}class eK{constructor(e){this.map=e}of(e){return new ht(this,e)}}class ht{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ht(this.type,t)}is(e){return this.type==e}static define(e={}){return new eK(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}ht.reconfigure=ht.define();ht.appendConfig=ht.define();let Kr=class Wf{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&HO(r,t.newLength),s.some(a=>a.type==Wf.time)||(this.annotations=s.concat(Wf.time.of(Date.now())))}static create(e,t,r,i,s,o){return new Wf(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Wf.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Kr.time=Ma.define();Kr.userEvent=Ma.define();Kr.addToHistory=Ma.define();Kr.remote=Ma.define();function tK(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function JO(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=Qn.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:ht.mapEffects(n.effects,i).concat(ht.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function s5(n,e,t){let r=e.selection,i=Uc(e.annotations);return e.userEvent&&(i=i.concat(Kr.userEvent.of(e.userEvent))),{changes:e.changes instanceof Qn?e.changes:Qn.of(e.changes||[],t,n.facet(UO)),selection:r&&(r instanceof ne?r:ne.single(r.anchor,r.head)),effects:Uc(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function ZO(n,e,t){let r=s5(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=JO(r,s5(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=Kr.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return rK(t?nK(i):i)}function nK(n){let e=n.startState,t=!0;for(let i of e.facet(GO)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:tK(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=Qn.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Kr.create(e,i,n.selection&&n.selection.map(s),ht.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(KO);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof Kr?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Kr?n=s[0]:n=ZO(e,Uc(s),!1)}return n}function rK(n){let e=n.startState,t=e.facet(XO),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=JO(r,s5(e,s,n.changes.newLength),!0))}return r==n?n:Kr.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const iK=[];function Uc(n){return n==null?iK:Array.isArray(n)?n:[n]}var dn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(dn||(dn={}));const sK=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let o5;try{o5=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function oK(n){if(o5)return o5.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||sK.test(t)))return!0}return!1}function aK(n){return e=>{if(!/\S/.test(e))return dn.Space;if(oK(e))return dn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return dn.Word;return dn.Other}}let pn=class Os{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)_d(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return _d(this,r),zg(this,r)}update(...e){return ZO(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(yh.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(ht.reconfigure)?(t=null,r=a.value):a.is(ht.appendConfig)&&(t=null,r=Uc(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=u9.resolve(r,i,this),s=new Os(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(i5)?e.newSelection:e.newSelection.asSingle();new Os(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ne.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Uc(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(l.range.map(h)),i=i.compose(c),o=ht.mapEffects(o,c).concat(ht.mapEffects(Uc(l.effects),h))}return{changes:i,selection:ne.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Qn?e:Qn.of(e,this.doc.length,this.facet(Os.lineSeparator))}toText(e){return Pt.of(e.split(this.facet(Os.lineSeparator)||Zb))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(_d(this,t),zg(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof cr&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Os.create({doc:e.doc,selection:ne.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=u9.resolve(e.extensions||[],new Map),r=e.doc instanceof Pt?e.doc:Pt.of((e.doc||"").split(t.staticFacet(Os.lineSeparator)||Zb)),i=e.selection?e.selection instanceof ne?e.selection:ne.single(e.selection.anchor,e.selection.head):ne.single(0);return HO(i,r.length),t.staticFacet(i5)||(i=i.asSingle()),new Os(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Os.tabSize)}get lineBreak(){return this.facet(Os.lineSeparator)||`
`}get readOnly(){return this.facet(YO)}phrase(e,...t){for(let r of this.facet(Os.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(qO))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return aK(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=wr(t,o,!1);if(s(t.slice(l,o))!=dn.Word)break;o=l}for(;a<i;){let l=wr(t,a);if(s(t.slice(a,l))!=dn.Word)break;a=l}return o==a?null:ne.range(o+r,a+r)}};pn.allowMultipleSelections=i5;pn.tabSize=Ae.define({combine:n=>n.length?n[0]:4});pn.lineSeparator=UO;pn.readOnly=YO;pn.phrases=Ae.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});pn.languageData=qO;pn.changeFilter=GO;pn.transactionFilter=KO;pn.transactionExtender=XO;yh.reconfigure=ht.define();function Eo(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class ju{eq(e){return this==e}range(e,t=e){return y0.create(e,t,this)}}ju.prototype.startSide=ju.prototype.endSide=0;ju.prototype.point=!1;ju.prototype.mapMode=xr.TrackDel;class y0{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new y0(e,t,r)}}function a5(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class d6{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,f,d;if(c==h){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(f=d=p,u.startSide!=u.endSide&&(d=t.mapPos(c,u.endSide),d<f)))continue}else if(f=t.mapPos(c,u.startSide),d=t.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(a=Math.max(a,d-f)),r.push(u),i.push(f-o),s.push(d-o))}return{mapped:r.length?new d6(i,s,r,a):null,pos:o}}}class Rt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Rt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(a5)),this.isEmpty)return t.length?Rt.of(t):this;let a=new QO(this,null,-1).goto(0),l=0,u=[],c=new va;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let h=t[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(y0.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Rt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:h}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(h))}}let s=this.nextLayer.map(e);return t.length==0?s:new Rt(r,t,s||Rt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return v0.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return v0.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=c9(o,a,r),u=new Cf(o,l,s),c=new Cf(a,l,s);r.iterGaps((h,f,d)=>h9(u,h,c,f,d,i)),r.empty&&r.length==0&&h9(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=c9(s,o),l=new Cf(s,a,0).goto(r),u=new Cf(o,a,0).goto(r);for(;;){if(l.to!=u.to||!l5(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,s=-1){let o=new Cf(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,o.point,c,h,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new va;for(let i of e instanceof y0?[e]:t?lK(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Rt.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Rt.empty;i=i.nextLayer)t=new Rt(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Rt.empty=new Rt([],[],null,-1);function lK(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(a5(e,r)>0)return n.slice().sort(a5);e=r}return n}Rt.empty.nextLayer=Rt.empty;class va{finishChunk(e){this.chunks.push(new d6(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new va)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Rt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function c9(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class QO{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class v0{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new QO(o,t,r,s));return i.length==1?i[0]:new v0(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)z2(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)z2(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),z2(this.heap,0)}}}function z2(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Cf{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=v0.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){im(this.active,e),im(this.activeTo,e),im(this.activeRank,e),this.minActive=f9(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;sm(this.active,t,r),sm(this.activeTo,t,i),sm(this.activeRank,t,s),e&&sm(e,t,this.cursor.from),this.minActive=f9(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&im(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function h9(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to,c=u||n.endSide-t.endSide,h=c<0?n.to+l:t.to,f=Math.min(h,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&l5(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,f,n.point,t.point):f>a&&!l5(n.active,t.active)&&s.compareRange(a,f,n.active,t.active),h>o)break;(u||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(h),a=h,c<=0&&n.next(),c>=0&&t.next()}}function l5(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function im(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function sm(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function f9(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Hh(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=wr(n,i));return r}function u5(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=wr(n,i)}return r===!0?-1:n.length}const c5="ͼ",d9=typeof Symbol>"u"?"__"+c5:Symbol.for(c5),h5=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),p9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Tl{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,c,f)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||f)&&l.push((r&&!h&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=p9[d9]||1;return p9[d9]=e+1,c5+e.toString(36)}static mount(e,t,r){let i=e[h5],s=r&&r.nonce;i?s&&i.setNonce(s):i=new uK(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let m9=new Map;class uK{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=m9.get(r);if(s)return e[h5]=s;this.sheet=new i.CSSStyleSheet,m9.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[h5]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ba={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cK=typeof navigator<"u"&&/Mac/.test(navigator.platform),hK=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vr=0;vr<10;vr++)ba[48+vr]=ba[96+vr]=String(vr);for(var vr=1;vr<=24;vr++)ba[vr+111]="F"+vr;for(var vr=65;vr<=90;vr++)ba[vr]=String.fromCharCode(vr+32),b0[vr]=String.fromCharCode(vr);for(var V2 in ba)b0.hasOwnProperty(V2)||(b0[V2]=ba[V2]);function eI(n){var e=cK&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||hK&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?b0:ba)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Wt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)tI(n,arguments[e]);return n}function tI(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)tI(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}function x0(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function f5(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function v1(n,e){if(!e.anchorNode)return!1;try{return f5(n,e.anchorNode)}catch{return!1}}function w0(n){return n.nodeType==3?qu(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Bd(n,e,t,r){return t?g9(n,e,t,r,-1)||g9(n,e,t,r,1):!1}function Wu(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Vg(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function g9(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:bo(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Wu(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?bo(n):0}else return!1}}function bo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function rv(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function fK(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function nI(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function dK(n,e,t,r,i,s,o,a){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==l.body,p=1,m=1;if(d)f=fK(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let v=c.getBoundingClientRect();({scaleX:p,scaleY:m}=nI(c,v)),f={left:v.left,right:v.left+c.clientWidth*p,top:v.top,bottom:v.top+c.clientHeight*m}}let g=0,y=0;if(i=="nearest")e.top<f.top?(y=e.top-(f.top+o),t>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,t<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let v=e.bottom-e.top,x=f.bottom-f.top;y=(i=="center"&&v<=x?e.top+v/2-x/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-x+o)-f.top}if(r=="nearest"?e.left<f.left?(g=e.left-(f.left+s),t>0&&e.right>f.right+g&&(g=e.right-f.right+s)):e.right>f.right&&(g=e.right-f.right+s,t<0&&e.left<f.left+g&&(g=e.left-(f.left+s))):g=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,g||y)if(d)u.scrollBy(g,y);else{let v=0,x=0;if(y){let k=c.scrollTop;c.scrollTop+=y/m,x=(c.scrollTop-k)*m}if(g){let k=c.scrollLeft;c.scrollLeft+=g/p,v=(c.scrollLeft-k)*p}e={left:e.left-v,top:e.top-x,right:e.right-v,bottom:e.bottom-x},v&&Math.abs(v-g)<1&&(r="nearest"),x&&Math.abs(x-y)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function pK(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class mK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?bo(t):0),r,Math.min(e.focusOffset,r?bo(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let bc=null;function rI(n){if(n.setActive)return n.setActive();if(bc)return n.focus(bc);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(bc==null?{get preventScroll(){return bc={preventScroll:!0},!0}}:void 0),!bc){bc=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let y9;function qu(n,e,t=e){let r=y9||(y9=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Gc(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function gK(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function iI(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function yK(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,bo(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=bo(t))}else{if(t==n)return!0;r=Wu(t),t=t.parentNode}}function sI(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function oI(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=bo(t)}else if(t.parentNode&&!Vg(t))r=Wu(t),t=t.parentNode;else return null}}function aI(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!Vg(t))r=Wu(t)+1,t=t.parentNode;else return null}}class Pr{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Pr(e.parentNode,Wu(e),t)}static after(e,t){return new Pr(e.parentNode,Wu(e)+1,t)}}const p6=[];class Gt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Gt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=v9(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=v9(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=bo(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Gt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let h=this.children[l],f=u+h.length;if(u<e&&f>t)return h.domBoundsAround(e,t,u);if(f>=e&&i==-1&&(i=l,s=u),u>t&&h.dom.parentNode==this.dom){o=l,a=c;break}c=f,u=f+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=p6){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new lI(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Gt.prototype.breakAfter=0;function v9(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class lI{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function uI(n,e,t,r,i,s,o,a,l){let{children:u}=n,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==r&&c&&!o&&!f&&s.length<2&&c.merge(t,i,s.length?h:null,t==0,a,l))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&h?.breakAfter)?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,l)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),s.push(d))):d?.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function cI(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),h=e-t;for(let f of r)h+=f.length;n.length+=h,uI(n,u,c,a,l,r,0,i,s)}let fi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},d5=typeof document<"u"?document:{documentElement:{style:{}}};const p5=/Edge\/(\d+)/.exec(fi.userAgent),hI=/MSIE \d/.test(fi.userAgent),m5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fi.userAgent),iv=!!(hI||m5||p5),b9=!iv&&/gecko\/(\d+)/i.test(fi.userAgent),H2=!iv&&/Chrome\/(\d+)/.exec(fi.userAgent),vK="webkitFontSmoothing"in d5.documentElement.style,fI=!iv&&/Apple Computer/.test(fi.vendor),x9=fI&&(/Mobile\/\w+/.test(fi.userAgent)||fi.maxTouchPoints>2);var Ee={mac:x9||/Mac/.test(fi.platform),windows:/Win/.test(fi.platform),linux:/Linux|X11/.test(fi.platform),ie:iv,ie_version:hI?d5.documentMode||6:m5?+m5[1]:p5?+p5[1]:0,gecko:b9,gecko_version:b9?+(/Firefox\/(\d+)/.exec(fi.userAgent)||[0,0])[1]:0,chrome:!!H2,chrome_version:H2?+H2[1]:0,ios:x9,android:/Android\b/.test(fi.userAgent),safari:fI,webkit_version:vK?+(/\bAppleWebKit\/(\d+)/.exec(fi.userAgent)||[0,0])[1]:0,tabSize:d5.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const bK=256;class Vs extends Gt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Vs)||this.length-(t-e)+r.length>bK||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Vs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Pr(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return xK(this.dom,e,t)}}class xa extends Gt{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(iI(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof xa&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(cI(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new xa(this.mark,t,o)}domAtPos(e){return dI(this,e)}coordsAt(e,t){return mI(this,e,t)}}function xK(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Ee.chrome||Ee.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=qu(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return Ee.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?rv(l,o<0):l||null}class cl extends Gt{static create(e,t,r){return new cl(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=cl.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof cl)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof cl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Pt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Pt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Pr.before(this.dom):Pr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return rv(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class vh extends Gt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vh&&e.side==this.side}split(){return new vh(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Pr.before(this.dom):Pr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Pt.empty}get isHidden(){return!0}}Vs.prototype.children=cl.prototype.children=vh.prototype.children=p6;function dI(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Pr(t,0)}function pI(n,e,t){let r,{children:i}=n;t>0&&e instanceof xa&&i.length&&(r=i[i.length-1])instanceof xa&&r.mark.eq(e.mark)?pI(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function mI(n,e,t){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],p=f+d.length;p>=c&&(d.children.length?a(d,c-f):(!s||s.isHidden&&(t>0||SK(s,d)))&&(p>c||f==p&&d.getSide()>0)?(s=d,o=c-f):(f<c||f==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=p}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):wK(n)}function wK(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=w0(e);return t[t.length-1]||null}function SK(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function g5(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const w9=Object.create(null);function Hg(n,e,t){if(n==e)return!0;n||(n=w9),e||(e=w9);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function y5(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function kK(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}let Oa=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var Xr=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Xr||(Xr={}));let Xe=class extends ju{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new hp(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new El(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=gI(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new El(e,r,i,t,e.widget||null,!0)}static line(e){return new fp(e)}static set(e,t=!1){return Rt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Xe.none=Rt.empty;class hp extends Xe{constructor(e){let{start:t,end:r}=gI(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof hp&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Hg(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}hp.prototype.point=!1;class fp extends Xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fp&&this.spec.class==e.spec.class&&Hg(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fp.prototype.mapMode=xr.TrackBefore;fp.prototype.point=!0;class El extends Xe{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?xr.TrackBefore:xr.TrackAfter:xr.TrackDel}get type(){return this.startSide!=this.endSide?Xr.WidgetRange:this.startSide<=0?Xr.WidgetBefore:Xr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof El&&CK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}El.prototype.point=!0;function gI(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function CK(n,e){return n==e||!!(n&&e&&n.compare(e))}function b1(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Hn extends Gt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof Hn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),cI(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new Hn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Hg(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){pI(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=g5(t,this.attrs||{})),r&&(this.attrs=g5({class:r},this.attrs||{}))}domAtPos(e){return dI(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(iI(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(y5(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Gt.get(i)instanceof xa;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Gt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ee.ios||!this.children.some(s=>s instanceof Vs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Vs)||/[^ -~]/.test(r.text))return null;let i=w0(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=mI(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Hn&&this.children.length==0&&e.children.length==0&&Hg(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof Hn)return s;if(o>t)break}i=o+s.breakAfter}return null}}class fa extends Gt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof fa)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Pr.before(this.dom):Pr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new fa(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return p6}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Pt.empty}domBoundsAround(){return null}become(e){return e instanceof fa&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof v5?null:rv(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class v5 extends Oa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Fd{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fa&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Hn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(om(new vh(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof fa)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(om(new Vs(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof El){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof El)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fa(r.widget||bh.block,a,r));else{let l=cl.create(r.widget||bh.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(om(new vh(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(om(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Fd(e,t,r,s);return o.openEnd=Rt.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function om(n,e){for(let t of e)n=new xa(t,[n],n.length);return n}class bh extends Oa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}bh.inline=new bh("span");bh.block=new bh("div");var an=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(an||(an={}));const Uu=an.LTR,m6=an.RTL;function yI(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const TK=yI("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),EK=yI("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),b5=Object.create(null),Js=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);b5[e]=t,b5[t]=-e}function vI(n){return n<=247?TK[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?EK[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const AK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class hl{get dir(){return this.level%2?m6:Uu}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function bI(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!bI(r.inner,i.inner))return!1}return!0}const qt=[];function MK(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let u=o,c=l,h=l;u<a;u++){let f=vI(n.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),qt[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=o,c=l,h=l;u<a;u++){let f=qt[u];if(f==128)u<a-1&&c==qt[u+1]&&c&24?f=qt[u]=c:qt[u]=256;else if(f==64){let d=u+1;for(;d<a&&qt[d]==64;)d++;let p=u&&c==8||d<t&&qt[d]==8?h==1?1:8:256;for(let m=u;m<d;m++)qt[m]=p;u=d-1}else f==8&&h==1&&(qt[u]=1);c=f,f&7&&(h=f)}}}function OK(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:t;for(let h=u,f,d,p;h<c;h++)if(d=b5[f=n.charCodeAt(h)])if(d<0){for(let m=a-3;m>=0;m-=3)if(Js[m+1]==-d){let g=Js[m+2],y=g&2?i:g&4?g&1?s:i:0;y&&(qt[h]=qt[Js[m]]=y),a=m;break}}else{if(Js.length==189)break;Js[a++]=h,Js[a++]=f,Js[a++]=l}else if((p=qt[h])==2||p==1){let m=p==i;l=m?0:1;for(let g=a-3;g>=0;g-=3){let y=Js[g+2];if(y&2)break;if(m)Js[g+2]|=2;else{if(y&4)break;Js[g+2]|=4}}}}}function IK(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let u=qt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==t.length)break;c=t[i++].to,a=i<t.length?t[i].from:e}else if(qt[c]==256)c++;else break;let h=s==1,f=(c<e?qt[c]:r)==1,d=h==f?h?1:2:r;for(let p=c,m=i,g=m?t[m-1].to:n;p>l;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),qt[--p]=d;l=c}else s=u,l++}}}function x5(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,h=!1;if(u==s.length||l<s[u].from){let m=qt[l];m!=a&&(c=!1,h=m==16)}let f=!c&&a==1?[]:null,d=c?r:r+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(h)break e;let m=s[u];if(!c)for(let g=m.to,y=u+1;;){if(g==t)break e;if(y<s.length&&s[y].from==g)g=s[y++].to;else{if(qt[g]==a)break e;break}}if(u++,f)f.push(m);else{m.from>l&&o.push(new hl(l,m.from,d));let g=m.direction==Uu!=!(d%2);w5(n,g?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==t||(c?qt[p]!=a:qt[p]==a))break;p++}f?x5(n,l,p,r+1,i,f,o):l<p&&o.push(new hl(l,p,d)),l=p}else for(let l=t,u=s.length;l>e;){let c=!0,h=!1;if(!u||l>s[u-1].to){let m=qt[l-1];m!=a&&(c=!1,h=m==16)}let f=!c&&a==1?[]:null,d=c?r:r+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(h)break e;let m=s[--u];if(!c)for(let g=m.from,y=u;;){if(g==e)break e;if(y&&s[y-1].to==g)g=s[--y].from;else{if(qt[g-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new hl(m.to,l,d));let g=m.direction==Uu!=!(d%2);w5(n,g?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?qt[p-1]!=a:qt[p-1]==a))break;p--}f?x5(n,p,l,r+1,i,f,o):p<l&&o.push(new hl(p,l,d)),l=p}}function w5(n,e,t,r,i,s,o){let a=e%2?2:1;MK(n,i,s,r,a),OK(n,i,s,r,a),IK(i,s,r,a),x5(n,i,s,e,t,r,o)}function DK(n,e,t){if(!n)return[new hl(0,0,e==m6?1:0)];if(e==Uu&&!t.length&&!AK.test(n))return xI(n.length);if(t.length)for(;n.length>qt.length;)qt[qt.length]=256;let r=[],i=e==Uu?0:1;return w5(n,i,i,t,0,n.length,r),r}function xI(n){return[new hl(0,n,0)]}let wI="";function NK(n,e,t,r,i){var s;let o=r.head-n.from,a=hl.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,t);if(o==u){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,t),u=l.side(i,t)}let c=wr(n.text,o,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),wI=n.text.slice(Math.min(o,c),Math.max(o,c));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<l.level?ne.cursor(h.side(!i,t)+n.from,h.forward(i,t)?1:-1,h.level):ne.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function PK(n,e,t){for(let r=e;r<t;r++){let i=vI(n.charCodeAt(r));if(i==1)return Uu;if(i==2||i==4)return m6}return Uu}const SI=Ae.define(),kI=Ae.define(),CI=Ae.define(),TI=Ae.define(),S5=Ae.define(),EI=Ae.define(),AI=Ae.define(),g6=Ae.define(),y6=Ae.define(),MI=Ae.define({combine:n=>n.some(e=>e)}),OI=Ae.define({combine:n=>n.some(e=>e)}),II=Ae.define();class Kc{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Kc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kc(ne.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const am=ht.define({map:(n,e)=>n.map(e)}),DI=ht.define();function yi(n,e,t){let r=n.facet(TI);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Qo=Ae.define({combine:n=>n.length?n[0]:!0});let RK=0;const $c=Ae.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Un{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat($c.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat($c.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new Un(RK++,e,r,i,a=>{let l=[];return o&&l.push(S0.of(u=>{let c=u.plugin(a);return c?o(c):Xe.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return Un.define((r,i)=>new e(r,i),t)}}class j2{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(yi(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){yi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){yi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const NI=Ae.define(),v6=Ae.define(),S0=Ae.define(),PI=Ae.define(),b6=Ae.define(),RI=Ae.define();function S9(n,e){let t=n.state.facet(RI);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Rt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,h=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,p;if(d==null&&(d=PK(e.text,u,c)),l>0&&h.length&&(p=h[h.length-1]).to==u&&p.direction==d)p.to=c,h=p.inner;else{let m={from:u,to:c,direction:d,inner:[]};h.push(m),h=m.inner}}}}),i}const LI=Ae.define();function x6(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(LI)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const qf=Ae.define();class hs{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new hs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<t.length&&t[s]<c;){let h=t[s],f=t[s+1],d=Math.max(a,h),p=Math.min(c,f);if(d<=p&&new hs(d+u,p+u,d,p).addToSet(r),f>c)break;s+=2}if(!l)return r;new hs(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class jg{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Qn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new hs(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new jg(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class k9 extends Gt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Xe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Hn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new hs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!VK(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?_K(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new hs(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ee.ie||Ee.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=$K(o,a,e.changes);return r=hs.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ee.chrome||Ee.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof fa&&o.widget instanceof v5&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:h}=a,f,d,p,m;if(r&&r.range.fromB<h&&r.range.toB>c){let k=Fd.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=Fd.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,p=k.openStart,m=C.openEnd;let w=this.compositionView(r);C.breakAtStart?w.breakAfter=1:C.content.length&&w.merge(w.length,w.length,C.content[0],!1,C.openStart,0)&&(w.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&w.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(w).concat(C.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:m}=Fd.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:g,off:y}=s.findPos(u,1),{i:v,off:x}=s.findPos(l,-1);uI(this,v,x,g,y,f,d,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(DI)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Vs(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new xa(i,[t],t.length);let r=new Hn;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Gt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Qo)||this.dom.tabIndex>-1)&&v1(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ee.gecko&&a.empty&&!this.hasComposition&&LK(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=u=new Pr(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Bd(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Bd(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Ee.android&&Ee.chrome&&this.dom.contains(c.focusNode)&&zK(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=x0(this.view.root);if(h)if(a.empty){if(Ee.gecko){let f=BK(l.node,l.offset);if(f&&f!=3){let d=(f==1?oI:aI)(l.node,l.offset);d&&(l=new Pr(d.node,d.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),f.setEnd(u.node,u.offset),f.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Pr(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Pr(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Bd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=x0(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=Hn.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=Gt.get(t.childNodes[i]);s instanceof Hn&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Gt.get(t.childNodes[i]);s instanceof Hn&&(r=s.domAtPos(s.length))}return r?new Pr(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Gt.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Hn)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Hn&&!(r instanceof Hn&&t>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof fa&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Hn))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Vs))return null;let s=wr(i.text,r);if(s==r)return null;let o=qu(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==an.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(t.push(d.height),o){let p=h.dom.lastChild,m=p?w0(p):[];if(m.length){let g=m[m.length-1],y=l?g.right-d.left:d.right-g.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?an.RTL:an.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Hn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=w0(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new lI(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Xe.replace({widget:new v5(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Xe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(S0).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(PI).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Rt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(II))try{if(u(this.view,e.range,e))return!0}catch(c){yi(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=x6(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;dK(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==an.LTR)}}function LK(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function _I(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=oI(t.focusNode,t.focusOffset),i=aI(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Gt.get(i.node);if(!a||a instanceof Vs&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=Gt.get(r.node);!l||l instanceof Vs&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function _K(n,e,t){let r=_I(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new hs(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=Gt.get(h);if(f instanceof xa)c.push({node:h,deco:f.mark});else{if(f instanceof Hn||h.nodeName=="DIV"&&h.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=n.contentDOM)c.push({node:h,deco:new hp({inclusive:!0,attributes:kK(h),tagName:h.tagName.toLowerCase()})});else return null}}}function BK(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let FK=class{constructor(){this.changes=[]}compareRange(e,t){b1(e,t,this.changes)}comparePoint(e,t){b1(e,t,this.changes)}boundChange(e){b1(e,e,this.changes)}};function $K(n,e,t){let r=new FK;return Rt.compare(n,e,t,r),r.changes}function zK(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function VK(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function HK(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return ne.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=wr(i.text,s,!1):a=wr(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=wr(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=wr(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return ne.range(o+i.from,a+i.from)}function jK(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function WK(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function W2(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function C9(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function T9(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function k5(n,e,t){let r,i,s,o,a=!1,l,u,c,h;for(let p=n.firstChild;p;p=p.nextSibling){let m=w0(p);for(let g=0;g<m.length;g++){let y=m[g];i&&W2(i,y)&&(y=C9(T9(y,i.bottom),i.top));let v=jK(e,y),x=WK(t,y);if(v==0&&x==0)return p.nodeType==3?E9(p,e,t):k5(p,e,t);(!r||o>x||o==x&&s>v)&&(r=p,i=y,s=v,o=x,a=v?e<y.left?g>0:g<m.length-1:!0),v==0?t>y.bottom&&(!c||c.bottom<y.bottom)?(l=p,c=y):t<y.top&&(!h||h.top>y.top)&&(u=p,h=y):c&&W2(c,y)?c=T9(c,y.bottom):h&&W2(h,y)&&(h=C9(h,y.top))}}if(c&&c.bottom>=t?(r=l,i=c):h&&h.top<=t&&(r=u,i=h),!r)return{node:n,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return E9(r,f,t);if(a&&r.contentEditable!="false")return k5(r,f,t);let d=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:d}}function E9(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=qu(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((Ee.chrome||Ee.gecko)&&qu(n,a).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:n,offset:a+(d?1:0)};i=a+(d?1:0),s=h}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function BI(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:h}=e,f=h-a;if(f<0)return 0;if(f>u)return n.state.doc.length;for(let k=n.viewState.heightOracle.textHeight/2,C=!1;l=n.elementAtHeight(f),l.type!=Xr.Text;)for(;f=r>0?l.bottom+k:l.top-k,!(f>=0&&f<=u);){if(C)return t?null:0;C=!0,r=-r}h=a+f;let d=l.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:A9(n,o,l,c,h);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:A9(n,o,l,c,h);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(c,h);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(o.left+1,Math.min(o.right-1,c)),g=m.elementFromPoint(c,h),g&&!n.contentDOM.contains(g)&&(g=null));let y,v=-1;if(g&&((i=n.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(c,h);k&&({offsetNode:y,offset:v}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(c,h);k&&({startContainer:y,startOffset:v}=k,(!n.contentDOM.contains(y)||Ee.safari&&qK(y,v,c)||Ee.chrome&&UK(y,v,c))&&(y=void 0))}y&&(v=Math.min(bo(y),v))}if(!y||!n.docView.dom.contains(y)){let k=Hn.find(n.docView,d);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:v}=k5(k.dom,c,h))}let x=n.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=x.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,v)+x.posAtStart}function A9(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+u5(o,s,n.state.tabSize)}function qK(n,e,t){let r,i=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return qu(n,r-1,r).getBoundingClientRect().right>t}function UK(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():qu(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function C5(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Xr.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function GK(n,e,t,r){let i=C5(n,e.head,e.assoc||-1),s=!r||i.type!=Xr.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==an.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ne.cursor(l,t?-1:1)}return ne.cursor(t?i.to:i.from,t?-1:1)}function M9(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=NK(i,s,o,a,t),c=wI;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function KK(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==dn.Space&&(i=o),i==o}}function XK(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return ne.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let d=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+c}let h=l.left+o,f=r??n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(f+d)*s,m=BI(n,{x:h,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let g=n.docView.coordsForChar(m),y=!g||p<g.top?-1:1;return ne.cursor(m,y,void 0,o)}}}function x1(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function q2(n,e,t){let r=x1(n.state.facet(b6).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ne.cursor(r,r<t.from?1:-1)}const Uf="￿";class YK{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(pn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Uf}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Gt.get(i),l=Gt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Vg(i))||Vg(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Gt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(JK(e,r.node,r.offset)?t:0))}}function JK(n,e,t){for(;;){if(!e||t<bo(e))return!1;if(e==n)return!0;t=Wu(e)+1,e=e.parentNode}}class O9{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ZK{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:tX(e),l=new YK(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=nX(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!f5(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!f5(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Ee.ios||Ee.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),f=Math.max(l,u),d=c.from-h,p=c.to-f;(d==0||d==1||h==0)&&(p==0||p==-1||f==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ne.single(u,l)}}}function FI(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||Ee.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=eX(n.state.doc.sliceString(o,a,Uf),e.text,l-o,u);c&&(Ee.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Uf+Uf&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Pt.of(e.text.slice(c.from,c.toB).split(Uf))})}else r&&(!n.hasFocus&&n.state.facet(Qo)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(Ee.mac||Ee.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ne.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Pt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:Ee.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ne.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Pt.of([" "])}),t)return w6(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function w6(n,e,t,r=-1){if(Ee.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Ee.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Gc(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Gc(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Gc(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=QK(n,e,t));return n.state.facet(EI).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function QK(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=n.state.sliceDoc(e.from,e.to),c,h=t&&_I(n,t.main.head);if(h){let p=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-p}}else c=n.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,g=m-u.length;if(p.to-p.from!=d||n.state.sliceDoc(g,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let y=i.changes({from:g,to:m,insert:e.insert}),v=p.to-s.to;return{changes:y,range:l?ne.range(Math.max(0,l.anchor+v),Math.max(0,l.head+v)):p.map(y)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function eX(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function tX(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new O9(t,r)),(i!=t||s!=r)&&e.push(new O9(i,s))),e}function nX(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ne.single(t+e,r+e):null}let rX=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ee.safari&&e.contentDOM.addEventListener("input",()=>null),Ee.gecko&&bX(e.contentDOM.ownerDocument)}handleEvent(e){!hX(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=iX(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&zI.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ee.android&&Ee.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ee.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=$I.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||sX.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Gc(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ee.safari&&!Ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function I9(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){yi(t.state,i)}}}function iX(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&t(a).handlers.push(I9(r.value,l))}if(o)for(let a in o){let l=o[a];l&&t(a).observers.push(I9(r.value,l))}}for(let r in Hs)t(r).handlers.push(Hs[r]);for(let r in vs)t(r).observers.push(vs[r]);return e}const $I=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],sX="dthko",zI=[16,17,18,20,91,92,224,225],lm=6;function um(n){return Math.max(0,n)*.7+8}function oX(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class aX{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=pK(e.contentDOM),this.atoms=e.state.facet(b6).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(pn.allowMultipleSelections)&&lX(e,t),this.dragging=cX(e,t)&&jI(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&oX(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=x6(this.view);e.clientX-l.left<=i+lm?t=-um(i-e.clientX):e.clientX+l.right>=o-lm&&(t=um(e.clientX-o)),e.clientY-l.top<=s+lm?r=-um(s-e.clientY):e.clientY+l.bottom>=a-lm&&(r=um(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=x1(this.atoms,i.from,0);o!=i.from&&(s=ne.cursor(o,-1))}else{let o=x1(this.atoms,i.from,-1),a=x1(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=ne.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?ne.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function lX(n,e){let t=n.state.facet(SI);return t.length?t[0](e):Ee.mac?e.metaKey:e.ctrlKey}function uX(n,e){let t=n.state.facet(kI);return t.length?t[0](e):Ee.mac?!e.altKey:!e.ctrlKey}function cX(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=x0(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function hX(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Gt.get(t))&&r.ignoreEvent(e))return!1;return!0}const Hs=Object.create(null),vs=Object.create(null),VI=Ee.ie&&Ee.ie_version<15||Ee.ios&&Ee.webkit_version<604;function fX(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),HI(n,t.value)},50)}function sv(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function HI(n,e){e=sv(n.state,g6,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(T5!=null&&t.selection.ranges.every(l=>l.empty)&&T5==s.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let h=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:h},range:ne.cursor(u.from+h.length)}})}else o?r=t.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ne.cursor(l.from+u.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}vs.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Hs.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);vs.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};vs.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Hs.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(CI))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=mX(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new aX(n,e,t,r)),r&&n.observer.ignore(()=>{rI(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function D9(n,e,t,r){if(r==1)return ne.cursor(e,t);if(r==2)return HK(n.state,e,t);{let i=Hn.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,ne.range(o,a)}}let N9=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function dX(n,e,t,r){let i=Hn.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&N9(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&N9(t,r,a)?1:o&&o.bottom>=r?-1:1}function P9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:dX(n,t,e.clientX,e.clientY)}}const pX=Ee.ie&&Ee.ie_version<=11;let R9=null,L9=0,_9=0;function jI(n){if(!pX)return n.detail;let e=R9,t=_9;return R9=n,_9=Date.now(),L9=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(L9+1)%3:1}function mX(n,e){let t=P9(n,e),r=jI(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=P9(n,s),u,c=D9(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let h=D9(n,t.pos,t.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?ne.range(f,d):ne.range(d,f)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=gX(i,l.pos))?u:a?i.addRange(c):ne.create([c])}}}function gX(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return ne.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Hs.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=ne.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",sv(n.state,y6,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Hs.dragend=n=>(n.inputState.draggedContent=null,!1);function B9(n,e,t,r){if(t=sv(n.state,g6,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&uX(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Hs.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&B9(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return B9(n,e,r,!0),!0}return!1};Hs.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=VI?null:e.clipboardData;return t?(HI(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(fX(n),!1)};function yX(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function vX(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:sv(n,y6,e.join(n.lineBreak)),ranges:t,linewise:r}}let T5=null;Hs.copy=Hs.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=vX(n.state);if(!t&&!i)return!1;T5=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=VI?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(yX(n,t),!1)};const WI=Ma.define();function qI(n,e){let t=[];for(let r of n.facet(AI)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:WI.of(!0)}):null}function UI(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=qI(n.state,e);t?n.dispatch(t):n.update([])}},10)}vs.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),UI(n)};vs.blur=n=>{n.observer.clearSelectionRange(),UI(n)};vs.compositionstart=vs.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};vs.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Ee.chrome&&Ee.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};vs.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Hs.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),u=n.posAtDOM(a.endContainer,a.endOffset);return w6(n,{from:l,to:u,insert:n.state.toText(s)},null),!0}}let i;if(Ee.chrome&&Ee.android&&(i=$I.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Ee.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Ee.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>vs.compositionend(n,e),20),!1};const F9=new Set;function bX(n){F9.has(n)||(F9.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const $9=["pre-wrap","normal","pre-line","break-spaces"];let xh=!1;function z9(){xh=!1}class xX{constructor(e){this.lineWrapping=e,this.doc=Pt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=$9.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class wX{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ao{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Xr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof El?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ao(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var sn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(sn||(sn={}));const w1=.001;class Yr{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>w1&&(xh=!0),this.height=e)}replace(e,t,r){return Yr.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:h}=i[a],f=s.lineAt(l,sn.ByPosNoHeight,r.setDoc(t),0,0),d=f.to>=u?f:s.lineAt(u,sn.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,sn.ByPosNoHeight,r,0,0));c+=f.from-l,l=f.from;let p=S6.build(r.setDoc(o),e,c,h);s=Wg(s,s.replace(l,u,p))}return s.updateHeight(r,0)}static empty(){return new Bi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new SX(Yr.of(e.slice(0,t)),o,Yr.of(e.slice(r)))}}function Wg(n,e){return n==e?n:(n.constructor!=e.constructor&&(xh=!0),e)}Yr.prototype.size=1;class GI extends Yr{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new ao(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Bi extends GI{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new ao(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Bi||i instanceof yr&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof yr?i=new Bi(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Yr.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yr extends Yr{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),h=a+c.length*l,f=Math.max(r,e-h/2);return new ao(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:h}=t.doc.line(s+u);return new ao(c,h,r+a*u,a,0)}}lineAt(e,t,r,i,s){if(t==sn.ByHeight)return this.blockAt(e,r,i,s);if(t==sn.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new ao(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,h=u.number-o,f=i+a*h+l*(u.from-s-h);return new ao(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=t;){let f=r.doc.lineAt(c);if(c==e){let p=f.number-a;h+=l*p+u*(e-s-p)}let d=l+u*f.length;o(new ao(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof yr?r[r.length-1]=new yr(s.length+i):r.push(null,new yr(i-1))}if(e>0){let s=r[0];s instanceof yr?r[0]=new yr(e+s.length):r.unshift(new yr(e-1),null)}return Yr.of(r)}decomposeLeft(e,t){t.push(new yr(e-1),null)}decomposeRight(e,t){t.push(null,new yr(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new yr(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=w1&&(l=-2);let f=new Bi(c,h);f.outdated=!1,o.push(f),a+=c+1}a<=s&&o.push(null,new yr(s-a).updateHeight(e,a));let u=Yr.of(o);return(l<0||Math.abs(u.height-this.height)>=w1||Math.abs(l-this.heightMetrics(e,t).perLine)>=w1)&&(xh=!0),Wg(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class SX extends Yr{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==sn.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==sn.ByPosNoHeight?sn.ByPosNoHeight:sn.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let u=this.lineAt(l,sn.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&V9(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),V9(s,a)}return Yr.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Yr.of(this.break?[e,null,t]:[e,t]):(this.left=Wg(this.left,e),this.right=Wg(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function V9(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof yr&&(r=n[e+1])instanceof yr&&n.splice(e-1,3,new yr(t.length+1+r.length))}const kX=5;class S6{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Bi?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Bi(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new GI(o,i,r)):(o||s||i>=kX)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Bi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new yr(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Bi)return e;let t=new Bi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Bi)&&!this.isCovered?this.nodes.push(new Bi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Bi&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new S6(r,e);return Rt.spans(t,r,i,s,0),s.finish(r)}}function CX(n,e,t){let r=new TX;return Rt.compare(n,e,t,r,0),r.changes}class TX{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&b1(e,t,this.changes,5)}}function EX(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(u==n.parentNode?i.innerHeight:l,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function AX(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function MX(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class U2{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return Xe.replace({widget:new OX(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class OX extends Oa{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class H9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=j9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=an.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(v6).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new xX(t),this.stateDeco=e.facet(S0).filter(r=>typeof r!="function"),this.heightMap=Yr.empty().applyChanges(this.stateDeco,Pt.empty,this.heightOracle.setDoc(e.doc),[new hs(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xe.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new cm(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?j9:new k6(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Gf(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(S0).filter(c=>typeof c!="function");let i=e.changedRanges,s=hs.extendWithRanges(i,CX(r,this.stateDeco,e?e.changes:Qn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);z9(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||xh)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(OI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?an.RTL:an.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:k,scaleY:C}=nI(t,a);(k>.005&&Math.abs(this.scaleX-k)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=k,this.scaleY=C,u|=16,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=sI(e.scrollDOM);let p=(this.printing?MX:EX)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!AX(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:w,textHeight:M}=e.docView.measureTextSize();o=C>0&&i.refresh(s,C,w,M,Math.max(5,v/w),k),o&&(e.docView.minWidth=0,u|=16)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),z9();for(let C of this.viewports){let w=C.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(C);this.heightMap=(o?Yr.empty().applyChanges(this.stateDeco,Pt.empty,this.heightOracle,[new hs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new wX(C.from,w))}xh&&(u|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new cm(i.lineAt(o-r*1e3,sn.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,sn.ByHeight,s,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,sn.ByPos,s,0,0),f;t.y=="center"?f=(h.top+h.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?f=h.top:f=h.bottom-c,l=new cm(i.lineAt(f-1e3/2,sn.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,sn.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new cm(this.heightMap.lineAt(r,sn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,sn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,sn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,sn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new U2(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=an.LTR&&!r)return[];let a=[],l=(c,h,f,d)=>{if(h-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let y of m)if(y>c&&y<h){l(c,y-10,f,d),l(y+10,h,f,d);return}let g=DX(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-c)<s&&Math.abs(y.to-h)<s&&!m.some(v=>y.from<v&&y.to>v));if(!g){if(h<f.to&&t&&r&&t.visibleRanges.some(x=>x.from<=h&&x.to>=h)){let x=t.moveToLineBoundary(ne.cursor(h),!1,!0).head;x>c&&(h=x)}let y=this.gapSize(f,c,h,d),v=r||y<2e6?y:2e6;g=new U2(c,h,y,v)}a.push(g)},u=c=>{if(c.length<o||c.type!=Xr.Text)return;let h=IX(c.from,c.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(f!=null){let v=fm(h,f),x=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=v-x,y=v+x}else g=(this.visibleTop-c.top-m)/c.height,y=(this.visibleBottom-c.top+m)/c.height;d=hm(h,g),p=hm(h,y)}else{let m=h.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,y=0;if(m>2e6)for(let w of e)w.from>=c.from&&w.from<c.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=w.size-w.displaySize);let v=this.pixelViewport.left+y,x=this.pixelViewport.right+y,k,C;if(f!=null){let w=fm(h,f),M=((x-v)/2+g)/m;k=w-M,C=w+M}else k=(v-g)/m,C=(x+g)/m;d=hm(h,k),p=hm(h,C)}d>c.from&&l(c.from,d,c,h),p<c.to&&l(p,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,t,r,i){let s=fm(i,r)-fm(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){U2.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Rt.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Gf(this.heightMap.lineAt(e,sn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Gf(this.heightMap.lineAt(this.scaler.fromDOM(e),sn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Gf(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class cm{constructor(e,t){this.from=e,this.to=t}}function IX(n,e,t){let r=[],i=n,s=0;return Rt.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function hm({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function fm(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function DX(n,e){for(let t of n)if(e(t))return t}const j9={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class k6{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,sn.ByPos,e,0,0).top,c=t.lineAt(l,sn.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof k6?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Gf(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ao(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Gf(i,e)):n._content)}const dm=Ae.define({combine:n=>n.join(" ")}),E5=Ae.define({combine:n=>n.indexOf(!0)>-1}),A5=Tl.newName(),KI=Tl.newName(),XI=Tl.newName(),YI={"&light":"."+KI,"&dark":"."+XI};function M5(n,e,t){return new Tl(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const NX=M5("."+A5,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},YI),PX={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},G2=Ee.ie&&Ee.ie_version<=11;let RX=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new mK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Ee.ie&&Ee.ie_version<=11||Ee.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ee.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ee.chrome&&Ee.chrome_version<126)&&(this.editContext=new _X(e),e.state.facet(Qo)&&(e.contentDOM.editContext=this.editContext.editContext)),G2&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Qo)?r.root.activeElement!=this.dom:!v1(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ee.ie&&Ee.ie_version<=11||Ee.android&&Ee.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Bd(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=x0(e.root);if(!t)return!1;let r=Ee.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LX(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=v1(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&yK(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,PX),G2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),G2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Gc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&v1(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new ZK(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=FI(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=W9(t,e.previousSibling||e.target.previousSibling,-1),i=W9(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Qo)!=e.state.facet(Qo)&&(e.view.contentDOM.editContext=e.state.facet(Qo)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function W9(n,e,t){for(;e;){let r=Gt.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function q9(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Bd(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function LX(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return q9(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?q9(n,t):null}class _X{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u={from:a,to:l,insert:Pt.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=ne.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((Ee.mac||Ee.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:Pt.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);w6(e,u,ne.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Xe.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:DI.of(Xe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=x0(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let c=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let Oe=class O5{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||gK(e.parent)||document,this.viewState=new H9(e.state||pn.create(e)),e.scrollTo&&e.scrollTo.is(am)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet($c).map(i=>new j2(i));for(let i of this.plugins)i.update(this);this.observer=new RX(this),this.inputState=new rX(this),this.inputState.ensureHandlers(this.plugins),this.docView=new k9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Kr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(WI))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=qI(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(pn.phrases)!=this.state.facet(pn.phrases))return this.setState(s);i=jg.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new Kc(d.empty?d:ne.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(am)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=qg.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(qf)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(dm)!=i.state.facet(dm)&&(this.viewState.mustMeasureContent=!0),(t||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(S5))try{f(i)}catch(d){yi(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!FI(this,c)&&u.force&&Gc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new H9(e),this.plugins=e.facet($c).map(r=>new j2(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new k9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet($c),r=e.state.facet($c);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new j2(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){yi(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(sI(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return yi(this.state,p),U9}}),h=jg.create(this,this.state,[]),f=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=U9)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){yi(this.state,p)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(S5))a(t)}get themeClasses(){return A5+" "+(this.state.facet(E5)?XI:KI)+" "+this.state.facet(dm)}updateAttrs(){let e=G9(this,NI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Qo)?"true":"false",class:"cm-content",style:`${Ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),G9(this,v6,t);let r=this.observer.ignore(()=>{let i=y5(this.contentDOM,this.contentAttrs,t),s=y5(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(O5.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(qf);let e=this.state.facet(O5.cspNonce);Tl.mount(this.root,this.styleModules.concat(NX).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return q2(this,e,M9(this,e,t,r))}moveByGroup(e,t){return q2(this,e,M9(this,e,t,r=>KK(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return ne.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return GK(this,e,t,r)}moveVertically(e,t,r){return q2(this,e,XK(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),BI(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[hl.find(s,e-i.from,-1,t)];return rv(r,o.dir==an.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(MI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>BX)return xI(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||bI(s.isolates,r=S9(this,e))))return s.order;r||(r=S9(this,e));let i=DK(e.text,t,r);return this.bidiCache.push(new qg(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{rI(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return am.of(new Kc(typeof e=="number"?ne.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return am.of(new Kc(ne.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Un.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Un.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Tl.newName(),i=[dm.of(r),qf.of(M5(`.${r}`,e))];return t&&t.dark&&i.push(E5.of(!0)),i}static baseTheme(e){return Ll.lowest(qf.of(M5("."+A5,e,YI)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Gt.get(r)||Gt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}};Oe.styleModule=qf;Oe.inputHandler=EI;Oe.clipboardInputFilter=g6;Oe.clipboardOutputFilter=y6;Oe.scrollHandler=II;Oe.focusChangeEffect=AI;Oe.perLineTextDirection=MI;Oe.exceptionSink=TI;Oe.updateListener=S5;Oe.editable=Qo;Oe.mouseSelectionStyle=CI;Oe.dragMovesSelection=kI;Oe.clickAddsSelectionRange=SI;Oe.decorations=S0;Oe.outerDecorations=PI;Oe.atomicRanges=b6;Oe.bidiIsolatedRanges=RI;Oe.scrollMargins=LI;Oe.darkTheme=E5;Oe.cspNonce=Ae.define({combine:n=>n.length?n[0]:""});Oe.contentAttributes=v6;Oe.editorAttributes=NI;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=ht.define();const BX=4096,U9={};class qg{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:an.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new qg(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function G9(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&g5(o,t)}return t}const FX=Ee.mac?"mac":Ee.windows?"win":Ee.linux?"linux":"key";function $X(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function pm(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const zX=Ll.default(Oe.domEventHandlers({keydown(n,e){return ZI(JI(e.state),n,e,"editor")}})),jh=Ae.define({enables:zX}),K9=new WeakMap;function JI(n){let e=n.facet(jh),t=K9.get(e);return t||K9.set(e,t=jX(e.reduce((r,i)=>r.concat(i),[]))),t}function VX(n,e,t){return ZI(JI(n.state),e,n,t)}let nl=null;const HX=4e3;function jX(n,e=FX){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var h,f;let d=t[o]||(t[o]=Object.create(null)),p=a.split(/ (?!$)/).map(y=>$X(y,e));for(let y=1;y<p.length;y++){let v=p.slice(0,y).join(" ");i(v,!0),d[v]||(d[v]={preventDefault:!0,stopPropagation:!1,run:[x=>{let k=nl={view:x,prefix:v,scope:o};return setTimeout(()=>{nl==k&&(nl=null)},HX),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),u&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in c)c[f].run.push(d=>h(d,I5))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let I5=null;function ZI(n,e,t,r){I5=e;let i=eI(e),s=hi(i,0),o=oo(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;nl&&nl.view==t&&nl.scope==r&&(a=nl.prefix+" ",zI.indexOf(e.keyCode)<0&&(u=!0,nl=null));let h=new Set,f=g=>{if(g){for(let y of g.run)if(!h.has(y)&&(h.add(y),y(t)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),u=!0)}return!1},d=n[r],p,m;return d&&(f(d[a+pm(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ee.windows&&e.ctrlKey&&e.altKey)&&!(Ee.mac&&e.altKey&&!e.ctrlKey)&&(p=ba[e.keyCode])&&p!=i?(f(d[a+pm(p,e,!0)])||e.shiftKey&&(m=b0[e.keyCode])!=i&&m!=p&&f(d[a+pm(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+pm(i,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),I5=null,l}class dp{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=QI(e);return[new dp(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return WX(e,t,r)}}function QI(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==an.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function X9(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function WX(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==an.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=QI(n),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=a.right-(c?parseInt(c.paddingRight):0),d=C5(n,r,1),p=C5(n,i,-1),m=d.type==Xr.Text?d:null,g=p.type==Xr.Text?p:null;if(m&&(n.lineWrapping||d.widgetLineBreaks)&&(m=X9(n,r,1,m)),g&&(n.lineWrapping||p.widgetLineBreaks)&&(g=X9(n,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return v(x(t.from,t.to,m));{let C=m?x(t.from,null,m):k(d,!1),w=g?x(null,t.to,g):k(p,!0),M=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&C.bottom+n.defaultLineHeight/2<w.top?M.push(y(h,C.bottom,f,w.top)):C.bottom<w.top&&n.elementAtHeight((C.bottom+w.top)/2).type==Xr.Text&&(C.bottom=w.top=(C.bottom+w.top)/2),v(C).concat(M).concat(v(w))}function y(C,w,M,D){return new dp(e,C-l.left,w-l.top,M-C,D-w)}function v({top:C,bottom:w,horizontal:M}){let D=[];for(let A=0;A<M.length;A+=2)D.push(y(M[A],C,M[A+1],w));return D}function x(C,w,M){let D=1e9,A=-1e9,E=[];function N(F,W,G,ee,de){let ge=n.coordsAtPos(F,F==M.to?-2:2),R=n.coordsAtPos(G,G==M.from?2:-2);!ge||!R||(D=Math.min(ge.top,R.top,D),A=Math.max(ge.bottom,R.bottom,A),de==an.LTR?E.push(s&&W?h:ge.left,s&&ee?f:R.right):E.push(!s&&ee?h:R.left,!s&&W?f:ge.right))}let I=C??M.from,L=w??M.to;for(let F of n.visibleRanges)if(F.to>I&&F.from<L)for(let W=Math.max(F.from,I),G=Math.min(F.to,L);;){let ee=n.state.doc.lineAt(W);for(let de of n.bidiSpans(ee)){let ge=de.from+ee.from,R=de.to+ee.from;if(ge>=G)break;R>W&&N(Math.max(ge,W),C==null&&ge<=I,Math.min(R,G),w==null&&R>=L,de.dir)}if(W=ee.to+1,W>=G)break}return E.length==0&&N(I,C==null,L,w==null,n.textDirection),{top:D,bottom:A,horizontal:E}}function k(C,w){let M=a.top+(w?C.top:C.bottom);return{top:M,bottom:M,horizontal:[]}}}function qX(n,e){return n.constructor==e.constructor&&n.eq(e)}class UX{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(S1)!=e.state.facet(S1)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(S1);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!qX(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const S1=Ae.define();function eD(n){return[Un.define(e=>new UX(e,n)),S1.of(n)]}const k0=Ae.define({combine(n){return Eo(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function tD(n={}){return[k0.of(n),GX,KX,XX,OI.of(!0)]}function nD(n){return n.startState.facet(k0)!=n.state.facet(k0)}const GX=eD({above:!0,markers(n){let{state:e}=n,t=e.facet(k0),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ne.cursor(i.head,i.head>i.anchor?-1:1);for(let l of dp.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=nD(n);return t&&Y9(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Y9(e.state,n)},class:"cm-cursorLayer"});function Y9(n,e){e.style.animationDuration=n.facet(k0).cursorBlinkRate+"ms"}const KX=eD({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:dp.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||nD(n)},class:"cm-selectionLayer"}),XX=Ll.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),rD=ht.define({map(n,e){return n==null?null:e.mapPos(n)}}),Kf=cr.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(rD)?r.value:t,n)}}),YX=Un.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Kf);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Kf)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Kf),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Kf)!=n&&this.view.dispatch({effects:rD.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function JX(){return[Kf,YX]}function J9(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function ZX(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class QX{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let h=r(a,l,u);h&&c(u,u+a[0].length,h)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new va,r=t.add.bind(t);for(let{from:i,to:s}of ZX(e,this.maxLength))J9(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),h=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){h=a;break}}let f=[],d,p=(m,g,y)=>f.push(y.range(m,g));if(l==u)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<h-l.from;)this.addMatch(d,e,d.index+l.from,p);else J9(e.state.doc,this.regexp,c,h,(m,g)=>this.addMatch(g,e,m,p));t=t.update({filterFrom:c,filterTo:h,filter:(m,g)=>m<c||g>h,add:f})}}return t}}const D5=/x/.unicode!=null?"gu":"g",eY=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,D5),tY={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let K2=null;function nY(){var n;if(K2==null&&typeof document<"u"&&document.body){let e=document.body.style;K2=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return K2||!1}const k1=Ae.define({combine(n){let e=Eo(n,{render:null,specialChars:eY,addSpecialChars:null});return(e.replaceTabs=!nY())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,D5)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,D5)),e}});function rY(n={}){return[k1.of(n),iY()]}let Z9=null;function iY(){return Z9||(Z9=Un.fromClass(class{constructor(n){this.view=n,this.decorations=Xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(k1)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new QX({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=hi(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=Hh(o.text,a,r-o.from);return Xe.replace({widget:new lY((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Xe.replace({widget:new aY(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(k1);n.startState.facet(k1)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const sY="•";function oY(n){return n>=32?sY:n==10?"␤":String.fromCharCode(9216+n)}class aY extends Oa{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=oY(this.code),r=e.state.phrase("Control character")+" "+(tY[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class lY extends Oa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function uY(){return hY}const cY=Xe.line({class:"cm-activeLine"}),hY=Un.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(cY.range(i.from)),e=i.from)}return Xe.set(t)}},{decorations:n=>n.decorations}),N5=2e3;function fY(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>N5||t.off>N5||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&s.push(ne.range(u.from+o,u.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=u5(u.text,o,n.tabSize,!0);if(c<0)s.push(ne.cursor(u.to));else{let h=u5(u.text,a,n.tabSize);s.push(ne.range(u.from+c,u.from+h))}}}return s}function dY(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Q9(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>N5?-1:i==r.length?dY(n,e.clientX):Hh(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function pY(n,e){let t=Q9(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=Q9(n,i);if(!a)return r;let l=fY(n.state,t,a);return l.length?o?ne.create(l.concat(r.ranges)):ne.create(l):r}}:null}function mY(n){let e=t=>t.altKey&&t.button==0;return Oe.mouseSelectionStyle.of((t,r)=>e(r)?pY(t,r):null)}const gY={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},yY={style:"cursor: crosshair"};function vY(n={}){let[e,t]=gY[n.key||"Alt"],r=Un.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Oe.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?yY:null})]}const Tf="-10000px";class iD{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(c=h)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let h=o[l]=this.tooltipViews[c];a&&(a[l]=t[c]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,u)=>t[u]=l),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function bY(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const X2=Ae.define({combine:n=>{var e,t,r;return{position:Ee.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||bY}}}),ek=new WeakMap,C6=Un.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(X2);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new iD(n,T6,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(X2);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Tf,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ee.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Tf&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=x6(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(X2).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,h=n.pos[a],f=n.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(t.top,r.top)||h.top>=Math.min(t.bottom,r.bottom)||h.right<Math.max(t.left,r.left)-.1||h.left>Math.min(t.right,r.right)+.1)){c.style.top=Tf;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=(e=ek.get(u))!==null&&e!==void 0?e:f.bottom-f.top,y=u.offset||wY,v=this.view.textDirection==an.LTR,x=f.width>r.right-r.left?v?r.left:r.right-f.width:v?Math.max(r.left,Math.min(h.left-(d?14:0)+y.x,r.right-m)):Math.min(Math.max(r.left,h.left-m+(d?14:0)-y.x),r.right-m),k=this.above[a];!l.strictSide&&(k?h.top-g-p-y.y<r.top:h.bottom+g+p+y.y>r.bottom)&&k==r.bottom-h.bottom>h.top-r.top&&(k=this.above[a]=!k);let C=(k?h.top-r.top:r.bottom-h.bottom)-p;if(C<g&&u.resize!==!1){if(C<this.view.defaultLineHeight){c.style.top=Tf;continue}ek.set(u,g),c.style.height=(g=C)/s+"px"}else c.style.height&&(c.style.height="");let w=k?h.top-g-p-y.y:h.bottom+p+y.y,M=x+m;if(u.overlap!==!0)for(let D of o)D.left<M&&D.right>x&&D.top<w+g&&D.bottom>w&&(w=k?D.top-g-2-p:D.bottom+p+2);if(this.position=="absolute"?(c.style.top=(w-n.parent.top)/s+"px",tk(c,(x-n.parent.left)/i)):(c.style.top=w/s+"px",tk(c,x/i)),d){let D=h.left+(v?y.x:-y.x)-(x+14-7);d.style.left=D/i+"px"}u.overlap!==!0&&o.push({left:x,top:w,right:M,bottom:w+g}),c.classList.toggle("cm-tooltip-above",k),c.classList.toggle("cm-tooltip-below",!k),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Tf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function tk(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const xY=Oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),wY={x:0,y:0},T6=Ae.define({enables:[C6,xY]}),Ug=Ae.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class ov{static create(e){return new ov(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new iD(e,Ug,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const SY=T6.compute([Ug],n=>{let e=n.facet(Ug);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:ov.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class kY{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof cl)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==an.RTL?-1:1;s=t.x<a.left?-u:u}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>yi(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(C6),t=e?e.manager.tooltips.findIndex(r=>r.create==ov.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!CY(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!TY(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const mm=4;function CY(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=t-mm&&e.clientX<=r+mm&&e.clientY>=i-mm&&e.clientY<=s+mm}function TY(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function EY(n,e={}){let t=ht.define(),r=cr.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,xr.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(AY)&&(i=[]);return i},provide:i=>Ug.from(i)});return{active:r,extension:[r,Un.define(i=>new kY(i,n,r,t,e.hoverTime||300)),SY]}}function sD(n,e){let t=n.plugin(C6);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const AY=ht.define(),nk=Ae.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function C0(n,e){let t=n.plugin(oD),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const oD=Un.fromClass(class{constructor(n){this.input=n.state.facet(T0),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(nk);this.top=new gm(n,!0,e.topContainer),this.bottom=new gm(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(nk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new gm(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new gm(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(T0);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),a.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class gm{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=rk(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=rk(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rk(n){let e=n.nextSibling;return n.remove(),e}const T0=Ae.define({enables:oD});class wa extends ju{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wa.prototype.elementClass="";wa.prototype.toDOM=void 0;wa.prototype.mapMode=xr.TrackBefore;wa.prototype.startSide=wa.prototype.endSide=-1;wa.prototype.point=!0;const C1=Ae.define(),MY=Ae.define(),OY={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Rt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},$d=Ae.define();function IY(n){return[aD(),$d.of({...OY,...n})]}const ik=Ae.define({combine:n=>n.some(e=>e)});function aD(n){return[DY]}const DY=Un.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet($d).map(e=>new ok(n,e)),this.fixed=!n.state.facet(ik);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(ik)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Rt.iter(this.view.state.facet(C1),this.view.viewport.from),r=[],i=this.gutters.map(s=>new NY(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Xr.Text&&o){P5(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Xr.Text){P5(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet($d),t=n.state.facet($d),r=n.docChanged||n.heightChanged||n.viewportChanged||!Rt.eq(n.startState.facet(C1),n.state.facet(C1),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new ok(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==an.LTR?{left:r,right:i}:{right:r,left:i}})});function sk(n){return Array.isArray(n)?n:[n]}function P5(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class NY{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Rt.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new lD(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];P5(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(MY)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class ok{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=sk(t.markers(e)),t.initialSpacer&&(this.spacer=new lD(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=sk(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Rt.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class lD{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),PY(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function PY(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const RY=Ae.define(),LY=Ae.define(),zc=Ae.define({combine(n){return Eo(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class Y2 extends wa{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function J2(n,e){return n.state.facet(zc).formatNumber(e,n.state)}const _Y=$d.compute([zc],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(RY)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Y2(J2(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(LY)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(zc)!=e.state.facet(zc),initialSpacer(e){return new Y2(J2(e,ak(e.state.doc.lines)))},updateSpacer(e,t){let r=J2(t.view,ak(t.view.state.doc.lines));return r==e.number?e:new Y2(r)},domEventHandlers:n.facet(zc).domEventHandlers,side:"before"}));function BY(n={}){return[zc.of(n),aD(),_Y]}function ak(n){let e=9;for(;e<n;)e=e*10+9;return e}const FY=new class extends wa{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},$Y=C1.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(FY.range(i)))}return Rt.of(e)});function zY(){return $Y}let VY=0;class es{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=VY++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof es&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new es(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Gg(e);return r=>r.modified.indexOf(t)>-1?r:Gg.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let HY=0;class Gg{constructor(e){this.name=e,this.instances=[],this.id=HY++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&jY(t,a.modified));if(r)return r;let i=[],s=new es(e.name,i,e,t);for(let a of t)a.instances.push(s);let o=WY(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Gg.get(a,l));return s}}function jY(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function WY(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function qY(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new Kg(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return uD.add(e)}const uD=new kt;class Kg{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Kg.empty=new Kg([],2,null);function cD(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function UY(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function GY(n,e,t,r=0,i=n.length){let s=new KY(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class KY{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,c=XY(e)||Kg.empty,h=UY(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,a),u),c.opaque)return;let f=e.tree&&e.tree.prop(kt.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=e.firstChild();for(let g=0,y=a;;g++){let v=g<f.overlay.length?f.overlay[g]:null,x=v?v.from+a:l,k=Math.max(t,y),C=Math.min(r,x);if(k<C&&m)for(;e.from<C&&(this.highlightRange(e,k,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=x||!e.nextSibling())););if(!v||x>r)break;y=v.to+a,y>t&&(this.highlightRange(d.cursor(),Math.max(t,v.from+a),Math.min(r,y),"",p),this.startSpan(Math.min(r,y),u))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function XY(n){let e=n.type.prop(uD);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const be=es.define,ym=be(),Ya=be(),lk=be(Ya),uk=be(Ya),Ja=be(),vm=be(Ja),Z2=be(Ja),eo=be(),Gl=be(eo),Zs=be(),Qs=be(),R5=be(),Ef=be(R5),bm=be(),Q={comment:ym,lineComment:be(ym),blockComment:be(ym),docComment:be(ym),name:Ya,variableName:be(Ya),typeName:lk,tagName:be(lk),propertyName:uk,attributeName:be(uk),className:be(Ya),labelName:be(Ya),namespace:be(Ya),macroName:be(Ya),literal:Ja,string:vm,docString:be(vm),character:be(vm),attributeValue:be(vm),number:Z2,integer:be(Z2),float:be(Z2),bool:be(Ja),regexp:be(Ja),escape:be(Ja),color:be(Ja),url:be(Ja),keyword:Zs,self:be(Zs),null:be(Zs),atom:be(Zs),unit:be(Zs),modifier:be(Zs),operatorKeyword:be(Zs),controlKeyword:be(Zs),definitionKeyword:be(Zs),moduleKeyword:be(Zs),operator:Qs,derefOperator:be(Qs),arithmeticOperator:be(Qs),logicOperator:be(Qs),bitwiseOperator:be(Qs),compareOperator:be(Qs),updateOperator:be(Qs),definitionOperator:be(Qs),typeOperator:be(Qs),controlOperator:be(Qs),punctuation:R5,separator:be(R5),bracket:Ef,angleBracket:be(Ef),squareBracket:be(Ef),paren:be(Ef),brace:be(Ef),content:eo,heading:Gl,heading1:be(Gl),heading2:be(Gl),heading3:be(Gl),heading4:be(Gl),heading5:be(Gl),heading6:be(Gl),contentSeparator:be(eo),list:be(eo),quote:be(eo),emphasis:be(eo),strong:be(eo),link:be(eo),monospace:be(eo),strikethrough:be(eo),inserted:be(),deleted:be(),changed:be(),invalid:be(),meta:bm,documentMeta:be(bm),annotation:be(bm),processingInstruction:be(bm),definition:es.defineModifier("definition"),constant:es.defineModifier("constant"),function:es.defineModifier("function"),standard:es.defineModifier("standard"),local:es.defineModifier("local"),special:es.defineModifier("special")};for(let n in Q){let e=Q[n];e instanceof es&&(e.name=n)}cD([{tag:Q.link,class:"tok-link"},{tag:Q.heading,class:"tok-heading"},{tag:Q.emphasis,class:"tok-emphasis"},{tag:Q.strong,class:"tok-strong"},{tag:Q.keyword,class:"tok-keyword"},{tag:Q.atom,class:"tok-atom"},{tag:Q.bool,class:"tok-bool"},{tag:Q.url,class:"tok-url"},{tag:Q.labelName,class:"tok-labelName"},{tag:Q.inserted,class:"tok-inserted"},{tag:Q.deleted,class:"tok-deleted"},{tag:Q.literal,class:"tok-literal"},{tag:Q.string,class:"tok-string"},{tag:Q.number,class:"tok-number"},{tag:[Q.regexp,Q.escape,Q.special(Q.string)],class:"tok-string2"},{tag:Q.variableName,class:"tok-variableName"},{tag:Q.local(Q.variableName),class:"tok-variableName tok-local"},{tag:Q.definition(Q.variableName),class:"tok-variableName tok-definition"},{tag:Q.special(Q.variableName),class:"tok-variableName2"},{tag:Q.definition(Q.propertyName),class:"tok-propertyName tok-definition"},{tag:Q.typeName,class:"tok-typeName"},{tag:Q.namespace,class:"tok-namespace"},{tag:Q.className,class:"tok-className"},{tag:Q.macroName,class:"tok-macroName"},{tag:Q.propertyName,class:"tok-propertyName"},{tag:Q.operator,class:"tok-operator"},{tag:Q.comment,class:"tok-comment"},{tag:Q.meta,class:"tok-meta"},{tag:Q.invalid,class:"tok-invalid"},{tag:Q.punctuation,class:"tok-punctuation"}]);var Q2;const gu=new kt;function hD(n){return Ae.define({combine:n?e=>e.concat(n):void 0})}const YY=new kt;class ss{constructor(e,t,r=[],i=""){this.data=e,this.name=i,pn.prototype.hasOwnProperty("tree")||Object.defineProperty(pn.prototype,"tree",{get(){return kr(this)}}),this.parser=t,this.extension=[Al.of(this),pn.languageData.of((s,o,a)=>{let l=ck(s,o,a),u=l.type.prop(gu);if(!u)return[];let c=s.facet(u),h=l.type.prop(YY);if(h){let f=l.resolve(o-l.from,a);for(let d of h)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return ck(e,t,r).type.prop(gu)==this.data}findRegions(e){let t=e.facet(Al);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(gu)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(kt.mounted);if(a){if(a.tree.prop(gu)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Qt&&i(u,s.positions[l]+o)}};return i(kr(e),0),r}get allowsNesting(){return!0}}ss.setState=ht.define();function ck(n,e,t){let r=n.facet(Al),i=kr(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,kn.ExcludeBuffers))s.type.isTop&&(i=s);return i}class L5 extends ss{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=hD(e.languageData);return new L5(t,e.parser.configure({props:[gu.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new L5(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kr(n){let e=n.field(ss.state,!1);return e?e.tree:Qt.empty}class JY{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Af=null,_5=class B5{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new B5(e,t,[],Qt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new JY(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Qt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ha.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ha.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Af;Af=this;try{return e()}finally{Af=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=hk(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,f)=>l.push({fromA:u,toA:c,fromB:h,toB:f})),r=ha.applyChanges(r,l),i=Qt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&a.push({from:c,to:h})}}}return new B5(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=hk(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends RO{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Af;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Qt(Ui.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Af}};function hk(n,e,t){return ha.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class wh{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new wh(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=_5.create(e.facet(Al).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new wh(r)}}ss.state=cr.define({create:wh.init,update(n,e){for(let t of e.effects)if(t.is(ss.setState))return t.value;return e.startState.facet(Al)!=e.state.facet(Al)?wh.init(e.state):n.apply(e)}});let fD=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fD=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const e4=typeof navigator<"u"&&(!((Q2=navigator.scheduling)===null||Q2===void 0)&&Q2.isInputPending)?()=>navigator.scheduling.isInputPending():null,ZY=Un.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ss.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ss.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fD(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ss.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!e4?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>e4&&e4()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ss.setState.of(new wh(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>yi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Al=Ae.define({combine(n){return n.length?n[0]:null},enables:n=>[ss.state,ZY,Oe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class QY{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class K{constructor(e,t,r,i,s,o=void 0){this.name=e,this.alias=t,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new K(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let r=/\.([^.]+)$/.exec(t);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(s=>s==t))return i;if(r)for(let i of e)for(let s of i.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return i}return null}}const eJ=Ae.define(),av=Ae.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Gu(n){let e=n.facet(av);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function E0(n,e){let t="",r=n.tabSize,i=n.facet(av)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function E6(n,e){n instanceof pn&&(n=new lv(n));for(let r of n.state.facet(eJ)){let i=r(n,e);if(i!==void 0)return i}let t=kr(n.state);return t.length>=e?tJ(n,t,e):null}class lv{constructor(e,t={}){this.state=e,this.options=t,this.unit=Gu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Hh(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const dD=new kt;function tJ(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return pD(r,n,t)}function pD(n,e,t){for(let r=n;r;r=r.next){let i=rJ(r.node);if(i)return i(A6.create(e,t,r))}return 0}function nJ(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function rJ(n){let e=n.type.prop(dD);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(kt.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>mD(o,!0,1,void 0,s&&!nJ(o)?i.from:void 0)}return n.parent==null?iJ:null}function iJ(){return 0}class A6 extends lv{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new A6(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(sJ(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return pD(this.context.next,this.base,this.pos)}}function sJ(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function oJ(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+u}}a=l.to}}function Eye({closing:n,align:e=!0,units:t=1}){return r=>mD(r,e,t,n)}function mD(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?oJ(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const Aye=n=>n.baseIndent;function Mye({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const aJ=200;function lJ(){return pn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+aJ)return n;let s=t.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let h=E6(o,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=E0(o,h);f!=d&&l.push({from:c.from,to:c.from+f.length,insert:d})}return l.length?[n,{changes:l,sequential:!0}]:n})}const uJ=Ae.define(),cJ=new kt;function Oye(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function hJ(n,e,t){let r=kr(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(cJ);if(l&&(a.to<r.length-50||r.length==n.doc.length||!fJ(a))){let u=l(a,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(s=u)}}return s}function fJ(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Xg(n,e,t){for(let r of n.facet(uJ)){let i=r(n,e,t);if(i)return i}return hJ(n,e,t)}function gD(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const uv=ht.define({map:gD}),pp=ht.define({map:gD});function yD(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Ku=cr.define({create(){return Xe.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,r)=>n=fk(n,t,r)),n=n.map(e.changes);for(let t of e.effects)if(t.is(uv)&&!dJ(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(xD),i=r?Xe.replace({widget:new xJ(r(e.state,t.value))}):dk;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(pp)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=fk(n,e.selection.main.head)),n},provide:n=>Oe.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(dk.range(r,i))}return Xe.set(e,!0)}});function fk(n,e,t=e){let r=!1;return n.between(e,t,(i,s)=>{i<t&&s>e&&(r=!0)}),r?n.update({filterFrom:e,filterTo:t,filter:(i,s)=>i>=t||s<=e}):n}function Yg(n,e,t){var r;let i=null;return(r=n.field(Ku,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function dJ(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function vD(n,e){return n.field(Ku,!1)?e:e.concat(ht.appendConfig.of(wD()))}const pJ=n=>{for(let e of yD(n)){let t=Xg(n.state,e.from,e.to);if(t)return n.dispatch({effects:vD(n.state,[uv.of(t),bD(n,t)])}),!0}return!1},mJ=n=>{if(!n.state.field(Ku,!1))return!1;let e=[];for(let t of yD(n)){let r=Yg(n.state,t.from,t.to);r&&e.push(pp.of(r),bD(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function bD(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Oe.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const gJ=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Xg(e,i.from,i.to);s&&t.push(uv.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:vD(n.state,t)}),!!t.length},yJ=n=>{let e=n.state.field(Ku,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(pp.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},vJ=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:pJ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:mJ},{key:"Ctrl-Alt-[",run:gJ},{key:"Ctrl-Alt-]",run:yJ}],bJ={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},xD=Ae.define({combine(n){return Eo(n,bJ)}});function wD(n){return[Ku,kJ]}function SD(n,e){let{state:t}=n,r=t.facet(xD),i=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=Yg(n.state,a.from,a.to);l&&n.dispatch({effects:pp.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const dk=Xe.replace({widget:new class extends Oa{toDOM(n){return SD(n,null)}}});class xJ extends Oa{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return SD(e,this.value)}}const wJ={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class t4 extends wa{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function SJ(n={}){let e={...wJ,...n},t=new t4(e,!0),r=new t4(e,!1),i=Un.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Al)!=o.state.facet(Al)||o.startState.field(Ku,!1)!=o.state.field(Ku,!1)||kr(o.startState)!=kr(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new va;for(let l of o.viewportLineBlocks){let u=Yg(o.state,l.from,l.to)?r:Xg(o.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:s}=e;return[i,IY({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Rt.empty},initialSpacer(){return new t4(e,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let u=Yg(o.state,a.from,a.to);if(u)return o.dispatch({effects:pp.of(u)}),!0;let c=Xg(o.state,a.from,a.to);return c?(o.dispatch({effects:uv.of(c)}),!0):!1}}}),wD()]}const kJ=Oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class mp{constructor(e,t){this.specs=e;let r;function i(a){let l=Tl.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof ss?a=>a.prop(gu)==o.data:o?a=>a==o:void 0,this.style=cD(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Tl(r):null,this.themeType=t.themeType}static define(e,t){return new mp(e,t||{})}}const F5=Ae.define(),kD=Ae.define({combine(n){return n.length?[n[0]]:null}});function n4(n){let e=n.facet(F5);return e.length?e:n.facet(kD)}function CD(n,e){let t=[TJ],r;return n instanceof mp&&(n.module&&t.push(Oe.styleModule.of(n.module)),r=n.themeType),e?.fallback?t.push(kD.of(n)):r?t.push(F5.computeN([Oe.darkTheme],i=>i.facet(Oe.darkTheme)==(r=="dark")?[n]:[])):t.push(F5.of(n)),t}class CJ{constructor(e){this.markCache=Object.create(null),this.tree=kr(e.state),this.decorations=this.buildDeco(e,n4(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=kr(e.state),r=n4(e.state),i=r!=n4(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Xe.none;let r=new va;for(let{from:i,to:s}of e.visibleRanges)GY(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Xe.mark({class:l})))},i,s);return r.finish()}}const TJ=Ll.high(Un.fromClass(CJ,{decorations:n=>n.decorations})),EJ=mp.define([{tag:Q.meta,color:"#404740"},{tag:Q.link,textDecoration:"underline"},{tag:Q.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Q.emphasis,fontStyle:"italic"},{tag:Q.strong,fontWeight:"bold"},{tag:Q.strikethrough,textDecoration:"line-through"},{tag:Q.keyword,color:"#708"},{tag:[Q.atom,Q.bool,Q.url,Q.contentSeparator,Q.labelName],color:"#219"},{tag:[Q.literal,Q.inserted],color:"#164"},{tag:[Q.string,Q.deleted],color:"#a11"},{tag:[Q.regexp,Q.escape,Q.special(Q.string)],color:"#e40"},{tag:Q.definition(Q.variableName),color:"#00f"},{tag:Q.local(Q.variableName),color:"#30a"},{tag:[Q.typeName,Q.namespace],color:"#085"},{tag:Q.className,color:"#167"},{tag:[Q.special(Q.variableName),Q.macroName],color:"#256"},{tag:Q.definition(Q.propertyName),color:"#00c"},{tag:Q.comment,color:"#940"},{tag:Q.invalid,color:"#f00"}]),AJ=Oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),TD=1e4,ED="()[]{}",AD=Ae.define({combine(n){return Eo(n,{afterCursor:!0,brackets:ED,maxScanDistance:TD,renderMatch:IJ})}}),MJ=Xe.mark({class:"cm-matchingBracket"}),OJ=Xe.mark({class:"cm-nonmatchingBracket"});function IJ(n){let e=[],t=n.matched?MJ:OJ;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const DJ=cr.define({create(){return Xe.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(AD);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=uo(e.state,i.head,-1,r)||i.head>0&&uo(e.state,i.head-1,1,r)||r.afterCursor&&(uo(e.state,i.head,1,r)||i.head<e.state.doc.length&&uo(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Xe.set(t,!0)},provide:n=>Oe.decorations.from(n)}),NJ=[DJ,AJ];function PJ(n={}){return[AD.of(n),NJ]}const RJ=new kt;function $5(n,e,t){let r=n.prop(e<0?kt.openedBy:kt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function z5(n){let e=n.type.prop(RJ);return e?e(n.node):n}function uo(n,e,t,r={}){let i=r.maxScanDistance||TD,s=r.brackets||ED,o=kr(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=$5(l.type,t,s);if(u&&l.from<l.to){let c=z5(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return LJ(n,e,t,l,c,u,s)}}return _J(n,e,t,o,a.type,i,s)}function LJ(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a?.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=z5(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if($5(c.type,t,o))u++;else if($5(c.type,-t,o)){if(u==0){let h=z5(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function _J(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;t<0&&(f+=d.length);let p=e+f*t;for(let m=t>0?0:d.length-1,g=t>0?d.length:-1;m!=g;m+=t){let y=o.indexOf(d[m]);if(!(y<0||r.resolveInner(p+m,1).type!=i))if(y%2==0==t>0)h++;else{if(h==1)return{start:u,end:{from:p+m,to:p+m+1},matched:y>>1==l>>1};h--}}t>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function pk(n,e,t,r=0,i=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let s=i;for(let o=r;o<e;o++)n.charCodeAt(o)==9?s+=t-s%t:s++;return s}class MD{constructor(e,t,r,i){this.string=e,this.tabSize=t,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e instanceof RegExp?e.test(t):e(t)),r)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=pk(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:pk(this.string,null,this.tabSize)}match(e,t,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function BJ(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||FJ,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||I6,mergeTokens:n.mergeTokens!==!1}}function FJ(n){if(typeof n!="object")return n;let e={};for(let t in n){let r=n[t];e[t]=r instanceof Array?r.slice():r}return e}const mk=new WeakMap;class M6 extends ss{constructor(e){let t=hD(e.languageData),r=BJ(e),i,s=new class extends RO{createParse(o,a,l){return new zJ(i,o,a,l)}};super(t,s,[],e.name),this.topNode=jJ(t,this),i=this,this.streamParser=r,this.stateAfter=new kt({perNode:!0}),this.tokenTable=e.tokenTable?new ND(r.tokenTable):HJ}static define(e){return new M6(e)}getIndent(e){let t,{overrideIndentation:r}=e.options;r&&(t=mk.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let i=O6(this,e.node.tree,e.node.from,e.node.from,t??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=r?r(l.from):-1,h=new MD(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-l.from;)ID(this.streamParser.token,h,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return r&&t==null&&mk.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function O6(n,e,t,r,i){let s=t>=r&&t+e.length<=i&&e.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=t+e.positions[o],u=a instanceof Qt&&l<i&&O6(n,a,l,r,i);if(u)return u}return null}function OD(n,e,t,r,i){if(i&&t<=0&&r>=e.length)return e;!i&&t==0&&e.type==n.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Qt){if(!(l=OD(n,a,t-o,r-o,i)))break;return i?new Qt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function $J(n,e,t,r,i){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=t&&a>t&&O6(n,s.tree,0-s.offset,t,a),u;if(l&&l.pos<=r&&(u=OD(n,s.tree,t+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:n.streamParser.startState(i?Gu(i):4),tree:Qt.empty}}class zJ{constructor(e,t,r,i){this.lang=e,this.input=t,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=_5.get(),o=i[0].from,{state:a,tree:l}=$J(e,r,o,this.to,s?.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Gu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=_5.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(t,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let r=t.indexOf(`
`);r>-1&&(t=t.slice(0,r))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),r=e+t.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(t=t.slice(0,s-(r-t.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);t+=a,r=o+a.length}return{line:t,end:r}}skipGapsTo(e,t,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+t;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(t,i,1),t+=i;let a=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=r:this.chunk.push(e,t,r,s),i}parseLine(e){let{line:t,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new MD(t,e?e.state.tabSize:4,e?Gu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=ID(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Qt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:VJ,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Qt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Qt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function ID(n,e,t){e.start=e.pos;for(let r=0;r<10;r++){let i=n(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const I6=Object.create(null),A0=[Ui.none],VJ=new o6(A0),gk=[],yk=Object.create(null),DD=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])DD[n]=PD(I6,e);class ND{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),DD)}resolve(e){return e?this.table[e]||(this.table[e]=PD(this.extra,e)):0}}const HJ=new ND(I6);function r4(n,e){gk.indexOf(n)>-1||(gk.push(n),console.warn(e))}function PD(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=n[u]||Q[u];c?typeof c=="function"?l.length?l=l.map(c):r4(u,`Modifier ${u} used at start of tag`):l.length?r4(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:r4(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=yk[i];if(s)return s.id;let o=yk[i]=Ui.define({id:A0.length,name:r,props:[qY({[r]:t})]});return A0.push(o),o.id}function jJ(n,e){let t=Ui.define({id:A0.length,name:"Document",props:[gu.add(()=>n),dD.add(()=>r=>e.getIndent(r))],top:!0});return A0.push(t),t}an.RTL,an.LTR;function re(n){return new QY(M6.define(n))}function Ba(n){return Y(()=>import("./index-C-oYBGWQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(e=>e.sql({dialect:e[n]}))}const WJ=[K.of({name:"C",extensions:["c","h","ino"],load(){return Y(()=>import("./index-BLMWxFuR.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9])).then(n=>n.cpp())}}),K.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return Y(()=>import("./index-BLMWxFuR.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9])).then(n=>n.cpp())}}),K.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return Ba("Cassandra")}}),K.of({name:"CSS",extensions:["css"],load(){return Y(()=>import("./index-SBiTxufC.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9])).then(n=>n.css())}}),K.of({name:"Go",extensions:["go"],load(){return Y(()=>import("./index-BCMHbg4W.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9])).then(n=>n.go())}}),K.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return Y(()=>import("./index-BRGIxz56.js"),__vite__mapDeps([13,1,11,2,3,4,5,6,7,8,9,14])).then(n=>n.html())}}),K.of({name:"Java",extensions:["java"],load(){return Y(()=>import("./index-BWG2bqak.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9])).then(n=>n.java())}}),K.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return Y(()=>import("./index-CIH103EO.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9])).then(n=>n.javascript())}}),K.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return Y(()=>import("./index-DoDzCXhf.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9])).then(n=>n.json())}}),K.of({name:"JSX",extensions:["jsx"],load(){return Y(()=>import("./index-CIH103EO.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9])).then(n=>n.javascript({jsx:!0}))}}),K.of({name:"LESS",extensions:["less"],load(){return Y(()=>import("./index-C50HKa74.js"),__vite__mapDeps([17,11,1,2,3,4,5,6,7,8,9])).then(n=>n.less())}}),K.of({name:"Liquid",extensions:["liquid"],load(){return Y(()=>import("./index-B7CxOOSp.js"),__vite__mapDeps([18,13,1,11,2,3,4,5,6,7,8,9,14])).then(n=>n.liquid())}}),K.of({name:"MariaDB SQL",load(){return Ba("MariaSQL")}}),K.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return Y(()=>import("./index-CByJlDyO.js"),__vite__mapDeps([19,13,1,11,2,3,4,5,6,7,8,9,14])).then(n=>n.markdown())}}),K.of({name:"MS SQL",load(){return Ba("MSSQL")}}),K.of({name:"MySQL",load(){return Ba("MySQL")}}),K.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return Y(()=>import("./index-Dw8J53dj.js"),__vite__mapDeps([20,1,13,11,2,3,4,5,6,7,8,9,14])).then(n=>n.php())}}),K.of({name:"PLSQL",extensions:["pls"],load(){return Ba("PLSQL")}}),K.of({name:"PostgreSQL",load(){return Ba("PostgreSQL")}}),K.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return Y(()=>import("./index-BA1_aEAl.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9])).then(n=>n.python())}}),K.of({name:"Rust",extensions:["rs"],load(){return Y(()=>import("./index-DDq_OnFj.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9])).then(n=>n.rust())}}),K.of({name:"Sass",extensions:["sass"],load(){return Y(()=>import("./index-CtNNNjNr.js"),__vite__mapDeps([23,1,11,2,3,4,5,6,7,8,9])).then(n=>n.sass({indented:!0}))}}),K.of({name:"SCSS",extensions:["scss"],load(){return Y(()=>import("./index-CtNNNjNr.js"),__vite__mapDeps([23,1,11,2,3,4,5,6,7,8,9])).then(n=>n.sass())}}),K.of({name:"SQL",extensions:["sql"],load(){return Ba("StandardSQL")}}),K.of({name:"SQLite",load(){return Ba("SQLite")}}),K.of({name:"TSX",extensions:["tsx"],load(){return Y(()=>import("./index-CIH103EO.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9])).then(n=>n.javascript({jsx:!0,typescript:!0}))}}),K.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return Y(()=>import("./index-CIH103EO.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9])).then(n=>n.javascript({typescript:!0}))}}),K.of({name:"WebAssembly",extensions:["wat","wast"],load(){return Y(()=>import("./index-V283pSAx.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9])).then(n=>n.wast())}}),K.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return Y(()=>import("./index-BAAsDmwc.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9])).then(n=>n.xml())}}),K.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return Y(()=>import("./index-BsW1pRV8.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9])).then(n=>n.yaml())}}),K.of({name:"APL",extensions:["dyalog","apl"],load(){return Y(()=>import("./apl-B4CMkyY2.js"),[]).then(n=>re(n.apl))}}),K.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return Y(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(n=>re(n.asciiArmor))}}),K.of({name:"ASN.1",extensions:["asn","asn1"],load(){return Y(()=>import("./asn1-EdZsLKOL.js"),[]).then(n=>re(n.asn1({})))}}),K.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return Y(()=>import("./asterisk-B-8jnY81.js"),[]).then(n=>re(n.asterisk))}}),K.of({name:"Brainfuck",extensions:["b","bf"],load(){return Y(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(n=>re(n.brainfuck))}}),K.of({name:"Cobol",extensions:["cob","cpy"],load(){return Y(()=>import("./cobol-CWcv1MsR.js"),[]).then(n=>re(n.cobol))}}),K.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.csharp))}}),K.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return Y(()=>import("./clojure-BMjYHr_A.js"),[]).then(n=>re(n.clojure))}}),K.of({name:"ClojureScript",extensions:["cljs"],load(){return Y(()=>import("./clojure-BMjYHr_A.js"),[]).then(n=>re(n.clojure))}}),K.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return Y(()=>import("./css-BnMrqG3P.js"),[]).then(n=>re(n.gss))}}),K.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return Y(()=>import("./cmake-BQqOBYOt.js"),[]).then(n=>re(n.cmake))}}),K.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return Y(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(n=>re(n.coffeeScript))}}),K.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return Y(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(n=>re(n.commonLisp))}}),K.of({name:"Cypher",extensions:["cyp","cypher"],load(){return Y(()=>import("./cypher-C_CwsFkJ.js"),[]).then(n=>re(n.cypher))}}),K.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return Y(()=>import("./python-BuPzkPfP.js"),[]).then(n=>re(n.cython))}}),K.of({name:"Crystal",extensions:["cr"],load(){return Y(()=>import("./crystal-SjHAIU92.js"),[]).then(n=>re(n.crystal))}}),K.of({name:"D",extensions:["d"],load(){return Y(()=>import("./d-pRatUO7H.js"),[]).then(n=>re(n.d))}}),K.of({name:"Dart",extensions:["dart"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.dart))}}),K.of({name:"diff",extensions:["diff","patch"],load(){return Y(()=>import("./diff-DbItnlRl.js"),[]).then(n=>re(n.diff))}}),K.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return Y(()=>import("./dockerfile-BU1Ap__c.js"),__vite__mapDeps([27,28])).then(n=>re(n.dockerFile))}}),K.of({name:"DTD",extensions:["dtd"],load(){return Y(()=>import("./dtd-DF_7sFjM.js"),[]).then(n=>re(n.dtd))}}),K.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return Y(()=>import("./dylan-DwRh75JA.js"),[]).then(n=>re(n.dylan))}}),K.of({name:"EBNF",load(){return Y(()=>import("./ebnf-CDyGwa7X.js"),[]).then(n=>re(n.ebnf))}}),K.of({name:"ECL",extensions:["ecl"],load(){return Y(()=>import("./ecl-Cabwm37j.js"),[]).then(n=>re(n.ecl))}}),K.of({name:"edn",extensions:["edn"],load(){return Y(()=>import("./clojure-BMjYHr_A.js"),[]).then(n=>re(n.clojure))}}),K.of({name:"Eiffel",extensions:["e"],load(){return Y(()=>import("./eiffel-CnydiIhH.js"),[]).then(n=>re(n.eiffel))}}),K.of({name:"Elm",extensions:["elm"],load(){return Y(()=>import("./elm-vLlmbW-K.js"),[]).then(n=>re(n.elm))}}),K.of({name:"Erlang",extensions:["erl"],load(){return Y(()=>import("./erlang-BNw1qcRV.js"),[]).then(n=>re(n.erlang))}}),K.of({name:"Esper",load(){return Y(()=>import("./sql-D0XecflT.js"),[]).then(n=>re(n.esper))}}),K.of({name:"Factor",extensions:["factor"],load(){return Y(()=>import("./factor-BPndPnYX.js"),__vite__mapDeps([29,28])).then(n=>re(n.factor))}}),K.of({name:"FCL",load(){return Y(()=>import("./fcl-Kvtd6kyn.js"),[]).then(n=>re(n.fcl))}}),K.of({name:"Forth",extensions:["forth","fth","4th"],load(){return Y(()=>import("./forth-Ffai-XNe.js"),[]).then(n=>re(n.forth))}}),K.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return Y(()=>import("./fortran-DYz_wnZ1.js"),[]).then(n=>re(n.fortran))}}),K.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return Y(()=>import("./mllike-CXdrOF99.js"),[]).then(n=>re(n.fSharp))}}),K.of({name:"Gas",extensions:["s"],load(){return Y(()=>import("./gas-Bneqetm1.js"),[]).then(n=>re(n.gas))}}),K.of({name:"Gherkin",extensions:["feature"],load(){return Y(()=>import("./gherkin-heZmZLOM.js"),[]).then(n=>re(n.gherkin))}}),K.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return Y(()=>import("./groovy-D9Dt4D0W.js"),[]).then(n=>re(n.groovy))}}),K.of({name:"Haskell",extensions:["hs"],load(){return Y(()=>import("./haskell-BWDZoCOh.js"),[]).then(n=>re(n.haskell))}}),K.of({name:"Haxe",extensions:["hx"],load(){return Y(()=>import("./haxe-H-WmDvRZ.js"),[]).then(n=>re(n.haxe))}}),K.of({name:"HXML",extensions:["hxml"],load(){return Y(()=>import("./haxe-H-WmDvRZ.js"),[]).then(n=>re(n.hxml))}}),K.of({name:"HTTP",load(){return Y(()=>import("./http-DBlCnlav.js"),[]).then(n=>re(n.http))}}),K.of({name:"IDL",extensions:["pro"],load(){return Y(()=>import("./idl-BEugSyMb.js"),[]).then(n=>re(n.idl))}}),K.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return Y(()=>import("./javascript-qCveANmP.js"),[]).then(n=>re(n.jsonld))}}),K.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return Y(()=>import("./jinja2-C4DGRd-O.js"),[]).then(n=>re(n.jinja2))}}),K.of({name:"Julia",extensions:["jl"],load(){return Y(()=>import("./julia-DuME0IfC.js"),[]).then(n=>re(n.julia))}}),K.of({name:"Kotlin",extensions:["kt","kts"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.kotlin))}}),K.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return Y(()=>import("./livescript-BwQOo05w.js"),[]).then(n=>re(n.liveScript))}}),K.of({name:"Lua",extensions:["lua"],load(){return Y(()=>import("./lua-BgMRiT3U.js"),[]).then(n=>re(n.lua))}}),K.of({name:"mIRC",extensions:["mrc"],load(){return Y(()=>import("./mirc-CjQqDB4T.js"),[]).then(n=>re(n.mirc))}}),K.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return Y(()=>import("./mathematica-DTrFuWx2.js"),[]).then(n=>re(n.mathematica))}}),K.of({name:"Modelica",extensions:["mo"],load(){return Y(()=>import("./modelica-Dc1JOy9r.js"),[]).then(n=>re(n.modelica))}}),K.of({name:"MUMPS",extensions:["mps"],load(){return Y(()=>import("./mumps-BT43cFF4.js"),[]).then(n=>re(n.mumps))}}),K.of({name:"Mbox",extensions:["mbox"],load(){return Y(()=>import("./mbox-CNhZ1qSd.js"),[]).then(n=>re(n.mbox))}}),K.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return Y(()=>import("./nginx-DdIZxoE0.js"),[]).then(n=>re(n.nginx))}}),K.of({name:"NSIS",extensions:["nsh","nsi"],load(){return Y(()=>import("./nsis-ClDXqMnM.js"),__vite__mapDeps([30,28])).then(n=>re(n.nsis))}}),K.of({name:"NTriples",extensions:["nt","nq"],load(){return Y(()=>import("./ntriples-BfvgReVJ.js"),[]).then(n=>re(n.ntriples))}}),K.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.objectiveC))}}),K.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.objectiveCpp))}}),K.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return Y(()=>import("./mllike-CXdrOF99.js"),[]).then(n=>re(n.oCaml))}}),K.of({name:"Octave",extensions:["m"],load(){return Y(()=>import("./octave-Ck1zUtKM.js"),[]).then(n=>re(n.octave))}}),K.of({name:"Oz",extensions:["oz"],load(){return Y(()=>import("./oz-BzwKVEFT.js"),[]).then(n=>re(n.oz))}}),K.of({name:"Pascal",extensions:["p","pas"],load(){return Y(()=>import("./pascal--L3eBynH.js"),[]).then(n=>re(n.pascal))}}),K.of({name:"Perl",extensions:["pl","pm"],load(){return Y(()=>import("./perl-CdXCOZ3F.js"),[]).then(n=>re(n.perl))}}),K.of({name:"Pig",extensions:["pig"],load(){return Y(()=>import("./pig-CevX1Tat.js"),[]).then(n=>re(n.pig))}}),K.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return Y(()=>import("./powershell-CFHJl5sT.js"),[]).then(n=>re(n.powerShell))}}),K.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return Y(()=>import("./properties-C78fOPTZ.js"),[]).then(n=>re(n.properties))}}),K.of({name:"ProtoBuf",extensions:["proto"],load(){return Y(()=>import("./protobuf-ChK-085T.js"),[]).then(n=>re(n.protobuf))}}),K.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return Y(()=>import("./pug-DukmZTjD.js"),__vite__mapDeps([31,32])).then(n=>re(n.pug))}}),K.of({name:"Puppet",extensions:["pp"],load(){return Y(()=>import("./puppet-DMA9R1ak.js"),[]).then(n=>re(n.puppet))}}),K.of({name:"Q",extensions:["q"],load(){return Y(()=>import("./q-ZnEupP5q.js"),[]).then(n=>re(n.q))}}),K.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return Y(()=>import("./r-B6wPVr8A.js"),[]).then(n=>re(n.r))}}),K.of({name:"RPM Changes",load(){return Y(()=>import("./rpm-CTu-6PCP.js"),[]).then(n=>re(n.rpmChanges))}}),K.of({name:"RPM Spec",extensions:["spec"],load(){return Y(()=>import("./rpm-CTu-6PCP.js"),[]).then(n=>re(n.rpmSpec))}}),K.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return Y(()=>import("./ruby-B2Rjki9n.js"),[]).then(n=>re(n.ruby))}}),K.of({name:"SAS",extensions:["sas"],load(){return Y(()=>import("./sas-B4kiWyti.js"),[]).then(n=>re(n.sas))}}),K.of({name:"Scala",extensions:["scala"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.scala))}}),K.of({name:"Scheme",extensions:["scm","ss"],load(){return Y(()=>import("./scheme-C41bIUwD.js"),[]).then(n=>re(n.scheme))}}),K.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return Y(()=>import("./shell-CjFT_Tl9.js"),[]).then(n=>re(n.shell))}}),K.of({name:"Sieve",extensions:["siv","sieve"],load(){return Y(()=>import("./sieve-C3Gn_uJK.js"),[]).then(n=>re(n.sieve))}}),K.of({name:"Smalltalk",extensions:["st"],load(){return Y(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(n=>re(n.smalltalk))}}),K.of({name:"Solr",load(){return Y(()=>import("./solr-DehyRSwq.js"),[]).then(n=>re(n.solr))}}),K.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return Y(()=>import("./mllike-CXdrOF99.js"),[]).then(n=>re(n.sml))}}),K.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return Y(()=>import("./sparql-DkYu6x3z.js"),[]).then(n=>re(n.sparql))}}),K.of({name:"Spreadsheet",alias:["excel","formula"],load(){return Y(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(n=>re(n.spreadsheet))}}),K.of({name:"Squirrel",extensions:["nut"],load(){return Y(()=>import("./clike-Cr_nJiF2.js"),[]).then(n=>re(n.squirrel))}}),K.of({name:"Stylus",extensions:["styl"],load(){return Y(()=>import("./stylus-B533Al4x.js"),[]).then(n=>re(n.stylus))}}),K.of({name:"Swift",extensions:["swift"],load(){return Y(()=>import("./swift-BzpIVaGY.js"),[]).then(n=>re(n.swift))}}),K.of({name:"sTeX",load(){return Y(()=>import("./stex-C3f8Ysf7.js"),[]).then(n=>re(n.stex))}}),K.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return Y(()=>import("./stex-C3f8Ysf7.js"),[]).then(n=>re(n.stex))}}),K.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return Y(()=>import("./verilog-C6RDOZhf.js"),[]).then(n=>re(n.verilog))}}),K.of({name:"Tcl",extensions:["tcl"],load(){return Y(()=>import("./tcl-DVfN8rqt.js"),[]).then(n=>re(n.tcl))}}),K.of({name:"Textile",extensions:["textile"],load(){return Y(()=>import("./textile-CnDTJFAw.js"),[]).then(n=>re(n.textile))}}),K.of({name:"TiddlyWiki",load(){return Y(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(n=>re(n.tiddlyWiki))}}),K.of({name:"Tiki wiki",load(){return Y(()=>import("./tiki-DGYXhP31.js"),[]).then(n=>re(n.tiki))}}),K.of({name:"TOML",extensions:["toml"],load(){return Y(()=>import("./toml-BXUEaScT.js"),[]).then(n=>re(n.toml))}}),K.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return Y(()=>import("./troff-wAsdV37c.js"),[]).then(n=>re(n.troff))}}),K.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return Y(()=>import("./ttcn-CfJYG6tj.js"),[]).then(n=>re(n.ttcn))}}),K.of({name:"TTCN_CFG",extensions:["cfg"],load(){return Y(()=>import("./ttcn-cfg-B9xdYoR4.js"),[]).then(n=>re(n.ttcnCfg))}}),K.of({name:"Turtle",extensions:["ttl"],load(){return Y(()=>import("./turtle-B1tBg_DP.js"),[]).then(n=>re(n.turtle))}}),K.of({name:"Web IDL",extensions:["webidl"],load(){return Y(()=>import("./webidl-ZXfAyPTL.js"),[]).then(n=>re(n.webIDL))}}),K.of({name:"VB.NET",extensions:["vb"],load(){return Y(()=>import("./vb-CmGdzxic.js"),[]).then(n=>re(n.vb))}}),K.of({name:"VBScript",extensions:["vbs"],load(){return Y(()=>import("./vbscript-BuJXcnF6.js"),[]).then(n=>re(n.vbScript))}}),K.of({name:"Velocity",extensions:["vtl"],load(){return Y(()=>import("./velocity-D8B20fx6.js"),[]).then(n=>re(n.velocity))}}),K.of({name:"Verilog",extensions:["v"],load(){return Y(()=>import("./verilog-C6RDOZhf.js"),[]).then(n=>re(n.verilog))}}),K.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return Y(()=>import("./vhdl-lSbBsy5d.js"),[]).then(n=>re(n.vhdl))}}),K.of({name:"XQuery",extensions:["xy","xquery"],load(){return Y(()=>import("./xquery-CQfU5ijd.js"),[]).then(n=>re(n.xQuery))}}),K.of({name:"Yacas",extensions:["ys"],load(){return Y(()=>import("./yacas-BJ4BC0dw.js"),[]).then(n=>re(n.yacas))}}),K.of({name:"Z80",extensions:["z80"],load(){return Y(()=>import("./z80-Hz9HOZM7.js"),[]).then(n=>re(n.z80))}}),K.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return Y(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(n=>re(n.mscgen))}}),K.of({name:"Xù",extensions:["xu"],load(){return Y(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(n=>re(n.xu))}}),K.of({name:"MsGenny",extensions:["msgenny"],load(){return Y(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(n=>re(n.msgenny))}}),K.of({name:"Vue",extensions:["vue"],load(){return Y(()=>import("./index-z390HYIB.js"),__vite__mapDeps([33,13,1,11,2,3,4,5,6,7,8,9,14])).then(n=>n.vue())}}),K.of({name:"Angular Template",load(){return Y(()=>import("./index-He2vepbV.js"),__vite__mapDeps([34,13,1,11,2,3,4,5,6,7,8,9,14])).then(n=>n.angular())}})],qJ="#e5c07b",vk="#e06c75",UJ="#56b6c2",GJ="#ffffff",T1="#abb2bf",V5="#7d8799",KJ="#61afef",XJ="#98c379",bk="#d19a66",YJ="#c678dd",JJ="#21252b",xk="#2c313a",wk="#282c34",i4="#353a42",ZJ="#3E4451",Sk="#528bff",QJ=Oe.theme({"&":{color:T1,backgroundColor:wk},".cm-content":{caretColor:Sk},".cm-cursor, .cm-dropCursor":{borderLeftColor:Sk},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ZJ},".cm-panels":{backgroundColor:JJ,color:T1},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:wk,color:V5,border:"none"},".cm-activeLineGutter":{backgroundColor:xk},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:i4},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:i4,borderBottomColor:i4},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:xk,color:T1}}},{dark:!0}),eZ=mp.define([{tag:Q.keyword,color:YJ},{tag:[Q.name,Q.deleted,Q.character,Q.propertyName,Q.macroName],color:vk},{tag:[Q.function(Q.variableName),Q.labelName],color:KJ},{tag:[Q.color,Q.constant(Q.name),Q.standard(Q.name)],color:bk},{tag:[Q.definition(Q.name),Q.separator],color:T1},{tag:[Q.typeName,Q.className,Q.number,Q.changed,Q.annotation,Q.modifier,Q.self,Q.namespace],color:qJ},{tag:[Q.operator,Q.operatorKeyword,Q.url,Q.escape,Q.regexp,Q.link,Q.special(Q.string)],color:UJ},{tag:[Q.meta,Q.comment],color:V5},{tag:Q.strong,fontWeight:"bold"},{tag:Q.emphasis,fontStyle:"italic"},{tag:Q.strikethrough,textDecoration:"line-through"},{tag:Q.link,color:V5,textDecoration:"underline"},{tag:Q.heading,fontWeight:"bold",color:vk},{tag:[Q.atom,Q.bool,Q.special(Q.variableName)],color:bk},{tag:[Q.processingInstruction,Q.string,Q.inserted],color:XJ},{tag:Q.invalid,color:GJ}]),tZ=[QJ,CD(eZ)];function gr(n){this.content=n}gr.prototype={constructor:gr,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new gr(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new gr(t)},addToStart:function(n,e){return new gr([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new gr(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new gr(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=gr.from(n),n.size?new gr(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=gr.from(n),n.size?new gr(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=gr.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};gr.from=function(n){if(n instanceof gr)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new gr(e)};function RD(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=RD(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function LD(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let u=LD(o.content,a.content,t-1,r-1);if(u)return u}t-=l,r-=l}}class se{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,t-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new se(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new se(r,i)}cutByIndex(e,t){return e==t?se.empty:e==0&&t==this.content.length?this:new se(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new se(i,s)}addToStart(e){return new se([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new se(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return RD(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return LD(this,e,t,r)}findIndex(e){if(e==0)return xm(0,e);if(e==this.size)return xm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),s=r+i.nodeSize;if(s>=e)return s==e?xm(t+1,s):xm(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return se.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new se(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return se.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new se(t||e,r)}static from(e){if(!e)return se.empty;if(e instanceof se)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new se([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}se.empty=new se([],0);const s4={index:0,offset:0};function xm(n,e){return s4.index=n,s4.offset=e,s4}function Jg(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Jg(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Jg(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class yt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Jg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return yt.none;if(e instanceof yt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}yt.none=[];class Zg extends Error{}let Ce=class Tc{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=BD(this.content,e+this.openStart,t);return r&&new Tc(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Tc(_D(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Tc.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Tc(se.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Tc(e,r,i)}};Ce.empty=new Ce(se.empty,0,0);function _D(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(_D(s.content,e-i-1,t-i-1)))}function BD(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=BD(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function nZ(n,e,t){if(t.openStart>n.depth)throw new Zg("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Zg("Inconsistent open depths");return FD(n,e,t,0)}function FD(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=FD(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Au(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=rZ(t,n);return Au(s,zD(n,o,a,e,r))}else return Au(s,Qg(n,e,r))}function $D(n,e){if(!e.type.compatibleContent(n.type))throw new Zg("Cannot join "+e.type.name+" onto "+n.type.name)}function H5(n,e,t){let r=n.node(t);return $D(r,e.node(t)),r}function Eu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function zd(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Eu(n.nodeAfter,r),s++));for(let a=s;a<o;a++)Eu(i.child(a),r);e&&e.depth==t&&e.textOffset&&Eu(e.nodeBefore,r)}function Au(n,e){return n.type.checkContent(e),n.copy(e)}function zD(n,e,t,r,i){let s=n.depth>i&&H5(n,e,i+1),o=r.depth>i&&H5(t,r,i+1),a=[];return zd(null,n,i,a),s&&o&&e.index(i)==t.index(i)?($D(s,o),Eu(Au(s,zD(n,e,t,r,i+1)),a)):(s&&Eu(Au(s,Qg(n,e,i+1)),a),zd(e,t,i,a),o&&Eu(Au(o,Qg(t,r,i+1)),a)),zd(r,null,i,a),new se(a)}function Qg(n,e,t){let r=[];if(zd(null,n,t,r),n.depth>t){let i=H5(n,e,t+1);Eu(Au(i,Qg(n,e,t+1)),r)}return zd(e,null,t,r),new se(r)}function rZ(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(se.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class M0{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return yt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new VD(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new M0(t,r,s)}static resolveCached(e,t){let r=kk.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==t)return o}else kk.set(e,r=new iZ);let i=r.elts[r.i]=M0.resolve(e,t);return r.i=(r.i+1)%sZ,i}}class iZ{constructor(){this.elts=[],this.i=0}}const sZ=12,kk=new WeakMap;class VD{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oZ=Object.create(null);class fs{constructor(e,t,r,i=yt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||se.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Jg(this.attrs,t||e.defaultAttrs||oZ)&&yt.sameSet(this.marks,r||yt.none)}copy(e=null){return e==this.content?this:new fs(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fs(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ce.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new Ce(u,i.depth-o,s.depth-o)}replace(e,t,r){return nZ(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return M0.resolveCached(this,e)}resolveNoCache(e){return M0.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),HD(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=se.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=yt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!yt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=se.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}fs.prototype.text=void 0;let aZ=class j5 extends fs{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):HD(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new j5(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new j5(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function HD(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Xu{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new lZ(e,t);if(r.next==null)return Xu.empty;let i=jD(r);r.next&&r.err("Unexpected trailing text");let s=mZ(pZ(i));return gZ(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return se.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:h}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(c));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Xu.empty=new Xu(!0);class lZ{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function jD(n){let e=[];do e.push(uZ(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function uZ(n){let e=[];do e.push(cZ(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cZ(n){let e=dZ(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=hZ(n,e);else break;return e}function Ck(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function hZ(n,e){let t=Ck(n),r=t;return n.eat(",")&&(n.next!="}"?r=Ck(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function fZ(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function dZ(n){if(n.eat("(")){let e=jD(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=fZ(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function pZ(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=t();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=t();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function WD(n,e){return e-n}function Tk(n,e){let t=[];return r(e),t.sort(WD);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function mZ(n){let e=Object.create(null);return t(Tk(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);Tk(n,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new Xu(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(WD);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function gZ(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function qD(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function UD(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function GD(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function KD(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new vZ(n,r,e[r]);return t}let ey=class XD{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=KD(e,r.attrs),this.defaultAttrs=qD(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xu.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:UD(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fs(this,this.computeAttrs(e),se.from(t),yt.setFrom(r))}createChecked(e=null,t,r){return t=se.from(t),this.checkContent(t),new fs(this,this.computeAttrs(e),t,yt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=se.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(se.empty,!0);return s?new fs(this,e,t.append(s),yt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){GD(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:yt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new XD(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function yZ(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class vZ{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?yZ(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class cv{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=KD(e,i.attrs),this.excluded=null;let s=qD(this.attrs);this.instance=s?new yt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new yt(this,UD(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new cv(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){GD(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class YD{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=gr.from(e.nodes),t.marks=gr.from(e.marks||{}),this.nodes=ey.compile(this.spec.nodes,this),this.marks=cv.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Xu.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Ek(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Ek(this,o.split(" "))}this.nodeFromJSON=i=>fs.fromJSON(this,i),this.markFromJSON=i=>yt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ey){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new aZ(r,r.defaultAttrs,e,yt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Ek(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function bZ(n){return n.tag!=null}function xZ(n){return n.style!=null}class Yu{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(bZ(i))this.tags.push(i);else if(xZ(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new Mk(this,t,!1);return r.addAll(e,yt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Mk(this,t,!0);return r.addAll(e,yt.none,t.from,t.to),Ce.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(kZ(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ok(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ok(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Yu(e,Yu.schemaRules(e)))}}const JD={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wZ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ZD={ol:!0,ul:!0},O0=1,W5=2,Vd=4;function Ak(n,e,t){return e!=null?(e?O0:0)|(e==="full"?W5:0):n&&n.whitespace=="pre"?O0|W5:t&~Vd}class wm{constructor(e,t,r,i,s,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=yt.none,this.match=s||(o&Vd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(se.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&O0)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=se.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(se.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!JD.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Mk{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,o=Ak(null,t.preserveWhitespace,0)|(r?Vd:0);i?s=new wm(i.type,i.attrs,yt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new wm(null,null,yt.none,!0,null,o):s=new wm(e.schema.topNodeType,null,yt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&W5?"full":this.localPreserveWS||(i.options&O0)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;ZD.hasOwnProperty(o)&&this.parser.normalizeLists&&SZ(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:wZ.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(JD.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let h=l&&l.skip?t:this.readStyles(e,t);h&&this.addAll(e,h),u&&this.sync(s),this.needsBlock=c}else{let u=this.readStyles(e,t);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(u=>!l.clearMark(u)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,t.attrs||null,r,t.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=yt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):Ik(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Ak(e,s,o.options);o.options&Vd&&o.content.length==0&&(a|=Vd);let l=yt.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Ik(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new wm(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=O0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=t[a];if(u==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function SZ(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ZD.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function kZ(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Ok(n){let e={};for(let t in n)e[t]=n[t];return e}function Ik(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class nc{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=o4(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,t);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=E1(o4(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&E1(o4(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return E1(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new nc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Dk(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Dk(e.marks)}}function Dk(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function o4(n){return n.document||window.document}const Nk=new WeakMap;function CZ(n){let e=Nk.get(n);return e===void 0&&Nk.set(n,e=TZ(n)),e}function TZ(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function E1(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=CZ(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=c;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:p}=E1(n,f,t,r);if(l.appendChild(d),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const QD=65535,eN=Math.pow(2,16);function EZ(n,e){return n+e*eN}function Pk(n){return n&QD}function AZ(n){return(n-(n&QD))/eN}const tN=1,nN=2,A1=4,rN=8;class q5{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&rN)>0}get deletedBefore(){return(this.delInfo&(tN|A1))>0}get deletedAfter(){return(this.delInfo&(nN|A1))>0}get deletedAcross(){return(this.delInfo&A1)>0}}class zi{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&zi.empty)return zi.empty}recover(e){let t=0,r=Pk(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+AZ(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],c=this.ranges[a+o],h=l+u;if(e<=h){let f=u?e==l?-1:e==h?1:t:t,d=l+i+(f<0?0:c);if(r)return d;let p=e==(t<0?l:h)?null:EZ(a/3,e-l),m=e==l?nN:e==h?tN:A1;return(t<0?e!=l:e!=h)&&(m|=rN),new q5(d,m,p)}i+=c-u}return r?e+i:new q5(e+i,0,null)}touches(e,t){let r=0,i=Pk(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+s],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+t],c=this.ranges[i+r];e(a,a+u,l,l+c),s+=c-u}}invert(){return new zi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zi.empty:new zi(e<0?[0,-e,0]:[0,0,e])}}zi.empty=new zi([]);class I0{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new I0(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new I0;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new q5(e,i,null)}}const a4=Object.create(null);class Fr{getMap(){return zi.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=a4[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in a4)throw new RangeError("Duplicate use of step JSON ID "+e);return a4[e]=t,t.prototype.jsonID=e,t}}class Wn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Wn(e,null)}static fail(e){return new Wn(null,e)}static fromReplace(e,t,r,i){try{return Wn.ok(e.replace(t,r,i))}catch(s){if(s instanceof Zg)return Wn.fail(s.message);throw s}}}function D6(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(D6(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return se.fromArray(r)}class ra extends Fr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ce(D6(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return Wn.fromReplace(e,this.from,this.to,s)}invert(){return new co(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ra(t.pos,r.pos,this.mark)}merge(e){return e instanceof ra&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ra(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ra(t.from,t.to,e.markFromJSON(t.mark))}}Fr.jsonID("addMark",ra);class co extends Fr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ce(D6(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Wn.fromReplace(e,this.from,this.to,r)}invert(){return new ra(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new co(t.pos,r.pos,this.mark)}merge(e){return e instanceof co&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new co(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new co(t.from,t.to,e.markFromJSON(t.mark))}}Fr.jsonID("removeMark",co);class fl extends Fr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Wn.fromReplace(e,this.pos,this.pos+1,new Ce(se.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new fl(this.pos,t.marks[i]);return new fl(this.pos,this.mark)}}return new Ju(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new fl(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new fl(t.pos,e.markFromJSON(t.mark))}}Fr.jsonID("addNodeMark",fl);class Ju extends Fr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Wn.fromReplace(e,this.pos,this.pos+1,new Ce(se.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new fl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ju(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ju(t.pos,e.markFromJSON(t.mark))}}Fr.jsonID("removeNodeMark",Ju);class or extends Fr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&U5(e,this.from,this.to)?Wn.fail("Structure replace would overwrite content"):Wn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zi([this.from,this.to-this.from,this.slice.size])}invert(e){return new or(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new or(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof or)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ce.empty:new Ce(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new or(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ce.empty:new Ce(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new or(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new or(t.from,t.to,Ce.fromJSON(e,t.slice),!!t.structure)}}Fr.jsonID("replace",or);class Br extends Fr{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(U5(e,this.from,this.gapFrom)||U5(e,this.gapTo,this.to)))return Wn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Wn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Wn.fromReplace(e,this.from,this.to,r):Wn.fail("Content does not fit in gap")}getMap(){return new zi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Br(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Br(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Br(t.from,t.to,t.gapFrom,t.gapTo,Ce.fromJSON(e,t.slice),t.insert,!!t.structure)}}Fr.jsonID("replaceAround",Br);function U5(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function MZ(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,u,c)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),d=Math.min(u+l.nodeSize,t),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(h[m])?o.to=d:i.push(o=new co(f,d,h[m])));a&&a.to==f?a.to=d:s.push(a=new ra(f,d,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function OZ(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof cv){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,t);for(let c=0;c<l.length;c++){let h=l[c],f;for(let d=0;d<i.length;d++){let p=i[d];p.step==s-1&&h.eq(i[d].style)&&(f=p)}f?(f.to=u,f.step=s):i.push({style:h,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>n.step(new co(o.from,o.to,o.style)))}function N6(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),c=a+u.nodeSize,h=r.matchType(u.type);if(!h)o.push(new or(a,c,Ce.empty));else{r=h;for(let f=0;f<u.marks.length;f++)t.allowsMarkType(u.marks[f].type)||n.step(new co(a,c,u.marks[f]));if(i&&u.isText&&t.whitespace!="pre"){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(u.text);)p||(p=new Ce(se.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),o.push(new or(a+f.index,a+f.index+f[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(se.empty,!0);n.replace(a,a,new Ce(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function IZ(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hv(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!IZ(i,s,o))break}return null}function DZ(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,u=a,c=se.empty,h=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,c=se.from(r.node(p).copy(c)),h++):l--;let f=se.empty,d=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=se.from(i.node(p).copy(f)),d++):u++;n.step(new Br(l,u,o,a,new Ce(c.append(f),h,d),c.size-h,!0))}function P6(n,e,t=null,r=n){let i=NZ(n,e),s=i&&PZ(r,e);return s?i.map(Rk).concat({type:e,attrs:t}).concat(s.map(Rk)):null}function Rk(n){return{type:n,attrs:null}}function NZ(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function PZ(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(t.child(u).type);return!l||!l.validEnd?null:o}function RZ(n,e,t){let r=se.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=se.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new Br(i,s,i,s,new Ce(r,0,0),t.length,!0))}function LZ(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&_Z(n.doc,n.mapping.slice(s).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!p?u=!1:!d&&p&&(u=!0)}u===!1&&sN(n,o,a,s),N6(n,n.mapping.slice(s).map(a,1),r,void 0,u===null);let c=n.mapping.slice(s),h=c.map(a,1),f=c.map(a+o.nodeSize,1);return n.step(new Br(h,f,h+1,f-1,new Ce(se.from(r.create(l,null,o.marks)),0,0),1,!0)),u===!0&&iN(n,o,a,s),!1}})}function iN(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=n.mapping.slice(r).map(t+1+s+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function sN(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function _Z(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function BZ(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Br(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Ce(se.from(o),0,0),1,!0))}function Hd(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>s;u--,c--){let h=i.node(u),f=i.index(u);if(h.type.spec.isolating)return!1;let d=h.content.cutByIndex(f,h.childCount),p=r&&r[c+1];p&&(d=d.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||h;if(!h.canReplace(f+1,h.childCount)||!m.type.validContent(d))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function FZ(n,e,t=1,r){let i=n.doc.resolve(e),s=se.empty,o=se.empty;for(let a=i.depth,l=i.depth-t,u=t-1;a>l;a--,u--){s=se.from(i.node(a).copy(s));let c=r&&r[u];o=se.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}n.step(new or(e,e,new Ce(s.append(o),t,t),!0))}function fv(n,e){let t=n.resolve(e),r=t.index();return zZ(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function $Z(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function zZ(n,e){return!!(n&&e&&!n.isLeaf&&$Z(n,e))}function VZ(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);c&&!h?r=!1:!c&&h&&(r=!0)}let a=n.steps.length;if(r===!1){let c=n.doc.resolve(e+t);sN(n,c.node(),c.before(),a)}o.inlineContent&&N6(n,e+t-1,o,s.node().contentMatchAt(s.index()),r==null);let l=n.mapping.slice(a),u=l.map(e-t);if(n.step(new or(u,l.map(e+t,-1),Ce.empty,!0)),r===!0){let c=n.doc.resolve(u);iN(n,c.node(),c.before(),n.steps.length)}return n}function HZ(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function oN(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(l,l,i);else{let h=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=h&&u.canReplaceWith(l,l,h[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function dv(n,e,t=e,r=Ce.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return aN(i,s,r)?new or(e,t,r):new jZ(i,s,r).fit()}function aN(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class jZ{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=se.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=se.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Ce(s,o,a);return e>-1?new Br(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new or(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=l4(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,h=null;if(t==1&&(o?u.matchType(o.type)||(h=u.fillBefore(se.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(t==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=l4(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ce(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=l4(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new Ce(Xf(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new Ce(Xf(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,c=[],{match:h,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));h=h.matchFragment(i)}let d=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let m=a.child(u),g=h.matchType(m.type);if(!g)break;u++,(u>1||l==0||m.content.size)&&(h=g,c.push(lN(m.mark(f.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?d:-1)))}let p=u==a.childCount;p||(d=-1),this.placed=Yf(this.placed,t,se.from(c)),this.frontier[t].match=h,p&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<d;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?Ce.empty:new Ce(Xf(o.content,e-1,1),e-1,d<0?o.openEnd:e-1):new Ce(Xf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!u4(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=u4(e,t,i,r,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=u4(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Yf(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Yf(this.placed,this.depth,se.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(se.empty,!0);t.childCount&&(this.placed=Yf(this.placed,this.frontier.length,t))}}function Xf(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Xf(n.firstChild.content,e-1,t)))}function Yf(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Yf(n.lastChild.content,e-1,t)))}function l4(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function lN(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,lN(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(se.empty,!0)))),n.copy(r)}function u4(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!WZ(t,s.content,o)?a:null}function WZ(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function qZ(n){return n.spec.defining||n.spec.definingForContent}function UZ(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(aN(i,s,r))return n.step(new or(e,t,r));let o=cN(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,d=i.pos-1;f>0;f--,d--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],c=r.openStart;for(let f=r.content,d=0;;d++){let p=f.firstChild;if(u.push(p),d==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let d=u[f],p=qZ(d.type);if(p&&!d.sameMarkup(i.node(Math.abs(a)-1)))c=f;else if(p||!d.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let d=(f+c+1)%(r.openStart+1),p=u[d];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let v=i.node(g-1),x=i.index(g-1);if(v.canReplaceWith(x,x,p.type,p.marks))return n.replace(i.before(g),y?s.after(g):t,new Ce(uN(r.content,0,r.openStart,d),d,r.openEnd))}}let h=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>h));f--){let d=o[f];d<0||(e=i.before(d),t=s.after(d))}}function uN(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(uN(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(se.empty,!0))}return n}function GZ(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=HZ(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Ce(se.from(r),0,0))}function KZ(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=cN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function cN(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class Xc extends Fr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Wn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Wn.fromReplace(e,this.pos,this.pos+1,new Ce(se.from(i),0,t.isLeaf?0:1))}getMap(){return zi.empty}invert(e){return new Xc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Xc(t.pos,t.attr,t.value)}}Fr.jsonID("attr",Xc);class D0 extends Fr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Wn.ok(r)}getMap(){return zi.empty}invert(e){return new D0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new D0(t.attr,t.value)}}Fr.jsonID("docAttr",D0);let Sh=class extends Error{};Sh=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Sh.prototype=Object.create(Error.prototype);Sh.prototype.constructor=Sh;Sh.prototype.name="TransformError";class hN{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new I0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Sh(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ce.empty){let i=dv(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Ce(se.from(r),0,0))}delete(e,t){return this.replace(e,t,Ce.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return UZ(this,e,t,r),this}replaceRangeWith(e,t,r){return GZ(this,e,t,r),this}deleteRange(e,t){return KZ(this,e,t),this}lift(e,t){return DZ(this,e,t),this}join(e,t=1){return VZ(this,e,t),this}wrap(e,t){return RZ(this,e,t),this}setBlockType(e,t=e,r,i=null){return LZ(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return BZ(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Xc(e,t,r)),this}setDocAttribute(e,t){return this.step(new D0(e,t)),this}addNodeMark(e,t){return this.step(new fl(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof yt)t.isInSet(r.marks)&&this.step(new Ju(e,t));else{let i=r.marks,s,o=[];for(;s=t.isInSet(i);)o.push(new Ju(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,r){return FZ(this,e,t,r),this}addMark(e,t,r){return MZ(this,e,t,r),this}removeMark(e,t,r){return OZ(this,e,t,r),this}clearIncompatible(e,t,r){return N6(this,e,t,r),this}}const c4=Object.create(null);class it{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new fN(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ce.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(s);e.replaceRange(c.map(l.pos),c.map(u.pos),a?Ce.empty:t),a==0&&Bk(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),Bk(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Be(e):Ec(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Ec(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Ec(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new xi(e.node(0))}static atStart(e){return Ec(e,e,0,0,1)||new xi(e)}static atEnd(e){return Ec(e,e,e.content.size,e.childCount,-1)||new xi(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=c4[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in c4)throw new RangeError("Duplicate use of selection JSON ID "+e);return c4[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}it.prototype.visible=!0;class fN{constructor(e,t){this.$from=e,this.$to=t}}let Lk=!1;function _k(n){!Lk&&!n.parent.inlineContent&&(Lk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Be extends it{constructor(e,t=e){_k(e),_k(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return it.near(r);let i=e.resolve(t.map(this.anchor));return new Be(i.parent.inlineContent?i:r,r)}replace(e,t=Ce.empty){if(super.replace(e,t),t==Ce.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=it.findFrom(t,r,!0)||it.findFrom(t,-r,!0);if(s)t=s.$head;else return it.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(it.findFrom(e,-r,!0)||it.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Be(e,t)}}it.jsonID("text",Be);class pv{constructor(e,t){this.anchor=e,this.head=t}map(e){return new pv(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ye extends it{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?it.near(s):new Ye(s)}content(){return new Ce(se.from(this.node),0,0)}eq(e){return e instanceof Ye&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new R6(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ye(e.resolve(t.anchor))}static create(e,t){return new Ye(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ye.prototype.visible=!1;it.jsonID("node",Ye);class R6{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new pv(r,r):new R6(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ye.isSelectable(r)?new Ye(t):it.near(t)}}class xi extends it{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ce.empty){if(t==Ce.empty){e.delete(0,e.doc.content.size);let r=it.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new xi(e)}map(e){return new xi(e)}eq(e){return e instanceof xi}getBookmark(){return XZ}}it.jsonID("all",xi);const XZ={map(){return this},resolve(n){return new xi(n)}};function Ec(n,e,t,r,i,s=!1){if(e.inlineContent)return Be.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Ye.isSelectable(a))return Ye.create(n,t-(i<0?a.nodeSize:0))}else{let l=Ec(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function Bk(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof or||i instanceof Br))return;let s=n.mapping.maps[r],o;s.forEach((a,l,u,c)=>{o==null&&(o=c)}),n.setSelection(it.near(n.doc.resolve(o),t))}const Fk=1,Sm=2,$k=4;class YZ extends hN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Fk)&~Sm,this.storedMarks=null,this}get selectionSet(){return(this.updated&Fk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Sm,this}ensureMarks(e){return yt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Sm)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Sm,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||yt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(it.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=$k,this}get scrolledIntoView(){return(this.updated&$k)>0}}function zk(n,e){return!e||!n?n:n.bind(e)}class Jf{constructor(e,t,r){this.name=e,this.init=zk(t.init,r),this.apply=zk(t.apply,r)}}const JZ=[new Jf("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Jf("selection",{init(n,e){return n.selection||it.atStart(e.doc)},apply(n){return n.selection}}),new Jf("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Jf("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class h4{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=JZ.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Jf(r.key,r.spec.state,r))})}}class yu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,c=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new yu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new YZ(this)}static create(e){let t=new h4(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new yu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new h4(this.schema,e.plugins),r=t.fields,i=new yu(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new h4(e.schema,e.plugins),s=new yu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=fs.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=it.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=u.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function dN(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=dN(i,e,{})),t[r]=i}return t}class gn{constructor(e){this.spec=e,this.props={},e.props&&dN(e.props,this,this.props),this.key=e.key?e.key.key:pN("plugin")}getState(e){return e[this.key]}}const f4=Object.create(null);function pN(n){return n in f4?n+"$"+ ++f4[n]:(f4[n]=0,n+"$")}class En{constructor(e="key"){this.key=pN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Si{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?ZZ(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function ZZ(n){return function(e,t,r,i){let s=n;if(t[1]){let o=t[0].lastIndexOf(t[1]);s+=t[0].slice(o+t[1].length),r+=o;let a=r-i;a>0&&(s=t[0].slice(o-a,o)+s,r=i)}return e.tr.insertText(s,r,i)}}const QZ=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){let o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){let l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to);e(o)}return!0}}return!1};new Si(/--$/,"—",{inCodeMark:!1});new Si(/\.\.\.$/,"…",{inCodeMark:!1});new Si(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1});new Si(/"$/,"”",{inCodeMark:!1});new Si(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1});new Si(/'$/,"’",{inCodeMark:!1});function L6(n,e,t=null,r){return new Si(n,(i,s,o,a)=>{let l=t instanceof Function?t(s):t,u=i.tr.delete(o,a),c=u.doc.resolve(o),h=c.blockRange(),f=h&&P6(h,e,l);if(!f)return null;u.wrap(h,f);let d=u.doc.resolve(o-1).nodeBefore;return d&&d.type==e&&fv(u.doc,o-1)&&(!r||r(s,d))&&u.join(o-1),u})}function _6(n,e,t=null){return new Si(n,(r,i,s,o)=>{let a=r.doc.resolve(s),l=t instanceof Function?t(i):t;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?r.tr.delete(s,o).setBlockType(s,s,e,l):null})}var ki=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(ki||{});class Gi extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}const eQ=(n,e)=>typeof e=="function"?"[Function]":e,mv=n=>JSON.stringify(n,eQ);function tQ(n){return new Gi(ki.docTypeError,`Doc type error, unsupported type: ${mv(n)}`)}function nQ(n){return new Gi(ki.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function rQ(n){return new Gi(ki.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function gv(){return new Gi(ki.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function iQ(n,e,t){const i=`Cannot create node for ${"name"in n?n.name:n}`,s=c=>{if(c==null)return"null";if(Array.isArray(c))return`[${c.map(s).join(", ")}]`;if(typeof c=="object")return"toJSON"in c&&typeof c.toJSON=="function"?JSON.stringify(c.toJSON()):"spec"in c?JSON.stringify(c.spec):JSON.stringify(c);if(typeof c=="string"||typeof c=="number"||typeof c=="boolean")return JSON.stringify(c);if(typeof c=="function")return`[Function: ${c.name||"anonymous"}]`;try{return String(c)}catch{return"[Unserializable]"}},o=["[Description]",i],a=["[Attributes]",e],l=["[Content]",(t??[]).map(c=>c?typeof c=="object"&&"type"in c?`${c}`:s(c):"null")],u=[o,a,l].reduce((c,[h,f])=>{const d=`${h}: ${s(f)}.`;return c.concat(d)},[]);return new Gi(ki.createNodeInParserFail,u.join(`
`))}function mN(){return new Gi(ki.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function sQ(n){return new Gi(ki.parserMatchError,`Cannot match target parser for node: ${mv(n)}.`)}function oQ(n){return new Gi(ki.serializerMatchError,`Cannot match target serializer for node: ${mv(n)}.`)}function aQ(n,e){return new Gi(ki.getAtomFromSchemaFail,`Cannot get ${n}: ${e} from schema.`)}function qs(n){return new Gi(ki.expectDomTypeError,`Expect to be a dom, but get: ${mv(n)}.`)}function d4(){return new Gi(ki.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function lQ(n){return new Gi(ki.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function uQ(n){return new Gi(ki.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}const Ml=typeof navigator<"u"?navigator:null,Vk=typeof document<"u"?document:null,_l=Ml&&Ml.userAgent||"",G5=/Edge\/(\d+)/.exec(_l),gN=/MSIE \d/.exec(_l),K5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_l),yv=!!(gN||K5||G5),cQ=gN?document.documentMode:K5?+K5[1]:G5?+G5[1]:0,yN=!yv&&/gecko\/(\d+)/i.test(_l),hQ=yN&&+(/Firefox\/(\d+)/.exec(_l)||[0,0])[1],X5=!yv&&/Chrome\/(\d+)/.exec(_l),fQ=!!X5,dQ=X5?+X5[1]:0,vN=!yv&&!!Ml&&/Apple Computer/.test(Ml.vendor),bN=vN&&(/Mobile\/\w+/.test(_l)||!!Ml&&Ml.maxTouchPoints>2),pQ=bN||(Ml?/Mac/.test(Ml.platform):!1),mQ=/Android \d/.test(_l),xN=!!Vk&&"webkitFontSmoothing"in Vk.documentElement.style,gQ=xN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var km=Object.freeze({__proto__:null,android:mQ,chrome:fQ,chrome_version:dQ,gecko:yN,gecko_version:hQ,ie:yv,ie_version:cQ,ios:bN,mac:pQ,safari:vN,webkit:xN,webkit_version:gQ});function p4(n,e,t,r,i,s){if(n.composing)return!1;const o=n.state,a=o.doc.resolve(e);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"￼")+r;for(let u of i){const c=u,h=c.match.exec(l),f=h&&h[0]&&c.handler(o,h,e-(h[0].length-r.length),t);if(f)return c.undoable!==!1&&f.setMeta(s,{transform:f,from:e,to:t,text:r}),n.dispatch(f),!0}return!1}const yQ=new En("MILKDOWN_CUSTOM_INPUTRULES");function vQ({rules:n}){const e=new gn({key:yQ,isInputRules:!0,state:{init(){return null},apply(t,r){const i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,s){return p4(t,r,i,s,n,e)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:r}=t.state.selection;r&&p4(t,r.pos,r.pos,"",n,e)}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;const{$cursor:i}=t.state.selection;return i?p4(t,i.pos,i.pos,`
`,n,e):!1}}});return e}function gp(n,e,t={}){return new Si(n,(r,i,s,o)=>{var a,l,u,c;const{tr:h}=r,f=i.length;let d=i[f-1],p=i[0],m=[],g=o;const y={group:d,fullMatch:p,start:s,end:o},v=(a=t.updateCaptured)==null?void 0:a.call(t,y);if(Object.assign(y,v),{group:d,fullMatch:p,start:s,end:o}=y,p===null||d?.trim()==="")return null;if(d){const x=p.search(/\S/),k=s+p.indexOf(d),C=k+d.length;m=(l=h.storedMarks)!=null?l:[],C<o&&h.delete(C,o),k>s&&h.delete(s+x,k),g=s+x+d.length;const w=(u=t.getAttr)==null?void 0:u.call(t,i);h.addMark(s,g,e.create(w)),h.setStoredMarks(m),(c=t.beforeDispatch)==null||c.call(t,{match:i,start:s,end:o,tr:h})}return h})}function bQ(n,e,t={}){return new Si(n,(r,i,s,o)=>{var a,l,u;const{tr:c}=r;let h=i[1],f=i[0];const d={group:h,fullMatch:f,start:s,end:o},p=(a=t.updateCaptured)==null?void 0:a.call(t,d);if(Object.assign(d,p),{group:h,fullMatch:f,start:s,end:o}=d,f===null||!h||h.trim()==="")return null;const m=(l=t.getAttr)==null?void 0:l.call(t,i),g=e.createAndFill(m);return g&&(c.replaceRangeWith(e.isBlock?c.doc.resolve(s).before():s,o,g),(u=t.beforeDispatch)==null||u.call(t,{match:[f,h??""],start:s,end:o,tr:c})),c})}var xQ=Object.defineProperty,wQ=Object.defineProperties,SQ=Object.getOwnPropertyDescriptors,Hk=Object.getOwnPropertySymbols,kQ=Object.prototype.hasOwnProperty,CQ=Object.prototype.propertyIsEnumerable,jk=(n,e,t)=>e in n?xQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,TQ=(n,e)=>{for(var t in e||(e={}))kQ.call(e,t)&&jk(n,t,e[t]);if(Hk)for(var t of Hk(e))CQ.call(e,t)&&jk(n,t,e[t]);return n},EQ=(n,e)=>wQ(n,SQ(e));function Wk(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function vv(n,e,t){const i=n.state.doc.content.size,s=Wk(e,0,i),o=Wk(t,0,i),a=n.coordsAtPos(s),l=n.coordsAtPos(o,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),h=Math.min(a.left,l.left),f=Math.max(a.right,l.right),d=f-h,p=c-u,y={top:u,bottom:c,left:h,right:f,width:d,height:p,x:h,y:u};return EQ(TQ({},y),{toJSON:()=>y})}function wN(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function AQ(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function MQ(n){if(n.content.childCount===1){const e=n.content.firstChild;if(e?.type.name==="text"&&e.marks.length===0)return e;if(e?.type.name==="paragraph"&&e.childCount===1){const t=e.firstChild;if(t?.type.name==="text"&&t.marks.length===0)return t}}return!1}function go(n){return e=>{for(let t=e.depth;t>0;t-=1){const r=e.node(t);if(n(r)){const i=e.before(t),s=e.after(t);return{from:i,to:s,node:r}}}}}function OQ(n,e){return go(t=>t.type===e)(n)}function IQ(n,e){const t=e.nodes[n];if(!t)throw aQ("node",n);return t}function B6(n){return e=>{for(let t=e.depth;t>0;t--){const r=e.node(t);if(n(r))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:r}}}}function DQ(n){return e=>B6(n)(e.$from)}function NQ(n,e){if(!(n instanceof Ye))return;const{node:t,$from:r}=n;if(AQ(e,t))return{node:t,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const SN=(n,e)=>{const{selection:t,doc:r}=n;if(t instanceof Ye)return{hasNode:t.node.type===e,pos:t.from,target:t.node};const{from:i,to:s}=t;let o=!1,a=-1,l=null;return r.nodesBetween(i,s,(u,c)=>l?!1:u.type===e?(o=!0,a=c,l=u,!1):!0),{hasNode:o,pos:a,target:l}};class kN{constructor(){this.sliceMap=new Map,this.get=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!t){const r=typeof e=="string"?e:e.name;throw nQ(r)}return t},this.remove=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}class PQ{constructor(e,t,r){this.#t=[],this.#r=()=>{this.#t.forEach(i=>i(this.#e))},this.set=i=>{this.#e=i,this.#r()},this.get=()=>this.#e,this.update=i=>{this.#e=i(this.#e),this.#r()},this.type=r,this.#e=t,e.set(r.id,this)}#t;#e;#r;on(e){return this.#t.push(e),()=>{this.#t=this.#t.filter(t=>t!==e)}}once(e){const t=this.on(r=>{e(r),t()});return t}off(e){this.#t=this.#t.filter(t=>t!==e)}offAll(){this.#t=[]}}class RQ{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw gv()}}create(e,t=this._defaultValue){return new PQ(e,t,this)}}const Ot=(n,e)=>new RQ(n,e);class LQ{constructor(e,t,r){this.#n=new Set,this.#l=new Set,this.#i=new Map,this.#s=new Map,this.read=()=>({metadata:this.#t,injectedSlices:[...this.#n].map(i=>({name:typeof i=="string"?i:i.name,value:this.#o(i)})),consumedSlices:[...this.#l].map(i=>({name:typeof i=="string"?i:i.name,value:this.#o(i)})),recordedTimers:[...this.#i].map(([i,{duration:s}])=>({name:i.name,duration:s,status:this.#a(i)})),waitTimers:[...this.#s].map(([i,{duration:s}])=>({name:i.name,duration:s,status:this.#a(i)}))}),this.onRecord=i=>{this.#i.set(i,{start:Date.now(),duration:0})},this.onClear=i=>{this.#i.delete(i)},this.onDone=i=>{const s=this.#i.get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const o=Date.now();s.finally(()=>{this.#s.set(i,{duration:Date.now()-o})}).catch(console.error)},this.onInject=i=>{this.#n.add(i)},this.onRemove=i=>{this.#n.delete(i)},this.onUse=i=>{this.#l.add(i)},this.#o=i=>this.#e.get(i).get(),this.#a=i=>this.#r.get(i).status,this.#e=e,this.#r=t,this.#t=r}#t;#e;#r;#n;#l;#i;#s;#o;#a}class F6{constructor(e,t,r){this.produce=i=>i&&Object.keys(i).length?new F6(this.#t,this.#e,{...i}):this,this.inject=(i,s)=>{const o=i.create(this.#t.sliceMap);return s!=null&&o.set(s),this.#n?.onInject(i),this},this.remove=i=>(this.#t.remove(i),this.#n?.onRemove(i),this),this.record=i=>(i.create(this.#e.store),this.#n?.onRecord(i),this),this.clearTimer=i=>(this.#e.remove(i),this.#n?.onClear(i),this),this.isInjected=i=>this.#t.has(i),this.isRecorded=i=>this.#e.has(i),this.use=i=>(this.#n?.onUse(i),this.#t.get(i)),this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>this.#e.get(i),this.done=i=>{this.timer(i).done(),this.#n?.onDone(i)},this.wait=i=>{const s=this.timer(i).start();return this.#n?.onWait(i,s),s},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},this.#t=e,this.#e=t,this.#r=r,r&&(this.#n=new LQ(e,t,r))}#t;#e;#r;#n;get meta(){return this.#r}get inspector(){return this.#n}}class _Q{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw rQ(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class BQ{constructor(e,t){this.#t=null,this.#e=null,this.#n="pending",this.start=()=>(this.#t??=new Promise((r,i)=>{this.#e=s=>{s instanceof CustomEvent&&s.detail.id===this.#r&&(this.#n="resolved",this.#l(),s.stopImmediatePropagation(),r())},this.#i(()=>{this.#n==="pending"&&(this.#n="rejected"),this.#l(),i(new Error(`Timing ${this.type.name} timeout.`))}),this.#n="pending",addEventListener(this.type.name,this.#e)}),this.#t),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:this.#r}});dispatchEvent(r)},this.#l=()=>{this.#e&&removeEventListener(this.type.name,this.#e)},this.#i=r=>{setTimeout(()=>{r()},this.type.timeout)},this.#r=Symbol(t.name),this.type=t,e.set(t.id,this)}#t;#e;#r;#n;get status(){return this.#n}#l;#i}class FQ{constructor(e,t=3e3){this.create=r=>new BQ(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}const Ia=(n,e=3e3)=>new FQ(n,e),$Q={};function $6(n,e){const t=$Q,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return CN(n,r,i)}function CN(n,e,t){if(zQ(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return qk(n.children,e,t)}return Array.isArray(n)?qk(n,e,t):""}function qk(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=CN(n[i],e,t);return r.join("")}function zQ(n){return!!(n&&typeof n=="object")}const Uk=document.createElement("i");function z6(n){const e="&"+n+";";Uk.innerHTML=e;const t=Uk.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function qi(n,e,t,r){const i=n.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function ts(n,e){return n.length>0?(qi(n,n.length,0,e),n):e}const Gk={}.hasOwnProperty;function TN(n){const e={};let t=-1;for(;++t<n.length;)VQ(e,n[t]);return e}function VQ(n,e){let t;for(t in e){const i=(Gk.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){Gk.call(i,o)||(i[o]=[]);const a=s[o];HQ(i[o],Array.isArray(a)?a:a?[a]:[])}}}function HQ(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);qi(n,0,0,r)}function EN(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Bs(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qr=Bl(/[A-Za-z]/),vi=Bl(/[\dA-Za-z]/),jQ=Bl(/[#-'*+\--9=?A-Z^-~]/);function ty(n){return n!==null&&(n<32||n===127)}const Y5=Bl(/\d/),WQ=Bl(/[\dA-Fa-f]/),qQ=Bl(/[!-/:-@[-`{-~]/);function Fe(n){return n!==null&&n<-2}function Kt(n){return n!==null&&(n<0||n===32)}function Et(n){return n===-2||n===-1||n===32}const bv=Bl(new RegExp("\\p{P}|\\p{S}","u")),Zu=Bl(/\s/);function Bl(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function St(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Et(l)?(n.enter(t),a(l)):e(l)}function a(l){return Et(l)&&s++<i?(n.consume(l),a):(n.exit(t),e(l))}}const UQ={tokenize:GQ};function GQ(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),St(n,e,"linePrefix")}function i(a){return n.enter("paragraph"),s(a)}function s(a){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(a)}function o(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Fe(a)?(n.consume(a),n.exit("chunkText"),s):(n.consume(a),o)}}const KQ={tokenize:XQ},Kk={tokenize:YQ};function XQ(n){const e=this,t=[];let r=0,i,s,o;return a;function a(x){if(r<t.length){const k=t[r];return e.containerState=k[1],n.attempt(k[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const k=e.events.length;let C=k,w;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){w=e.events[C][1].end;break}y(r);let M=k;for(;M<e.events.length;)e.events[M][1].end={...w},M++;return qi(e.events,C+1,0,e.events.slice(k)),e.events.length=M,u(x)}return a(x)}function u(x){if(r===t.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(Kk,c,h)(x)}function c(x){return i&&v(),y(r),f(x)}function h(x){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,p(x)}function f(x){return e.containerState={},n.attempt(Kk,d,p)(x)}function d(x){return r++,t.push([e.currentConstruct,e.containerState]),f(x)}function p(x){if(x===null){i&&v(),y(0),n.consume(x);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(x)}function m(x){if(x===null){g(n.exit("chunkFlow"),!0),y(0),n.consume(x);return}return Fe(x)?(n.consume(x),g(n.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(n.consume(x),m)}function g(x,k){const C=e.sliceStream(x);if(k&&C.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(C),e.parser.lazy[x.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const M=e.events.length;let D=M,A,E;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(A){E=e.events[D][1].end;break}A=!0}for(y(r),w=M;w<e.events.length;)e.events[w][1].end={...E},w++;qi(e.events,D+1,0,e.events.slice(M)),e.events.length=w}}function y(x){let k=t.length;for(;k-- >x;){const C=t[k];e.containerState=C[1],C[0].exit.call(e,n)}t.length=x}function v(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function YQ(n,e,t){return St(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function kh(n){if(n===null||Kt(n)||Zu(n))return 1;if(bv(n))return 2}function xv(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const J5={name:"attention",resolveAll:JQ,tokenize:ZQ};function JQ(n,e){let t=-1,r,i,s,o,a,l,u,c;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const h={...n[r][1].end},f={...n[t][1].start};Xk(h,-l),Xk(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...n[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},n[r][1].end={...o.start},n[t][1].start={...a.end},u=[],n[r][1].end.offset-n[r][1].start.offset&&(u=ts(u,[["enter",n[r][1],e],["exit",n[r][1],e]])),u=ts(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=ts(u,xv(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),u=ts(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(c=2,u=ts(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):c=0,qi(n,r-1,t-r+3,u),t=r+u.length-c-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function ZQ(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=kh(r);let s;return o;function o(l){return s=l,n.enter("attentionSequence"),a(l)}function a(l){if(l===s)return n.consume(l),a;const u=n.exit("attentionSequence"),c=kh(l),h=!c||c===2&&i||t.includes(l),f=!i||i===2&&c||t.includes(r);return u._open=!!(s===42?h:h&&(i||!f)),u._close=!!(s===42?f:f&&(c||!h)),e(l)}}function Xk(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const QQ={name:"autolink",tokenize:eee};function eee(n,e,t){let r=0;return i;function i(d){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(d),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(d){return qr(d)?(n.consume(d),o):d===64?t(d):u(d)}function o(d){return d===43||d===45||d===46||vi(d)?(r=1,a(d)):u(d)}function a(d){return d===58?(n.consume(d),r=0,l):(d===43||d===45||d===46||vi(d))&&r++<32?(n.consume(d),a):(r=0,u(d))}function l(d){return d===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(d),n.exit("autolinkMarker"),n.exit("autolink"),e):d===null||d===32||d===60||ty(d)?t(d):(n.consume(d),l)}function u(d){return d===64?(n.consume(d),c):jQ(d)?(n.consume(d),u):t(d)}function c(d){return vi(d)?h(d):t(d)}function h(d){return d===46?(n.consume(d),r=0,c):d===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(d),n.exit("autolinkMarker"),n.exit("autolink"),e):f(d)}function f(d){if((d===45||vi(d))&&r++<63){const p=d===45?f:h;return n.consume(d),p}return t(d)}}const yp={partial:!0,tokenize:tee};function tee(n,e,t){return r;function r(s){return Et(s)?St(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||Fe(s)?e(s):t(s)}}const AN={continuation:{tokenize:ree},exit:iee,name:"blockQuote",tokenize:nee};function nee(n,e,t){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return Et(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function ree(n,e,t){const r=this;return i;function i(o){return Et(o)?St(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(AN,e,t)(o)}}function iee(n){n.exit("blockQuote")}const MN={name:"characterEscape",tokenize:see};function see(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return qQ(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const ON={name:"characterReference",tokenize:oee};function oee(n,e,t){const r=this;let i=0,s,o;return a;function a(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),l}function l(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,o=vi,c(h))}function u(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=WQ,c):(n.enter("characterReferenceValue"),s=7,o=Y5,c(h))}function c(h){if(h===59&&i){const f=n.exit("characterReferenceValue");return o===vi&&!z6(r.sliceSerialize(f))?t(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(h)&&i++<s?(n.consume(h),c):t(h)}}const Yk={partial:!0,tokenize:lee},Jk={concrete:!0,name:"codeFenced",tokenize:aee};function aee(n,e,t){const r=this,i={partial:!0,tokenize:C};let s=0,o=0,a;return l;function l(w){return u(w)}function u(w){const M=r.events[r.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,a=w,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===a?(o++,n.consume(w),c):o<3?t(w):(n.exit("codeFencedFenceSequence"),Et(w)?St(n,h,"whitespace")(w):h(w))}function h(w){return w===null||Fe(w)?(n.exit("codeFencedFence"),r.interrupt?e(w):n.check(Yk,m,k)(w)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||Fe(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(w)):Et(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),St(n,d,"whitespace")(w)):w===96&&w===a?t(w):(n.consume(w),f)}function d(w){return w===null||Fe(w)?h(w):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||Fe(w)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(w)):w===96&&w===a?t(w):(n.consume(w),p)}function m(w){return n.attempt(i,k,g)(w)}function g(w){return n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),y}function y(w){return s>0&&Et(w)?St(n,v,"linePrefix",s+1)(w):v(w)}function v(w){return w===null||Fe(w)?n.check(Yk,m,k)(w):(n.enter("codeFlowValue"),x(w))}function x(w){return w===null||Fe(w)?(n.exit("codeFlowValue"),v(w)):(n.consume(w),x)}function k(w){return n.exit("codeFenced"),e(w)}function C(w,M,D){let A=0;return E;function E(W){return w.enter("lineEnding"),w.consume(W),w.exit("lineEnding"),N}function N(W){return w.enter("codeFencedFence"),Et(W)?St(w,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):I(W)}function I(W){return W===a?(w.enter("codeFencedFenceSequence"),L(W)):D(W)}function L(W){return W===a?(A++,w.consume(W),L):A>=o?(w.exit("codeFencedFenceSequence"),Et(W)?St(w,F,"whitespace")(W):F(W)):D(W)}function F(W){return W===null||Fe(W)?(w.exit("codeFencedFence"),M(W)):D(W)}}}function lee(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const m4={name:"codeIndented",tokenize:cee},uee={partial:!0,tokenize:hee};function cee(n,e,t){const r=this;return i;function i(u){return n.enter("codeIndented"),St(n,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):t(u)}function o(u){return u===null?l(u):Fe(u)?n.attempt(uee,o,l)(u):(n.enter("codeFlowValue"),a(u))}function a(u){return u===null||Fe(u)?(n.exit("codeFlowValue"),o(u)):(n.consume(u),a)}function l(u){return n.exit("codeIndented"),e(u)}}function hee(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):Fe(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):St(n,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Fe(o)?i(o):t(o)}}const fee={name:"codeText",previous:pee,resolve:dee,tokenize:mee};function dee(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function pee(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mee(n,e,t){let r=0,i,s;return o;function o(h){return n.enter("codeText"),n.enter("codeTextSequence"),a(h)}function a(h){return h===96?(n.consume(h),r++,a):(n.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),l):h===96?(s=n.enter("codeTextSequence"),i=0,c(h)):Fe(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),l):(n.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Fe(h)?(n.exit("codeTextData"),l(h)):(n.consume(h),u)}function c(h){return h===96?(n.consume(h),i++,c):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class gee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Mf(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Mf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Mf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Mf(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Mf(this.left,t.reverse())}}}function Mf(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function IN(n){const e={};let t=-1,r,i,s,o,a,l,u;const c=new gee(n);for(;++t<c.length;){for(;t in e;)t=e[t];if(r=c.get(t),t&&r[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,yee(c,t)),t=e[t],u=!0);else if(r[1]._container){for(s=t,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,t),a.unshift(r),c.splice(i,t-i+1,a))}}return qi(n,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function yee(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const s=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,f=-1,d=t,p=0,m=0;const g=[m];for(;d;){for(;n.get(++i)[1]!==d;);s.push(i),d._tokenizer||(c=r.sliceStream(d),d.next||c.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=t;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+y.length-1]),n.splice(v,2,y)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const vee={resolve:xee,tokenize:wee},bee={partial:!0,tokenize:See};function xee(n){return IN(n),n}function wee(n,e){let t;return r;function r(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Fe(a)?n.check(bee,o,s)(a):(n.consume(a),i)}function s(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function o(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function See(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),St(n,s,"linePrefix")}function s(o){if(o===null||Fe(o))return t(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function DN(n,e,t,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(y){return y===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(y),n.exit(s),f):y===null||y===32||y===41||ty(y)?t(y):(n.enter(r),n.enter(o),n.enter(a),n.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(n.enter(s),n.consume(y),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===62?(n.exit("chunkString"),n.exit(a),f(y)):y===null||y===60||Fe(y)?t(y):(n.consume(y),y===92?p:d)}function p(y){return y===60||y===62||y===92?(n.consume(y),d):d(y)}function m(y){return!c&&(y===null||y===41||Kt(y))?(n.exit("chunkString"),n.exit(a),n.exit(o),n.exit(r),e(y)):c<u&&y===40?(n.consume(y),c++,m):y===41?(n.consume(y),c--,m):y===null||y===32||y===40||ty(y)?t(y):(n.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(n.consume(y),m):m(y)}}function NN(n,e,t,r,i,s){const o=this;let a=0,l;return u;function u(d){return n.enter(r),n.enter(i),n.consume(d),n.exit(i),n.enter(s),c}function c(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?t(d):d===93?(n.exit(s),n.enter(i),n.consume(d),n.exit(i),n.exit(r),e):Fe(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),c):(n.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||Fe(d)||a++>999?(n.exit("chunkString"),c(d)):(n.consume(d),l||(l=!Et(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(n.consume(d),a++,h):h(d)}}function PN(n,e,t,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(n.enter(r),n.enter(i),n.consume(f),n.exit(i),o=f===40?41:f,l):t(f)}function l(f){return f===o?(n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):(n.enter(s),u(f))}function u(f){return f===o?(n.exit(s),l(o)):f===null?t(f):Fe(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),St(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||Fe(f)?(n.exit("chunkString"),u(f)):(n.consume(f),f===92?h:c)}function h(f){return f===o||f===92?(n.consume(f),c):c(f)}}function jd(n,e){let t;return r;function r(i){return Fe(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Et(i)?St(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const kee={name:"definition",tokenize:Tee},Cee={partial:!0,tokenize:Eee};function Tee(n,e,t){const r=this;let i;return s;function s(d){return n.enter("definition"),o(d)}function o(d){return NN.call(r,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=Bs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(n.enter("definitionMarker"),n.consume(d),n.exit("definitionMarker"),l):t(d)}function l(d){return Kt(d)?jd(n,u)(d):u(d)}function u(d){return DN(n,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function c(d){return n.attempt(Cee,h,h)(d)}function h(d){return Et(d)?St(n,f,"whitespace")(d):f(d)}function f(d){return d===null||Fe(d)?(n.exit("definition"),r.parser.defined.push(i),e(d)):t(d)}}function Eee(n,e,t){return r;function r(a){return Kt(a)?jd(n,i)(a):t(a)}function i(a){return PN(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Et(a)?St(n,o,"whitespace")(a):o(a)}function o(a){return a===null||Fe(a)?e(a):t(a)}}const Aee={name:"hardBreakEscape",tokenize:Mee};function Mee(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return Fe(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const Oee={name:"headingAtx",resolve:Iee,tokenize:Dee};function Iee(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},qi(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function Dee(n,e,t){let r=0;return i;function i(c){return n.enter("atxHeading"),s(c)}function s(c){return n.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(n.consume(c),o):c===null||Kt(c)?(n.exit("atxHeadingSequence"),a(c)):t(c)}function a(c){return c===35?(n.enter("atxHeadingSequence"),l(c)):c===null||Fe(c)?(n.exit("atxHeading"),e(c)):Et(c)?St(n,a,"whitespace")(c):(n.enter("atxHeadingText"),u(c))}function l(c){return c===35?(n.consume(c),l):(n.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Kt(c)?(n.exit("atxHeadingText"),a(c)):(n.consume(c),u)}}const Nee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Zk=["pre","script","style","textarea"],Pee={concrete:!0,name:"htmlFlow",resolveTo:_ee,tokenize:Bee},Ree={partial:!0,tokenize:$ee},Lee={partial:!0,tokenize:Fee};function _ee(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function Bee(n,e,t){const r=this;let i,s,o,a,l;return u;function u(P){return c(P)}function c(P){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(P),h}function h(P){return P===33?(n.consume(P),f):P===47?(n.consume(P),s=!0,m):P===63?(n.consume(P),i=3,r.interrupt?e:R):qr(P)?(n.consume(P),o=String.fromCharCode(P),g):t(P)}function f(P){return P===45?(n.consume(P),i=2,d):P===91?(n.consume(P),i=5,a=0,p):qr(P)?(n.consume(P),i=4,r.interrupt?e:R):t(P)}function d(P){return P===45?(n.consume(P),r.interrupt?e:R):t(P)}function p(P){const $e="CDATA[";return P===$e.charCodeAt(a++)?(n.consume(P),a===$e.length?r.interrupt?e:I:p):t(P)}function m(P){return qr(P)?(n.consume(P),o=String.fromCharCode(P),g):t(P)}function g(P){if(P===null||P===47||P===62||Kt(P)){const $e=P===47,Z=o.toLowerCase();return!$e&&!s&&Zk.includes(Z)?(i=1,r.interrupt?e(P):I(P)):Nee.includes(o.toLowerCase())?(i=6,$e?(n.consume(P),y):r.interrupt?e(P):I(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(P):s?v(P):x(P))}return P===45||vi(P)?(n.consume(P),o+=String.fromCharCode(P),g):t(P)}function y(P){return P===62?(n.consume(P),r.interrupt?e:I):t(P)}function v(P){return Et(P)?(n.consume(P),v):E(P)}function x(P){return P===47?(n.consume(P),E):P===58||P===95||qr(P)?(n.consume(P),k):Et(P)?(n.consume(P),x):E(P)}function k(P){return P===45||P===46||P===58||P===95||vi(P)?(n.consume(P),k):C(P)}function C(P){return P===61?(n.consume(P),w):Et(P)?(n.consume(P),C):x(P)}function w(P){return P===null||P===60||P===61||P===62||P===96?t(P):P===34||P===39?(n.consume(P),l=P,M):Et(P)?(n.consume(P),w):D(P)}function M(P){return P===l?(n.consume(P),l=null,A):P===null||Fe(P)?t(P):(n.consume(P),M)}function D(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||Kt(P)?C(P):(n.consume(P),D)}function A(P){return P===47||P===62||Et(P)?x(P):t(P)}function E(P){return P===62?(n.consume(P),N):t(P)}function N(P){return P===null||Fe(P)?I(P):Et(P)?(n.consume(P),N):t(P)}function I(P){return P===45&&i===2?(n.consume(P),G):P===60&&i===1?(n.consume(P),ee):P===62&&i===4?(n.consume(P),fe):P===63&&i===3?(n.consume(P),R):P===93&&i===5?(n.consume(P),ge):Fe(P)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(Ree,xe,L)(P)):P===null||Fe(P)?(n.exit("htmlFlowData"),L(P)):(n.consume(P),I)}function L(P){return n.check(Lee,F,xe)(P)}function F(P){return n.enter("lineEnding"),n.consume(P),n.exit("lineEnding"),W}function W(P){return P===null||Fe(P)?L(P):(n.enter("htmlFlowData"),I(P))}function G(P){return P===45?(n.consume(P),R):I(P)}function ee(P){return P===47?(n.consume(P),o="",de):I(P)}function de(P){if(P===62){const $e=o.toLowerCase();return Zk.includes($e)?(n.consume(P),fe):I(P)}return qr(P)&&o.length<8?(n.consume(P),o+=String.fromCharCode(P),de):I(P)}function ge(P){return P===93?(n.consume(P),R):I(P)}function R(P){return P===62?(n.consume(P),fe):P===45&&i===2?(n.consume(P),R):I(P)}function fe(P){return P===null||Fe(P)?(n.exit("htmlFlowData"),xe(P)):(n.consume(P),fe)}function xe(P){return n.exit("htmlFlow"),e(P)}}function Fee(n,e,t){const r=this;return i;function i(o){return Fe(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function $ee(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(yp,e,t)}}const zee={name:"htmlText",tokenize:Vee};function Vee(n,e,t){const r=this;let i,s,o;return a;function a(R){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(R),l}function l(R){return R===33?(n.consume(R),u):R===47?(n.consume(R),C):R===63?(n.consume(R),x):qr(R)?(n.consume(R),D):t(R)}function u(R){return R===45?(n.consume(R),c):R===91?(n.consume(R),s=0,p):qr(R)?(n.consume(R),v):t(R)}function c(R){return R===45?(n.consume(R),d):t(R)}function h(R){return R===null?t(R):R===45?(n.consume(R),f):Fe(R)?(o=h,ee(R)):(n.consume(R),h)}function f(R){return R===45?(n.consume(R),d):h(R)}function d(R){return R===62?G(R):R===45?f(R):h(R)}function p(R){const fe="CDATA[";return R===fe.charCodeAt(s++)?(n.consume(R),s===fe.length?m:p):t(R)}function m(R){return R===null?t(R):R===93?(n.consume(R),g):Fe(R)?(o=m,ee(R)):(n.consume(R),m)}function g(R){return R===93?(n.consume(R),y):m(R)}function y(R){return R===62?G(R):R===93?(n.consume(R),y):m(R)}function v(R){return R===null||R===62?G(R):Fe(R)?(o=v,ee(R)):(n.consume(R),v)}function x(R){return R===null?t(R):R===63?(n.consume(R),k):Fe(R)?(o=x,ee(R)):(n.consume(R),x)}function k(R){return R===62?G(R):x(R)}function C(R){return qr(R)?(n.consume(R),w):t(R)}function w(R){return R===45||vi(R)?(n.consume(R),w):M(R)}function M(R){return Fe(R)?(o=M,ee(R)):Et(R)?(n.consume(R),M):G(R)}function D(R){return R===45||vi(R)?(n.consume(R),D):R===47||R===62||Kt(R)?A(R):t(R)}function A(R){return R===47?(n.consume(R),G):R===58||R===95||qr(R)?(n.consume(R),E):Fe(R)?(o=A,ee(R)):Et(R)?(n.consume(R),A):G(R)}function E(R){return R===45||R===46||R===58||R===95||vi(R)?(n.consume(R),E):N(R)}function N(R){return R===61?(n.consume(R),I):Fe(R)?(o=N,ee(R)):Et(R)?(n.consume(R),N):A(R)}function I(R){return R===null||R===60||R===61||R===62||R===96?t(R):R===34||R===39?(n.consume(R),i=R,L):Fe(R)?(o=I,ee(R)):Et(R)?(n.consume(R),I):(n.consume(R),F)}function L(R){return R===i?(n.consume(R),i=void 0,W):R===null?t(R):Fe(R)?(o=L,ee(R)):(n.consume(R),L)}function F(R){return R===null||R===34||R===39||R===60||R===61||R===96?t(R):R===47||R===62||Kt(R)?A(R):(n.consume(R),F)}function W(R){return R===47||R===62||Kt(R)?A(R):t(R)}function G(R){return R===62?(n.consume(R),n.exit("htmlTextData"),n.exit("htmlText"),e):t(R)}function ee(R){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(R),n.exit("lineEnding"),de}function de(R){return Et(R)?St(n,ge,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):ge(R)}function ge(R){return n.enter("htmlTextData"),o(R)}}const V6={name:"labelEnd",resolveAll:qee,resolveTo:Uee,tokenize:Gee},Hee={tokenize:Kee},jee={tokenize:Xee},Wee={tokenize:Yee};function qee(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&qi(n,0,n.length,t),n}function Uee(n,e){let t=n.length,r=0,i,s,o,a;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},c={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=ts(a,n.slice(s+1,s+r+3)),a=ts(a,[["enter",c,e]]),a=ts(a,xv(e.parser.constructs.insideSpan.null,n.slice(s+r+4,o-3),e)),a=ts(a,[["exit",c,e],n[o-2],n[o-1],["exit",u,e]]),a=ts(a,n.slice(o+1)),a=ts(a,[["exit",l,e]]),qi(n,s,n.length,a),n}function Gee(n,e,t){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(Bs(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(f),n.exit("labelMarker"),n.exit("labelEnd"),l):t(f)}function l(f){return f===40?n.attempt(Hee,c,o?c:h)(f):f===91?n.attempt(jee,c,o?u:h)(f):o?c(f):h(f)}function u(f){return n.attempt(Wee,c,h)(f)}function c(f){return e(f)}function h(f){return s._balanced=!0,t(f)}}function Kee(n,e,t){return r;function r(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),i}function i(h){return Kt(h)?jd(n,s)(h):s(h)}function s(h){return h===41?c(h):DN(n,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Kt(h)?jd(n,l)(h):c(h)}function a(h){return t(h)}function l(h){return h===34||h===39||h===40?PN(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return Kt(h)?jd(n,c)(h):c(h)}function c(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):t(h)}}function Xee(n,e,t){const r=this;return i;function i(a){return NN.call(r,n,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Bs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function o(a){return t(a)}}function Yee(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const Jee={name:"labelStartImage",resolveAll:V6.resolveAll,tokenize:Zee};function Zee(n,e,t){const r=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),s}function s(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),o):t(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const Qee={name:"labelStartLink",resolveAll:V6.resolveAll,tokenize:ete};function ete(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const g4={name:"lineEnding",tokenize:tte};function tte(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),St(n,e,"linePrefix")}}const M1={name:"thematicBreak",tokenize:nte};function nte(n,e,t){let r=0,i;return s;function s(u){return n.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(n.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Fe(u))?(n.exit("thematicBreak"),e(u)):t(u)}function l(u){return u===i?(n.consume(u),r++,l):(n.exit("thematicBreakSequence"),Et(u)?St(n,a,"whitespace")(u):a(u))}}const ui={continuation:{tokenize:ote},exit:lte,name:"list",tokenize:ste},rte={partial:!0,tokenize:ute},ite={partial:!0,tokenize:ate};function ste(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const p=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:Y5(d)){if(r.containerState.type||(r.containerState.type=p,n.enter(p,{_container:!0})),p==="listUnordered")return n.enter("listItemPrefix"),d===42||d===45?n.check(M1,t,u)(d):u(d);if(!r.interrupt||d===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(d)}return t(d)}function l(d){return Y5(d)&&++o<10?(n.consume(d),l):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(n.exit("listItemValue"),u(d)):t(d)}function u(d){return n.enter("listItemMarker"),n.consume(d),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,n.check(yp,r.interrupt?t:c,n.attempt(rte,f,h))}function c(d){return r.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return Et(d)?(n.enter("listItemPrefixWhitespace"),n.consume(d),n.exit("listItemPrefixWhitespace"),f):t(d)}function f(d){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(d)}}function ote(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(yp,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,St(n,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Et(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(ite,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,St(n,n.attempt(ui,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function ate(n,e,t){const r=this;return St(n,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):t(s)}}function lte(n){n.exit(this.containerState.type)}function ute(n,e,t){const r=this;return St(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Et(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const Qk={name:"setextUnderline",resolveTo:cte,tokenize:hte};function cte(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",o,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function hte(n,e,t){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(n.enter("setextHeadingLine"),i=u,o(u)):t(u)}function o(u){return n.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(n.consume(u),a):(n.exit("setextHeadingLineSequence"),Et(u)?St(n,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Fe(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const fte={tokenize:dte};function dte(n){const e=this,t=n.attempt(yp,r,n.attempt(this.parser.constructs.flowInitial,i,St(n,n.attempt(this.parser.constructs.flow,i,n.attempt(vee,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const pte={resolveAll:LN()},mte=RN("string"),gte=RN("text");function RN(n){return{resolveAll:LN(n==="text"?yte:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),l}function l(c){return u(c)?(t.exit("data"),s(c)):(t.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function LN(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function yte(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const u={type:t===n.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const vte={42:ui,43:ui,45:ui,48:ui,49:ui,50:ui,51:ui,52:ui,53:ui,54:ui,55:ui,56:ui,57:ui,62:AN},bte={91:kee},xte={[-2]:m4,[-1]:m4,32:m4},wte={35:Oee,42:M1,45:[Qk,M1],60:Pee,61:Qk,95:M1,96:Jk,126:Jk},Ste={38:ON,92:MN},kte={[-5]:g4,[-4]:g4,[-3]:g4,33:Jee,38:ON,42:J5,60:[QQ,zee],91:Qee,92:[Aee,MN],93:V6,95:J5,96:fee},Cte={null:[J5,pte]},Tte={null:[42,95]},Ete={null:[]},Ate=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Tte,contentInitial:bte,disable:Ete,document:vte,flow:wte,flowInitial:xte,insideSpan:Cte,string:Ste,text:kte},Symbol.toStringTag,{value:"Module"}));function Mte(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:M(C),check:M(w),consume:v,enter:x,exit:k,interrupt:M(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:n,previous:null,sliceSerialize:f,sliceStream:d,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(N){return o=ts(o,N),g(),o[o.length-1]!==null?[]:(D(e,0),u.events=xv(s,u.events,u),u.events)}function f(N,I){return Ite(d(N),I)}function d(N){return Ote(o,N)}function p(){const{_bufferIndex:N,_index:I,line:L,column:F,offset:W}=r;return{_bufferIndex:N,_index:I,line:L,column:F,offset:W}}function m(N){i[N.line]=N.column,E()}function g(){let N;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<I.length;)y(I.charCodeAt(r._bufferIndex));else y(I)}}function y(N){c=c(N)}function v(N){Fe(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,E()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=N}function x(N,I){const L=I||{};return L.type=N,L.start=p(),u.events.push(["enter",L,u]),a.push(L),L}function k(N){const I=a.pop();return I.end=p(),u.events.push(["exit",I,u]),I}function C(N,I){D(N,I.from)}function w(N,I){I.restore()}function M(N,I){return L;function L(F,W,G){let ee,de,ge,R;return Array.isArray(F)?xe(F):"tokenize"in F?xe([F]):fe(F);function fe(we){return Se;function Se(Ie){const Je=Ie!==null&&we[Ie],Ct=Ie!==null&&we.null,tn=[...Array.isArray(Je)?Je:Je?[Je]:[],...Array.isArray(Ct)?Ct:Ct?[Ct]:[]];return xe(tn)(Ie)}}function xe(we){return ee=we,de=0,we.length===0?G:P(we[de])}function P(we){return Se;function Se(Ie){return R=A(),ge=we,we.partial||(u.currentConstruct=we),we.name&&u.parser.constructs.disable.null.includes(we.name)?Z():we.tokenize.call(I?Object.assign(Object.create(u),I):u,l,$e,Z)(Ie)}}function $e(we){return N(ge,R),W}function Z(we){return R.restore(),++de<ee.length?P(ee[de]):G}}}function D(N,I){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&qi(u.events,I,u.events.length-I,N.resolve(u.events.slice(I),u)),N.resolveTo&&(u.events=N.resolveTo(u.events,u))}function A(){const N=p(),I=u.previous,L=u.currentConstruct,F=u.events.length,W=Array.from(a);return{from:F,restore:G};function G(){r=N,u.previous=I,u.currentConstruct=L,u.events.length=F,a=W,E()}}function E(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ote(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,s)];else{if(o=n.slice(t,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(n[i].slice(0,s))}return o}function Ite(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Dte(n){const r={constructs:TN([Ate,...(n||{}).extensions||[]]),content:i(UQ),defined:[],document:i(KQ),flow:i(fte),lazy:{},string:i(mte),text:i(gte)};return r;function i(s){return o;function o(a){return Mte(r,s,a)}}}function Nte(n){for(;!IN(n););return n}const eC=/[\0\t\n\r]/g;function Pte(){let n=1,e="",t=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",t&&(s.charCodeAt(0)===65279&&h++,t=void 0);h<s.length;){if(eC.lastIndex=h,u=eC.exec(s),f=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(f),!u){e=s.slice(h);break}if(d===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),n+=f-h),d){case 0:{l.push(65533),n++;break}case 9:{for(c=Math.ceil(n/4)*4,l.push(-2);n++<c;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Rte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function _N(n){return n.replace(Rte,Lte)}function Lte(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return EN(t.slice(s?2:1),s?16:10)}return z6(t)||n}function Wd(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?tC(n.position):"start"in n||"end"in n?tC(n):"line"in n||"column"in n?Z5(n):""}function Z5(n){return nC(n&&n.line)+":"+nC(n&&n.column)}function tC(n){return Z5(n&&n.start)+"-"+Z5(n&&n.end)}function nC(n){return n&&typeof n=="number"?n:1}const BN={}.hasOwnProperty;function _te(n,e,t){return typeof e!="string"&&(t=e,e=void 0),Bte(t)(Nte(Dte(t).document().write(Pte()(n,e,!0))))}function Bte(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Xn),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(ln),blockQuote:s(Ct),characterEscape:A,characterReference:A,codeFenced:s(tn),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(tn,o),codeText:s(at,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(It),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(vt),hardBreakEscape:s(vn),hardBreakTrailing:s(vn),htmlFlow:s(Ht,o),htmlFlowData:A,htmlText:s(Ht,o),htmlTextData:A,image:s(Kn),label:o,link:s(Xn),listItem:s(Tr),listItemValue:f,listOrdered:s($n,h),listUnordered:s($n),paragraph:s(Ai),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ln),strong:s(ii),thematicBreak:s(hr)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:Je,autolinkProtocol:Ie,blockQuote:l(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:we,characterReference:Se,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:E,codeIndented:l(y),codeText:l(W),codeTextData:E,data:E,definition:l(),definitionDestinationString:k,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(L),htmlFlowData:E,htmlText:l(F),htmlTextData:E,image:l(ee),label:ge,labelText:de,lineEnding:N,link:l(G),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:$e,resourceDestinationString:R,resourceTitleString:fe,resource:xe,setextHeading:l(D),setextHeadingLineSequence:M,setextHeadingText:w,strong:l(),thematicBreak:l()}};FN(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(J){let he={type:"root",children:[]};const qe={stack:[he],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:t},H=[];let j=-1;for(;++j<J.length;)if(J[j][1].type==="listOrdered"||J[j][1].type==="listUnordered")if(J[j][0]==="enter")H.push(j);else{const U=H.pop();j=i(J,U,j)}for(j=-1;++j<J.length;){const U=e[J[j][0]];BN.call(U,J[j][1].type)&&U[J[j][1].type].call(Object.assign({sliceSerialize:J[j][2].sliceSerialize},qe),J[j][1])}if(qe.tokenStack.length>0){const U=qe.tokenStack[qe.tokenStack.length-1];(U[1]||rC).call(qe,void 0,U[0])}for(he.position={start:Fa(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Fa(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},j=-1;++j<e.transforms.length;)he=e.transforms[j](he)||he;return he}function i(J,he,qe){let H=he-1,j=-1,U=!1,ie,ye,Ne,je;for(;++H<=qe;){const Ze=J[H];switch(Ze[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ze[0]==="enter"?j++:j--,je=void 0;break}case"lineEndingBlank":{Ze[0]==="enter"&&(ie&&!je&&!j&&!Ne&&(Ne=H),je=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:je=void 0}if(!j&&Ze[0]==="enter"&&Ze[1].type==="listItemPrefix"||j===-1&&Ze[0]==="exit"&&(Ze[1].type==="listUnordered"||Ze[1].type==="listOrdered")){if(ie){let Dt=H;for(ye=void 0;Dt--;){const Le=J[Dt];if(Le[1].type==="lineEnding"||Le[1].type==="lineEndingBlank"){if(Le[0]==="exit")continue;ye&&(J[ye][1].type="lineEndingBlank",U=!0),Le[1].type="lineEnding",ye=Dt}else if(!(Le[1].type==="linePrefix"||Le[1].type==="blockQuotePrefix"||Le[1].type==="blockQuotePrefixWhitespace"||Le[1].type==="blockQuoteMarker"||Le[1].type==="listItemIndent"))break}Ne&&(!ye||Ne<ye)&&(ie._spread=!0),ie.end=Object.assign({},ye?J[ye][1].start:Ze[1].end),J.splice(ye||H,0,["exit",ie,Ze[2]]),H++,qe++}if(Ze[1].type==="listItemPrefix"){const Dt={type:"listItem",_spread:!1,start:Object.assign({},Ze[1].start),end:void 0};ie=Dt,J.splice(H,0,["enter",Dt,Ze[2]]),H++,qe++,Ne=void 0,je=!0}}}return J[he][1]._spread=U,qe}function s(J,he){return qe;function qe(H){a.call(this,J(H),H),he&&he.call(this,H)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(J,he,qe){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([he,qe||void 0]),J.position={start:Fa(he.start),end:void 0}}function l(J){return he;function he(qe){J&&J.call(this,qe),u.call(this,qe)}}function u(J,he){const qe=this.stack.pop(),H=this.tokenStack.pop();if(H)H[0].type!==J.type&&(he?he.call(this,J,H[0]):(H[1]||rC).call(this,J,H[0]));else throw new Error("Cannot close `"+J.type+"` ("+Wd({start:J.start,end:J.end})+"): it’s not open");qe.position.end=Fa(J.end)}function c(){return $6(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(J){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function d(){const J=this.resume(),he=this.stack[this.stack.length-1];he.lang=J}function p(){const J=this.resume(),he=this.stack[this.stack.length-1];he.meta=J}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const J=this.resume(),he=this.stack[this.stack.length-1];he.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const J=this.resume(),he=this.stack[this.stack.length-1];he.value=J.replace(/(\r?\n|\r)$/g,"")}function v(J){const he=this.resume(),qe=this.stack[this.stack.length-1];qe.label=he,qe.identifier=Bs(this.sliceSerialize(J)).toLowerCase()}function x(){const J=this.resume(),he=this.stack[this.stack.length-1];he.title=J}function k(){const J=this.resume(),he=this.stack[this.stack.length-1];he.url=J}function C(J){const he=this.stack[this.stack.length-1];if(!he.depth){const qe=this.sliceSerialize(J).length;he.depth=qe}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function M(J){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function A(J){const qe=this.stack[this.stack.length-1].children;let H=qe[qe.length-1];(!H||H.type!=="text")&&(H=Er(),H.position={start:Fa(J.start),end:void 0},qe.push(H)),this.stack.push(H)}function E(J){const he=this.stack.pop();he.value+=this.sliceSerialize(J),he.position.end=Fa(J.end)}function N(J){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=he.children[he.children.length-1];qe.position.end=Fa(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(he.type)&&(A.call(this,J),E.call(this,J))}function I(){this.data.atHardBreak=!0}function L(){const J=this.resume(),he=this.stack[this.stack.length-1];he.value=J}function F(){const J=this.resume(),he=this.stack[this.stack.length-1];he.value=J}function W(){const J=this.resume(),he=this.stack[this.stack.length-1];he.value=J}function G(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=he,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function ee(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=he,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function de(J){const he=this.sliceSerialize(J),qe=this.stack[this.stack.length-2];qe.label=_N(he),qe.identifier=Bs(he).toLowerCase()}function ge(){const J=this.stack[this.stack.length-1],he=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const H=J.children;qe.children=H}else qe.alt=he}function R(){const J=this.resume(),he=this.stack[this.stack.length-1];he.url=J}function fe(){const J=this.resume(),he=this.stack[this.stack.length-1];he.title=J}function xe(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function $e(J){const he=this.resume(),qe=this.stack[this.stack.length-1];qe.label=he,qe.identifier=Bs(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function Z(J){this.data.characterReferenceType=J.type}function we(J){const he=this.sliceSerialize(J),qe=this.data.characterReferenceType;let H;qe?(H=EN(he,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):H=z6(he);const j=this.stack[this.stack.length-1];j.value+=H}function Se(J){const he=this.stack.pop();he.position.end=Fa(J.end)}function Ie(J){E.call(this,J);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(J)}function Je(J){E.call(this,J);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(J)}function Ct(){return{type:"blockquote",children:[]}}function tn(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function It(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function vt(){return{type:"emphasis",children:[]}}function ln(){return{type:"heading",depth:0,children:[]}}function vn(){return{type:"break"}}function Ht(){return{type:"html",value:""}}function Kn(){return{type:"image",title:null,url:"",alt:null}}function Xn(){return{type:"link",title:null,url:"",children:[]}}function $n(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function Tr(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function Ai(){return{type:"paragraph",children:[]}}function ii(){return{type:"strong",children:[]}}function Er(){return{type:"text",value:""}}function hr(){return{type:"thematicBreak"}}}function Fa(n){return{line:n.line,column:n.column,offset:n.offset}}function FN(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?FN(n,r):Fte(n,r)}}function Fte(n,e){let t;for(t in e)if(BN.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function rC(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Wd({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Wd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Wd({start:e.start,end:e.end})+") is still open")}function Q5(n){const e=this;e.parser=t;function t(r){return _te(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const iC={}.hasOwnProperty;function $te(n,e){const t=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&iC.call(i,n)){const l=String(i[n]);o=iC.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const zte={}.hasOwnProperty;function $N(n,e){let t=-1,r;if(e.extensions)for(;++t<e.extensions.length;)$N(n,e.extensions[t]);for(r in e)if(zte.call(e,r))switch(r){case"extensions":break;case"unsafe":{sC(n[r],e[r]);break}case"join":{sC(n[r],e[r]);break}case"handlers":{Vte(n[r],e[r]);break}default:n.options[r]=e[r]}return n}function sC(n,e){e&&n.push(...e)}function Vte(n,e){e&&Object.assign(n,e)}function Hte(n,e,t,r){const i=t.enter("blockquote"),s=t.createTracker(r);s.move("> "),s.shift(2);const o=t.indentLines(t.containerFlow(n,s.current()),jte);return i(),o}function jte(n,e,t){return">"+(t?"":" ")+n}function zN(n,e){return oC(n,e.inConstruct,!0)&&!oC(n,e.notInConstruct,!1)}function oC(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function aC(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&zN(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function VN(n,e){const t=String(n);let r=t.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=t.indexOf(e,i);return o}function e3(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function Wte(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function qte(n,e,t,r){const i=Wte(t),s=n.value||"",o=i==="`"?"GraveAccent":"Tilde";if(e3(n,t)){const h=t.enter("codeIndented"),f=t.indentLines(s,Ute);return h(),f}const a=t.createTracker(r),l=i.repeat(Math.max(VN(s,i)+1,3)),u=t.enter("codeFenced");let c=a.move(l);if(n.lang){const h=t.enter(`codeFencedLang${o}`);c+=a.move(t.safe(n.lang,{before:c,after:" ",encode:["`"],...a.current()})),h()}if(n.lang&&n.meta){const h=t.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(t.safe(n.meta,{before:c,after:`
`,encode:["`"],...a.current()})),h()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function Ute(n,e,t){return(t?"":"    ")+n}function H6(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Gte(n,e,t,r){const i=H6(t),s=i==='"'?"Quote":"Apostrophe",o=t.enter("definition");let a=t.enter("label");const l=t.createTracker(r);let u=l.move("[");return u+=l.move(t.safe(t.associationId(n),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!n.url||/[\0- \u007F]/.test(n.url)?(a=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(n.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=t.enter("destinationRaw"),u+=l.move(t.safe(n.url,{before:u,after:n.title?" ":`
`,...l.current()}))),a(),n.title&&(a=t.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(t.safe(n.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function Kte(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Ol(n){return"&#x"+n.toString(16).toUpperCase()+";"}function ny(n,e,t){const r=kh(n),i=kh(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}HN.peek=Xte;function HN(n,e,t,r){const i=Kte(t),s=t.enter("emphasis"),o=t.createTracker(r),a=o.move(i);let l=o.move(t.containerPhrasing(n,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ny(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Ol(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=ny(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Ol(h));const d=o.move(i);return s(),t.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function Xte(n,e,t){return t.options.emphasis||"*"}const wv=function(n){if(n==null)return Qte;if(typeof n=="function")return Sv(n);if(typeof n=="object")return Array.isArray(n)?Yte(n):Jte(n);if(typeof n=="string")return Zte(n);throw new Error("Expected function, string, or object as test")};function Yte(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=wv(n[t]);return Sv(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Jte(n){const e=n;return Sv(t);function t(r){const i=r;let s;for(s in n)if(i[s]!==e[s])return!1;return!0}}function Zte(n){return Sv(e);function e(t){return t&&t.type===n}}function Sv(n){return e;function e(t,r,i){return!!(ene(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Qte(){return!0}function ene(n){return n!==null&&typeof n=="object"&&"type"in n}const jN=[],tne=!0,t3=!1,n3="skip";function j6(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const s=wv(i),o=r?-1:1;a(n,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=jN,p,m,g;if((!e||s(l,u,c[c.length-1]||void 0))&&(d=nne(t(l,c)),d[0]===t3))return d;if("children"in l&&l.children){const y=l;if(y.children&&d[0]!==n3)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===t3)return p;m=typeof p[1]=="number"?p[1]:m+o}}return d}}}function nne(n){return Array.isArray(n)?n:typeof n=="number"?[tne,n]:n==null?jN:[n]}function Fl(n,e,t,r){let i,s,o;typeof e=="function"&&typeof t!="function"?(s=void 0,o=e,i=t):(s=e,o=t,i=r),j6(n,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}function WN(n,e){let t=!1;return Fl(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,t3}),!!((!n.depth||n.depth<3)&&$6(n)&&(e.options.setext||t))}function rne(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),s=t.createTracker(r);if(WN(n,t)){const c=t.enter("headingSetext"),h=t.enter("phrasing"),f=t.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=t.enter("headingAtx"),l=t.enter("phrasing");s.move(o+" ");let u=t.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Ol(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,t.options.closeAtx&&(u+=" "+o),l(),a(),u}qN.peek=ine;function qN(n){return n.value||""}function ine(){return"<"}UN.peek=sne;function UN(n,e,t,r){const i=H6(t),s=i==='"'?"Quote":"Apostrophe",o=t.enter("image");let a=t.enter("label");const l=t.createTracker(r);let u=l.move("![");return u+=l.move(t.safe(n.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(a=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(n.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=t.enter("destinationRaw"),u+=l.move(t.safe(n.url,{before:u,after:n.title?" ":")",...l.current()}))),a(),n.title&&(a=t.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(t.safe(n.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function sne(){return"!"}GN.peek=one;function GN(n,e,t,r){const i=n.referenceType,s=t.enter("imageReference");let o=t.enter("label");const a=t.createTracker(r);let l=a.move("![");const u=t.safe(n.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=t.stack;t.stack=[],o=t.enter("reference");const h=t.safe(t.associationId(n),{before:l,after:"]",...a.current()});return o(),t.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function one(){return"!"}KN.peek=ane;function KN(n,e,t){let r=n.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<t.unsafe.length;){const o=t.unsafe[s],a=t.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function ane(){return"`"}function XN(n,e){const t=$6(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}YN.peek=lne;function YN(n,e,t,r){const i=H6(t),s=i==='"'?"Quote":"Apostrophe",o=t.createTracker(r);let a,l;if(XN(n,t)){const c=t.stack;t.stack=[],a=t.enter("autolink");let h=o.move("<");return h+=o.move(t.containerPhrasing(n,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),t.stack=c,h}a=t.enter("link"),l=t.enter("label");let u=o.move("[");return u+=o.move(t.containerPhrasing(n,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(t.safe(n.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=t.enter("destinationRaw"),u+=o.move(t.safe(n.url,{before:u,after:n.title?" ":")",...o.current()}))),l(),n.title&&(l=t.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(t.safe(n.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function lne(n,e,t){return XN(n,t)?"<":"["}JN.peek=une;function JN(n,e,t,r){const i=n.referenceType,s=t.enter("linkReference");let o=t.enter("label");const a=t.createTracker(r);let l=a.move("[");const u=t.containerPhrasing(n,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=t.stack;t.stack=[],o=t.enter("reference");const h=t.safe(t.associationId(n),{before:l,after:"]",...a.current()});return o(),t.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function une(){return"["}function W6(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function cne(n){const e=W6(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function hne(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ZN(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function fne(n,e,t,r){const i=t.enter("list"),s=t.bulletCurrent;let o=n.ordered?hne(t):W6(t);const a=n.ordered?o==="."?")":".":cne(t);let l=e&&t.bulletLastUsed?o===t.bulletLastUsed:!1;if(!n.ordered){const c=n.children?n.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(l=!0),ZN(t)===o&&c){let h=-1;for(;++h<n.children.length;){const f=n.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),t.bulletCurrent=o;const u=t.containerFlow(n,r);return t.bulletLastUsed=o,t.bulletCurrent=s,i(),u}function dne(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function pne(n,e,t,r){const i=dne(t);let s=t.bulletCurrent||W6(t);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(o=Math.ceil(o/4)*4);const a=t.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=t.enter("listItem"),u=t.indentLines(t.containerFlow(n,a.current()),c);return l(),u;function c(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function mne(n,e,t,r){const i=t.enter("paragraph"),s=t.enter("phrasing"),o=t.containerPhrasing(n,r);return s(),i(),o}const gne=wv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function yne(n,e,t,r){return(n.children.some(function(o){return gne(o)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function vne(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}QN.peek=bne;function QN(n,e,t,r){const i=vne(t),s=t.enter("strong"),o=t.createTracker(r),a=o.move(i+i);let l=o.move(t.containerPhrasing(n,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ny(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Ol(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=ny(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Ol(h));const d=o.move(i+i);return s(),t.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function bne(n,e,t){return t.options.strong||"*"}function xne(n,e,t,r){return t.safe(n.value,r)}function wne(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Sne(n,e,t){const r=(ZN(t)+(t.options.ruleSpaces?" ":"")).repeat(wne(t));return t.options.ruleSpaces?r.slice(0,-1):r}const q6={blockquote:Hte,break:aC,code:qte,definition:Gte,emphasis:HN,hardBreak:aC,heading:rne,html:qN,image:UN,imageReference:GN,inlineCode:KN,link:YN,linkReference:JN,list:fne,listItem:pne,paragraph:mne,root:yne,strong:QN,text:xne,thematicBreak:Sne},kne=[Cne];function Cne(n,e,t,r){if(e.type==="code"&&e3(e,r)&&(n.type==="list"||n.type===e.type&&e3(n,r)))return!1;if("spread"in t&&typeof t.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&WN(e,r))?void 0:t.spread?1:0}const Kl=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Tne=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Kl},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Kl},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Kl},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Kl},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Kl},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Kl},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Kl},{atBreak:!0,character:"~"}];function Ene(n){return n.label||!n.identifier?n.label||"":_N(n.identifier)}function Ane(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function Mne(n,e,t){const r=e.indexStack,i=n.children||[],s=[];let o=-1,a=t.before,l;r.push(-1);let u=e.createTracker(t);for(;++o<i.length;){const c=i[o];let h;if(r[r.length-1]=o,o+1<i.length){let p=e.handle.handlers[i[o+1].type];p&&p.peek&&(p=p.peek),h=p?p(i[o+1],n,e,{before:"",after:"",...u.current()}).charAt(0):""}else h=t.after;s.length>0&&(a==="\r"||a===`
`)&&c.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",u=e.createTracker(t),u.move(s.join("")));let f=e.handle(c,n,e,{...u.current(),after:h,before:a});l&&l===f.slice(0,1)&&(f=Ol(l.charCodeAt(0))+f.slice(1));const d=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,d&&(s.length>0&&d.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+Ol(a.charCodeAt(0))),d.after&&(l=h)),u.move(f),s.push(f),a=f.slice(-1)}return r.pop(),s.join("")}function One(n,e,t){const r=e.indexStack,i=n.children||[],s=e.createTracker(t),o=[];let a=-1;for(r.push(-1);++a<i.length;){const l=i[a];r[r.length-1]=a,o.push(s.move(e.handle(l,n,e,{before:`
`,after:`
`,...s.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),a<i.length-1&&o.push(s.move(Ine(l,i[a+1],n,e)))}return r.pop(),o.join("")}function Ine(n,e,t,r){let i=r.join.length;for(;i--;){const s=r.join[i](n,e,t,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const Dne=/\r?\n|\r/g;function Nne(n,e){const t=[];let r=0,i=0,s;for(;s=Dne.exec(n);)o(n.slice(r,s.index)),t.push(s[0]),r=s.index+s[0].length,i++;return o(n.slice(r)),t.join("");function o(a){t.push(e(a,i,!a))}}function Pne(n,e,t){const r=(t.before||"")+(e||"")+(t.after||""),i=[],s=[],o={};let a=-1;for(;++a<n.unsafe.length;){const c=n.unsafe[a];if(!zN(n.stack,c))continue;const h=n.compilePattern(c);let f;for(;f=h.exec(r);){const d="before"in c||!!c.atBreak,p="after"in c,m=f.index+(d?f[1].length:0);i.includes(m)?(o[m].before&&!d&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(i.push(m),o[m]={before:d,after:p})}}i.sort(Rne);let l=t.before?t.before.length:0;const u=r.length-(t.after?t.after.length:0);for(a=-1;++a<i.length;){const c=i[a];c<l||c>=u||c+1<u&&i[a+1]===c+1&&o[c].after&&!o[c+1].before&&!o[c+1].after||i[a-1]===c-1&&o[c].before&&!o[c-1].before&&!o[c-1].after||(l!==c&&s.push(lC(r.slice(l,c),"\\")),l=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!t.encode||!t.encode.includes(r.charAt(c)))?s.push("\\"):(s.push(Ol(r.charCodeAt(c))),l++))}return s.push(lC(r.slice(l,u),t.after)),s.join("")}function Rne(n,e){return n-e}function lC(n,e){const t=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],s=n+e;let o=-1,a=0,l;for(;l=t.exec(s);)r.push(l.index);for(;++o<r.length;)a!==r[o]&&i.push(n.slice(a,r[o])),i.push("\\"),a=r[o];return i.push(n.slice(a)),i.join("")}function Lne(n){const e=n||{},t=e.now||{};let r=e.lineShift||0,i=t.line||1,s=t.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:i,column:s},lineShift:r}}function a(u){r+=u}function l(u){const c=u||"",h=c.split(/\r?\n|\r/g),f=h[h.length-1];return i+=h.length-1,s=h.length===1?s+f.length:1+f.length+r,c}}function _ne(n,e){const t=e||{},r={associationId:Ene,containerPhrasing:zne,containerFlow:Vne,createTracker:Lne,compilePattern:Ane,enter:s,handlers:{...q6},handle:void 0,indentLines:Nne,indexStack:[],join:[...kne],options:{},safe:Hne,stack:[],unsafe:[...Tne]};$N(r,t),r.options.tightDefinitions&&r.join.push($ne),r.handle=$te("type",{invalid:Bne,unknown:Fne,handlers:r.handlers});let i=r.handle(n,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return r.stack.push(o),a;function a(){r.stack.pop()}}}function Bne(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function Fne(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function $ne(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function zne(n,e){return Mne(n,this,e)}function Vne(n,e){return One(n,this,e)}function Hne(n,e){return Pne(this,n,e)}function r3(n){const e=this;e.compiler=t;function t(r){return _ne(r,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function uC(n){if(n)throw n}var y4,cC;function jne(){if(cC)return y4;cC=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var c=n.call(u,"constructor"),h=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!h)return!1;var f;for(f in u);return typeof f>"u"||n.call(u,f)},o=function(u,c){t&&c.name==="__proto__"?t(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},a=function(u,c){if(c==="__proto__")if(n.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return y4=function l(){var u,c,h,f,d,p,m=arguments[0],g=1,y=arguments.length,v=!1;for(typeof m=="boolean"&&(v=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<y;++g)if(u=arguments[g],u!=null)for(c in u)h=a(m,c),f=a(u,c),m!==f&&(v&&f&&(s(f)||(d=i(f)))?(d?(d=!1,p=h&&i(h)?h:[]):p=h&&s(h)?h:{},o(m,{name:c,newValue:l(v,p,f)})):typeof f<"u"&&o(m,{name:c,newValue:f}));return m},y4}var Wne=jne();const v4=Py(Wne);function i3(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function qne(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=n[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?Une(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function Une(n,e){let t;return r;function r(...o){const a=n.length>o.length;let l;a&&o.push(i);try{l=n.apply(this,o)}catch(u){const c=u;if(a&&t)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){t||(t=!0,e(o,...a))}function s(o){i(null,o)}}class Ci extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Wd(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ci.prototype.file="";Ci.prototype.name="";Ci.prototype.reason="";Ci.prototype.message="";Ci.prototype.stack="";Ci.prototype.column=void 0;Ci.prototype.line=void 0;Ci.prototype.ancestors=void 0;Ci.prototype.cause=void 0;Ci.prototype.fatal=void 0;Ci.prototype.place=void 0;Ci.prototype.ruleId=void 0;Ci.prototype.source=void 0;const ro={basename:Gne,dirname:Kne,extname:Xne,join:Yne,sep:"/"};function Gne(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');vp(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,a=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(n.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function Kne(n){if(vp(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Xne(n){vp(n);let e=n.length,t=-1,r=0,i=-1,s=0,o;for(;e--;){const a=n.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function Yne(...n){let e=-1,t;for(;++e<n.length;)vp(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":Jne(t)}function Jne(n){vp(n);const e=n.codePointAt(0)===47;let t=Zne(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function Zne(n,e){let t="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=n.length;){if(o<n.length)a=n.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length>0){t="",r=0,i=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return t}function vp(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const Qne={cwd:ere};function ere(){return"/"}function s3(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function tre(n){if(typeof n=="string")n=new URL(n);else if(!s3(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return nre(n)}function nre(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const b4=["history","path","basename","stem","extname","dirname"];class rre{constructor(e){let t;e?s3(e)?t={path:e}:typeof e=="string"||ire(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":Qne.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<b4.length;){const s=b4[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)b4.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?ro.basename(this.path):void 0}set basename(e){w4(e,"basename"),x4(e,"basename"),this.path=ro.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ro.dirname(this.path):void 0}set dirname(e){hC(this.basename,"dirname"),this.path=ro.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ro.extname(this.path):void 0}set extname(e){if(x4(e,"extname"),hC(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ro.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){s3(e)&&(e=tre(e)),w4(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ro.basename(this.path,this.extname):void 0}set stem(e){w4(e,"stem"),x4(e,"stem"),this.path=ro.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Ci(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function x4(n,e){if(n&&n.includes(ro.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ro.sep+"`")}function w4(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function hC(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ire(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const sre=function(n){const r=this.constructor.prototype,i=r[n],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},ore={}.hasOwnProperty;class U6 extends sre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qne()}copy(){const e=new U6;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(v4(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(C4("data",this.frozen),this.namespace[e]=t,this):ore.call(this.namespace,e)&&this.namespace[e]||void 0:e?(C4("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Cm(e),r=this.parser||this.Parser;return S4("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),S4("process",this.parser||this.Parser),k4("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(s,o){const a=Cm(e),l=r.parse(a);r.run(l,a,function(c,h,f){if(c||!h||!f)return u(c);const d=h,p=r.stringify(d,f);lre(p)?f.value=p:f.result=p,u(c,f)});function u(c,h){c||!h?o(c):s?s(h):t(void 0,h)}}}processSync(e){let t=!1,r;return this.freeze(),S4("processSync",this.parser||this.Parser),k4("processSync",this.compiler||this.Compiler),this.process(e,i),dC("processSync","process",t),r;function i(s,o){t=!0,uC(s),r=o}}run(e,t,r){fC(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Cm(t);i.run(e,l,u);function u(c,h,f){const d=h||e;c?a(c):o?o(d):r(void 0,d,f)}}}runSync(e,t){let r=!1,i;return this.run(e,t,s),dC("runSync","run",r),i;function s(o,a){uC(o),i=a,r=!0}}stringify(e,t){this.freeze();const r=Cm(t),i=this.compiler||this.Compiler;return k4("stringify",i),fC(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(C4("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=v4(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[d,...p]=c;const m=r[f][1];i3(m)&&i3(d)&&(d=v4(!0,m,d)),r[f]=[u,d,...p]}}}}const o3=new U6().freeze();function S4(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function k4(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function C4(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fC(n){if(!i3(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function dC(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Cm(n){return are(n)?n:new rre(n)}function are(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function lre(n){return typeof n=="string"||ure(n)}function ure(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var eP=n=>{throw TypeError(n)},tP=(n,e,t)=>e.has(n)||eP("Cannot "+t),wt=(n,e,t)=>(tP(n,e,"read from private field"),t?t.call(n):e.get(n)),Vn=(n,e,t)=>e.has(n)?eP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),rn=(n,e,t,r)=>(tP(n,e,"write to private field"),e.set(n,t),t),to,Zf,O1,I1,D1,Qf,ed,Ho,td,N1,P1,nd,R1,rd,L1,_1,Ac,su,B1,id;class nP{}class rP{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{this.top()?.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw mN();return e}}}class G6 extends nP{constructor(e,t,r){super(),this.type=e,this.content=t,this.attrs=r}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,r){return new G6(e,t,r)}}const a3=class extends rP{constructor(e){super(),Vn(this,to),Vn(this,Zf),Vn(this,O1),Vn(this,I1),Vn(this,D1),Vn(this,Qf),Vn(this,ed),rn(this,to,yt.none),rn(this,Zf,t=>t.isText),rn(this,O1,(t,r)=>{if(wt(this,Zf).call(this,t)&&wt(this,Zf).call(this,r)&&yt.sameSet(t.marks,r.marks))return this.schema.text(t.text+r.text,t.marks)}),rn(this,I1,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(t));if(!r)throw sQ(t);return r}),rn(this,D1,t=>{const r=wt(this,I1).call(this,t);r.spec.parseMarkdown.runner(this,t,r)}),this.injectRoot=(t,r,i)=>(this.openNode(r,i),this.next(t.children),this),this.openNode=(t,r)=>(this.open(G6.create(t,[],r)),this),rn(this,Qf,()=>{rn(this,to,yt.none);const t=this.close();return wt(this,ed).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>{try{wt(this,Qf).call(this)}catch(t){console.error(t)}return this},rn(this,ed,(t,r,i)=>{const s=t.createAndFill(r,i,wt(this,to));if(!s)throw iQ(t,r,i);return this.push(s),s}),this.addNode=(t,r,i)=>{try{wt(this,ed).call(this,t,r,i)}catch(s){console.error(s)}return this},this.openMark=(t,r)=>{const i=t.create(r);return rn(this,to,i.addToSet(wt(this,to))),this},this.closeMark=t=>(rn(this,to,t.removeFromSet(wt(this,to))),this),this.addText=t=>{try{const r=this.top();if(!r)throw mN();const i=r.pop(),s=this.schema.text(t,wt(this,to));if(!i)return r.push(s),this;const o=wt(this,O1).call(this,i,s);return o?(r.push(o),this):(r.push(i,s),this)}catch(r){return console.error(r),this}},this.build=()=>{let t;do t=wt(this,Qf).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(r=>wt(this,D1).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(t,r)=>{const i=t.runSync(t.parse(r),r);return this.next(i),this},this.schema=e}};to=new WeakMap;Zf=new WeakMap;O1=new WeakMap;I1=new WeakMap;D1=new WeakMap;Qf=new WeakMap;ed=new WeakMap;a3.create=(n,e)=>{const t=new a3(n);return r=>(t.run(e,r),t.toDoc())};let cre=a3;const l3=class extends nP{constructor(e,t,r,i={}){super(),this.type=e,this.children=t,this.value=r,this.props=i,this.push=(s,...o)=>{this.children||(this.children=[]),this.children.push(s,...o)},this.pop=()=>this.children?.pop()}};l3.create=(n,e,t,r={})=>new l3(n,e,t,r);let pC=l3;const hre=n=>Object.prototype.hasOwnProperty.call(n,"size"),u3=class extends rP{constructor(e){super(),Vn(this,Ho),Vn(this,td),Vn(this,N1),Vn(this,P1),Vn(this,nd),Vn(this,R1),Vn(this,rd),Vn(this,L1),Vn(this,_1),Vn(this,Ac),Vn(this,su),Vn(this,B1),Vn(this,id),rn(this,Ho,yt.none),rn(this,td,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(t));if(!r)throw oQ(t.type);return r}),rn(this,N1,t=>wt(this,td).call(this,t).spec.toMarkdown.runner(this,t)),rn(this,P1,(t,r)=>wt(this,td).call(this,t).spec.toMarkdown.runner(this,t,r)),rn(this,nd,t=>{const{marks:r}=t,i=a=>a.type.spec.priority??50;[...r].sort((a,l)=>i(a)-i(l)).every(a=>!wt(this,P1).call(this,a,t))&&wt(this,N1).call(this,t),r.forEach(a=>wt(this,id).call(this,a))}),rn(this,R1,(t,r)=>{if(t.type===r||t.children?.length!==1)return t;const i=l=>{if(l.type===r)return l;if(l.children?.length!==1)return null;const[u]=l.children;return u?i(u):null},s=i(t);if(!s)return t;const o=s.children?[...s.children]:void 0,a={...t,children:o};return a.children=o,s.children=[a],s}),rn(this,rd,t=>{const{children:r}=t;return r&&(t.children=r.reduce((i,s,o)=>{if(o===0)return[s];const a=i.at(-1);if(a&&a.isMark&&s.isMark){s=wt(this,R1).call(this,s,a.type);const{children:l,...u}=s,{children:c,...h}=a;if(s.type===a.type&&l&&c&&JSON.stringify(u)===JSON.stringify(h)){const f={...h,children:[...c,...l]};return i.slice(0,-1).concat(wt(this,rd).call(this,f))}}return i.concat(s)},[])),t}),rn(this,L1,t=>{const r={...t.props,type:t.type};return t.children&&(r.children=t.children),t.value&&(r.value=t.value),r}),this.openNode=(t,r,i)=>(this.open(pC.create(t,void 0,r,i)),this),rn(this,_1,(t,r)=>{let i="",s="";const o=t.children;let a=-1,l=-1;const u=h=>{h&&h.forEach((f,d)=>{f.type==="text"&&f.value&&(a<0&&(a=d),l=d)})};if(o){u(o);const h=o?.[l],f=o?.[a];if(h&&h.value.endsWith(" ")){const d=h.value,p=d.trimEnd();s=d.slice(p.length),h.value=p}if(f&&f.value.startsWith(" ")){const d=f.value,p=d.trimStart();i=d.slice(0,d.length-p.length),f.value=p}}i.length&&wt(this,su).call(this,"text",void 0,i);const c=r();return s.length&&wt(this,su).call(this,"text",void 0,s),c}),rn(this,Ac,(t=!1)=>{const r=this.close(),i=()=>wt(this,su).call(this,r.type,r.children,r.value,r.props);return t?wt(this,_1).call(this,r,i):i()}),this.closeNode=()=>(wt(this,Ac).call(this),this),rn(this,su,(t,r,i,s)=>{const o=pC.create(t,r,i,s),a=wt(this,rd).call(this,wt(this,L1).call(this,o));return this.push(a),a}),this.addNode=(t,r,i,s)=>(wt(this,su).call(this,t,r,i,s),this),rn(this,B1,(t,r,i,s)=>t.isInSet(wt(this,Ho))?this:(rn(this,Ho,t.addToSet(wt(this,Ho))),this.openNode(r,i,{...s,isMark:!0}))),rn(this,id,t=>{t.isInSet(wt(this,Ho))&&(rn(this,Ho,t.type.removeFromSet(wt(this,Ho))),wt(this,Ac).call(this,!0))}),this.withMark=(t,r,i,s)=>(wt(this,B1).call(this,t,r,i,s),this),this.closeMark=t=>(wt(this,id).call(this,t),this),this.build=()=>{let t=null;do t=wt(this,Ac).call(this);while(this.size());return t},this.next=t=>hre(t)?(t.forEach(r=>{wt(this,nd).call(this,r)}),this):(wt(this,nd).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=e}};Ho=new WeakMap;td=new WeakMap;N1=new WeakMap;P1=new WeakMap;nd=new WeakMap;R1=new WeakMap;rd=new WeakMap;L1=new WeakMap;_1=new WeakMap;Ac=new WeakMap;su=new WeakMap;B1=new WeakMap;id=new WeakMap;u3.create=(n,e)=>{const t=new u3(n);return r=>(t.run(r),t.toString(e))};let fre=u3;const K6=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function iP(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const sP=(n,e,t)=>{let r=iP(n,t);if(!r)return!1;let i=X6(r);if(!i){let o=r.blockRange(),a=o&&hv(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(uP(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Ch(s,"end")||Ye.isSelectable(s)))for(let o=r.depth;;o--){let a=dv(n.doc,r.before(o),r.after(o),Ce.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Ch(s,"end")?it.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Ye.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},dre=(n,e,t)=>{let r=iP(n,t);if(!r)return!1;let i=X6(r);return i?pre(n,i,e):!1};function pre(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=dv(n.doc,s,l,Ce.empty);if(!u||u.from!=s||u instanceof or&&u.slice.size>=l-s)return!1;if(t){let c=n.tr.step(u);c.setSelection(Be.create(c.doc,s)),t(c.scrollIntoView())}return!0}function Ch(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const oP=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=X6(r)}let o=s&&s.nodeBefore;return!o||!Ye.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Ye.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function X6(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function mre(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const gre=(n,e,t)=>{let r=mre(n,t);if(!r)return!1;let i=aP(r);if(!i)return!1;let s=i.nodeAfter;if(uP(n,i,e,1))return!0;if(r.parent.content.size==0&&(Ch(s,"start")||Ye.isSelectable(s))){let o=dv(n.doc,r.before(),r.after(),Ce.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Ch(s,"start")?it.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Ye.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},yre=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=aP(r)}let o=s&&s.nodeAfter;return!o||!Ye.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Ye.create(n.doc,s.pos)).scrollIntoView()),!0)};function aP(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const vre=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Y6(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const lP=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=Y6(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(it.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},bre=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof xi||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Y6(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},xre=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Hd(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&hv(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function wre(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ye&&e.selection.node.isBlock)return!r.parentOffset||!Hd(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,u=!1;for(let d=r.depth;;d--)if(r.node(d).isBlock){l=r.end(d)==r.pos+(r.depth-d),u=r.start(d)==r.pos-(r.depth-d),a=Y6(r.node(d-1).contentMatchAt(r.indexAfter(d-1))),s.unshift(l&&a?{type:a}:null),o=d;break}else{if(d==1)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof Be||e.selection instanceof xi)&&c.deleteSelection();let h=c.mapping.map(r.pos),f=Hd(c.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=Hd(c.doc,h,s.length,s)),!f)return!1;if(c.split(h,s.length,s),!l&&u&&r.node(o).type!=a){let d=c.mapping.map(r.before(o)),p=c.doc.resolve(d);a&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&c.setNodeMarkup(c.mapping.map(r.before(o)),a)}return t&&t(c.scrollIntoView()),!0}}const Sre=wre(),kre=(n,e)=>(e&&e(n.tr.setSelection(new xi(n.doc))),!0);function Cre(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||fv(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function uP(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Cre(n,e,t))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let d=e.pos+s.nodeSize,p=se.empty;for(let y=o.length-1;y>=0;y--)p=se.from(o[y].create(null,p));p=se.from(i.copy(p));let m=n.tr.step(new Br(e.pos-1,d,e.pos,d,new Ce(p,1,0),o.length,!0)),g=m.doc.resolve(d+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&fv(m.doc,g.pos)&&m.join(g.pos),t(m.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:it.findFrom(e,1),h=c&&c.$from.blockRange(c.$to),f=h&&hv(h);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(h,f).scrollIntoView()),!0;if(u&&Ch(s,"start",!0)&&Ch(i,"end")){let d=i,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(t){let y=se.empty;for(let x=p.length-1;x>=0;x--)y=se.from(p[x].copy(y));let v=n.tr.step(new Br(e.pos-p.length,e.pos+s.nodeSize,e.pos+g,e.pos+s.nodeSize-g,new Ce(y,p.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function cP(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Be.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const Tre=cP(-1),Ere=cP(1);function J6(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&P6(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function N0(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let c=t.doc.resolve(u),h=c.index();i=c.parent.canReplaceWith(h,h+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}r(s.scrollIntoView())}return!0}}function Are(n,e,t,r){for(let i=0;i<e.length;i++){let{$from:s,$to:o}=e[i],a=s.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(s.pos,o.pos,(l,u)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(t)}),a)return!0}return!1}function kv(n,e=null,t){return function(r,i){let{empty:s,$cursor:o,ranges:a}=r.selection;if(s&&!o||!Are(r.doc,a,n))return!1;if(i)if(o)n.isInSet(r.storedMarks||o.marks())?i(r.tr.removeStoredMark(n)):i(r.tr.addStoredMark(n.create(e)));else{let l,u=r.tr;l=!a.some(c=>r.doc.rangeHasMark(c.$from.pos,c.$to.pos,n));for(let c=0;c<a.length;c++){let{$from:h,$to:f}=a[c];if(!l)u.removeMark(h.pos,f.pos,n);else{let d=h.pos,p=f.pos,m=h.nodeAfter,g=f.nodeBefore,y=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,v=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;d+y<p&&(d+=y,p-=v),u.addMark(d,p,n.create(e))}}i(u.scrollIntoView())}return!0}}function Wh(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let T4=Wh(K6,sP,oP),mC=Wh(K6,gre,yre);const Ko={Enter:Wh(vre,bre,xre,Sre),"Mod-Enter":lP,Backspace:T4,"Mod-Backspace":T4,"Shift-Backspace":T4,Delete:mC,"Mod-Delete":mC,"Mod-a":kre},hP={"Ctrl-h":Ko.Backspace,"Alt-Backspace":Ko["Mod-Backspace"],"Ctrl-d":Ko.Delete,"Ctrl-Alt-Backspace":Ko["Mod-Delete"],"Alt-Delete":Ko["Mod-Delete"],"Alt-d":Ko["Mod-Delete"],"Ctrl-a":Tre,"Ctrl-e":Ere};for(let n in Ko)hP[n]=Ko[n];const Mre=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Ore=Mre?hP:Ko,Ire=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Dre=typeof navigator<"u"&&/Win/.test(navigator.platform);function Nre(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Ire?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function Pre(n){let e=Object.create(null);for(let t in n)e[Nre(t)]=n[t];return e}function E4(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function fP(n){return new gn({props:{handleKeyDown:Z6(n)}})}function Z6(n){let e=Pre(n);return function(t,r){let i=eI(r),s,o=e[E4(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[E4(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Dre&&r.ctrlKey&&r.altKey)&&(s=ba[r.keyCode])&&s!=i){let a=e[E4(s,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const br=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Th=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let c3=null;const Go=function(n,e,t){let r=c3||(c3=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Rre=function(){c3=null},Qu=function(n,e,t,r){return t&&(gC(n,e,t,r,-1)||gC(n,e,t,r,1))},Lre=/^(img|br|input|textarea|hr)$/i;function gC(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:rs(n))){let o=n.parentNode;if(!o||o.nodeType!=1||bp(n)||Lre.test(n.nodeName)||n.contentEditable=="false")return!1;e=br(n)+(i<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=o,e=i<0?rs(n):0}else return!1}}function rs(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function _re(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=rs(n)}else if(n.parentNode&&!bp(n))e=br(n),n=n.parentNode;else return null}}function Bre(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!bp(n))e=br(n)+1,n=n.parentNode;else return null}}function Fre(n,e,t){for(let r=e==0,i=e==rs(n);r||i;){if(n==t)return!0;let s=br(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==rs(n)}}function bp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Cv=function(n){return n.focusNode&&Qu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function fu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function $re(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function zre(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(rs(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(rs(r.startContainer),r.startOffset)}}}const xo=typeof navigator<"u"?navigator:null,yC=typeof document<"u"?document:null,$l=xo&&xo.userAgent||"",h3=/Edge\/(\d+)/.exec($l),dP=/MSIE \d/.exec($l),f3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($l),wi=!!(dP||f3||h3),yl=dP?document.documentMode:f3?+f3[1]:h3?+h3[1]:0,js=!wi&&/gecko\/(\d+)/i.test($l);js&&+(/Firefox\/(\d+)/.exec($l)||[0,0])[1];const d3=!wi&&/Chrome\/(\d+)/.exec($l),Rr=!!d3,pP=d3?+d3[1]:0,Jr=!wi&&!!xo&&/Apple Computer/.test(xo.vendor),Eh=Jr&&(/Mobile\/\w+/.test($l)||!!xo&&xo.maxTouchPoints>2),Qi=Eh||(xo?/Mac/.test(xo.platform):!1),Vre=xo?/Win/.test(xo.platform):!1,ia=/Android \d/.test($l),xp=!!yC&&"webkitFontSmoothing"in yC.documentElement.style,Hre=xp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jre(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Bo(n,e){return typeof n=="number"?n:n[e]}function Wre(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function vC(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=Th(o);continue}let a=o,l=a==s.body,u=l?jre(s):Wre(a),c=0,h=0;if(e.top<u.top+Bo(r,"top")?h=-(u.top-e.top+Bo(i,"top")):e.bottom>u.bottom-Bo(r,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+Bo(i,"top")-u.top:e.bottom-u.bottom+Bo(i,"bottom")),e.left<u.left+Bo(r,"left")?c=-(u.left-e.left+Bo(i,"left")):e.right>u.right-Bo(r,"right")&&(c=e.right-u.right+Bo(i,"right")),c||h)if(l)s.defaultView.scrollBy(c,h);else{let d=a.scrollLeft,p=a.scrollTop;h&&(a.scrollTop+=h),c&&(a.scrollLeft+=c);let m=a.scrollLeft-d,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Th(o)}}function qre(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:mP(n.dom)}}function mP(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Th(r));return e}function Ure({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;gP(t,r==0?0:r-e)}function gP(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let xc=null;function Gre(n){if(n.setActive)return n.setActive();if(xc)return n.focus(xc);let e=mP(n);n.focus(xc==null?{get preventScroll(){return xc={preventScroll:!0},!0}}:void 0),xc||(xc=!1,gP(e,0))}function yP(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let c=n.firstChild,h=0;c;c=c.nextSibling,h++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Go(c).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=c,r=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!t&&l&&(t=l,i=u,r=0),t&&t.nodeType==3?Kre(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:yP(t,i)}function Kre(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=ja(r,1);if(s.top!=s.bottom&&Q6(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Q6(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Xre(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Yre(n,e,t){let{node:r,offset:i}=yP(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function Jre(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function vP(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Q6(e,u))return vP(o,e,u)}}if((s=(s+1)%r)==i)break}return n}function Zre(n,e){let t=n.dom.ownerDocument,r,i=0,s=zre(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=n.dom.getBoundingClientRect();if(!Q6(e,u)||(o=vP(n.dom,e,u),!o))return null}if(Jr)for(let u=o;r&&u;u=Th(u))u.draggable&&(r=void 0);if(o=Xre(o,e),r){if(js&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],h;c.nodeName=="IMG"&&(h=c.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;xp&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=Jre(n,r,i,e))}a==null&&(a=Yre(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function bC(n){return n.top<n.bottom||n.left<n.right}function ja(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(bC(r))return r}return Array.prototype.find.call(t,bC)||n.getBoundingClientRect()}const Qre=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bP(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=xp||js;if(r.nodeType==3)if(o&&(Qre.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=ja(Go(r,i,i),t);if(js&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=ja(Go(r,i-1,i-1),-1);if(u.top==l.top){let c=ja(Go(r,i,i+1),-1);if(c.top!=l.top)return Of(c,c.left<u.left)}}return l}else{let l=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(l--,c=1):t<0?l--:u++,Of(ja(Go(r,l,u),c),c<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==rs(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return A4(l.getBoundingClientRect(),!1)}if(s==null&&i<rs(r)){let l=r.childNodes[i];if(l.nodeType==1)return A4(l.getBoundingClientRect(),!0)}return A4(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==rs(r))){let l=r.childNodes[i-1],u=l.nodeType==3?Go(l,rs(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Of(ja(u,1),!1)}if(s==null&&i<rs(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Go(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Of(ja(u,-1),!0)}return Of(ja(r.nodeType==3?Go(r):r,-t),t>=0)}function Of(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function A4(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function xP(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function eie(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return xP(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=bP(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Go(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(t=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const tie=/[\u0590-\u08ac]/;function nie(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return a?!tie.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:xP(n,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:h}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",t,"character");let d=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,h),l&&(l!=c||u!=h)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}let xC=null,wC=null,SC=!1;function rie(n,e,t){return xC==e&&wC==t?SC:(xC=e,wC=t,SC=t=="up"||t=="down"?eie(n,e,t):nie(n,e,t))}const ds=0,kC=1,vu=2,wo=3;class wp{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=ds,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>br(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof SP){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof wP&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?br(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?br(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let c=o+l.border;if(e>=c&&t<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,c);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=br(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>t||a==this.children.length-1)){t=u;for(let c=a+1;c<this.children.length;c++){let h=this.children[c];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=br(h.dom);break}t+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let d=0,p=0;d<this.children.length;d++){let m=this.children[d],g=p+m.size;if(s>p&&o<g)return m.setSelection(e-p-m.border,t-p-m.border,r,i);p=g}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),h=!1;if((js||Jr)&&e==t){let{node:d,offset:p}=a;if(d.nodeType==3){if(h=!!(p&&d.nodeValue[p-1]==`
`),h&&p==d.nodeValue.length)for(let m=d,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:br(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=d.childNodes[p-1];h=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(js&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||h&&Jr)&&Qu(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Qu(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==t)&&!h){u.collapse(a.node,a.offset);try{e!=t&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>t){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?vu:kC,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=wo:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?vu:wo}r=o}this.dirty=vu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?vu:kC;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class wP extends wp{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==ds&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class iie extends wp{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ec extends wp{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=nc.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new ec(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&wo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ds){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ds}}slice(e,t,r){let i=ec.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=m3(s,t,o,r)),e>0&&(s=m3(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class vl extends wp{constructor(e,t,r,i,s,o,a,l,u){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,u=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,h=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:h}=nc.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!h&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let f=c;return c=TP(c,r,t),u?l=new sie(e,t,r,i,c,h||null,f,u,s,o+1):t.isText?new Tv(e,t,r,i,c,f,s):new vl(e,t,r,i,c,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>se.empty)}return e}matchesNode(e,t,r){return this.dirty==ds&&e.eq(this.node)&&ry(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new aie(this,o&&o.node,e);cie(this.node,this.innerDeco,(u,c,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!h&&l.syncToMarks(c==this.node.childCount?yt.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,h,f)=>{l.syncToMarks(u.marks,r,e);let d;l.findNodeMatch(u,c,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,c,h,d,e)||l.updateNextNode(u,c,h,e,f,i)||l.addNode(u,c,h,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==vu)&&(o&&this.protectLocalComposition(e,o),kP(this.contentDOM,this.children,e),Eh&&hie(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=fie(this.node.content,o,r-t,i-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new iie(this,s,t,i);e.input.compositionNodes.push(o),this.children=m3(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==wo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ds}updateOuterDeco(e){if(ry(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=CP(this.dom,this.nodeDOM,p3(this.outerDeco,this.node,t),p3(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function CC(n,e,t,r,i){TP(r,e,n);let s=new vl(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Tv extends vl{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==wo||this.dirty!=ds&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ds||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ds,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new Tv(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=wo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class SP extends wp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ds&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sie extends vl{constructor(e,t,r,i,s,o,a,l,u,c){super(e,t,r,i,s,o,a,u,c),this.spec=l}update(e,t,r,i){if(this.dirty==wo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function kP(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=TC(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof ec){let l=r?r.previousSibling:n.lastChild;kP(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=TC(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const qd=function(n){n&&(this.nodeName=n)};qd.prototype=Object.create(null);const bu=[new qd];function p3(n,e,t){if(n.length==0)return bu;let r=t?bu[0]:new qd,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new qd(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new qd(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function CP(n,e,t,r){if(t==bu&&r==bu)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=bu[0]),i=l}oie(i,a||bu[0],o)}return i}function oie(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function TP(n,e,t){return CP(n,n,bu,p3(e,t,n.nodeType!=1))}function ry(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function TC(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class aie{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=lie(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ds,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ec.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==wo&&o.dom==o.contentDOM&&(o.dirty=vu),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof vl){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let c=l.dom,h,f=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=wo&&ry(t,l.outerDeco));if(!f&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,t,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=vu,h.updateChildren(i,o+1),h.dirty=ds),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ry(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=vl.create(this.top,t,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,s){let o=vl.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new wP(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ec;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Tv)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jr||Rr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new SP(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function lie(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=t.children[r-1];if(u instanceof ec)t=u,r=u.children.length;else{a=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function uie(n,e){return n.type.side-e.type.side}function cie(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(c?(h||(h=[c])).push(g):c=g)}if(c)if(h){h.sort(uie);for(let g=0;g<h.length;g++)t(h[g],u,!!l)}else t(c,u,!!l);let f,d;if(l)d=-1,f=l,l=null;else if(u<n.childCount)d=u,f=n.child(u++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,d=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,m,e.forChild(s,f),d),s=p}}function hie(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function fie(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let u=n.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=t){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=t)return a+u;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function m3(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],u=a,c=a+=l.size;u>=t||c<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>t&&s.push(l.slice(t-u,l.size,r)))}return s}function ex(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(Cv(t)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Ye.isSelectable(h)&&i.parent&&!(h.isInline&&Fre(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;u=new Ye(o==f?a:r.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let h=o,f=o;for(let d=0;d<t.rangeCount;d++){let p=t.getRangeAt(d);h=Math.min(h,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[l,o]=f==n.state.selection.anchor?[f,h]:[h,f],a=r.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let h=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;u=tx(n,c,a,h)}return u}function EP(n){return n.editable?n.hasFocus():MP(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function da(n,e=!1){let t=n.state.selection;if(AP(n,t),!!EP(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Rr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Qu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)pie(n);else{let{anchor:r,head:i}=t,s,o;EC&&!(t instanceof Be)&&(t.$from.parent.inlineContent||(s=AC(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=AC(n,t.to))),n.docView.setSelection(r,i,n,e),EC&&(s&&MC(s),o&&MC(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&die(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const EC=Jr||Rr&&pP<63;function AC(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Jr&&i&&i.contentEditable=="false")return M4(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return M4(i);if(s)return M4(s)}}function M4(n){return n.contentEditable="true",Jr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function MC(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function die(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!EP(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function pie(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,br(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&wi&&yl<=11&&(r.disabled=!0,r.disabled=!1)}function AP(n,e){if(e instanceof Ye){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(OC(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else OC(n)}function OC(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function tx(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Be.between(e,t,r)}function IC(n){return n.editable&&!n.hasFocus()?!1:MP(n)}function MP(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function mie(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Qu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function g3(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&it.findFrom(s,e)}function Za(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function DC(n,e,t){let r=n.state.selection;if(r instanceof Be)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Za(n,new Be(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=g3(n.state,e);return i&&i instanceof Ye?Za(n,i):!1}else if(!(Qi&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Ye.isSelectable(s)?Za(n,new Ye(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):xp?Za(n,new Be(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ye&&r.node.isInline)return Za(n,new Be(e>0?r.$to:r.$from));{let i=g3(n.state,e);return i?Za(n,i):!1}}}function iy(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ud(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function wc(n,e){return e<0?gie(n):yie(n)}function gie(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(js&&t.nodeType==1&&r<iy(t)&&Ud(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Ud(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(OP(t))break;{let a=t.previousSibling;for(;a&&Ud(a,-1);)i=t.parentNode,s=br(a),a=a.previousSibling;if(a)t=a,r=iy(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?y3(n,t,r):i&&y3(n,i,s)}function yie(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=iy(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Ud(a,1))s=t,o=++r;else break}else{if(OP(t))break;{let a=t.nextSibling;for(;a&&Ud(a,1);)s=a.parentNode,o=br(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=iy(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&y3(n,s,o)}function OP(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function vie(n,e){for(;n&&e==n.childNodes.length&&!bp(n);)e=br(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function bie(n,e){for(;n&&!e&&!bp(n);)e=br(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function y3(n,e,t){if(e.nodeType!=3){let s,o;(o=vie(e,t))?(e=o,t=0):(s=bie(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Cv(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&da(n)},50)}function NC(n,e){let t=n.state.doc.resolve(e);if(!(Rr||Vre)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function PC(n,e,t){let r=n.state.selection;if(r instanceof Be&&!r.empty||t.indexOf("s")>-1||Qi&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=g3(n.state,e);if(o&&o instanceof Ye)return Za(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof xi?it.near(o,e):it.findFrom(o,e);return a?Za(n,a):!1}return!1}function RC(n,e){if(!(n.state.selection instanceof Be))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function LC(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function xie(n){if(!Jr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;LC(n,r,"true"),setTimeout(()=>LC(n,r,"false"),20)}return!1}function wie(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Sie(n,e){let t=e.keyCode,r=wie(e);if(t==8||Qi&&t==72&&r=="c")return RC(n,-1)||wc(n,-1);if(t==46&&!e.shiftKey||Qi&&t==68&&r=="c")return RC(n,1)||wc(n,1);if(t==13||t==27)return!0;if(t==37||Qi&&t==66&&r=="c"){let i=t==37?NC(n,n.state.selection.from)=="ltr"?-1:1:-1;return DC(n,i,r)||wc(n,i)}else if(t==39||Qi&&t==70&&r=="c"){let i=t==39?NC(n,n.state.selection.from)=="ltr"?1:-1:1;return DC(n,i,r)||wc(n,i)}else{if(t==38||Qi&&t==80&&r=="c")return PC(n,-1,r)||wc(n,-1);if(t==40||Qi&&t==78&&r=="c")return xie(n)||PC(n,1,r)||wc(n,1);if(r==(Qi?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function nx(n,e){n.someProp("transformCopied",d=>{e=d(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let d=r.firstChild;t.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),r=d.content}let o=n.someProp("clipboardSerializer")||nc.fromSchema(n.state.schema),a=LP(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,h=0;for(;u&&u.nodeType==1&&(c=RP[u.nodeName.toLowerCase()]);){for(let d=c.length-1;d>=0;d--){let p=a.createElement(c[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",d=>d(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function IP(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n)}),s)return e?new Ce(se.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ce.empty;let h=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(h)a=h;else{let f=i.marks(),{schema:d}=n.state,p=nc.fromSchema(d);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(d.text(m,f)))})}}else n.someProp("transformPastedHTML",h=>{t=h(t,n)}),o=Eie(t),xp&&Aie(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let h=+c[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Yu.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!kie.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Mie(_C(a,+c[1],+c[2]),c[4]);else if(a=Ce.maxOpen(Cie(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let d=a.content.firstChild;h<a.openStart&&!d.type.spec.isolating;h++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=_C(a,h,f)}return n.someProp("transformPasted",h=>{a=h(a,n)}),a}const kie=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Cie(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&NP(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=PP(o[o.length-1],s.length));let c=DP(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return se.from(o)}return n}function DP(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,se.from(n));return n}function NP(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=NP(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(se.from(DP(t,n,i+1))))}}function PP(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,PP(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(se.empty,!0);return n.copy(t.append(r))}function v3(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=v3(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(se.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function _C(n,e,t){return e<n.openStart&&(n=new Ce(v3(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ce(v3(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const RP={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let BC=null;function LP(){return BC||(BC=document.implementation.createHTMLDocument("title"))}let O4=null;function Tie(n){let e=window.trustedTypes;return e?(O4||(O4=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),O4.createHTML(n)):n}function Eie(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=LP().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&RP[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=Tie(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function Aie(n){let e=n.querySelectorAll(Rr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Mie(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=se.from(l.create(r[a+1],i)),s++,o++}return new Ce(i,s,o)}const Zr={},Qr={},Oie={touchstart:!0,touchmove:!0};class Iie{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Die(n){for(let e in Zr){let t=Zr[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Pie(n,r)&&!rx(n,r)&&(n.editable||!(r.type in Qr))&&t(n,r)},Oie[e]?{passive:!0}:void 0)}Jr&&n.dom.addEventListener("input",()=>null),b3(n)}function dl(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Nie(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function b3(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>rx(n,r))})}function rx(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Pie(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Rie(n,e){!rx(n,e)&&Zr[e.type]&&(n.editable||!(e.type in Qr))&&Zr[e.type](n,e)}Qr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!BP(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ia&&Rr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Eh&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,fu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Sie(n,t)?t.preventDefault():dl(n,"key")};Qr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Qr.keypress=(n,e)=>{let t=e;if(BP(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Qi&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function Ev(n){return{left:n.clientX,top:n.clientY}}function Lie(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ix(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Yc(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function _ie(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ye.isSelectable(r)?(Yc(n,new Ye(t)),!0):!1}function Bie(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Ye&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Ye.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Yc(n,Ye.create(n.state.doc,i)),!0):!1}function Fie(n,e,t,r,i){return ix(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?Bie(n,t):_ie(n,t))}function $ie(n,e,t,r){return ix(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function zie(n,e,t,r){return ix(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||Vie(n,t,r)}function Vie(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Yc(n,Be.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Yc(n,Be.create(r,a+1,a+1+o.content.size));else if(Ye.isSelectable(o))Yc(n,Ye.create(r,a));else continue;return!0}}function sx(n){return sy(n)}const _P=Qi?"metaKey":"ctrlKey";Zr.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=sx(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&Lie(t,n.input.lastClick)&&!t[_P]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let o=n.posAtCoords(Ev(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Hie(n,o,t,!!r)):(s=="doubleClick"?$ie:zie)(n,o.pos,o.inside,t)?t.preventDefault():dl(n,"pointer"))};class Hie{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[_P],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let c=e.state.doc.resolve(t.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Ye&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&js&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),dl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>da(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ev(e))),this.updateAllowDefault(e),this.allowDefault||!t?dl(this.view,"pointer"):Fie(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jr&&this.mightDrag&&!this.mightDrag.node.isAtom||Rr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Yc(this.view,it.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):dl(this.view,"pointer")}move(e){this.updateAllowDefault(e),dl(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Zr.touchstart=n=>{n.input.lastTouch=Date.now(),sx(n),dl(n,"pointer")};Zr.touchmove=n=>{n.input.lastTouch=Date.now(),dl(n,"pointer")};Zr.contextmenu=n=>sx(n);function BP(n,e){return n.composing?!0:Jr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const jie=ia?5e3:-1;Qr.compositionstart=Qr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),sy(n,!0),n.markCursor=null;else if(sy(n,!e.selection.empty),js&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}FP(n,jie)};Qr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,FP(n,20))};function FP(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>sy(n),e))}function $P(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=qie());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Wie(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=_re(e.focusNode,e.focusOffset),r=Bre(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function qie(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function sy(n,e=!1){if(!(ia&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),$P(n),e||n.docView&&n.docView.dirty){let t=ex(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Uie(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const P0=wi&&yl<15||Eh&&Hre<604;Zr.copy=Qr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=P0?null:t.clipboardData,o=r.content(),{dom:a,text:l}=nx(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Uie(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Gie(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Kie(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?R0(n,r.value,null,i,e):R0(n,r.textContent,r.innerHTML,i,e)},50)}function R0(n,e,t,r,i){let s=IP(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||Ce.empty)))return!0;if(!s)return!1;let o=Gie(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function zP(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Qr.paste=(n,e)=>{let t=e;if(n.composing&&!ia)return;let r=P0?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&R0(n,zP(r),r.getData("text/html"),i,t)?t.preventDefault():Kie(n,t)};class VP{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Xie=Qi?"altKey":"ctrlKey";function HP(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[Xie]}Zr.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Ev(t)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ye?i.to-1:i.to))){if(r&&r.mightDrag)o=Ye.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let h=n.docView.nearestDesc(t.target,!0);h&&h.node.type.spec.draggable&&h!=n.docView&&(o=Ye.create(n.state.doc,h.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:u,slice:c}=nx(n,a);(!t.dataTransfer.files.length||!Rr||pP>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(P0?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",P0||t.dataTransfer.setData("text/plain",u),n.dragging=new VP(c,HP(n,t),o)};Zr.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Qr.dragover=Qr.dragenter=(n,e)=>e.preventDefault();Qr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Ev(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=IP(n,zP(t.dataTransfer),P0?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&HP(n,t));if(n.someProp("handleDrop",p=>p(n,t,o||Ce.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?oN(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let u=n.state.tr;if(a){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=u.doc;if(h?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(f))return;let d=u.doc.resolve(c);if(h&&Ye.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new Ye(d));else{let p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,y,v)=>p=v),u.setSelection(tx(n,d,u.doc.resolve(p)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};Zr.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&da(n)},20))};Zr.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Zr.beforeinput=(n,e)=>{if(Rr&&ia&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,fu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Qr)Zr[n]=Qr[n];function L0(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class oy{constructor(e,t){this.toDOM=e,this.spec=t||Mu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new qn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof oy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&L0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class bl{constructor(e,t){this.attrs=e,this.spec=t||Mu}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new qn(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof bl&&L0(this.attrs,e.attrs)&&L0(this.spec,e.spec)}static is(e){return e.type instanceof bl}destroy(){}}class ox{constructor(e,t){this.attrs=e,this.spec=t||Mu}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new qn(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof ox&&L0(this.attrs,e.attrs)&&L0(this.spec,e.spec)}destroy(){}}class qn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new qn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new qn(e,e,new oy(t,r))}static inline(e,t,r,i){return new qn(e,t,new bl(r,i))}static node(e,t,r,i){return new qn(e,t,new ox(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof bl}get widget(){return this.type instanceof oy}}const Mc=[],Mu={};class Ut{constructor(e,t){this.local=e.length?e:Mc,this.children=t.length?t:Mc}static create(e,t){return t.length?ay(t,e,0,Mu):Or}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==Or||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Mu)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Yie(this.children,o||[],e,t,r,i,s):o?new Ut(o.sort(Ou),Mc):Or}add(e,t){return t.length?this==Or?Ut.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let u=l+r,c;if(c=WP(t,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,u+1):i.splice(s,0,l,l+a.nodeSize,ay(c,a,u+1,Mu)),s+=3}});let o=jP(s?qP(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ut(o.length?this.local.concat(o).sort(Ou):this.local,i||this.children)}remove(e){return e.length==0||this==Or?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let c=0,h;c<e.length;c++)(h=e[c])&&h.from>a&&h.to<l&&(e[c]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=Or?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ut(i,r):Or}forChild(e,t){if(this==Or)return this;if(t.isLeaf)return Ut.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof bl){let u=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new Ut(i.sort(Ou),Mc);return r?new rl([a,r]):a}return r||Or}eq(e){if(this==e)return!0;if(!(e instanceof Ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ax(this.localsInner(e))}localsInner(e){if(this==Or)return Mc;if(e.inlineContent||!this.local.some(bl.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof bl||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=ax;const Or=Ut.empty;class rl{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Mu));return rl.from(r)}forChild(e,t){if(t.isLeaf)return Ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Or&&(s instanceof rl?r=r.concat(s.members):r.push(s))}return rl.from(r)}eq(e){if(!(e instanceof rl)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?ax(r?t:t.sort(Ou)):Mc}static from(e){switch(e.length){case 0:return Or;case 1:return e[0];default:return new rl(e.every(t=>t instanceof Ut)?e:e.reduce((t,r)=>t.concat(r instanceof Ut?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Yie(n,e,t,r,i,s,o){let a=n.slice();for(let u=0,c=s;u<t.maps.length;u++){let h=0;t.maps[u].forEach((f,d,p,m)=>{let g=m-p-(d-f);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||f>v+c-h)continue;let x=a[y]+c-h;d>=x?a[y+1]=f<=x?-2:-1:f>=c&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),c=t.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=t.map(n[u]+s),h=c-i;if(h<0||h>=r.content.size){l=!0;continue}let f=t.map(n[u+1]+s,-1),d=f-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==d){let y=a[u+2].mapInner(t,g,c+1,n[u]+s+1,o);y!=Or?(a[u]=h,a[u+1]=d,a[u+2]=y):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=Jie(a,n,e,t,i,s,o),c=ay(u,r,0,o);e=c.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<c.children.length;h+=3){let d=c.children[h];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,c.children[h],c.children[h+1],c.children[h+2])}}return new Ut(e.sort(Ou),a)}function jP(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new qn(i.from+e,i.to+e,i.type))}return t}function Jie(n,e,t,r,i,s,o){function a(l,u){for(let c=0;c<l.local.length;c++){let h=l.local[c].map(r,i,u);h?t.push(h):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function WP(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function qP(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function ay(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let u=WP(n,a,l+t);if(u){s=!0;let c=ay(u,a,t+l+1,r);c!=Or&&i.push(l,l+a.nodeSize,c)}});let o=jP(s?qP(n):n,-t).sort(Ou);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ut(o,i):Or}function Ou(n,e){return n.from-e.from||n.to-e.to}function ax(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),FC(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),FC(e,i,r.copy(s.from,r.to)));break}}}return e}function FC(n,e,t){for(;e<n.length&&Ou(t,n[e])>0;)e++;n.splice(e,0,t)}function I4(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Or&&e.push(r)}),n.cursorWrapper&&e.push(Ut.create(n.state.doc,[n.cursorWrapper.deco])),rl.from(e)}const Zie={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Qie=wi&&yl<=11;class ese{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class tse{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ese,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);wi&&yl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Qie&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Zie)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(IC(this.view)){if(this.suppressingSelectionUpdates)return da(this.view);if(wi&&yl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Th(s))t.add(s);for(let s=e.anchorNode;s;s=Th(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&IC(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<t.length;c++){let h=this.registerMutation(t[c],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(js&&l.length){let c=l.filter(h=>h.nodeName=="BR");if(c.length==2){let[h,f]=c;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of c){let d=f.parentNode;d&&d.nodeName=="LI"&&(!h||ise(e,h)!=d)&&f.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Cv(r)&&(u=ex(e))&&u.eq(it.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,da(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),nse(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||da(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let h=e.addedNodes[c];t.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(wi&&yl<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:h,nextSibling:f}=e.addedNodes[c];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?br(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?br(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let $C=new WeakMap,zC=!1;function nse(n){if(!$C.has(n)&&($C.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=js,zC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),zC=!0}}function VC(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Qu(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function rse(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return VC(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?VC(n,t):null}function ise(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function sse(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),u,c=l.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],Cv(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Rr&&n.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){s=g;break}if(!v||v.size)break}let h=n.state.doc,f=n.someProp("domParser")||Yu.fromSchema(n.state.schema),d=h.resolve(o),p=null,m=f.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:ose,context:d});if(u&&u[0].pos!=null){let g=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function ose(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Jr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Jr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ase=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function lse(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let D=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,A=ex(n,D);if(A&&!n.state.selection.eq(A)){if(Rr&&ia&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",N=>N(n,fu(13,"Enter"))))return;let E=n.state.tr.setSelection(A);D=="pointer"?E.setMeta("pointer",!0):D=="key"&&E.scrollIntoView(),s&&E.setMeta("composition",s),n.dispatch(E)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,u=sse(n,e,t),c=n.state.doc,h=c.slice(u.from,u.to),f,d;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,d="end"):(f=n.state.selection.from,d="start"),n.input.lastKeyCode=null;let p=hse(h.content,u.doc.content,u.from,f,d);if(p&&n.input.domChangeCount++,(Eh&&n.input.lastIOSEnter>Date.now()-225||ia)&&i.some(D=>D.nodeType==1&&!ase.test(D.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",D=>D(n,fu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let D=HC(n,n.state.doc,u.sel);if(D&&!D.eq(n.state.selection)){let A=n.state.tr.setSelection(D);s&&A.setMeta("composition",s),n.dispatch(A)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof Be&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),wi&&yl<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),g=u.doc.resolveNoCache(p.endB-u.from),y=c.resolve(p.start),v=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,x;if((Eh&&n.input.lastIOSEnter>Date.now()-225&&(!v||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!v&&m.pos<u.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(m.pos,g.pos,"",""))&&(x=it.findFrom(u.doc.resolve(m.pos+1),1,!0))&&x.head>m.pos)&&n.someProp("handleKeyDown",D=>D(n,fu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&cse(c,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",D=>D(n,fu(8,"Backspace")))){ia&&Rr&&n.domObserver.suppressSelectionUpdates();return}Rr&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),ia&&!v&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,g=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(D){return D(n,fu(13,"Enter"))})},20));let k=p.start,C=p.endA,w=D=>{let A=D||n.state.tr.replace(k,C,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let E=HC(n,A.doc,u.sel);E&&!(Rr&&n.composing&&E.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(E.head==k||E.head==A.mapping.map(C)-1)||wi&&E.empty&&E.head==k)&&A.setSelection(E)}return s&&A.setMeta("composition",s),A.scrollIntoView()},M;if(v){if(m.pos==g.pos){wi&&yl<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>da(n),20));let D=w(n.state.tr.delete(k,C)),A=c.resolve(p.start).marksAcross(c.resolve(p.endA));A&&D.ensureMarks(A),n.dispatch(D)}else if(p.endA==p.endB&&(M=use(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let D=w(n.state.tr);M.type=="add"?D.addMark(k,C,M.mark):D.removeMark(k,C,M.mark),n.dispatch(D)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let D=m.parent.textBetween(m.parentOffset,g.parentOffset),A=()=>w(n.state.tr.insertText(D,k,C));n.someProp("handleTextInput",E=>E(n,k,C,D,A))||n.dispatch(A())}}else n.dispatch(w())}function HC(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:tx(n,e.resolve(t.anchor),e.resolve(t.head))}function use(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<t.length;c++)s=t[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(se.from(u).eq(n))return{mark:a,type:o}}function cse(n,e,t,r,i){if(t-e<=i.pos-r.pos||D4(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(D4(s,!0,!0));return!o.parent.isTextblock||o.pos>t||D4(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function D4(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function hse(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&jC(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<n.size&&jC(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function jC(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class lx{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Iie,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(KC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=UC(this),qC(this),this.nodeViews=GC(this),this.docView=CC(this.state.doc,WC(this),I4(this),this.dom,this),this.domObserver=new tse(this,(r,i,s,o)=>lse(this,r,i,s,o)),this.domObserver.start(),Die(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&b3(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(KC),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&($P(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=GC(this);dse(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&b3(this),this.editable=UC(this),qC(this);let l=I4(this),u=WC(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&qre(this);if(o){this.domObserver.stop();let d=h&&(wi||Rr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&fse(i.selection,e.selection);if(h){let p=Rr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Wie(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=CC(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&mie(this))?da(this,d):(AP(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&Ure(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ye){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&vC(this,t.getBoundingClientRect(),e)}else vC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new VP(e.slice,e.move,i<0?void 0:Ye.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(wi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Gre(this.dom),da(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Zre(this,e)}coordsAtPos(e,t=1){return bP(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return rie(this,t||this.state,e)}pasteHTML(e,t){return R0(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return R0(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return nx(this,e)}destroy(){this.docView&&(Nie(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],I4(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Rre())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Rie(this,e)}domSelectionRange(){let e=this.domSelection();return e?Jr&&this.root.nodeType===11&&$re(this.dom.ownerDocument)==this.dom&&rse(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}lx.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function WC(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[qn.node(0,n.state.doc.content.size,e)]}function qC(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:qn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function UC(n){return!n.someProp("editable",e=>e(n.state)===!1)}function fse(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function GC(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function dse(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function KC(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function zl(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const UP={strong:(n,e,t,r)=>{const i=n.marker||t.options.strong||"*",s=t.enter("strong"),o=t.createTracker(r);let a=o.move(i+i);return a+=o.move(t.containerPhrasing(n,{before:a,after:i,...o.current()})),a+=o.move(i+i),s(),a},emphasis:(n,e,t,r)=>{const i=n.marker||t.options.emphasis||"*",s=t.enter("emphasis"),o=t.createTracker(r);let a=o.move(i);return a+=o.move(t.containerPhrasing(n,{before:a,after:i,...o.current()})),a+=o.move(i),s(),a}},Zt=Ot({},"editorView"),sd=Ot({},"editorState"),N4=Ot([],"initTimer"),x3=Ot({},"editor"),_0=Ot([],"inputRules"),Il=Ot([],"prosePlugins"),B0=Ot([],"remarkPlugins"),F0=Ot([],"nodeView"),$0=Ot([],"markView"),Iu=Ot(o3().use(Q5).use(r3),"remark"),Gd=Ot({handlers:UP},"remarkStringifyOptions"),F1=Ia("ConfigReady");function pse(n){const e=t=>(t.record(F1),async()=>(await n(t),t.done(F1),()=>{t.clearTimer(F1)}));return zl(e,{displayName:"Config"}),e}const Du=Ia("InitReady");function mse(n){const e=t=>(t.inject(x3,n).inject(Il,[]).inject(B0,[]).inject(_0,[]).inject(F0,[]).inject($0,[]).inject(Gd,{handlers:UP}).inject(Iu,o3().use(Q5).use(r3)).inject(N4,[F1]).record(Du),async()=>{await t.waitTimers(N4);const r=t.get(Gd);return t.set(Iu,o3().use(Q5).use(r3,r)),t.done(Du),()=>{t.remove(x3).remove(Il).remove(B0).remove(_0).remove(F0).remove($0).remove(Gd).remove(Iu).remove(N4).clearTimer(Du)}});return zl(e,{displayName:"Init"}),e}const ps=Ia("SchemaReady"),P4=Ot([],"schemaTimer"),yo=Ot({},"schema"),Kd=Ot([],"nodes"),Xd=Ot([],"marks");function XC(n){return{...n,parseDOM:n.parseDOM?.map(e=>({priority:n.priority,...e}))}}const GP=n=>(n.inject(yo,{}).inject(Kd,[]).inject(Xd,[]).inject(P4,[Du]).record(ps),async()=>{await n.waitTimers(P4);const e=n.get(Iu),r=n.get(B0).reduce((a,l)=>a.use(l.plugin,l.options),e);n.set(Iu,r);const i=Object.fromEntries(n.get(Kd).map(([a,l])=>[a,XC(l)])),s=Object.fromEntries(n.get(Xd).map(([a,l])=>[a,XC(l)])),o=new YD({nodes:i,marks:s});return n.set(yo,o),n.done(ps),()=>{n.remove(yo).remove(Kd).remove(Xd).remove(P4).clearTimer(ps)}});zl(GP,{displayName:"Schema"});class KP{constructor(){this.#t=new kN,this.#e=null,this.setCtx=e=>{this.#e=e},this.chain=()=>{if(this.#e==null)throw d4();const e=this.#e,t=[],r=this.get.bind(this),i={run:()=>{const o=Wh(...t),a=e.get(Zt);return o(a.state,a.dispatch,a)},inline:o=>(t.push(o),i),pipe:s.bind(this)};function s(o,a){const l=r(o);return t.push(l(a)),i}return i}}#t;#e;get ctx(){return this.#e}create(e,t){const r=e.create(this.#t.sliceMap);return r.set(t),r}get(e){return this.#t.get(e).get()}remove(e){return this.#t.remove(e)}call(e,t){if(this.#e==null)throw d4();const i=this.get(e)(t),s=this.#e.get(Zt);return i(s.state,s.dispatch,s)}inline(e){if(this.#e==null)throw d4();const t=this.#e.get(Zt);return e(t.state,t.dispatch,t)}}function gse(n="cmdKey"){return Ot(()=>()=>!1,n)}const Pe=Ot(new KP,"commands"),R4=Ot([ps],"commandsTimer"),Yd=Ia("CommandsReady"),XP=n=>{const e=new KP;return e.setCtx(n),n.inject(Pe,e).inject(R4,[ps]).record(Yd),async()=>(await n.waitTimers(R4),n.done(Yd),()=>{n.remove(Pe).remove(R4).clearTimer(Yd)})};zl(XP,{displayName:"Commands"});function yse(n){const e=Wh(QZ,K6,dre,oP);return n.Backspace=e,n}class YP{constructor(){this.#t=null,this.#e=[],this.setCtx=e=>{this.#t=e},this.add=e=>(this.#e.push(e),()=>{this.#e=this.#e.filter(t=>t!==e)}),this.addObjectKeymap=e=>{const t=[];return Object.entries(e).forEach(([r,i])=>{if(typeof i=="function"){const s={key:r,onRun:()=>i};this.#e.push(s),t.push(()=>{this.#e=this.#e.filter(o=>o!==s)})}else this.#e.push(i),t.push(()=>{this.#e=this.#e.filter(s=>s!==i)})}),()=>{t.forEach(r=>r())}},this.addBaseKeymap=()=>{const e=yse(Ore);return this.addObjectKeymap(e)},this.build=()=>{const e={};return this.#e.forEach(r=>{e[r.key]=[...e[r.key]||[],r]}),Object.fromEntries(Object.entries(e).map(([r,i])=>{const s=i.sort((a,l)=>(l.priority??50)-(a.priority??50));return[r,(a,l,u)=>{const c=this.#t;if(c==null)throw gv();const h=s.map(d=>d.onRun(c));return Wh(...h)(a,l,u)}]}))}}#t;#e;get ctx(){return this.#t}}const ly=Ot(new YP,"keymap"),L4=Ot([ps],"keymapTimer"),Jd=Ia("KeymapReady"),vse=n=>{const e=new YP;return e.setCtx(n),n.inject(ly,e).inject(L4,[ps]).record(Jd),async()=>(await n.waitTimers(L4),n.done(Jd),()=>{n.remove(ly).remove(L4).clearTimer(Jd)})},$1=Ia("ParserReady"),JP=()=>{throw gv()},Zd=Ot(JP,"parser"),_4=Ot([],"parserTimer"),ZP=n=>(n.inject(Zd,JP).inject(_4,[ps]).record($1),async()=>{await n.waitTimers(_4);const e=n.get(Iu),t=n.get(yo);return n.set(Zd,cre.create(t,e)),n.done($1),()=>{n.remove(Zd).remove(_4).clearTimer($1)}});zl(ZP,{displayName:"Parser"});const Qd=Ia("SerializerReady"),B4=Ot([],"serializerTimer"),QP=()=>{throw gv()},Jc=Ot(QP,"serializer"),eR=n=>(n.inject(Jc,QP).inject(B4,[ps]).record(Qd),async()=>{await n.waitTimers(B4);const e=n.get(Iu),t=n.get(yo);return n.set(Jc,fre.create(t,e)),n.done(Qd),()=>{n.remove(Jc).remove(B4).clearTimer(Qd)}});zl(eR,{displayName:"Serializer"});const z1=Ot("","defaultValue"),F4=Ot(n=>n,"stateOptions"),$4=Ot([],"editorStateTimer"),V1=Ia("EditorStateReady");function bse(n,e,t){if(typeof n=="string")return e(n);if(n.type==="html")return Yu.fromSchema(t).parse(n.dom);if(n.type==="json")return fs.fromJSON(t,n.value);throw tQ(n)}const xse=new En("MILKDOWN_STATE_TRACKER"),tR=n=>(n.inject(z1,"").inject(sd,{}).inject(F4,e=>e).inject($4,[$1,Qd,Yd,Jd]).record(V1),async()=>{await n.waitTimers($4);const e=n.get(yo),t=n.get(Zd),r=n.get(_0),i=n.get(F4),s=n.get(Il),o=n.get(z1),a=bse(o,t,e),l=n.get(ly),u=l.addBaseKeymap(),c=[...s,new gn({key:xse,state:{init:()=>{},apply:(d,p,m,g)=>{n.set(sd,g)}}}),vQ({rules:r}),fP(l.build())];n.set(Il,c);const h=i({schema:e,doc:a,plugins:c}),f=yu.create(h);return n.set(sd,f),n.done(V1),()=>{u(),n.remove(z1).remove(sd).remove(F4).remove($4).clearTimer(V1)}});zl(tR,{displayName:"EditorState"});const H1=Ia("EditorViewReady"),z4=Ot([],"editorViewTimer"),Zc=Ot({},"editorViewOptions"),j1=Ot(null,"root"),w3=Ot(null,"rootDOM"),S3=Ot({},"rootAttrs");function wse(n,e){const t=document.createElement("div");t.className="milkdown",n.appendChild(t),e.set(w3,t);const r=e.get(S3);return Object.entries(r).forEach(([i,s])=>t.setAttribute(i,s)),t}function Sse(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const kse=new En("MILKDOWN_VIEW_CLEAR"),nR=n=>(n.inject(j1,document.body).inject(Zt,{}).inject(Zc,{}).inject(w3,null).inject(S3,{}).inject(z4,[V1]).record(H1),async()=>{await n.wait(Du);const e=n.get(j1)||document.body,t=typeof e=="string"?document.querySelector(e):e;n.update(Il,l=>[new gn({key:kse,view:u=>{const c=t?wse(t,n):void 0;return(()=>{if(c&&t){const f=u.dom;t.replaceChild(c,f),c.appendChild(f)}})(),{destroy:()=>{c?.parentNode&&c?.parentNode.replaceChild(u.dom,c),c?.remove()}}}}),...l]),await n.waitTimers(z4);const r=n.get(sd),i=n.get(Zc),s=Object.fromEntries(n.get(F0)),o=Object.fromEntries(n.get($0)),a=new lx(t,{state:r,nodeViews:s,markViews:o,...i});return Sse(a.dom),n.set(Zt,a),n.done(H1),()=>{a?.destroy(),n.remove(j1).remove(Zt).remove(Zc).remove(w3).remove(S3).remove(z4).clearTimer(H1)}});zl(nR,{displayName:"EditorView"});var uy=(n=>(n.Idle="Idle",n.OnCreate="OnCreate",n.Created="Created",n.OnDestroy="OnDestroy",n.Destroyed="Destroyed",n))(uy||{});class ux{constructor(){this.#t=!1,this.#e="Idle",this.#r=[],this.#n=()=>{},this.#l=new kN,this.#i=new _Q,this.#s=new Map,this.#o=new Map,this.#a=new F6(this.#l,this.#i),this.#u=()=>{const e=pse(async r=>{await Promise.all(this.#r.map(i=>i(r)))}),t=[GP,ZP,eR,XP,vse,tR,nR,mse(this),e];this.#c(t,this.#o)},this.#c=(e,t)=>{e.forEach(r=>{const i=this.#a.produce(this.#t?r.meta:void 0),s=r(i);t.set(r,{ctx:i,handler:s,cleanup:void 0})})},this.#h=(e,t=!1)=>Promise.all([e].flat().map(r=>{const s=this.#s.get(r)?.cleanup;return t?this.#s.delete(r):this.#s.set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s})),this.#d=async()=>{await Promise.all([...this.#o.entries()].map(([e,{cleanup:t}])=>typeof t=="function"?t():t)),this.#o.clear()},this.#f=e=>{this.#e=e,this.#n(e)},this.#p=e=>[...e.entries()].map(async([t,r])=>{const{ctx:i,handler:s}=r;if(!s)return;const o=await s();e.set(t,{ctx:i,handler:s,cleanup:o})}),this.enableInspector=(e=!0)=>(this.#t=e,this),this.onStatusChange=e=>(this.#n=e,this),this.config=e=>(this.#r.push(e),this),this.removeConfig=e=>(this.#r=this.#r.filter(t=>t!==e),this),this.use=e=>{const t=[e].flat();return t.flat().forEach(r=>{this.#s.set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),this.#e==="Created"&&this.#c(t,this.#s),this},this.remove=async e=>this.#e==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await this.#h([e].flat(),!0),this),this.create=async()=>this.#e==="OnCreate"?this:(this.#e==="Created"&&await this.destroy(),this.#f("OnCreate"),this.#u(),this.#c([...this.#s.keys()],this.#s),await Promise.all([this.#p(this.#o),this.#p(this.#s)].flat()),this.#f("Created"),this),this.destroy=async(e=!1)=>this.#e==="Destroyed"||this.#e==="OnDestroy"?this:this.#e==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&(this.#r=[]),this.#f("OnDestroy"),await this.#h([...this.#s.keys()],e),await this.#d(),this.#f("Destroyed"),this),this.action=e=>e(this.#a),this.inspect=()=>this.#t?[...this.#o.values(),...this.#s.values()].map(({ctx:e})=>e?.inspector?.read()).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new ux}#t;#e;#r;#n;#l;#i;#s;#o;#a;#u;#c;#h;#d;#f;#p;get ctx(){return this.#a}get status(){return this.#e}}let Cse=n=>crypto.getRandomValues(new Uint8Array(n)),Tse=(n,e,t)=>{let r=(2<<Math.log2(n.length-1))-1,i=-~(1.6*r*e/n.length);return(s=e)=>{let o="";for(;;){let a=t(i),l=i|0;for(;l--;)if(o+=n[a[l]&r]||"",o.length>=s)return o}}},cx=(n,e=21)=>Tse(n,e|0,Cse);cx("abcedfghicklmn",10);function st(n,e){const t=gse(n),r=i=>async()=>{r.key=t,await i.wait(Yd);const s=e(i);return i.get(Pe).create(t,s),r.run=o=>i.get(Pe).call(n,o),()=>{i.get(Pe).remove(t)}};return r}function $r(n){const e=t=>async()=>{await t.wait(ps);const r=n(t);return t.update(_0,i=>[...i,r]),e.inputRule=r,()=>{t.update(_0,i=>i.filter(s=>s!==r))}};return e}function Ese(n,e){const t=r=>async()=>{const i=e(r);return r.update(Xd,s=>[...s.filter(o=>o[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(Xd,s=>s.filter(([o])=>o!==n))}};return t.type=r=>{const i=r.get(yo).marks[n];if(!i)throw uQ(n);return i},t}function hx(n,e){const t=r=>async()=>{const i=e(r);return r.update(Kd,s=>[...s.filter(o=>o[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(Kd,s=>s.filter(([o])=>o!==n))}};return t.type=r=>{const i=r.get(yo).nodes[n];if(!i)throw lQ(n);return i},t}function ir(n){let e;const t=r=>async()=>(await r.wait(ps),e=n(r),r.update(Il,i=>[...i,e]),()=>{r.update(Il,i=>i.filter(s=>s!==e))});return t.plugin=()=>e,t.key=()=>e.spec.key,t}function rR(n){const e=t=>async()=>{await t.wait(Jd);const r=t.get(ly),i=n(t),s=r.addObjectKeymap(i);return e.keymap=i,()=>{s()}};return e}function Sp(n,e){const t=r=>async()=>{await r.wait(ps);const i=e(r);return n.type(r)instanceof ey?r.update(F0,s=>[...s,[n.id,i]]):r.update($0,s=>[...s,[n.id,i]]),t.view=i,t.type=n,()=>{n.type(r)instanceof ey?r.update(F0,s=>s.filter(o=>o[0]!==n.id)):r.update($0,s=>s.filter(o=>o[0]!==n.id))}};return t}function Vt(n,e){const t=Ot(n,e),r=i=>(i.inject(t),()=>()=>{i.remove(t)});return r.key=t,r}function Fn(n,e){const t=Vt(e,n),r=hx(n,s=>s.get(t.key)(s)),i=[t,r];return i.id=r.id,i.node=r,i.type=s=>r.type(s),i.ctx=t,i.key=t.key,i.extendSchema=s=>{const o=s(e);return Fn(n,o)},i}function qh(n,e){const t=Vt(e,n),r=Ese(n,s=>s.get(t.key)(s)),i=[t,r];return i.id=r.id,i.mark=r,i.type=s=>r.type(s),i.ctx=t,i.key=t.key,i.extendSchema=s=>{const o=s(e);return qh(n,o)},i}function Ti(n,e){const t=Object.fromEntries(Object.entries(e).map(([o,{shortcuts:a,priority:l}])=>[o,{shortcuts:a,priority:l}])),r=Vt(t,`${n}Keymap`),i=rR(o=>{const a=o.get(r.key),l=Object.entries(e).flatMap(([u,{command:c}])=>{const h=a[u],f=[h.shortcuts].flat(),d=h.priority;return f.map(p=>[p,{key:p,onRun:c,priority:d}])});return Object.fromEntries(l)}),s=[r,i];return s.ctx=r,s.shortcuts=i,s.key=r.key,s.keymap=i.keymap,s}const Us=(n,e=()=>({}))=>Vt(e,`${n}Attr`),kp=(n,e=()=>({}))=>Vt(e,`${n}Attr`);function Ao(n,e,t){const r=Vt({},n),i=o=>async()=>{await o.wait(Du);const l={plugin:e(o),options:o.get(r.key)};return o.update(B0,u=>[...u,l]),()=>{o.update(B0,u=>u.filter(c=>c!==l))}},s=[r,i];return s.id=n,s.plugin=i,s.options=r,s}function Ase(n){return e=>{const t=e.get(Zt);return e.get(yo),e.get(Jc)(t.state.doc)}}var V4,YC;function Mse(){if(YC)return V4;YC=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof ol=="object"&&ol&&ol.Object===Object&&ol,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Object.prototype,f=h.toString,d=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(w,M,D){var A,E,N,I,L,F,W=0,G=!1,ee=!1,de=!0;if(typeof w!="function")throw new TypeError(n);M=C(M)||0,v(D)&&(G=!!D.leading,ee="maxWait"in D,N=ee?d(C(D.maxWait)||0,M):N,de="trailing"in D?!!D.trailing:de);function ge(Ie){var Je=A,Ct=E;return A=E=void 0,W=Ie,I=w.apply(Ct,Je),I}function R(Ie){return W=Ie,L=setTimeout(P,M),G?ge(Ie):I}function fe(Ie){var Je=Ie-F,Ct=Ie-W,tn=M-Je;return ee?p(tn,N-Ct):tn}function xe(Ie){var Je=Ie-F,Ct=Ie-W;return F===void 0||Je>=M||Je<0||ee&&Ct>=N}function P(){var Ie=m();if(xe(Ie))return $e(Ie);L=setTimeout(P,fe(Ie))}function $e(Ie){return L=void 0,de&&A?ge(Ie):(A=E=void 0,I)}function Z(){L!==void 0&&clearTimeout(L),W=0,A=F=E=L=void 0}function we(){return L===void 0?I:$e(m())}function Se(){var Ie=m(),Je=xe(Ie);if(A=arguments,E=this,F=Ie,Je){if(L===void 0)return R(F);if(ee)return L=setTimeout(P,M),ge(F)}return L===void 0&&(L=setTimeout(P,M)),I}return Se.cancel=Z,Se.flush=we,Se}function y(w,M,D){var A=!0,E=!0;if(typeof w!="function")throw new TypeError(n);return v(D)&&(A="leading"in D?!!D.leading:A,E="trailing"in D?!!D.trailing:E),g(w,M,{leading:A,maxWait:M,trailing:E})}function v(w){var M=typeof w;return!!w&&(M=="object"||M=="function")}function x(w){return!!w&&typeof w=="object"}function k(w){return typeof w=="symbol"||x(w)&&f.call(w)==t}function C(w){if(typeof w=="number")return w;if(k(w))return e;if(v(w)){var M=typeof w.valueOf=="function"?w.valueOf():w;w=v(M)?M+"":M}if(typeof w!="string")return w===0?w:+w;w=w.replace(r,"");var D=s.test(w);return D||o.test(w)?a(w.slice(2),D?2:8):i.test(w)?e:+w}return V4=y,V4}var Ose=Mse();const Av=Py(Ose);function Cp(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-block",...e}}),n}const Ise=n=>!go(t=>t.type.name==="table")(n),Mv=Vt({filterNodes:Ise},"blockConfig");Cp(Mv,{displayName:"Ctx<blockConfig>"});function Dse(n,e,t){if(!n.dom.parentElement)return null;try{const i=n.posAtCoords({left:e.x,top:e.y})?.inside;if(i==null||i<0)return null;let s=n.state.doc.resolve(i),o=n.state.doc.nodeAt(i),a=n.nodeDOM(i);const l=c=>{const h=s.depth>=1&&s.index(s.depth)===0;if(!(c||h))return;const d=s.before(s.depth);o=n.state.doc.nodeAt(d),a=n.nodeDOM(d),s=n.state.doc.resolve(d),t(s,o)||l(!0)},u=t(s,o);return l(!u),!a||!o?null:{node:o,$pos:s,el:a}}catch{return null}}const JC=km.ie&&km.ie_version<15||km.ios&&km.webkit_version<604,ZC=20;class Nse{constructor(){this.#e=()=>{if(!this.#n)return null;const e=this.#n,t=this.#o;if(t&&Ye.isSelectable(e.node)){const r=Ye.create(t.state.doc,e.$pos.pos);return t.dispatch(t.state.tr.setSelection(r)),t.focus(),this.#r=r,r}return null},this.#r=null,this.#n=null,this.#l=void 0,this.#i=!1,this.#u=()=>{this.#a?.({type:"hide"}),this.#n=null},this.#c=e=>{this.#n=e,this.#a?.({type:"show",active:e})},this.bind=(e,t)=>{this.#t=e,this.#a=t},this.addEvent=e=>{e.addEventListener("mousedown",this.#h),e.addEventListener("mouseup",this.#d),e.addEventListener("dragstart",this.#f)},this.removeEvent=e=>{e.removeEventListener("mousedown",this.#h),e.removeEventListener("mouseup",this.#d),e.removeEventListener("dragstart",this.#f)},this.unBind=()=>{this.#a=void 0},this.#h=()=>{this.#l=this.#n?.el.getBoundingClientRect(),this.#e()},this.#d=()=>{if(!this.#i){requestAnimationFrame(()=>{this.#l&&this.#o?.focus()});return}this.#i=!1,this.#r=null},this.#f=e=>{this.#i=!0;const t=this.#o;if(!t)return;t.dom.dataset.dragging="true";const r=this.#r;if(e.dataTransfer&&r){const i=r.content();e.dataTransfer.effectAllowed="copyMove";const{dom:s,text:o}=t.serializeForClipboard(i);e.dataTransfer.clearData(),e.dataTransfer.setData(JC?"Text":"text/html",s.innerHTML),JC||e.dataTransfer.setData("text/plain",o);const a=this.#n?.el;a&&e.dataTransfer.setDragImage(a,0,0),t.dragging={slice:i,move:!0}}},this.keydownCallback=e=>(this.#u(),this.#i=!1,e.dom.dataset.dragging="false",!1),this.#p=Av((e,t)=>{if(!e.editable)return;const r=e.dom.getBoundingClientRect(),i=r.left+r.width/2;if(!(e.root.elementFromPoint(i,t.clientY)instanceof Element)){this.#u();return}const o=this.#s;if(!o)return;const a=Dse(e,{x:i,y:t.clientY},o);if(!a){this.#u();return}this.#c(a)},200),this.mousemoveCallback=(e,t)=>(e.composing||!e.editable||this.#p(e,t),!1),this.dragoverCallback=(e,t)=>{if(this.#i){const r=this.#o?.dom.parentElement;if(!r)return!1;const i=r.scrollHeight>r.clientHeight,s=r.getBoundingClientRect();if(i){if(r.scrollTop>0&&Math.abs(t.y-s.y)<ZC){const l=r.scrollTop>10?r.scrollTop-10:0;return r.scrollTop=l,!1}const o=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(r.scrollTop+s.height)<o&&Math.abs(t.y-(s.height+s.y))<ZC){const l=r.scrollTop+10;return r.scrollTop=l,!1}}}return!1},this.dragenterCallback=e=>{e.dragging&&(this.#i=!0,e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,t)=>{const r=t.clientX,i=t.clientY;(r<0||i<0||r>window.innerWidth||i>window.innerHeight)&&(this.#n=null,this.#m(e))},this.dropCallback=e=>(this.#m(e),!1),this.dragendCallback=e=>{this.#m(e)},this.#m=e=>{this.#i=!1,e.dom.dataset.dragging="false"}}#t;#e;#r;#n;#l;#i;get#s(){try{return this.#t?.get(Mv.key).filterNodes}catch{return}}get#o(){return this.#t?.get(Zt)}#a;#u;#c;#h;#d;#f;#p;#m}const fx=Vt(()=>new Nse,"blockService"),Ov=Vt({},"blockServiceInstance");Cp(fx,{displayName:"Ctx<blockService>"});Cp(Ov,{displayName:"Ctx<blockServiceInstance>"});const Iv=Vt({},"blockSpec");Cp(Iv,{displayName:"Ctx<blockSpec>"});const dx=ir(n=>{const e=new En("MILKDOWN_BLOCK"),r=n.get(fx.key)();n.set(Ov.key,r);const i=n.get(Iv.key);return new gn({key:e,...i,props:{...i.props,handleDOMEvents:{drop:s=>r.dropCallback(s),pointermove:(s,o)=>r.mousemoveCallback(s,o),keydown:s=>r.keydownCallback(s),dragover:(s,o)=>r.dragoverCallback(s,o),dragleave:(s,o)=>r.dragleaveCallback(s,o),dragenter:s=>r.dragenterCallback(s),dragend:s=>r.dragendCallback(s)}}})});Cp(dx,{displayName:"Prose<block>"});class Pse{constructor(e){this.#n=null,this.#i=!1,this.update=()=>{requestAnimationFrame(()=>{if(!this.#i)try{this.#h(),this.#i=!0}catch{}})},this.destroy=()=>{this.#r?.unBind(),this.#r?.removeEvent(this.#t),this.#t.remove()},this.show=t=>{const r=t.el,i=this.#e.get(Zt).dom,s={ctx:this.#e,active:t,editorDom:i,blockDom:this.#t},o={contextElement:r,getBoundingClientRect:()=>this.#u?this.#u(s):r.getBoundingClientRect()},a=[vg()];if(this.#a){const l=this.#a(s),u=Sl(l);a.push(u)}$s(o,this.#t,{placement:this.#c?this.#c(s):"left",middleware:[...a,...this.#s],...this.#o}).then(({x:l,y:u})=>{Object.assign(this.#t.style,{left:`${l}px`,top:`${u}px`}),this.#t.dataset.show="true"}).catch(console.error)},this.hide=()=>{this.#t.dataset.show="false"},this.#e=e.ctx,this.#t=e.content,this.#a=e.getOffset,this.#u=e.getPosition,this.#c=e.getPlacement,this.#s=e.middleware??[],this.#o=e.floatingUIOptions??{},this.#l=e.root,this.hide()}#t;#e;#r;#n;#l;#i;#s;#o;#a;#u;#c;get active(){return this.#n}#h(){const e=this.#e.get(Zt);(this.#l??e.dom.parentElement??document.body).appendChild(this.#t);const r=this.#e.get(Ov.key);r.bind(this.#e,i=>{i.type==="hide"?(this.hide(),this.#n=null):i.type==="show"&&(this.show(i.active),this.#n=i.active)}),this.#r=r,this.#r.addEvent(this.#t),this.#t.draggable=!0}}const Dv=[Iv,Mv,fx,Ov,dx];Dv.key=Iv.key;Dv.pluginKey=dx.key;function Rse(n,e){return function(t,r){let{$from:i,$to:s,node:o}=t.selection;if(o&&o.isBlock||i.depth<2||!i.sameParent(s))return!1;let a=i.node(-1);if(a.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let h=se.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let y=i.depth-f;y>=i.depth-3;y--)h=se.from(i.node(y).copy(h));let d=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;h=h.append(se.from(n.createAndFill()));let p=i.before(i.depth-(f-1)),m=t.tr.replace(p,i.after(-d),new Ce(h,4-f,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(y,v)=>{if(g>-1)return!1;y.isTextblock&&y.content.size==0&&(g=v+1)}),g>-1&&m.setSelection(it.near(m.doc.resolve(g))),r(m.scrollIntoView())}return!0}let l=s.pos==i.end()?a.contentMatchAt(0).defaultType:null,u=t.tr.delete(i.pos,s.pos),c=l?[null,{type:l}]:void 0;return Hd(u.doc,i.pos,2,c)?(r&&r(u.split(i.pos,2,c).scrollIntoView()),!0):!1}}function Lse(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?_se(e,t,n,s):Bse(e,t,s):!0:!1}}function _se(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Br(s-1,o,s,o,new Ce(se.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new VD(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=hv(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return fv(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Bse(n,e,t){let r=n.tr,i=t.parent;for(let d=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)d-=i.child(p).nodeSize,r.delete(d-1,d+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?se.empty:se.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return r.step(new Br(h-(a?1:0),f+(l?1:0),h+1,f-1,new Ce((a?se.empty:se.from(i.copy(se.empty))).append(l?se.empty:se.from(i.copy(se.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Fse(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let u=l.lastChild&&l.lastChild.type==a.type,c=se.from(u?n.create():null),h=new Ce(se.from(n.create(null,se.from(a.type.create(null,c)))),u?3:1,0),f=s.start,d=s.end;t(e.tr.step(new Br(f-(u?3:1),d,f,d,h,1,!0)).scrollIntoView())}return!0}}function $se(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return Fl(n,"definition",function(r){const i=QC(r.identifier);i&&!e.get(i)&&e.set(i,r)}),t;function t(r){const i=QC(r);return e.get(i)}}function QC(n){return String(n||"").toUpperCase()}function zse(){return function(n){const e=$se(n);Fl(n,function(t,r,i){if(t.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[n3,r];if(t.type==="imageReference"||t.type==="linkReference"){const s=e(t.identifier);if(s&&i&&typeof r=="number")return i.children[r]=t.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:t.alt}:{type:"link",url:s.url,title:s.title,children:t.children},[n3,r]}})}}function iR(n,e){if(!(e.childCount>=1&&e.lastChild?.type.name==="hardbreak")){n.next(e.content);return}const r=[];e.content.forEach((i,s,o)=>{o!==e.childCount-1&&r.push(i)}),n.next(se.fromArray(r))}function te(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const px=kp("emphasis");te(px,{displayName:"Attr<emphasis>",group:"Emphasis"});const rc=qh("emphasis",n=>({attrs:{marker:{default:n.get(Gd).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(px.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));te(rc.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});te(rc.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const Nv=st("ToggleEmphasis",n=>()=>kv(rc.type(n)));te(Nv,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const sR=$r(n=>gp(/(?:^|[^*])\*([^*]+)\*$/,rc.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));te(sR,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const oR=$r(n=>gp(/\b_(?![_\s])(.*?[^_\s])_\b/,rc.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));te(oR,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const mx=Ti("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(Pe);return()=>e.call(Nv.key)}}});te(mx.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});te(mx.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const gx=kp("strong");te(gx,{displayName:"Attr<strong>",group:"Strong"});const Uh=qh("strong",n=>({attrs:{marker:{default:n.get(Gd).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",n.get(gx.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));te(Uh.mark,{displayName:"MarkSchema<strong>",group:"Strong"});te(Uh.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Pv=st("ToggleStrong",n=>()=>kv(Uh.type(n)));te(Pv,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const aR=$r(n=>gp(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),Uh.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));te(aR,{displayName:"InputRule<strong>",group:"Strong"});const yx=Ti("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(Pe);return()=>e.call(Pv.key)}}});te(yx.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});te(yx.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const vx=kp("inlineCode");te(vx,{displayName:"Attr<inlineCode>",group:"InlineCode"});const sa=qh("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(vx.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,t,r)=>{e.openMark(r),e.addText(t.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,t,r)=>{e.withMark(t,"inlineCode",r.text||"")}}}));te(sa.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});te(sa.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const Rv=st("ToggleInlineCode",n=>()=>(e,t)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:s,to:o}=r;return e.doc.rangeHasMark(s,o,sa.type(n))?(t?.(i.removeMark(s,o,sa.type(n))),!0):(Object.keys(e.schema.marks).filter(u=>u!==sa.type.name).map(u=>e.schema.marks[u]).forEach(u=>{i.removeMark(s,o,u)}),t?.(i.addMark(s,o,sa.type(n).create())),!0)});te(Rv,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const lR=$r(n=>gp(/(?:`)([^`]+)(?:`)$/,sa.type(n)));te(lR,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const bx=Ti("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(Pe);return()=>e.call(Rv.key)}}});te(bx.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});te(bx.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const xx=kp("link");te(xx,{displayName:"Attr<link>",group:"Link"});const Fs=qh("link",n=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get(xx.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,t,r)=>{const i=t.url,s=t.title;e.openMark(r,{href:i,title:s}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));te(Fs.mark,{displayName:"MarkSchema<link>",group:"Link"});const uR=st("ToggleLink",n=>(e={})=>kv(Fs.type(n),e));te(uR,{displayName:"Command<toggleLinkCommand>",group:"Link"});const cR=st("UpdateLink",n=>(e={})=>(t,r)=>{if(!r)return!1;let i,s=-1;const{selection:o}=t,{from:a,to:l}=o;if(t.doc.nodesBetween(a,a===l?l+1:l,(p,m)=>{if(Fs.type(n).isInSet(p.marks))return i=p,s=m,!1}),!i)return!1;const u=i.marks.find(({type:p})=>p===Fs.type(n));if(!u)return!1;const c=s,h=s+i.nodeSize,{tr:f}=t,d=Fs.type(n).create({...u.attrs,...e});return d?(r(f.removeMark(c,h,u).addMark(c,h,d).setSelection(new Be(f.selection.$anchor)).scrollIntoView()),!0):!1});te(cR,{displayName:"Command<updateLinkCommand>",group:"Link"});const hR=hx("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,t)=>{n.injectRoot(e,t)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));te(hR,{displayName:"NodeSchema<doc>",group:"Doc"});function Vse(n){return j6(n,e=>e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes(e.value?.trim()),(e,t)=>{if(!t.length)return;const r=t[t.length-1];if(!r)return;const i=r.children.indexOf(e);i!==-1&&r.children.splice(i,1)},!0)}const Lv=Ao("remark-preserve-empty-line",()=>()=>Vse);te(Lv.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});te(Lv.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const wx=Us("paragraph");te(wx,{displayName:"Attr<paragraph>",group:"Paragraph"});const Mo=Fn("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(wx.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,t,r)=>{e.openNode(r),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,t)=>{const i=n.get(Zt).state?.doc.lastChild;e.openNode("paragraph"),(!t.content||t.content.size===0)&&t!==i&&Hse(n)?e.addNode("html",void 0,"<br />"):iR(e,t),e.closeNode()}}}));function Hse(n){let e=!1;try{n.get(Lv.id),e=!0}catch{e=!1}return e}te(Mo.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});te(Mo.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Sx=st("TurnIntoText",n=>()=>N0(Mo.type(n)));te(Sx,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const kx=Ti("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(Pe);return()=>e.call(Sx.key)}}});te(kx.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});te(kx.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const jse=Array(6).fill(0).map((n,e)=>e+1);function Wse(n){return n.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const _v=Vt(Wse,"headingIdGenerator");te(_v,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Cx=Us("heading");te(Cx,{displayName:"Attr<heading>",group:"Heading"});const $i=Fn("heading",n=>{const e=n.get(_v.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:jse.map(t=>({tag:`h${t}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw qs(r);return{level:t,id:r.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...n.get(Cx.key)(t),id:t.attrs.id||e(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,r,i)=>{const s=r.depth;t.openNode(i,{level:s}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,r)=>{t.openNode("heading",void 0,{depth:r.attrs.level}),iR(t,r),t.closeNode()}}}});te($i.node,{displayName:"NodeSchema<heading>",group:"Heading"});te($i.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const fR=$r(n=>_6(/^(?<hashes>#+)\s$/,$i.type(n),e=>{const t=e.groups?.hashes?.length||0,r=n.get(Zt),{$from:i}=r.state.selection,s=i.node();if(s.type.name==="heading"){let o=Number(s.attrs.level)+Number(t);return o>6&&(o=6),{level:o}}return{level:t}}));te(fR,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Qa=st("WrapInHeading",n=>e=>(e??=1,e<1?N0(Mo.type(n)):N0($i.type(n),{level:e})));te(Qa,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const Tx=st("DowngradeHeading",n=>()=>(e,t,r)=>{const{$from:i}=e.selection,s=i.node();if(s.type!==$i.type(n)||!e.selection.empty||i.parentOffset!==0)return!1;const o=s.attrs.level-1;return o?(t?.(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:o})),!0):N0(Mo.type(n))(e,t,r)});te(Tx,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const Ex=Ti("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(Pe);return()=>e.call(Qa.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(Pe);return()=>e.call(Tx.key)}}});te(Ex.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});te(Ex.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Ax=Us("blockquote");te(Ax,{displayName:"Attr<blockquote>",group:"Blockquote"});const Gh=Fn("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(Ax.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,t,r)=>{e.openNode(r).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));te(Gh.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});te(Gh.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const dR=$r(n=>L6(/^\s*>\s$/,Gh.type(n)));te(dR,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Mx=st("WrapInBlockquote",n=>()=>J6(Gh.type(n)));te(Mx,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const Ox=Ti("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(Pe);return()=>e.call(Mx.key)}}});te(Ox.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});te(Ox.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const Ix=Us("codeBlock",()=>({pre:{},code:{}}));te(Ix,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const So=Fn("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{language:e.dataset.language}}}],toDOM:e=>{const t=n.get(Ix.key)(e),r=e.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...t.pre,...i},["code",t.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,t,r)=>{const i=t.lang??"",s=t.value;e.openNode(r,{language:i}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,t)=>{e.addNode("code",void 0,t.content.firstChild?.text||"",{lang:t.attrs.language})}}}));te(So.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});te(So.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const pR=$r(n=>_6(/^```(?<language>[a-z]*)?[\s\n]$/,So.type(n),e=>({language:e.groups?.language??""})));te(pR,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const Dx=st("CreateCodeBlock",n=>(e="")=>N0(So.type(n),{language:e}));te(Dx,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const qse=st("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(t,r)=>n>=0?(r?.(t.tr.setNodeAttribute(n,"language",e)),!0):!1);te(qse,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const Nx=Ti("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(Pe);return()=>e.call(Dx.key)}}});te(Nx.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});te(Nx.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const Px=Us("image");te(Px,{displayName:"Attr<image>",group:"Image"});const ic=Fn("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(Px.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,t,r)=>{const i=t.url,s=t.alt,o=t.title;e.addNode(r,{src:i,alt:s,title:o})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));te(ic.node,{displayName:"NodeSchema<image>",group:"Image"});te(ic.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const mR=st("InsertImage",n=>(e={})=>(t,r)=>{if(!r)return!0;const{src:i="",alt:s="",title:o=""}=e,a=ic.type(n).create({src:i,alt:s,title:o});return a&&r(t.tr.replaceSelectionWith(a).scrollIntoView()),!0});te(mR,{displayName:"Command<insertImageCommand>",group:"Image"});const gR=st("UpdateImage",n=>(e={})=>(t,r)=>{const i=NQ(t.selection,ic.type(n));if(!i)return!1;const{node:s,pos:o}=i,a={...s.attrs},{src:l,alt:u,title:c}=e;return l!==void 0&&(a.src=l),u!==void 0&&(a.alt=u),c!==void 0&&(a.title=c),r?.(t.tr.setNodeMarkup(o,void 0,a).scrollIntoView()),!0});te(gR,{displayName:"Command<updateImageCommand>",group:"Image"});const Use=$r(n=>new Si(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,t,r,i)=>{const[s,o,a="",l]=t;return s?e.tr.replaceWith(r,i,ic.type(n).create({src:a,alt:o,title:l})):null}));te(Use,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const cy=Us("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));te(cy,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Nu=Fn("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(cy.key)(e)," "]:["br",n.get(cy.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,t,r)=>{e.addNode(r,{isInline:!!t.data?.isInline})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));te(Nu.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});te(Nu.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const Rx=st("InsertHardbreak",n=>()=>(e,t)=>{const{selection:r,tr:i}=e;if(!(r instanceof Be))return!1;if(r.empty){const s=r.$from.node();if(s.childCount>0&&s.lastChild?.type.name==="hardbreak")return t?.(i.replaceRangeWith(r.to-1,r.to,e.schema.node("paragraph")).setSelection(it.near(i.doc.resolve(r.to))).scrollIntoView()),!0}return t?.(i.setMeta("hardbreak",!0).replaceSelectionWith(Nu.type(n).create()).scrollIntoView()),!0});te(Rx,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const Lx=Ti("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(Pe);return()=>e.call(Rx.key)}}});te(Lx.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});te(Lx.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const _x=Us("hr");te(_x,{displayName:"Attr<hr>",group:"Hr"});const Kh=Fn("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(_x.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,t,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));te(Kh.node,{displayName:"NodeSchema<hr>",group:"Hr"});te(Kh.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const yR=$r(n=>new Si(/^(?:---|___\s|\*\*\*\s)$/,(e,t,r,i)=>{const{tr:s}=e;return t[0]&&s.replaceWith(r-1,i,Kh.type(n).create()),s}));te(yR,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const vR=st("InsertHr",n=>()=>(e,t)=>{if(!t)return!0;const r=Mo.node.type(n).create(),{tr:i,selection:s}=e,{from:o}=s,a=Kh.type(n).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(o,r),u=it.findFrom(l.doc.resolve(o),1,!0);return u&&t(l.setSelection(u).scrollIntoView()),!0});te(vR,{displayName:"Command<insertHrCommand>",group:"Hr"});const Bx=Us("bulletList");te(Bx,{displayName:"Attr<bulletList>",group:"BulletList"});const sc=Fn("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...n.get(Bx.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"false";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread}).next(t.content).closeNode()}}}));te(sc.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});te(sc.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const bR=$r(n=>L6(/^\s*([-+*])\s$/,sc.type(n)));te(bR,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const Fx=st("WrapInBulletList",n=>()=>J6(sc.type(n)));te(Fx,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const $x=Ti("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(Pe);return()=>e.call(Fx.key)}}});te($x.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});te($x.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const zx=Us("orderedList");te(zx,{displayName:"Attr<orderedList>",group:"OrderedList"});const oc=Fn("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(zx.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));te(oc.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});te(oc.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const xR=$r(n=>L6(/^\s*(\d+)\.\s$/,oc.type(n),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));te(xR,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const Vx=st("WrapInOrderedList",n=>()=>J6(oc.type(n)));te(Vx,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const Hx=Ti("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(Pe);return()=>e.call(Vx.key)}}});te(Hx.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});te(Hx.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const jx=Us("listItem");te(jx,{displayName:"Attr<listItem>",group:"ListItem"});const Gs=Fn("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw qs(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...n.get(jx.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,t,r)=>{const i=t.label!=null?`${t.label}.`:"•",s=t.label!=null?"ordered":"bullet",o=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread}),e.next(t.content),e.closeNode()}}}));te(Gs.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});te(Gs.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const Wx=st("SinkListItem",n=>()=>Fse(Gs.type(n)));te(Wx,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const qx=st("LiftListItem",n=>()=>Lse(Gs.type(n)));te(qx,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const Ux=st("SplitListItem",n=>()=>Rse(Gs.type(n)));te(Ux,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function Gse(n){return(e,t,r)=>{const{selection:i}=e;if(!(i instanceof Be))return!1;const{empty:s,$from:o}=i;return!s||o.parentOffset!==0||o.node(-1).type!==Gs.type(n)?!1:sP(e,t,r)}}const Gx=st("LiftFirstListItem",n=>()=>Gse(n));te(Gx,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const Kx=Ti("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(Pe);return()=>e.call(Ux.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(Pe);return()=>e.call(Wx.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(Pe);return()=>e.call(qx.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(Pe);return()=>e.call(Gx.key)}}});te(Kx.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});te(Kx.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const wR=hx("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));te(wR,{displayName:"NodeSchema<text>",group:"Text"});const Xx=Us("html");te(Xx,{displayName:"Attr<html>",group:"Html"});const Yx=Fn("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const t=document.createElement("span"),r={...n.get(Xx.key)(e),"data-value":e.attrs.value,"data-type":"html"};return t.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,t,r)=>{e.addNode(r,{value:t.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));te(Yx.node,{displayName:"NodeSchema<html>",group:"Html"});te(Yx.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const Kse=[hR,wx,Mo,_v,Cx,$i,cy,Nu,Ax,Gh,Ix,So,_x,Kh,Px,ic,Bx,sc,zx,oc,jx,Gs,px,rc,gx,Uh,vx,sa,xx,Fs,Xx,Yx,wR].flat(),Xse=[dR,bR,xR,pR,yR,fR].flat(),Yse=[sR,oR,lR,aR],Oc=st("IsMarkSelected",()=>n=>e=>{if(!n)return!1;const{doc:t,selection:r}=e;return t.rangeHasMark(r.from,r.to,n)}),SR=st("IsNoteSelected",()=>n=>e=>n?SN(e,n).hasNode:!1),dr=st("ClearTextInCurrentBlock",()=>()=>(n,e)=>{let t=n.tr;const{$from:r,$to:i}=t.selection,{pos:s}=r,{pos:o}=i,a=s-r.node().content.size;return a<0?!1:(t=t.deleteRange(a,o),e?.(t),!0)}),jo=st("SetBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const s=e.tr,{from:o,to:a}=s.selection;try{s.setBlockType(o,a,r,i)}catch{return!1}return t?.(s),!0}),od=st("WrapInBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;let s=e.tr;try{const{$from:o,$to:a}=s.selection,l=o.blockRange(a),u=l&&P6(l,r,i);if(!u)return!1;s=s.wrap(l,u)}catch{return!1}return t?.(s),!0}),ad=st("AddBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const s=e.tr;try{const o=r instanceof fs?r:r.createAndFill(i);if(!o)return!1;s.replaceSelectionWith(o)}catch{return!1}return t?.(s),!0}),kR=st("SelectTextNearPos",()=>n=>(e,t)=>{const{pos:r}=n??{};if(r==null)return!1;const i=(o,a,l)=>Math.min(Math.max(o,a),l),s=e.tr;try{const o=e.doc.resolve(i(r,0,e.doc.content.size));s.setSelection(Be.near(o))}catch{return!1}return t?.(s.scrollIntoView()),!0}),Jse=[Sx,Mx,Qa,Tx,Dx,Rx,vR,mR,gR,Vx,Fx,Wx,Ux,qx,Gx,Nv,Rv,Pv,uR,cR,Oc,SR,dr,jo,od,ad,kR],Zse=[Ox,Nx,Lx,Ex,Kx,Hx,$x,kx,mx,bx,yx].flat(),Jx=Ao("remarkAddOrderInList",()=>()=>n=>{Fl(n,"list",e=>{if(e.ordered){const t=e.start??1;e.children.forEach((r,i)=>{r.label=i+t})}})});te(Jx.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});te(Jx.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const Zx=Ao("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;Fl(n,"text",(t,r,i)=>{if(!t.value||typeof t.value!="string")return;const s=[];let o=0;e.lastIndex=0;let a=e.exec(t.value);for(;a;){const u=a.index;o!==u&&s.push({type:"text",value:t.value.slice(o,u)}),s.push({type:"break",data:{isInline:!0}}),o=u+a[0].length,a=e.exec(t.value)}if(s.length>0&&i&&typeof r=="number")return o<t.value.length&&s.push({type:"text",value:t.value.slice(o)}),i.children.splice(r,1,...s),r+s.length})});te(Zx.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});te(Zx.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const Qx=Ao("remarkInlineLink",()=>zse);te(Qx.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});te(Qx.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const Qse=n=>!!n.children,eoe=n=>n.type==="html";function toe(n,e){return t(n,0,null)[0];function t(r,i,s){if(Qse(r)){const o=[];for(let a=0,l=r.children.length;a<l;a++){const u=r.children[a];if(u){const c=t(u,a,r);if(c)for(let h=0,f=c.length;h<f;h++){const d=c[h];d&&o.push(d)}}}r.children=o}return e(r,i,s)}}const noe=["root","blockquote","listItem"],ew=Ao("remarkHTMLTransformer",()=>()=>n=>{toe(n,(e,t,r)=>eoe(e)?(r&&noe.includes(r.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});te(ew.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});te(ew.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const tw=Ao("remarkMarker",()=>()=>(n,e)=>{const t=r=>e.value.charAt(r.position.start.offset);Fl(n,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=t(r)})});te(tw.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});te(tw.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const CR=ir(()=>{let n=!1;const e=new En("MILKDOWN_INLINE_NODES_CURSOR"),t=new gn({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,s=i.nodeBefore,o=i.nodeAfter;return!!(s&&o&&s.isInline&&!s.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>n?(n=!1,requestAnimationFrame(()=>{if(t.getState(r.state)){const o=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o))}}),!0):!1,compositionstart:r=>(t.getState(r.state)&&(n=!0),!1),beforeinput:(r,i)=>{if(t.getState(r.state)&&i instanceof InputEvent&&i.data&&!n){const o=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o)),!0}return!1}},decorations(r){if(t.getState(r)){const o=r.selection.$from.pos,a=document.createElement("span"),l=qn.widget(o,a,{side:-1}),u=document.createElement("span"),c=qn.widget(o,u);return setTimeout(()=>{a.contentEditable="true",u.contentEditable="true"}),Ut.create(r.doc,[l,c])}return Ut.empty}}});return t});te(CR,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const TR=ir(n=>new gn({key:new En("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,t,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof or))return;const{from:l}=s;return r.tr.setNodeMarkup(l,Nu.type(n),void 0,[])}if(s instanceof ra){let l=r.tr;const{from:u,to:c}=s;return r.doc.nodesBetween(u,c,(h,f)=>{h.type===Nu.type(n)&&(l=l.setNodeMarkup(f,Nu.type(n),void 0,[]))}),l}}}));te(TR,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const nw=Vt(["table","code_block"],"hardbreakFilterNodes");te(nw,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const ER=ir(n=>{const e=n.get(nw.key);return new gn({key:new En("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,r)=>{const i=t.getMeta("hardbreak"),[s]=t.steps;if(i&&s){const{from:o}=s,a=r.doc.resolve(o);let l=a.depth,u=!0;for(;l>0;)e.includes(a.node(l).type.name)&&(u=!1),l--;return u}return!0}})});te(ER,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const AR=ir(n=>{const e=new En("MILKDOWN_HEADING_ID"),t=r=>{if(r.composing)return;const i=n.get(_v.key),s=r.state.tr.setMeta("addToHistory",!1);let o=!1;const a={};r.state.doc.descendants((l,u)=>{if(l.type===$i.type(n)){if(l.textContent.trim().length===0)return;const c=l.attrs;let h=i(l);a[h]?(a[h]+=1,h+=`-#${a[h]}`):a[h]=1,c.id!==h&&(o=!0,s.setMeta(e,!0).setNodeMarkup(u,void 0,{...c,id:h}))}}),o&&r.dispatch(s)};return new gn({key:e,view:r=>(t(r),{update:(i,s)=>{i.state.doc.eq(s.doc)||t(i)}})})});te(AR,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const MR=ir(n=>{const e=(t,r,i)=>{if(!i.selection||t.some(h=>h.getMeta("addToHistory")===!1||!h.isGeneric))return null;const s=oc.type(n),o=sc.type(n),a=Gs.type(n),l=(h,f)=>{let d=!1;const p=`${f+1}.`;return h.label!==p&&(h.label=p,d=!0),d};let u=i.tr,c=!1;return i.doc.descendants((h,f,d,p)=>{if(h.type===o){const m=h.maybeChild(0);m?.type===a&&m.attrs.listType==="ordered"&&(c=!0,u.setNodeMarkup(f,s,{spread:"true"}),h.descendants((g,y,v,x)=>{if(g.type===a){const k={...g.attrs};l(k,x)&&(u=u.setNodeMarkup(y,void 0,k))}return!1}))}else if(h.type===a&&d?.type===s){const m={...h.attrs};let g=!1;m.listType!=="ordered"&&(m.listType="ordered",g=!0),d?.maybeChild(0)&&(g=l(m,p)),g&&(u=u.setNodeMarkup(f,void 0,m),c=!0)}}),c?u.setMeta("addToHistory",!1):null};return new gn({key:new En("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:e})});te(MR,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const roe=[TR,nw,ER,CR,Jx,Qx,Zx,ew,tw,Lv,AR,MR].flat(),ioe=[Kse,Xse,Yse,Jse,Zse,roe].flat();var H4,eT;function soe(){if(eT)return H4;eT=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof ol=="object"&&ol&&ol.Object===Object&&ol,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Object.prototype,f=h.toString,d=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(C,w,M){var D,A,E,N,I,L,F=0,W=!1,G=!1,ee=!0;if(typeof C!="function")throw new TypeError(n);w=k(w)||0,y(M)&&(W=!!M.leading,G="maxWait"in M,E=G?d(k(M.maxWait)||0,w):E,ee="trailing"in M?!!M.trailing:ee);function de(Se){var Ie=D,Je=A;return D=A=void 0,F=Se,N=C.apply(Je,Ie),N}function ge(Se){return F=Se,I=setTimeout(xe,w),W?de(Se):N}function R(Se){var Ie=Se-L,Je=Se-F,Ct=w-Ie;return G?p(Ct,E-Je):Ct}function fe(Se){var Ie=Se-L,Je=Se-F;return L===void 0||Ie>=w||Ie<0||G&&Je>=E}function xe(){var Se=m();if(fe(Se))return P(Se);I=setTimeout(xe,R(Se))}function P(Se){return I=void 0,ee&&D?de(Se):(D=A=void 0,N)}function $e(){I!==void 0&&clearTimeout(I),F=0,D=L=A=I=void 0}function Z(){return I===void 0?N:P(m())}function we(){var Se=m(),Ie=fe(Se);if(D=arguments,A=this,L=Se,Ie){if(I===void 0)return ge(L);if(G)return I=setTimeout(xe,w),de(L)}return I===void 0&&(I=setTimeout(xe,w)),N}return we.cancel=$e,we.flush=Z,we}function y(C){var w=typeof C;return!!C&&(w=="object"||w=="function")}function v(C){return!!C&&typeof C=="object"}function x(C){return typeof C=="symbol"||v(C)&&f.call(C)==t}function k(C){if(typeof C=="number")return C;if(x(C))return e;if(y(C)){var w=typeof C.valueOf=="function"?C.valueOf():C;C=y(w)?w+"":w}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var M=s.test(C);return M||o.test(C)?a(C.slice(2),M?2:8):i.test(C)?e:+C}return H4=g,H4}var ooe=soe();const rw=Py(ooe);function aoe(n){const e=Vt({},`${n}_SLASH_SPEC`),t=ir(i=>{const s=i.get(e.key);return new gn({key:new En(`${n}_SLASH`),...s})}),r=[e,t];return r.key=e.key,r.pluginKey=t.key,e.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${n}`},t.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${n}`},r}class loe{constructor(e){this.#t=!1,this.onShow=()=>{},this.onHide=()=>{},this.#u=(t,r)=>{const{state:i,composing:s}=t,{selection:o,doc:a}=i,{ranges:l}=o,u=Math.min(...l.map(d=>d.$from.pos)),c=Math.max(...l.map(d=>d.$to.pos)),h=r&&r.doc.eq(a)&&r.selection.eq(o);if(this.#t||((this.#n??t.dom.parentElement??document.body).appendChild(this.element),this.#t=!0),s||h)return;if(!this.#s(t,r)){this.hide();return}$s({getBoundingClientRect:()=>vv(t,u,c)},this.element,{placement:"bottom-start",middleware:[vg(),Sl(this.#a),...this.#e],...this.#r}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()},this.update=(t,r)=>{this.#o(t,r)},this.getContent=(t,r=i=>i.type.name==="paragraph")=>{const{selection:i}=t.state,{empty:s,$from:o}=i,a=t.state.selection instanceof Be;if(typeof document>"u")return;const l=this.element.contains(document.activeElement),u=!t.hasFocus()&&!l,c=!t.editable,f=!DQ(r)(t.state.selection);if(!(u||c||!s||!a||f))return o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"￼")},this.destroy=()=>{this.#o.cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,this.#l=e.debounce??200,this.#s=e.shouldShow??this.#c,this.#i=e.trigger??"/",this.#a=e.offset,this.#e=e.middleware??[],this.#r=e.floatingUIOptions??{},this.#n=e.root,this.#o=rw(this.#u,this.#l)}#t;#e;#r;#n;#l;#i;#s;#o;#a;#u;#c(e){const t=this.getContent(e);if(!t)return!1;const r=t.at(-1);return r?Array.isArray(this.#i)?this.#i.includes(r):this.#i===r:!1}}function OR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=OR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Cr(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=OR(n))&&(r&&(r+=" "),r+=e);return r}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:IR,setPrototypeOf:tT,isFrozen:uoe,getPrototypeOf:coe,getOwnPropertyDescriptor:hoe}=Object;let{freeze:ei,seal:bs,create:DR}=Object,{apply:k3,construct:C3}=typeof Reflect<"u"&&Reflect;ei||(ei=function(e){return e});bs||(bs=function(e){return e});k3||(k3=function(e,t,r){return e.apply(t,r)});C3||(C3=function(e,t){return new e(...t)});const Tm=ti(Array.prototype.forEach),foe=ti(Array.prototype.lastIndexOf),nT=ti(Array.prototype.pop),If=ti(Array.prototype.push),doe=ti(Array.prototype.splice),W1=ti(String.prototype.toLowerCase),j4=ti(String.prototype.toString),rT=ti(String.prototype.match),Df=ti(String.prototype.replace),poe=ti(String.prototype.indexOf),moe=ti(String.prototype.trim),Ds=ti(Object.prototype.hasOwnProperty),Vr=ti(RegExp.prototype.test),Nf=goe(TypeError);function ti(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return k3(n,e,r)}}function goe(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return C3(n,t)}}function Tt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:W1;tT&&tT(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(uoe(e)||(e[r]=s),i=s)}n[i]=!0}return n}function yoe(n){for(let e=0;e<n.length;e++)Ds(n,e)||(n[e]=null);return n}function Wo(n){const e=DR(null);for(const[t,r]of IR(n))Ds(n,t)&&(Array.isArray(r)?e[t]=yoe(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=Wo(r):e[t]=r);return e}function Pf(n,e){for(;n!==null;){const r=hoe(n,e);if(r){if(r.get)return ti(r.get);if(typeof r.value=="function")return ti(r.value)}n=coe(n)}function t(){return null}return t}const iT=ei(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),W4=ei(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q4=ei(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),voe=ei(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U4=ei(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),boe=ei(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sT=ei(["#text"]),oT=ei(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),G4=ei(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aT=ei(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Em=ei(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xoe=bs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),woe=bs(/<%[\w\W]*|[\w\W]*%>/gm),Soe=bs(/\$\{[\w\W]*/gm),koe=bs(/^data-[\-\w.\u00B7-\uFFFF]+$/),Coe=bs(/^aria-[\-\w]+$/),NR=bs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Toe=bs(/^(?:\w+script|data):/i),Eoe=bs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PR=bs(/^html$/i),Aoe=bs(/^[a-z][.\w]*(-[.\w]+)+$/i);var lT=Object.freeze({__proto__:null,ARIA_ATTR:Coe,ATTR_WHITESPACE:Eoe,CUSTOM_ELEMENT:Aoe,DATA_ATTR:koe,DOCTYPE_NAME:PR,ERB_EXPR:woe,IS_ALLOWED_URI:NR,IS_SCRIPT_OR_DATA:Toe,MUSTACHE_EXPR:xoe,TMPLIT_EXPR:Soe});const Rf={element:1,text:3,progressingInstruction:7,comment:8,document:9},Moe=function(){return typeof window>"u"?null:window},Ooe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},uT=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function RR(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Moe();const e=Ve=>RR(Ve);if(e.version="3.2.6",e.removed=[],!n||!n.document||n.document.nodeType!==Rf.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:c=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:d}=n,p=l.prototype,m=Pf(p,"cloneNode"),g=Pf(p,"remove"),y=Pf(p,"nextSibling"),v=Pf(p,"childNodes"),x=Pf(p,"parentNode");if(typeof o=="function"){const Ve=t.createElement("template");Ve.content&&Ve.content.ownerDocument&&(t=Ve.content.ownerDocument)}let k,C="";const{implementation:w,createNodeIterator:M,createDocumentFragment:D,getElementsByTagName:A}=t,{importNode:E}=r;let N=uT();e.isSupported=typeof IR=="function"&&typeof x=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:I,ERB_EXPR:L,TMPLIT_EXPR:F,DATA_ATTR:W,ARIA_ATTR:G,IS_SCRIPT_OR_DATA:ee,ATTR_WHITESPACE:de,CUSTOM_ELEMENT:ge}=lT;let{IS_ALLOWED_URI:R}=lT,fe=null;const xe=Tt({},[...iT,...W4,...q4,...U4,...sT]);let P=null;const $e=Tt({},[...oT,...G4,...aT,...Em]);let Z=Object.seal(DR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),we=null,Se=null,Ie=!0,Je=!0,Ct=!1,tn=!0,at=!1,It=!0,vt=!1,ln=!1,vn=!1,Ht=!1,Kn=!1,Xn=!1,$n=!0,Tr=!1;const Ai="user-content-";let ii=!0,Er=!1,hr={},J=null;const he=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const H=Tt({},["audio","video","img","source","image","track"]);let j=null;const U=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ie="http://www.w3.org/1998/Math/MathML",ye="http://www.w3.org/2000/svg",Ne="http://www.w3.org/1999/xhtml";let je=Ne,Ze=!1,Dt=null;const Le=Tt({},[ie,ye,Ne],j4);let De=Tt({},["mi","mo","mn","ms","mtext"]),ze=Tt({},["annotation-xml"]);const mt=Tt({},["title","style","font","a","script"]);let ft=null;const Yn=["application/xhtml+xml","text/html"],Pa="text/html";let bn=null,si=null;const Fp=t.createElement("form"),rf=function(V){return V instanceof RegExp||V instanceof Function},cc=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(si&&si===V)){if((!V||typeof V!="object")&&(V={}),V=Wo(V),ft=Yn.indexOf(V.PARSER_MEDIA_TYPE)===-1?Pa:V.PARSER_MEDIA_TYPE,bn=ft==="application/xhtml+xml"?j4:W1,fe=Ds(V,"ALLOWED_TAGS")?Tt({},V.ALLOWED_TAGS,bn):xe,P=Ds(V,"ALLOWED_ATTR")?Tt({},V.ALLOWED_ATTR,bn):$e,Dt=Ds(V,"ALLOWED_NAMESPACES")?Tt({},V.ALLOWED_NAMESPACES,j4):Le,j=Ds(V,"ADD_URI_SAFE_ATTR")?Tt(Wo(U),V.ADD_URI_SAFE_ATTR,bn):U,qe=Ds(V,"ADD_DATA_URI_TAGS")?Tt(Wo(H),V.ADD_DATA_URI_TAGS,bn):H,J=Ds(V,"FORBID_CONTENTS")?Tt({},V.FORBID_CONTENTS,bn):he,we=Ds(V,"FORBID_TAGS")?Tt({},V.FORBID_TAGS,bn):Wo({}),Se=Ds(V,"FORBID_ATTR")?Tt({},V.FORBID_ATTR,bn):Wo({}),hr=Ds(V,"USE_PROFILES")?V.USE_PROFILES:!1,Ie=V.ALLOW_ARIA_ATTR!==!1,Je=V.ALLOW_DATA_ATTR!==!1,Ct=V.ALLOW_UNKNOWN_PROTOCOLS||!1,tn=V.ALLOW_SELF_CLOSE_IN_ATTR!==!1,at=V.SAFE_FOR_TEMPLATES||!1,It=V.SAFE_FOR_XML!==!1,vt=V.WHOLE_DOCUMENT||!1,Ht=V.RETURN_DOM||!1,Kn=V.RETURN_DOM_FRAGMENT||!1,Xn=V.RETURN_TRUSTED_TYPE||!1,vn=V.FORCE_BODY||!1,$n=V.SANITIZE_DOM!==!1,Tr=V.SANITIZE_NAMED_PROPS||!1,ii=V.KEEP_CONTENT!==!1,Er=V.IN_PLACE||!1,R=V.ALLOWED_URI_REGEXP||NR,je=V.NAMESPACE||Ne,De=V.MATHML_TEXT_INTEGRATION_POINTS||De,ze=V.HTML_INTEGRATION_POINTS||ze,Z=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&rf(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&rf(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),at&&(Je=!1),Kn&&(Ht=!0),hr&&(fe=Tt({},sT),P=[],hr.html===!0&&(Tt(fe,iT),Tt(P,oT)),hr.svg===!0&&(Tt(fe,W4),Tt(P,G4),Tt(P,Em)),hr.svgFilters===!0&&(Tt(fe,q4),Tt(P,G4),Tt(P,Em)),hr.mathMl===!0&&(Tt(fe,U4),Tt(P,aT),Tt(P,Em))),V.ADD_TAGS&&(fe===xe&&(fe=Wo(fe)),Tt(fe,V.ADD_TAGS,bn)),V.ADD_ATTR&&(P===$e&&(P=Wo(P)),Tt(P,V.ADD_ATTR,bn)),V.ADD_URI_SAFE_ATTR&&Tt(j,V.ADD_URI_SAFE_ATTR,bn),V.FORBID_CONTENTS&&(J===he&&(J=Wo(J)),Tt(J,V.FORBID_CONTENTS,bn)),ii&&(fe["#text"]=!0),vt&&Tt(fe,["html","head","body"]),fe.table&&(Tt(fe,["tbody"]),delete we.tbody),V.TRUSTED_TYPES_POLICY){if(typeof V.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof V.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=V.TRUSTED_TYPES_POLICY,C=k.createHTML("")}else k===void 0&&(k=Ooe(d,i)),k!==null&&typeof C=="string"&&(C=k.createHTML(""));ei&&ei(V),si=V}},sf=Tt({},[...W4,...q4,...voe]),of=Tt({},[...U4,...boe]),$p=function(V){let ce=x(V);(!ce||!ce.tagName)&&(ce={namespaceURI:je,tagName:"template"});const Re=W1(V.tagName),jt=W1(ce.tagName);return Dt[V.namespaceURI]?V.namespaceURI===ye?ce.namespaceURI===Ne?Re==="svg":ce.namespaceURI===ie?Re==="svg"&&(jt==="annotation-xml"||De[jt]):!!sf[Re]:V.namespaceURI===ie?ce.namespaceURI===Ne?Re==="math":ce.namespaceURI===ye?Re==="math"&&ze[jt]:!!of[Re]:V.namespaceURI===Ne?ce.namespaceURI===ye&&!ze[jt]||ce.namespaceURI===ie&&!De[jt]?!1:!of[Re]&&(mt[Re]||!sf[Re]):!!(ft==="application/xhtml+xml"&&Dt[V.namespaceURI]):!1},Mi=function(V){If(e.removed,{element:V});try{x(V).removeChild(V)}catch{g(V)}},Lo=function(V,ce){try{If(e.removed,{attribute:ce.getAttributeNode(V),from:ce})}catch{If(e.removed,{attribute:null,from:ce})}if(ce.removeAttribute(V),V==="is")if(Ht||Kn)try{Mi(ce)}catch{}else try{ce.setAttribute(V,"")}catch{}},af=function(V){let ce=null,Re=null;if(vn)V="<remove></remove>"+V;else{const An=rT(V,/^[\r\n\t ]+/);Re=An&&An[0]}ft==="application/xhtml+xml"&&je===Ne&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const jt=k?k.createHTML(V):V;if(je===Ne)try{ce=new f().parseFromString(jt,ft)}catch{}if(!ce||!ce.documentElement){ce=w.createDocument(je,"template",null);try{ce.documentElement.innerHTML=Ze?C:jt}catch{}}const Jn=ce.body||ce.documentElement;return V&&Re&&Jn.insertBefore(t.createTextNode(Re),Jn.childNodes[0]||null),je===Ne?A.call(ce,vt?"html":"body")[0]:vt?ce.documentElement:Jn},lf=function(V){return M.call(V.ownerDocument||V,V,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},hc=function(V){return V instanceof h&&(typeof V.nodeName!="string"||typeof V.textContent!="string"||typeof V.removeChild!="function"||!(V.attributes instanceof c)||typeof V.removeAttribute!="function"||typeof V.setAttribute!="function"||typeof V.namespaceURI!="string"||typeof V.insertBefore!="function"||typeof V.hasChildNodes!="function")},uf=function(V){return typeof a=="function"&&V instanceof a};function Xi(Ve,V,ce){Tm(Ve,Re=>{Re.call(e,V,ce,si)})}const cf=function(V){let ce=null;if(Xi(N.beforeSanitizeElements,V,null),hc(V))return Mi(V),!0;const Re=bn(V.nodeName);if(Xi(N.uponSanitizeElement,V,{tagName:Re,allowedTags:fe}),It&&V.hasChildNodes()&&!uf(V.firstElementChild)&&Vr(/<[/\w!]/g,V.innerHTML)&&Vr(/<[/\w!]/g,V.textContent)||V.nodeType===Rf.progressingInstruction||It&&V.nodeType===Rf.comment&&Vr(/<[/\w]/g,V.data))return Mi(V),!0;if(!fe[Re]||we[Re]){if(!we[Re]&&ff(Re)&&(Z.tagNameCheck instanceof RegExp&&Vr(Z.tagNameCheck,Re)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Re)))return!1;if(ii&&!J[Re]){const jt=x(V)||V.parentNode,Jn=v(V)||V.childNodes;if(Jn&&jt){const An=Jn.length;for(let fr=An-1;fr>=0;--fr){const Yi=m(Jn[fr],!0);Yi.__removalCount=(V.__removalCount||0)+1,jt.insertBefore(Yi,y(V))}}}return Mi(V),!0}return V instanceof l&&!$p(V)||(Re==="noscript"||Re==="noembed"||Re==="noframes")&&Vr(/<\/no(script|embed|frames)/i,V.innerHTML)?(Mi(V),!0):(at&&V.nodeType===Rf.text&&(ce=V.textContent,Tm([I,L,F],jt=>{ce=Df(ce,jt," ")}),V.textContent!==ce&&(If(e.removed,{element:V.cloneNode()}),V.textContent=ce)),Xi(N.afterSanitizeElements,V,null),!1)},hf=function(V,ce,Re){if($n&&(ce==="id"||ce==="name")&&(Re in t||Re in Fp))return!1;if(!(Je&&!Se[ce]&&Vr(W,ce))){if(!(Ie&&Vr(G,ce))){if(!P[ce]||Se[ce]){if(!(ff(V)&&(Z.tagNameCheck instanceof RegExp&&Vr(Z.tagNameCheck,V)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(V))&&(Z.attributeNameCheck instanceof RegExp&&Vr(Z.attributeNameCheck,ce)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(ce))||ce==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&Vr(Z.tagNameCheck,Re)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Re))))return!1}else if(!j[ce]){if(!Vr(R,Df(Re,de,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&V!=="script"&&poe(Re,"data:")===0&&qe[V])){if(!(Ct&&!Vr(ee,Df(Re,de,"")))){if(Re)return!1}}}}}}return!0},ff=function(V){return V!=="annotation-xml"&&rT(V,ge)},df=function(V){Xi(N.beforeSanitizeAttributes,V,null);const{attributes:ce}=V;if(!ce||hc(V))return;const Re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P,forceKeepAttr:void 0};let jt=ce.length;for(;jt--;){const Jn=ce[jt],{name:An,namespaceURI:fr,value:Yi}=Jn,Ra=bn(An),fc=Yi;let Zn=An==="value"?fc:moe(fc);if(Re.attrName=Ra,Re.attrValue=Zn,Re.keepAttr=!0,Re.forceKeepAttr=void 0,Xi(N.uponSanitizeAttribute,V,Re),Zn=Re.attrValue,Tr&&(Ra==="id"||Ra==="name")&&(Lo(An,V),Zn=Ai+Zn),It&&Vr(/((--!?|])>)|<\/(style|title)/i,Zn)){Lo(An,V);continue}if(Re.forceKeepAttr)continue;if(!Re.keepAttr){Lo(An,V);continue}if(!tn&&Vr(/\/>/i,Zn)){Lo(An,V);continue}at&&Tm([I,L,F],mf=>{Zn=Df(Zn,mf," ")});const pf=bn(V.nodeName);if(!hf(pf,Ra,Zn)){Lo(An,V);continue}if(k&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!fr)switch(d.getAttributeType(pf,Ra)){case"TrustedHTML":{Zn=k.createHTML(Zn);break}case"TrustedScriptURL":{Zn=k.createScriptURL(Zn);break}}if(Zn!==fc)try{fr?V.setAttributeNS(fr,An,Zn):V.setAttribute(An,Zn),hc(V)?Mi(V):nT(e.removed)}catch{Lo(An,V)}}Xi(N.afterSanitizeAttributes,V,null)},zp=function Ve(V){let ce=null;const Re=lf(V);for(Xi(N.beforeSanitizeShadowDOM,V,null);ce=Re.nextNode();)Xi(N.uponSanitizeShadowNode,ce,null),cf(ce),df(ce),ce.content instanceof s&&Ve(ce.content);Xi(N.afterSanitizeShadowDOM,V,null)};return e.sanitize=function(Ve){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=null,Re=null,jt=null,Jn=null;if(Ze=!Ve,Ze&&(Ve="<!-->"),typeof Ve!="string"&&!uf(Ve))if(typeof Ve.toString=="function"){if(Ve=Ve.toString(),typeof Ve!="string")throw Nf("dirty is not a string, aborting")}else throw Nf("toString is not a function");if(!e.isSupported)return Ve;if(ln||cc(V),e.removed=[],typeof Ve=="string"&&(Er=!1),Er){if(Ve.nodeName){const Yi=bn(Ve.nodeName);if(!fe[Yi]||we[Yi])throw Nf("root node is forbidden and cannot be sanitized in-place")}}else if(Ve instanceof a)ce=af("<!---->"),Re=ce.ownerDocument.importNode(Ve,!0),Re.nodeType===Rf.element&&Re.nodeName==="BODY"||Re.nodeName==="HTML"?ce=Re:ce.appendChild(Re);else{if(!Ht&&!at&&!vt&&Ve.indexOf("<")===-1)return k&&Xn?k.createHTML(Ve):Ve;if(ce=af(Ve),!ce)return Ht?null:Xn?C:""}ce&&vn&&Mi(ce.firstChild);const An=lf(Er?Ve:ce);for(;jt=An.nextNode();)cf(jt),df(jt),jt.content instanceof s&&zp(jt.content);if(Er)return Ve;if(Ht){if(Kn)for(Jn=D.call(ce.ownerDocument);ce.firstChild;)Jn.appendChild(ce.firstChild);else Jn=ce;return(P.shadowroot||P.shadowrootmode)&&(Jn=E.call(r,Jn,!0)),Jn}let fr=vt?ce.outerHTML:ce.innerHTML;return vt&&fe["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&Vr(PR,ce.ownerDocument.doctype.name)&&(fr="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+fr),at&&Tm([I,L,F],Yi=>{fr=Df(fr,Yi," ")}),k&&Xn?k.createHTML(fr):fr},e.setConfig=function(){let Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cc(Ve),ln=!0},e.clearConfig=function(){si=null,ln=!1},e.isValidAttribute=function(Ve,V,ce){si||cc({});const Re=bn(Ve),jt=bn(V);return hf(Re,jt,ce)},e.addHook=function(Ve,V){typeof V=="function"&&If(N[Ve],V)},e.removeHook=function(Ve,V){if(V!==void 0){const ce=foe(N[Ve],V);return ce===-1?void 0:doe(N[Ve],ce,1)[0]}return nT(N[Ve])},e.removeHooks=function(Ve){N[Ve]=[]},e.removeAllHooks=function(){N=uT()},e}var Ks=RR();function Ah({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}Ah.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var Ioe=Object.defineProperty,cT=Object.getOwnPropertySymbols,Doe=Object.prototype.hasOwnProperty,Noe=Object.prototype.propertyIsEnumerable,hT=(n,e,t)=>e in n?Ioe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Poe=(n,e)=>{for(var t in e||(e={}))Doe.call(e,t)&&hT(n,t,e[t]);if(cT)for(var t of cT(e))Noe.call(e,t)&&hT(n,t,e[t]);return n};function Tp(n,e){return Object.assign(n,{meta:Poe({package:"@milkdown/components"},e)}),n}const Roe={imageIcon:"🌌",captionIcon:"💬",uploadButton:"Upload file",confirmButton:"Confirm ⏎",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:n=>Promise.resolve(URL.createObjectURL(n))},Bv=Vt(Roe,"imageBlockConfigCtx");Tp(Bv,{displayName:"Config<image-block>",group:"ImageBlock"});function Loe(n){return Fl(n,"paragraph",(e,t,r)=>{var i,s;if(((i=e.children)==null?void 0:i.length)!==1)return;const o=(s=e.children)==null?void 0:s[0];if(!o||o.type!=="image")return;const{url:a,alt:l,title:u}=o,c={type:"image-block",url:a,alt:l,title:u};r.children.splice(t,1,c)})}const iw=Ao("remark-image-block",()=>()=>Loe);Tp(iw.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});Tp(iw.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var _oe=Object.defineProperty,fT=Object.getOwnPropertySymbols,Boe=Object.prototype.hasOwnProperty,Foe=Object.prototype.propertyIsEnumerable,dT=(n,e,t)=>e in n?_oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$oe=(n,e)=>{for(var t in e||(e={}))Boe.call(e,t)&&dT(n,t,e[t]);if(fT)for(var t of fT(e))Foe.call(e,t)&&dT(n,t,e[t]);return n};const T3="image-block",Fv=Fn("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${T3}"]`,getAttrs:n=>{var e;if(!(n instanceof HTMLElement))throw qs(n);return{src:n.getAttribute("src")||"",caption:n.getAttribute("caption")||"",ratio:Number((e=n.getAttribute("ratio"))!=null?e:1)}}}],toDOM:n=>["img",$oe({"data-type":T3},n.attrs)],parseMarkdown:{match:({type:n})=>n==="image-block",runner:(n,e,t)=>{const r=e.url,i=e.title;let s=Number(e.alt||1);(Number.isNaN(s)||s===0)&&(s=1),n.addNode(t,{src:r,caption:i,ratio:s})}},toMarkdown:{match:n=>n.type.name==="image-block",runner:(n,e)=>{n.openNode("paragraph"),n.addNode("image",void 0,void 0,{title:e.attrs.caption,url:e.attrs.src,alt:`${Number.parseFloat(e.attrs.ratio).toFixed(2)}`}),n.closeNode()}}}));Tp(Fv.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function e0({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}e0.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const zoe=cx("abcdefg",8),Voe=He({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:n,src:e,setLink:t,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var u,c;const h=le(!1),f=le(),d=le((u=e.value)!=null?u:""),p=le(zoe()),m=le(((c=e.value)==null?void 0:c.length)!==0),g=k=>{const w=k.target.value;m.value=w.length!==0,d.value=w},y=k=>{var C,w;k.key==="Enter"&&t((w=(C=f.value)==null?void 0:C.value)!=null?w:"")},v=()=>{var k,C;t((C=(k=f.value)==null?void 0:k.value)!=null?C:"")},x=k=>{var C;const w=(C=k.target.files)==null?void 0:C[0];w&&r(w).then(M=>{M&&(t(M),m.value=!0)}).catch(M=>{console.error("An error occurred while uploading image"),console.error(M)})};return()=>X("div",{class:Cr("image-edit",l)},X(e0,{icon:i,class:"image-icon"}),X("div",{class:Cr("link-importer",h.value&&"focus")},X("input",{ref:f,draggable:"true",onDragstart:k=>{k.preventDefault(),k.stopPropagation()},disabled:n.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&X("div",{class:"placeholder"},X("input",{disabled:n.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),X("label",{class:"uploader",for:p.value},X(e0,{icon:s})),X("span",{class:"text",onClick:()=>{var k;return(k=f.value)==null?void 0:k.focus()}},a))),d.value&&X("div",{class:"confirm",onClick:()=>v()},X(e0,{icon:o})))}}),Hoe=He({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:n,caption:e,ratio:t,readonly:r,setAttr:i,config:s}){var o;const a=le(),l=le(),u=le(!!((o=e.value)!=null&&o.length)),c=le(0),h=()=>{var v;const x=a.value;if(!x)return;const k=x.closest(".milkdown-image-block");if(!k)return;const C=k.getBoundingClientRect().width;if(!C)return;const w=x.height,M=x.width,D=M<C?w:C*(w/M),A=(D*((v=t.value)!=null?v:1)).toFixed(2);x.dataset.origin=D.toFixed(2),x.dataset.height=A,x.style.height=`${A}px`},f=v=>{v.preventDefault(),v.stopPropagation(),!r.value&&(u.value=!u.value)},d=v=>{const k=v.target.value;c.value&&window.clearTimeout(c.value),c.value=window.setTimeout(()=>{i("caption",k)},1e3)},p=v=>{const k=v.target.value;c.value&&(window.clearTimeout(c.value),c.value=0),i("caption",k)},m=v=>{v.preventDefault();const x=a.value;if(!x)return;const k=x.getBoundingClientRect().top,C=v.clientY-k,w=Number(C<100?100:C).toFixed(2);x.dataset.height=w,x.style.height=`${w}px`},g=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g);const v=a.value;if(!v)return;const x=Number(v.dataset.origin),k=Number(v.dataset.height),C=Number.parseFloat(Number(k/x).toFixed(2));Number.isNaN(C)||i("ratio",C)},y=v=>{r.value||(v.preventDefault(),v.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",g))};return()=>X(er,null,X("div",{class:"image-wrapper"},X("div",{class:"operation"},X("div",{class:"operation-item",onPointerdown:f},X(e0,{icon:s.captionIcon}))),X("img",{ref:a,"data-type":T3,onLoad:h,src:n.value,alt:e.value}),X("div",{ref:l,class:"image-resize-handle",onPointerdown:y})),u.value&&X("input",{draggable:"true",onDragstart:v=>{v.preventDefault(),v.stopPropagation()},class:"caption-input",placeholder:s?.captionPlaceholderText,onInput:d,onBlur:p,value:e.value}))}});var joe=Object.defineProperty,pT=Object.getOwnPropertySymbols,Woe=Object.prototype.hasOwnProperty,qoe=Object.prototype.propertyIsEnumerable,mT=(n,e,t)=>e in n?joe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Uoe=(n,e)=>{for(var t in e||(e={}))Woe.call(e,t)&&mT(n,t,e[t]);if(pT)for(var t of pT(e))qoe.call(e,t)&&mT(n,t,e[t]);return n};const Goe=He({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){const{src:e}=n;return()=>{var t;return(t=e.value)!=null&&t.length?X(Hoe,Uoe({},n)):X(Voe,{src:n.src,selected:n.selected,readonly:n.readonly,setLink:r=>n.setAttr("src",r),imageIcon:n.config.imageIcon,uploadButton:n.config.uploadButton,confirmButton:n.config.confirmButton,uploadPlaceholderText:n.config.uploadPlaceholderText,onUpload:n.config.onUpload})}}}),LR=Sp(Fv.node,n=>(e,t,r)=>{const i=le(e.attrs.src),s=le(e.attrs.caption),o=le(e.attrs.ratio),a=le(!1),l=le(!t.editable),u=(g,y)=>{if(!t.editable)return;const v=r();v!=null&&t.dispatch(t.state.tr.setNodeAttribute(v,g,g==="src"?Ks.sanitize(y):y))},c=n.get(Bv.key),h=Ws(Goe,{src:i,caption:s,ratio:o,selected:a,readonly:l,setAttr:u,config:c}),f=document.createElement("div");f.className="milkdown-image-block",h.mount(f);const d=Rh(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=c.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(v=>{i.value=v}).catch(console.error)}o.value=g.attrs.ratio,s.value=g.attrs.caption,l.value=!t.editable};return m(e),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),h.unmount(),f.remove()}}});Tp(LR,{displayName:"NodeView<image-block>",group:"ImageBlock"});const Koe=[iw,Fv,LR,Bv].flat();var E3,A3;if(typeof WeakMap<"u"){let n=new WeakMap;E3=e=>n.get(e),A3=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;E3=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},A3=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var $t=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==t;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==t;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:s,bottom:o}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[s*this.width+(t<0?r-1:i)]:(t<0?s==0:o==this.height)?null:this.map[r+this.width*(t<0?s-1:o)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:s}=this.findCell(n),{left:o,right:a,top:l,bottom:u}=this.findCell(e);return{left:Math.min(t,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,u)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const s=r*this.width+i,o=this.map[s];t[o]||(t[o]=!0,!(i==n.left&&i&&this.map[s-1]==o||r==n.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const s=i+t.child(r).nodeSize;if(r==n){let o=e+n*this.width;const a=(n+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(n){return E3(n)||A3(n,Xoe(n))}};function Xoe(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Yoe(n),t=n.childCount,r=[];let i=0,s=null;const o=[];for(let u=0,c=e*t;u<c;u++)r[u]=0;for(let u=0,c=0;u<t;u++){const h=n.child(u);c++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==h.childCount)break;const m=h.child(p),{colspan:g,rowspan:y,colwidth:v}=m.attrs;for(let x=0;x<y;x++){if(x+u>=t){(s||(s=[])).push({type:"overlong_rowspan",pos:c,n:y-x});break}const k=i+x*e;for(let C=0;C<g;C++){r[k+C]==0?r[k+C]=c:(s||(s=[])).push({type:"collision",row:u,pos:c,n:g-C});const w=v&&v[C];if(w){const M=(k+C)%e*2,D=o[M];D==null||D!=w&&o[M+1]==1?(o[M]=w,o[M+1]=1):D==w&&o[M+1]++}}}i+=g,c+=m.nodeSize}const f=(u+1)*e;let d=0;for(;i<f;)r[i++]==0&&d++;d&&(s||(s=[])).push({type:"missing",row:u,n:d}),c++}(e===0||t===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new $t(e,t,r,s);let l=!1;for(let u=0;!l&&u<o.length;u+=2)o[u]!=null&&o[u+1]<t&&(l=!0);return l&&Joe(a,o,n),a}function Yoe(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let s=0;if(t)for(let o=0;o<r;o++){const a=n.child(o);for(let l=0;l<a.childCount;l++){const u=a.child(l);o+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(t=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Joe(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const s=n.map[i];if(r[s])continue;r[s]=!0;const o=t.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let u=0;u<l.colspan;u++){const c=(i+u)%n.width,h=e[c*2];h!=null&&(!l.colwidth||l.colwidth[u]!=h)&&((a||(a=Zoe(l)))[u]=h)}a&&n.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function Zoe(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function gT(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),r=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(o=>Number(o)):null,i=Number(n.getAttribute("colspan")||1),s={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const o in e){const a=e[o].getFromDOM,l=a&&a(n);l!=null&&(s[o]=l)}return s}function yT(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(n.attrs[r],t)}return t}function Qoe(n){if(n!==null){if(!Array.isArray(n))throw new TypeError("colwidth must be null or an array");for(const e of n)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function eae(n){const e=n.cellAttributes||{},t={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:Qoe}};for(const r in e)t[r]={default:e[r].default,validate:e[r].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>gT(r,e)}],toDOM(r){return["td",yT(r,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>gT(r,e)}],toDOM(r){return["th",yT(r,e),0]}}}}function xs(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var il=new En("selectingCells");function Ep(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function ks(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function $v(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=Ep(e.$head)||tae(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function tae(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function M3(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function nae(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function sw(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function _R(n,e,t){const r=n.node(-1),i=$t.get(r),s=n.start(-1),o=i.nextCell(n.pos-s,e,t);return o==null?null:n.node(0).resolve(s+o)}function tc(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function rae(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function iae(n,e,t){const r=xs(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}var Xt=class qo extends it{constructor(e,t=e){const r=e.node(-1),i=$t.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,t.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(c=>c!=t.pos-s);l.unshift(t.pos-s);const u=l.map(c=>{const h=r.nodeAt(c);if(!h)throw RangeError(`No cell with offset ${c} found`);const f=s+c+1;return new fN(a.resolve(f),a.resolve(f+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(M3(r)&&M3(i)&&sw(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?qo.rowSelection(r,i):s&&this.isColSelection()?qo.colSelection(r,i):new qo(r,i)}return Be.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=$t.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const u=[];for(let c=l*t.width+i.left,h=i.left;h<i.right;h++,c++){const f=t.map[c];if(s[f])continue;s[f]=!0;const d=t.findCell(f);let p=e.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const m=i.left-d.left,g=d.right-i.right;if(m>0||g>0){let y=p.attrs;if(m>0&&(y=tc(y,0,m)),g>0&&(y=tc(y,y.colspan-g,g)),d.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(d.top<i.top||d.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top)};d.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}u.push(p)}o.push(e.child(l).copy(se.from(u)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Ce(se.from(a),1,1)}replace(e,t=Ce.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],u=e.mapping.slice(r);e.replace(u.map(a.pos),u.map(l.pos),o?Ce.empty:t)}const s=it.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,t){this.replace(e,new Ce(se.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=$t.get(t),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(t.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=$t.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(t.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(t=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new qo(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=$t.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),s=t.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==t.width}eq(e){return e instanceof qo&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=$t.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(t.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(t=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(t=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new qo(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new qo(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new qo(e.resolve(t),e.resolve(r))}getBookmark(){return new sae(this.$anchorCell.pos,this.$headCell.pos)}};Xt.prototype.visible=!1;it.jsonID("cell",Xt);var sae=class BR{constructor(e,t){this.anchor=e,this.head=t}map(e){return new BR(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&sw(t,r)?new Xt(t,r):it.near(r,1)}};function oae(n){if(!(n.selection instanceof Xt))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(qn.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Ut.create(n.doc,e)}function aae({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function lae({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const s=n.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){t=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return t!==r&&e.parentOffset===0}function uae(n,e,t){const r=(e||n).selection,i=(e||n).doc;let s,o;if(r instanceof Ye&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Xt.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=Xt.rowSelection(a,a)}else if(!t){const a=$t.get(r.node),l=r.from+1,u=l+a.map[a.width*a.height-1];s=Xt.create(i,l+1,u)}}else r instanceof Be&&aae(r)?s=Be.create(i,r.from):r instanceof Be&&lae(r)&&(s=Be.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=n.tr)).setSelection(s),e}var cae=new En("fix-tables");function FR(n,e,t,r){const i=n.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let u=a,c=Math.min(i,o+3);u<c;u++)if(n.child(u)==l){a=u+1,t+=l.nodeSize;continue e}r(l,t),a<i&&n.child(a).sameMarkup(l)?FR(n.child(a),l,t+1,r):l.nodesBetween(0,l.content.size,r,t+1),t+=l.nodeSize}}function hae(n,e){let t;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(t=fae(n,i,s,t))};return e?e.doc!=n.doc&&FR(e.doc,n.doc,0,r):n.doc.descendants(r),t}function fae(n,e,t,r){const i=$t.get(e);if(!i.problems)return r;r||(r=n.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const u=i.problems[l];if(u.type=="collision"){const c=e.nodeAt(u.pos);if(!c)continue;const h=c.attrs;for(let f=0;f<h.rowspan;f++)s[u.row+f]+=u.n;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,tc(h,h.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const c=r.mapping.map(t);r.delete(c,c+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,u=t+1;l<i.height;l++){const c=e.child(l),h=u+c.nodeSize,f=s[l];if(f>0){let d="cell";c.firstChild&&(d=c.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const y=xs(n.schema)[d].createAndFill();y&&p.push(y)}const m=(l==0||o==l-1)&&a==l?u+1:h-1;r.insert(r.mapping.map(m),p)}u=h}return r.setMeta(cae,{fixTables:!0})}function Vl(n){const e=n.selection,t=$v(n),r=t.node(-1),i=t.start(-1),s=$t.get(r);return{...e instanceof Xt?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(t.pos-i),tableStart:i,map:s,table:r}}function $R(n,{map:e,tableStart:t,table:r},i){let s=i>0?-1:0;iae(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],u=r.nodeAt(l);n.setNodeMarkup(n.mapping.map(t+l),null,rae(u.attrs,i-e.colCount(l))),o+=u.attrs.rowspan-1}else{const l=s==null?xs(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,u=e.positionAt(o,i,r);n.insert(n.mapping.map(t+u),l.createAndFill())}}return n}function dae(n,e){if(!ks(n))return!1;if(e){const t=Vl(n);e($R(n.tr,t,t.left))}return!0}function pae(n,e){if(!ks(n))return!1;if(e){const t=Vl(n);e($R(n.tr,t,t.right))}return!0}function mae(n,{map:e,table:t,tableStart:r},i){const s=n.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],u=t.nodeAt(l),c=u.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)n.setNodeMarkup(n.mapping.slice(s).map(r+l),null,tc(c,i-e.colCount(l)));else{const h=n.mapping.slice(s).map(r+l);n.delete(h,h+u.nodeSize)}o+=c.rowspan}}function gae(n,e){if(!ks(n))return!1;if(e){const t=Vl(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;mae(r,t,i),i!=t.left;i--){const s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=$t.get(s)}e(r)}return!0}function yae(n,{map:e,table:t,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=t.child(u).nodeSize;const o=s+t.child(i).nodeSize,a=n.mapping.maps.length;n.delete(s+r,o+r);const l=new Set;for(let u=0,c=i*e.width;u<e.width;u++,c++){const h=e.map[c];if(!l.has(h)){if(l.add(h),i>0&&h==e.map[c-e.width]){const f=t.nodeAt(h).attrs;n.setNodeMarkup(n.mapping.slice(a).map(h+r),null,{...f,rowspan:f.rowspan-1}),u+=f.colspan-1}else if(i<e.height&&h==e.map[c+e.width]){const f=t.nodeAt(h),d=f.attrs,p=f.type.create({...d,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(i+1,u,t);n.insert(n.mapping.slice(a).map(r+m),p),u+=d.colspan-1}}}}function vae(n,e){if(!ks(n))return!1;if(e){const t=Vl(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;yae(r,t,i),i!=t.top;i--){const s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=$t.get(t.table)}e(r)}return!0}function bae(n,e){return function(t,r){if(!ks(t))return!1;const i=$v(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){const s=t.tr;t.selection instanceof Xt?t.selection.forEachCell((o,a)=>{o.attrs[n]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[n]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:e}),r(s)}return!0}}function xae(n){return function(e,t){if(!ks(e))return!1;if(t){const r=xs(e.schema),i=Vl(e),s=e.tr,o=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);t(s)}return!0}}function vT(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==t.header_cell)return!1}return!0}function ow(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?xae(n):function(t,r){if(!ks(t))return!1;if(r){const i=xs(t.schema),s=Vl(t),o=t.tr,a=vT("row",s,i),l=vT("column",s,i),c=(n==="column"?a:n==="row"?l:!1)?1:0,h=n=="column"?{left:0,top:c,right:1,bottom:s.map.height}:n=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,f=n=="column"?l?i.cell:i.header_cell:n=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(h).forEach(d=>{const p=d+s.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,f,m.attrs)}),r(o)}return!0}}ow("row",{useDeprecatedLogic:!0});ow("column",{useDeprecatedLogic:!0});ow("cell",{useDeprecatedLogic:!0});function wae(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){const s=n.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){const s=t.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function zR(n){return function(e,t){if(!ks(e))return!1;const r=wae($v(e),n);if(r==null)return!1;if(t){const i=e.doc.resolve(r);t(e.tr.setSelection(Be.between(i,nae(i))).scrollIntoView())}return!0}}function Sae(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Am(n,e){const t=n.selection;if(!(t instanceof Xt))return!1;if(e){const r=n.tr,i=xs(n.schema).cell.createAndFill().content;t.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Ce(i,0,0))}),r.docChanged&&e(r)}return!0}function kae(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let u=e.child(l).content;const c=l?0:Math.max(0,t-1),h=l<e.childCount-1?0:Math.max(0,r-1);(c||h)&&(u=O3(xs(o).row,new Ce(u,c,h)).content),a.push(u)}else if(s=="cell"||s=="header_cell")a.push(t||r?O3(xs(o).row,new Ce(e,t,r)).content:e);else return null;return Cae(o,a)}function Cae(n,e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let u=i;u<i+a;u++)t[u]=(t[u]||0)+l}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(se.empty),t[i]<r){const s=xs(n).cell.createAndFill(),o=[];for(let a=t[i];a<r;a++)o.push(s);e[i]=e[i].append(se.from(o))}return{height:e.length,width:r,rows:e}}function O3(n,e){const t=n.createAndFill();return new hN(t).replace(0,t.content.size,e).doc}function Tae({width:n,height:e,rows:t},r,i){if(n!=r){const s=[],o=[];for(let a=0;a<t.length;a++){const l=t[a],u=[];for(let c=s[a]||0,h=0;c<r;h++){let f=l.child(h%l.childCount);c+f.attrs.colspan>r&&(f=f.type.createChecked(tc(f.attrs,f.attrs.colspan,c+f.attrs.colspan-r),f.content)),u.push(f),c+=f.attrs.colspan;for(let d=1;d<f.attrs.rowspan;d++)s[a+d]=(s[a+d]||0)+f.attrs.colspan}o.push(se.from(u))}t=o,n=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],u=t[a%e];for(let c=0;c<u.childCount;c++){let h=u.child(c);o+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),l.push(h)}s.push(se.from(l))}t=s,e=i}return{width:n,height:e,rows:t}}function Eae(n,e,t,r,i,s,o){const a=n.doc.type.schema,l=xs(a);let u,c;if(i>e.width)for(let h=0,f=0;h<e.height;h++){const d=t.child(h);f+=d.nodeSize;const p=[];let m;d.lastChild==null||d.lastChild.type==l.cell?m=u||(u=l.cell.createAndFill()):m=c||(c=l.header_cell.createAndFill());for(let g=e.width;g<i;g++)p.push(m);n.insert(n.mapping.slice(o).map(f-1+r),p)}if(s>e.height){const h=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const g=p>=e.width?!1:t.nodeAt(e.map[m+p]).type==l.header_cell;h.push(g?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}const f=l.row.create(null,se.from(h)),d=[];for(let p=e.height;p<s;p++)d.push(f);n.insert(n.mapping.slice(o).map(r+t.nodeSize-2),d)}return!!(u||c)}function bT(n,e,t,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let u=i;u<s;u++){const c=o*e.width+u,h=e.map[c];if(e.map[c-e.width]==h){l=!0;const f=t.nodeAt(h),{top:d,left:p}=e.findCell(h);n.setNodeMarkup(n.mapping.slice(a).map(h+r),null,{...f.attrs,rowspan:o-d}),n.insert(n.mapping.slice(a).map(e.positionAt(o,p,t)),f.type.createAndFill({...f.attrs,rowspan:d+f.attrs.rowspan-o})),u+=f.attrs.colspan-1}}return l}function xT(n,e,t,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let u=i;u<s;u++){const c=u*e.width+o,h=e.map[c];if(e.map[c-1]==h){l=!0;const f=t.nodeAt(h),d=e.colCount(h),p=n.mapping.slice(a).map(h+r);n.setNodeMarkup(p,null,tc(f.attrs,o-d,f.attrs.colspan-(o-d))),n.insert(p+f.nodeSize,f.type.createAndFill(tc(f.attrs,0,o-d))),u+=f.attrs.rowspan-1}}return l}function wT(n,e,t,r,i){let s=t?n.doc.nodeAt(t-1):n.doc;if(!s)throw new Error("No table found");let o=$t.get(s);const{top:a,left:l}=r,u=l+i.width,c=a+i.height,h=n.tr;let f=0;function d(){if(s=t?h.doc.nodeAt(t-1):h.doc,!s)throw new Error("No table found");o=$t.get(s),f=h.mapping.maps.length}Eae(h,o,s,t,u,c,f)&&d(),bT(h,o,s,t,l,u,a,f)&&d(),bT(h,o,s,t,l,u,c,f)&&d(),xT(h,o,s,t,a,c,l,f)&&d(),xT(h,o,s,t,a,c,u,f)&&d();for(let p=a;p<c;p++){const m=o.positionAt(p,l,s),g=o.positionAt(p,u,s);h.replace(h.mapping.slice(f).map(m+t),h.mapping.slice(f).map(g+t),new Ce(i.rows[p-a],0,0))}d(),h.setSelection(new Xt(h.doc.resolve(t+o.positionAt(a,l,s)),h.doc.resolve(t+o.positionAt(c-1,u-1,s)))),e(h)}var Aae=Z6({ArrowLeft:Mm("horiz",-1),ArrowRight:Mm("horiz",1),ArrowUp:Mm("vert",-1),ArrowDown:Mm("vert",1),"Shift-ArrowLeft":Om("horiz",-1),"Shift-ArrowRight":Om("horiz",1),"Shift-ArrowUp":Om("vert",-1),"Shift-ArrowDown":Om("vert",1),Backspace:Am,"Mod-Backspace":Am,Delete:Am,"Mod-Delete":Am});function q1(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Mm(n,e){return(t,r,i)=>{if(!i)return!1;const s=t.selection;if(s instanceof Xt)return q1(t,r,it.near(s.$headCell,e));if(n!="horiz"&&!s.empty)return!1;const o=VR(i,n,e);if(o==null)return!1;if(n=="horiz")return q1(t,r,it.near(t.doc.resolve(s.head+e),e));{const a=t.doc.resolve(o),l=_R(a,n,e);let u;return l?u=it.near(l,1):e<0?u=it.near(t.doc.resolve(a.before(-1)),-1):u=it.near(t.doc.resolve(a.after(-1)),1),q1(t,r,u)}}}function Om(n,e){return(t,r,i)=>{if(!i)return!1;const s=t.selection;let o;if(s instanceof Xt)o=s;else{const l=VR(i,n,e);if(l==null)return!1;o=new Xt(t.doc.resolve(l))}const a=_R(o.$headCell,n,e);return a?q1(t,r,new Xt(o.$anchorCell,a)):!1}}function Mae(n,e){const t=n.state.doc,r=Ep(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Xt(r))),!0):!1}function Oae(n,e,t){if(!ks(n.state))return!1;let r=kae(t);const i=n.state.selection;if(i instanceof Xt){r||(r={width:1,height:1,rows:[se.from(O3(xs(n.state.schema).cell,t))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=$t.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=Tae(r,a.right-a.left,a.bottom-a.top),wT(n.state,n.dispatch,o,a,r),!0}else if(r){const s=$v(n.state),o=s.start(-1);return wT(n.state,n.dispatch,o,$t.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function Iae(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=ST(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof Xt)s(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Ep(n.state.selection.$anchor))!=null&&((t=K4(n,e))==null?void 0:t.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,u){let c=K4(n,u);const h=il.getState(n.state)==null;if(!c||!sw(l,c))if(h)c=l;else return;const f=new Xt(l,c);if(h||!n.state.selection.eq(f)){const d=n.state.tr.setSelection(f);h&&d.setMeta(il,l.pos),n.dispatch(d)}}function o(){n.root.removeEventListener("mouseup",o),n.root.removeEventListener("dragstart",o),n.root.removeEventListener("mousemove",a),il.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(il,-1))}function a(l){const u=l,c=il.getState(n.state);let h;if(c!=null)h=n.state.doc.resolve(c);else if(ST(n,u.target)!=r&&(h=K4(n,e),!h))return o();h&&s(h,u)}n.root.addEventListener("mouseup",o),n.root.addEventListener("dragstart",o),n.root.addEventListener("mousemove",a)}function VR(n,e,t){if(!(n.state.selection instanceof Be))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(i),l=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(l)?a:null}}return null}function ST(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function K4(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?Ep(n.state.doc.resolve(t.pos)):null}var Dae=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),I3(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,I3(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function I3(n,e,t,r,i,s){var o;let a=0,l=!0,u=e.firstChild;const c=n.firstChild;if(c){for(let h=0,f=0;h<c.childCount;h++){const{colspan:d,colwidth:p}=c.child(h).attrs;for(let m=0;m<d;m++,f++){const g=i==f?s:p&&p[m],y=g?g+"px":"";if(a+=g||r,g||(l=!1),u)u.style.width!=y&&(u.style.width=y),u=u.nextSibling;else{const v=document.createElement("col");v.style.width=y,e.appendChild(v)}}}for(;u;){const h=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=h}l?(t.style.width=a+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=a+"px")}}var Vi=new En("tableColumnResizing");function Nae({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=Dae,lastColumnResizable:i=!0}={}){const s=new gn({key:Vi,state:{init(o,a){var l,u;const c=(u=(l=s.spec)==null?void 0:l.props)==null?void 0:u.nodeViews,h=xs(a.schema).table.name;return r&&c&&(c[h]=(f,d)=>new r(f,t,d)),new Pae(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Vi.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Rae(o,a,n,i)},mouseleave:o=>{Lae(o)},mousedown:(o,a)=>{_ae(o,a,e,t)}},decorations:o=>{const a=Vi.getState(o);if(a&&a.activeHandle>-1)return Vae(o,a.activeHandle)},nodeViews:{}}});return s}var Pae=class U1{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Vi);if(r&&r.setHandle!=null)return new U1(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new U1(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return M3(e.doc.resolve(i))||(i=-1),new U1(i,t.dragging)}return t}};function Rae(n,e,t,r){if(!n.editable)return;const i=Vi.getState(n.state);if(i&&!i.dragging){const s=Fae(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=t?o=kT(n,e,"left",t):l-e.clientX<=t&&(o=kT(n,e,"right",t))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=n.state.doc.resolve(o),l=a.node(-1),u=$t.get(l),c=a.start(-1);if(u.colCount(a.pos-c)+a.nodeAfter.attrs.colspan-1==u.width-1)return}HR(n,o)}}}function Lae(n){if(!n.editable)return;const e=Vi.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&HR(n,-1)}function _ae(n,e,t,r){var i;if(!n.editable)return!1;const s=(i=n.dom.ownerDocument.defaultView)!=null?i:window,o=Vi.getState(n.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=n.state.doc.nodeAt(o.activeHandle),l=Bae(n,o.activeHandle,a.attrs);n.dispatch(n.state.tr.setMeta(Vi,{setDragging:{startX:e.clientX,startWidth:l}}));function u(h){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",c);const f=Vi.getState(n.state);f?.dragging&&($ae(n,f.activeHandle,CT(f.dragging,h,t)),n.dispatch(n.state.tr.setMeta(Vi,{setDragging:null})))}function c(h){if(!h.which)return u(h);const f=Vi.getState(n.state);if(f&&f.dragging){const d=CT(f.dragging,h,t);TT(n,f.activeHandle,d,r)}}return TT(n,o.activeHandle,l,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",c),e.preventDefault(),!0}function Bae(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=n.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=t;if(r)for(let u=0;u<t;u++)r[u]&&(a-=r[u],l--);return a/l}function Fae(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function kT(n,e,t,r){const i=t=="right"?-r:r,s=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=Ep(n.state.doc.resolve(o));if(!a)return-1;if(t=="right")return a.pos;const l=$t.get(a.node(-1)),u=a.start(-1),c=l.map.indexOf(a.pos-u);return c%l.width==0?-1:u+l.map[c-1]}function CT(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function HR(n,e){n.dispatch(n.state.tr.setMeta(Vi,{setHandle:e}))}function $ae(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),s=$t.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=n.state.tr;for(let u=0;u<s.height;u++){const c=u*s.width+a;if(u&&s.map[c]==s.map[c-s.width])continue;const h=s.map[c],f=i.nodeAt(h).attrs,d=f.colspan==1?0:a-s.colCount(h);if(f.colwidth&&f.colwidth[d]==t)continue;const p=f.colwidth?f.colwidth.slice():zae(f.colspan);p[d]=t,l.setNodeMarkup(o+h,null,{...f,colwidth:p})}l.docChanged&&n.dispatch(l)}function TT(n,e,t,r){const i=n.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=$t.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=n.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&I3(s,l.firstChild,l,r,a,t)}function zae(n){return Array(n).fill(0)}function Vae(n,e){var t;const r=[],i=n.doc.resolve(e),s=i.node(-1);if(!s)return Ut.empty;const o=$t.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<o.height;u++){const c=l+u*o.width;if((l==o.width-1||o.map[c]!=o.map[c+1])&&(u==0||o.map[c]!=o.map[c-o.width])){const h=o.map[c],f=a+h+s.nodeAt(h).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",(t=Vi.getState(n))!=null&&t.dragging&&r.push(qn.node(a+h,a+h+s.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(qn.widget(f,d))}}return Ut.create(n.doc,r)}function Hae({allowTableNodeSelection:n=!1}={}){return new gn({key:il,state:{init(){return null},apply(e,t){const r=e.getMeta(il);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:s}=e.mapping.mapResult(t);return i?null:s}},props:{decorations:oae,handleDOMEvents:{mousedown:Iae},createSelectionBetween(e){return il.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Mae,handleKeyDown:Aae,handlePaste:Oae},appendTransaction(e,t,r){return uae(r,hae(r,t),n)}})}var hy=typeof navigator<"u"?navigator:null,aw=hy&&hy.userAgent||"",jae=/Edge\/(\d+)/.exec(aw),Wae=/MSIE \d/.exec(aw),qae=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aw),Uae=!!(Wae||qae||jae),Gae=!Uae&&!!hy&&/Apple Computer/.test(hy.vendor),jR=new En("safari-ime-span"),D3=!1,Kae={key:jR,props:{decorations:Xae,handleDOMEvents:{compositionstart:()=>{D3=!0},compositionend:()=>{D3=!1}}}};function Xae(n){const{$from:e,$to:t,to:r}=n.selection;if(D3&&e.sameParent(t)){const i=qn.widget(r,Yae,{ignoreSelection:!0,key:"safari-ime-span"});return Ut.create(n.doc,[i])}}function Yae(n){const e=n.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var Jae=new gn(Gae?Kae:{key:jR});function ET(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function Zae(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Qae(n,e,t){const i=wv((t||{}).ignore||[]),s=ele(e);let o=-1;for(;++o<s.length;)j6(n,"text",a);function a(u,c){let h=-1,f;for(;++h<c.length;){const d=c[h],p=f?f.children:void 0;if(i(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return l(u,c)}function l(u,c){const h=c[c.length-1],f=s[o][0],d=s[o][1];let p=0;const g=h.children.indexOf(u);let y=!1,v=[];f.lastIndex=0;let x=f.exec(u.value);for(;x;){const k=x.index,C={index:x.index,input:x.input,stack:[...c,u]};let w=d(...x,C);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?f.lastIndex=k+1:(p!==k&&v.push({type:"text",value:u.value.slice(p,k)}),Array.isArray(w)?v.push(...w):w&&v.push(w),p=k+x[0].length,y=!0),!f.global)break;x=f.exec(u.value)}return y?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),h.children.splice(g,1,...v)):v=[u],g+v.length}}function ele(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const i=t[r];e.push([tle(i[0]),nle(i[1])])}return e}function tle(n){return typeof n=="string"?new RegExp(Zae(n),"g"):n}function nle(n){return typeof n=="function"?n:function(){return n}}const X4="phrasing",Y4=["autolink","link","image","label"];function rle(){return{transforms:[cle],enter:{literalAutolink:sle,literalAutolinkEmail:J4,literalAutolinkHttp:J4,literalAutolinkWww:J4},exit:{literalAutolink:ule,literalAutolinkEmail:lle,literalAutolinkHttp:ole,literalAutolinkWww:ale}}}function ile(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:X4,notInConstruct:Y4},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:X4,notInConstruct:Y4},{character:":",before:"[ps]",after:"\\/",inConstruct:X4,notInConstruct:Y4}]}}function sle(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function J4(n){this.config.enter.autolinkProtocol.call(this,n)}function ole(n){this.config.exit.autolinkProtocol.call(this,n)}function ale(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function lle(n){this.config.exit.autolinkEmail.call(this,n)}function ule(n){this.exit(n)}function cle(n){Qae(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,hle],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),fle]],{ignore:["link","linkReference"]})}function hle(n,e,t,r,i){let s="";if(!WR(i)||(/^w/i.test(e)&&(t=e+t,e="",s="http://"),!dle(t)))return!1;const o=ple(t+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function fle(n,e,t,r){return!WR(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function dle(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function ple(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const i=ET(n,"(");let s=ET(n,")");for(;r!==-1&&i>s;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),s++;return[n,t]}function WR(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Zu(t)||bv(t))&&(!e||t!==47)}qR.peek=kle;function mle(){this.buffer()}function gle(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function yle(){this.buffer()}function vle(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function ble(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Bs(this.sliceSerialize(n)).toLowerCase(),t.label=e}function xle(n){this.exit(n)}function wle(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Bs(this.sliceSerialize(n)).toLowerCase(),t.label=e}function Sle(n){this.exit(n)}function kle(){return"["}function qR(n,e,t,r){const i=t.createTracker(r);let s=i.move("[^");const o=t.enter("footnoteReference"),a=t.enter("reference");return s+=i.move(t.safe(t.associationId(n),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Cle(){return{enter:{gfmFootnoteCallString:mle,gfmFootnoteCall:gle,gfmFootnoteDefinitionLabelString:yle,gfmFootnoteDefinition:vle},exit:{gfmFootnoteCallString:ble,gfmFootnoteCall:xle,gfmFootnoteDefinitionLabelString:wle,gfmFootnoteDefinition:Sle}}}function Tle(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:qR},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),c(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?UR:Ele))),u(),l}}function Ele(n,e,t){return e===0?n:UR(n,e,t)}function UR(n,e,t){return(t?"":"    ")+n}const Ale=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];GR.peek=Nle;function Mle(){return{canContainEols:["delete"],enter:{strikethrough:Ile},exit:{strikethrough:Dle}}}function Ole(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Ale}],handlers:{delete:GR}}}function Ile(n){this.enter({type:"delete",children:[]},n)}function Dle(n){this.exit(n)}function GR(n,e,t,r){const i=t.createTracker(r),s=t.enter("strikethrough");let o=i.move("~~");return o+=t.containerPhrasing(n,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Nle(){return"~"}function Ple(n){return n.length}function Rle(n,e){const t=e||{},r=(t.align||[]).concat(),i=t.stringLength||Ple,s=[],o=[],a=[],l=[];let u=0,c=-1;for(;++c<n.length;){const m=[],g=[];let y=-1;for(n[c].length>u&&(u=n[c].length);++y<n[c].length;){const v=Lle(n[c][y]);if(t.alignDelimiters!==!1){const x=i(v);g[y]=x,(l[y]===void 0||x>l[y])&&(l[y]=x)}m.push(v)}o[c]=m,a[c]=g}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)s[h]=AT(r[h]);else{const m=AT(r);for(;++h<u;)s[h]=m}h=-1;const f=[],d=[];for(;++h<u;){const m=s[h];let g="",y="";m===99?(g=":",y=":"):m===108?g=":":m===114&&(y=":");let v=t.alignDelimiters===!1?1:Math.max(1,l[h]-g.length-y.length);const x=g+"-".repeat(v)+y;t.alignDelimiters!==!1&&(v=g.length+v+y.length,v>l[h]&&(l[h]=v),d[h]=v),f[h]=x}o.splice(1,0,f),a.splice(1,0,d),c=-1;const p=[];for(;++c<o.length;){const m=o[c],g=a[c];h=-1;const y=[];for(;++h<u;){const v=m[h]||"";let x="",k="";if(t.alignDelimiters!==!1){const C=l[h]-(g[h]||0),w=s[h];w===114?x=" ".repeat(C):w===99?C%2?(x=" ".repeat(C/2+.5),k=" ".repeat(C/2-.5)):(x=" ".repeat(C/2),k=x):k=" ".repeat(C)}t.delimiterStart!==!1&&!h&&y.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&v==="")&&(t.delimiterStart!==!1||h)&&y.push(" "),t.alignDelimiters!==!1&&y.push(x),y.push(v),t.alignDelimiters!==!1&&y.push(k),t.padding!==!1&&y.push(" "),(t.delimiterEnd!==!1||h!==u-1)&&y.push("|")}p.push(t.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return p.join(`
`)}function Lle(n){return n==null?"":String(n)}function AT(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function _le(){return{enter:{table:Ble,tableData:MT,tableHeader:MT,tableRow:$le},exit:{codeText:zle,table:Fle,tableData:Z4,tableHeader:Z4,tableRow:Z4}}}function Ble(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function Fle(n){this.exit(n),this.data.inTable=void 0}function $le(n){this.enter({type:"tableRow",children:[]},n)}function Z4(n){this.exit(n)}function MT(n){this.enter({type:"tableCell",children:[]},n)}function zle(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Vle));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function Vle(n,e){return e==="|"?e:n}function Hle(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,p,m,g){return u(c(d,m,g),d.align)}function a(d,p,m,g){const y=h(d,m,g),v=u([y]);return v.slice(0,v.indexOf(`
`))}function l(d,p,m,g){const y=m.enter("tableCell"),v=m.enter("phrasing"),x=m.containerPhrasing(d,{...g,before:s,after:s});return v(),y(),x}function u(d,p){return Rle(d,{align:p,alignDelimiters:r,padding:t,stringLength:i})}function c(d,p,m){const g=d.children;let y=-1;const v=[],x=p.enter("table");for(;++y<g.length;)v[y]=h(g[y],p,m);return x(),v}function h(d,p,m){const g=d.children;let y=-1;const v=[],x=p.enter("tableRow");for(;++y<g.length;)v[y]=l(g[y],d,p,m);return x(),v}function f(d,p,m){let g=q6.inlineCode(d,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function jle(){return{exit:{taskListCheckValueChecked:OT,taskListCheckValueUnchecked:OT,paragraph:qle}}}function Wle(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ule}}}function OT(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function qle(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function Ule(n,e,t,r){const i=n.children[0],s=typeof n.checked=="boolean"&&i&&i.type==="paragraph",o="["+(n.checked?"x":" ")+"] ",a=t.createTracker(r);s&&a.move(o);let l=q6.listItem(n,e,t,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function Gle(){return[rle(),Cle(),Mle(),_le(),jle()]}function Kle(n){return{extensions:[ile(),Tle(n),Ole(),Hle(n),Wle()]}}const Xle={tokenize:tue,partial:!0},KR={tokenize:nue,partial:!0},XR={tokenize:rue,partial:!0},YR={tokenize:iue,partial:!0},Yle={tokenize:sue,partial:!0},JR={name:"wwwAutolink",tokenize:Qle,previous:QR},ZR={name:"protocolAutolink",tokenize:eue,previous:eL},Da={name:"emailAutolink",tokenize:Zle,previous:tL},Oo={};function Jle(){return{text:Oo}}let Xl=48;for(;Xl<123;)Oo[Xl]=Da,Xl++,Xl===58?Xl=65:Xl===91&&(Xl=97);Oo[43]=Da;Oo[45]=Da;Oo[46]=Da;Oo[95]=Da;Oo[72]=[Da,ZR];Oo[104]=[Da,ZR];Oo[87]=[Da,JR];Oo[119]=[Da,JR];function Zle(n,e,t){const r=this;let i,s;return o;function o(h){return!N3(h)||!tL.call(r,r.previous)||lw(r.events)?t(h):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),a(h))}function a(h){return N3(h)?(n.consume(h),a):h===64?(n.consume(h),l):t(h)}function l(h){return h===46?n.check(Yle,c,u)(h):h===45||h===95||vi(h)?(s=!0,n.consume(h),l):c(h)}function u(h){return n.consume(h),i=!0,l}function c(h){return s&&i&&qr(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(h)):t(h)}}function Qle(n,e,t){const r=this;return i;function i(o){return o!==87&&o!==119||!QR.call(r,r.previous)||lw(r.events)?t(o):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(Xle,n.attempt(KR,n.attempt(XR,s),t),t)(o))}function s(o){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(o)}}function eue(n,e,t){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&eL.call(r,r.previous)&&!lw(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),n.consume(h),a):t(h)}function a(h){if(qr(h)&&i.length<5)return i+=String.fromCodePoint(h),n.consume(h),a;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return n.consume(h),l}return t(h)}function l(h){return h===47?(n.consume(h),s?u:(s=!0,l)):t(h)}function u(h){return h===null||ty(h)||Kt(h)||Zu(h)||bv(h)?t(h):n.attempt(KR,n.attempt(XR,c),t)(h)}function c(h){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(h)}}function tue(n,e,t){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,n.consume(o),i):o===46&&r===3?(n.consume(o),s):t(o)}function s(o){return o===null?t(o):e(o)}}function nue(n,e,t){let r,i,s;return o;function o(u){return u===46||u===95?n.check(YR,l,a)(u):u===null||Kt(u)||Zu(u)||u!==45&&bv(u)?l(u):(s=!0,n.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),n.consume(u),o}function l(u){return i||r||!s?t(u):e(u)}}function rue(n,e){let t=0,r=0;return i;function i(o){return o===40?(t++,n.consume(o),i):o===41&&r<t?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?n.check(YR,e,s)(o):o===null||Kt(o)||Zu(o)?e(o):(n.consume(o),i)}function s(o){return o===41&&r++,n.consume(o),i}}function iue(n,e,t){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(n.consume(a),r):a===38?(n.consume(a),s):a===93?(n.consume(a),i):a===60||a===null||Kt(a)||Zu(a)?e(a):t(a)}function i(a){return a===null||a===40||a===91||Kt(a)||Zu(a)?e(a):r(a)}function s(a){return qr(a)?o(a):t(a)}function o(a){return a===59?(n.consume(a),r):qr(a)?(n.consume(a),o):t(a)}}function sue(n,e,t){return r;function r(s){return n.consume(s),i}function i(s){return vi(s)?t(s):e(s)}}function QR(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Kt(n)}function eL(n){return!qr(n)}function tL(n){return!(n===47||N3(n))}function N3(n){return n===43||n===45||n===46||n===95||vi(n)}function lw(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const oue={tokenize:pue,partial:!0};function aue(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:hue,continuation:{tokenize:fue},exit:due}},text:{91:{name:"gfmFootnoteCall",tokenize:cue},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:lue,resolveTo:uue}}}}function lue(n,e,t){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return t(l);const u=Bs(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?t(l):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(l),n.exit("gfmFootnoteCallLabelMarker"),e(l))}}function uue(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...a),n}function cue(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?t(h):(n.enter("gfmFootnoteCallMarker"),n.consume(h),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!o||h===null||h===91||Kt(h))return t(h);if(h===93){n.exit("chunkString");const f=n.exit("gfmFootnoteCallString");return i.includes(Bs(r.sliceSerialize(f)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(h)}return Kt(h)||(o=!0),s++,n.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(n.consume(h),s++,u):u(h)}}function hue(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",c):t(p)}function c(p){if(o>999||p===93&&!a||p===null||p===91||Kt(p))return t(p);if(p===93){n.exit("chunkString");const m=n.exit("gfmFootnoteDefinitionLabelString");return s=Bs(r.sliceSerialize(m)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),f}return Kt(p)||(a=!0),o++,n.consume(p),p===92?h:c}function h(p){return p===91||p===92||p===93?(n.consume(p),o++,c):c(p)}function f(p){return p===58?(n.enter("definitionMarker"),n.consume(p),n.exit("definitionMarker"),i.includes(s)||i.push(s),St(n,d,"gfmFootnoteDefinitionWhitespace")):t(p)}function d(p){return e(p)}}function fue(n,e,t){return n.check(yp,e,n.attempt(oue,e,t))}function due(n){n.exit("gfmFootnoteDefinition")}function pue(n,e,t){const r=this;return St(n,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):t(s)}}function mue(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",h,a]],d=a.parser.constructs.insideSpan.null;d&&qi(f,f.length,0,xv(d,o.slice(u+1,l),a)),qi(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),qi(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,c=this.events;let h=0;return f;function f(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const m=kh(u);if(p===126)return h>1?l(p):(o.consume(p),h++,d);if(h<2&&!t)return l(p);const g=o.exit("strikethroughSequenceTemporary"),y=kh(p);return g._open=!y||y===2&&!!m,g._close=!m||m===2&&!!y,a(p)}}}class gue{constructor(){this.map=[]}add(e,t,r){yue(this,e,t,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function yue(n,e,t,r){let i=0;if(!(t===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===e){n.map[i][1]+=t,n.map[i][2].push(...r);return}i+=1}n.map.push([e,t,r])}}function vue(n,e){let t=!1;const r=[];for(;e<n.length;){const i=n[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function bue(){return{flow:{null:{name:"table",tokenize:xue,resolveAll:wue}}}}function xue(n,e,t){const r=this;let i=0,s=0,o;return a;function a(E){let N=r.events.length-1;for(;N>-1;){const F=r.events[N][1].type;if(F==="lineEnding"||F==="linePrefix")N--;else break}const I=N>-1?r.events[N][1].type:null,L=I==="tableHead"||I==="tableRow"?w:l;return L===w&&r.parser.lazy[r.now().line]?t(E):L(E)}function l(E){return n.enter("tableHead"),n.enter("tableRow"),u(E)}function u(E){return E===124||(o=!0,s+=1),c(E)}function c(E){return E===null?t(E):Fe(E)?s>1?(s=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),d):t(E):Et(E)?St(n,c,"whitespace")(E):(s+=1,o&&(o=!1,i+=1),E===124?(n.enter("tableCellDivider"),n.consume(E),n.exit("tableCellDivider"),o=!0,c):(n.enter("data"),h(E)))}function h(E){return E===null||E===124||Kt(E)?(n.exit("data"),c(E)):(n.consume(E),E===92?f:h)}function f(E){return E===92||E===124?(n.consume(E),h):h(E)}function d(E){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(E):(n.enter("tableDelimiterRow"),o=!1,Et(E)?St(n,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):p(E))}function p(E){return E===45||E===58?g(E):E===124?(o=!0,n.enter("tableCellDivider"),n.consume(E),n.exit("tableCellDivider"),m):C(E)}function m(E){return Et(E)?St(n,g,"whitespace")(E):g(E)}function g(E){return E===58?(s+=1,o=!0,n.enter("tableDelimiterMarker"),n.consume(E),n.exit("tableDelimiterMarker"),y):E===45?(s+=1,y(E)):E===null||Fe(E)?k(E):C(E)}function y(E){return E===45?(n.enter("tableDelimiterFiller"),v(E)):C(E)}function v(E){return E===45?(n.consume(E),v):E===58?(o=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(E),n.exit("tableDelimiterMarker"),x):(n.exit("tableDelimiterFiller"),x(E))}function x(E){return Et(E)?St(n,k,"whitespace")(E):k(E)}function k(E){return E===124?p(E):E===null||Fe(E)?!o||i!==s?C(E):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(E)):C(E)}function C(E){return t(E)}function w(E){return n.enter("tableRow"),M(E)}function M(E){return E===124?(n.enter("tableCellDivider"),n.consume(E),n.exit("tableCellDivider"),M):E===null||Fe(E)?(n.exit("tableRow"),e(E)):Et(E)?St(n,M,"whitespace")(E):(n.enter("data"),D(E))}function D(E){return E===null||E===124||Kt(E)?(n.exit("data"),M(E)):(n.consume(E),E===92?A:D)}function A(E){return E===92||E===124?(n.consume(E),D):D(E)}}function wue(n,e){let t=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,h;const f=new gue;for(;++t<n.length;){const d=n[t],p=d[1];d[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(IT(f,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(t,0,[["enter",u,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,t+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(t,0,[["enter",c,e]])),i=p.type==="tableDelimiterRow"?2:c?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Im(f,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=t)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=Im(f,e,s,i,void 0,h)),s=o,o=[s[1],t,0,0])):p.type==="tableHead"?(a=!0,l=t):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=t,s[1]!==0?(o[0]=o[1],h=Im(f,e,s,i,t,h)):o[1]!==0&&(h=Im(f,e,o,i,t,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=t)}for(l!==0&&IT(f,e,l,u,c),f.consume(e.events),t=-1;++t<e.events.length;){const d=e.events[t];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=vue(e.events,t))}return n}function Im(n,e,t,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";t[0]!==0&&(s.end=Object.assign({},Ic(e.events,t[0])),n.add(t[0],0,[["exit",s,e]]));const l=Ic(e.events,t[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},n.add(t[1],0,[["enter",s,e]]),t[2]!==0){const u=Ic(e.events,t[2]),c=Ic(e.events,t[3]),h={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(n.add(t[2],0,[["enter",h,e]]),r!==2){const f=e.events[t[2]],d=e.events[t[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",t[3]>t[2]+1){const p=t[2]+1,m=t[3]-t[2]-1;n.add(p,m,[])}}n.add(t[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Ic(e.events,i)),n.add(i,0,[["exit",s,e]]),s=void 0),s}function IT(n,e,t,r,i){const s=[],o=Ic(e.events,t);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),n.add(t+1,0,s)}function Ic(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const Sue={name:"tasklistCheck",tokenize:Cue};function kue(){return{text:{91:Sue}}}function Cue(n,e,t){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(l):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),s)}function s(l){return Kt(l)?(n.enter("taskListCheckValueUnchecked"),n.consume(l),n.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(n.enter("taskListCheckValueChecked"),n.consume(l),n.exit("taskListCheckValueChecked"),o):t(l)}function o(l){return l===93?(n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),a):t(l)}function a(l){return Fe(l)?e(l):Et(l)?n.check({tokenize:Tue},e,t)(l):t(l)}}function Tue(n,e,t){return St(n,r,"whitespace");function r(i){return i===null?t(i):e(i)}}function Eue(n){return TN([Jle(),aue(),mue(n),bue(),kue()])}const Aue={};function Mue(n){const e=this,t=n||Aue,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Eue(t)),s.push(Gle()),o.push(Kle(t))}function ot(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...e}}),n}const uw=kp("strike_through");ot(uw,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Xh=qh("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",n.get(uw.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,t,r)=>{e.openMark(r),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,t)=>{e.withMark(t,"delete")}}}));ot(Xh.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});ot(Xh.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const zv=st("ToggleStrikeThrough",n=>()=>kv(Xh.type(n)));ot(zv,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const nL=$r(n=>gp(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),Xh.type(n)));ot(nL,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const cw=Ti("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const e=n.get(Pe);return()=>e.call(zv.key)}}});ot(cw.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});ot(cw.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Ap=eae({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,e)=>{e.style=`text-align: ${n||"left"}`}}}}),ac=Fn("table",()=>({...Ap.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,e,t)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r,isHeader:o===0}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,e)=>{const t=e.content.firstChild?.content;if(!t)return;const r=[];t.forEach(i=>{r.push(i.attrs.alignment)}),n.openNode("table",void 0,{align:r}),n.next(e.content),n.closeNode()}}}));ot(ac.node,{displayName:"NodeSchema<table>",group:"Table"});ot(ac.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const Vv=Fn("table_header_row",()=>({...Ap.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,e,t)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o],isHeader:e.isHeader}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,e)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(e.content),n.closeNode()}}}));ot(Vv.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});ot(Vv.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const Mp=Fn("table_row",()=>({...Ap.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,e,t)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o]}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,e)=>{e.content.size!==0&&(n.openNode("tableRow"),n.next(e.content),n.closeNode())}}}));ot(Mp.node,{displayName:"NodeSchema<tableRow>",group:"Table"});ot(Mp.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const Op=Fn("table_cell",()=>({...Ap.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}).openNode(n.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,e)=>{n.openNode("tableCell").next(e.content).closeNode()}}}));ot(Op.node,{displayName:"NodeSchema<tableCell>",group:"Table"});ot(Op.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const Hv=Fn("table_header",()=>({...Ap.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}),n.openNode(n.schema.nodes.paragraph),n.next(e.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,e)=>{n.openNode("tableCell"),n.next(e.content),n.closeNode()}}}));ot(Hv.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});ot(Hv.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function hw(n,e=3,t=3){const r=Array(t).fill(0).map(()=>Op.type(n).createAndFill()),i=Array(t).fill(0).map(()=>Hv.type(n).createAndFill()),s=Array(e).fill(0).map((o,a)=>a===0?Vv.type(n).create(null,i):Mp.type(n).create(null,r));return ac.type(n).create(null,s)}function Yh(n){return B6(e=>e.type.spec.tableRole==="table")(n)}function Dc(n,e){const t=Yh(e.$from);if(!t)return;const r=$t.get(t.node);return(Array.isArray(n)?n:[n]).filter(s=>s>=0&&s<=r.width-1).flatMap(s=>r.cellsInRect({left:s,right:s+1,top:0,bottom:r.height}).map(a=>{const l=t.node.nodeAt(a),u=a+t.start;return{pos:u,start:u+1,node:l,depth:t.depth+2}}))}function Nc(n,e){const t=Yh(e.$from);if(!t)return;const r=$t.get(t.node);return(Array.isArray(n)?n:[n]).filter(s=>s>=0&&s<=r.height-1).flatMap(s=>r.cellsInRect({left:0,right:r.width,top:s,bottom:s+1}).map(a=>{const l=t.node.nodeAt(a),u=a+t.start;return{pos:u,start:u+1,node:l,depth:t.depth+2}}))}function rL(n){return(e,t)=>r=>{t=t??r.selection.from;const i=r.doc.resolve(t),s=B6(l=>l.type.name==="table")(i),o=s?{node:s.node,from:s.start}:void 0,a=n==="row";if(o){const l=$t.get(o.node);if(e>=0&&e<(a?l.height:l.width)){const u=l.positionAt(a?e:l.height-1,a?l.width-1:e,o.node),c=r.doc.resolve(o.from+u),h=a?Xt.rowSelection:Xt.colSelection,f=l.positionAt(a?e:0,a?0:e,o.node),d=r.doc.resolve(o.from+f);return wN(r.setSelection(h(c,d)))}}return r}}const Oue=rL("row"),Iue=rL("col");function iL(n,e,{map:t,tableStart:r,table:i},s){const o=Array(s).fill(0).reduce((l,u,c)=>l+i.child(c).nodeSize,r),a=Array(t.width).fill(0).map((l,u)=>{const c=i.nodeAt(t.map[u]);return Op.type(n).createAndFill({alignment:c?.attrs.alignment})});return e.insert(o,Mp.type(n).create(null,a)),e}function sL(n,e){const t=[],r=$t.get(n);for(let s=0;s<r.height;s++){const o=n.child(s),a=[];for(let l=0;l<r.width;l++){if(!e[s][l])continue;const u=r.map[s*r.width+l],c=e[s][l],f=n.nodeAt(u).type.createChecked(Object.assign({},c.attrs),c.content,c.marks);a.push(f)}t.push(o.type.createChecked(o.attrs,a,o.marks))}return n.type.createChecked(n.attrs,t,n.marks)}function oL(n){const e=$t.get(n),t=[],r=e.height,i=e.width;for(let s=0;s<r;s++){const o=[];for(let a=0;a<i;a++){let l=s*i+a,u=e.map[l];if(s>0){const c=l-i,h=e.map[c];if(u===h){o.push(null);continue}}if(a>0){const c=l-1,h=e.map[c];if(u===h){o.push(null);continue}}u?o.push(n.nodeAt(u)):o.push(null)}t.push(o)}return t}function DT(n,e,t=e){let r=e,i=t;for(let h=e;h>=0;h--){const f=Nc(h,n.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+h-1;p>=r&&(r=h),p>i&&(i=p)})}for(let h=e;h<=i;h++){const f=Nc(h,n.selection);f&&f.forEach(d=>{const p=d.node.attrs.rowspan+h-1;d.node.attrs.rowspan>1&&p>i&&(i=p)})}const s=[];for(let h=r;h<=i;h++){const f=Nc(h,n.selection);f&&f.length>0&&s.push(h)}r=s[0],i=s[s.length-1];const o=Nc(r,n.selection),a=Dc(0,n.selection);if(!o||!a)return;const l=n.doc.resolve(o[o.length-1].pos);let u;for(let h=i;h>=r;h--){const f=Nc(h,n.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){u=f[0];break}if(u)break}}if(!u)return;const c=n.doc.resolve(u.pos);return{$anchor:l,$head:c,indexes:s}}function aL(n,e,t,r){const i=e[0]>t[0]?-1:1,s=n.splice(e[0],e.length),o=s.length%2===0?1:0;let a;return a=i===-1?t[0]:t[t.length-1]-o,n.splice(a,0,...s),n}function Due(n){const{tr:e,origin:t,target:r,pos:i}=n,s=e.doc.resolve(i),o=Yh(s);if(!o)return!1;const a=DT(e,t)?.indexes,l=DT(e,r)?.indexes;if(!a||!l||a.includes(r))return!1;const u=Nue(o.node,a,l);e.replaceWith(o.pos,o.pos+o.node.nodeSize,u);const c=$t.get(u),h=o.start,f=r,d=c.positionAt(f,c.width-1,u),p=e.doc.resolve(h+d),m=c.positionAt(f,0,u),g=e.doc.resolve(h+m);return e.setSelection(Xt.rowSelection(p,g)),!0}function Nue(n,e,t,r){let i=oL(n);return i=aL(i,e,t),sL(n,i)}function NT(n,e,t=e){let r=e,i=t;for(let h=e;h>=0;h--){const f=Dc(h,n.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+h-1;p>=r&&(r=h),p>i&&(i=p)})}for(let h=e;h<=i;h++){const f=Dc(h,n.selection);f&&f.forEach(d=>{const p=d.node.attrs.colspan+h-1;d.node.attrs.colspan>1&&p>i&&(i=p)})}const s=[];for(let h=r;h<=i;h++){const f=Dc(h,n.selection);f&&f.length>0&&s.push(h)}r=s[0],i=s[s.length-1];const o=Dc(r,n.selection),a=Nc(0,n.selection);if(!o||!a)return;const l=n.doc.resolve(o[o.length-1].pos);let u;for(let h=i;h>=r;h--){const f=Dc(h,n.selection);if(f&&f.length>0){for(let d=a.length-1;d>=0;d--)if(a[d].pos===f[0].pos){u=f[0];break}if(u)break}}if(!u)return;const c=n.doc.resolve(u.pos);return{$anchor:l,$head:c,indexes:s}}function PT(n){return n[0].map((e,t)=>n.map(r=>r[t]))}function Pue(n){const{tr:e,origin:t,target:r,pos:i}=n,s=e.doc.resolve(i),o=Yh(s);if(!o)return!1;const a=NT(e,t)?.indexes,l=NT(e,r)?.indexes;if(!a||!l||a.includes(r))return!1;const u=Rue(o.node,a,l);e.replaceWith(o.pos,o.pos+o.node.nodeSize,u);const c=$t.get(u),h=o.start,f=r,d=c.positionAt(c.height-1,f,u),p=e.doc.resolve(h+d),m=c.positionAt(0,f,u),g=e.doc.resolve(h+m);return e.setSelection(Xt.colSelection(p,g)),!0}function Rue(n,e,t,r){let i=PT(oL(n));return i=aL(i,e,t),i=PT(i),sL(n,i)}function Lue(n){const e=Yh(n.$from);if(!e)return;const t=$t.get(e.node);return t.cellsInRect({left:0,right:t.width,top:0,bottom:t.height}).map(i=>{const s=e.node.nodeAt(i),o=i+e.start;return{pos:o,start:o+1,node:s}})}function _ue(n){const e=Lue(n.selection);if(e&&e[0]){const t=n.doc.resolve(e[0].pos),r=e[e.length-1];if(r){const i=n.doc.resolve(r.pos);return wN(n.setSelection(new Xt(i,t)))}}return n}const fw=st("GoToPrevTableCell",()=>()=>zR(-1));ot(fw,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const dw=st("GoToNextTableCell",()=>()=>zR(1));ot(dw,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const pw=st("ExitTable",n=>()=>(e,t)=>{if(!ks(e))return!1;const{$head:r}=e.selection,i=OQ(r,ac.type(n));if(!i)return!1;const{to:s}=i,o=e.tr.replaceWith(s,s,Mo.type(n).createAndFill());return o.setSelection(it.near(o.doc.resolve(s),1)).scrollIntoView(),t?.(o),!0});ot(pw,{displayName:"Command<breakTableCommand>",group:"Table"});const lL=st("InsertTable",n=>({row:e,col:t}={})=>(r,i)=>{const{selection:s,tr:o}=r,{from:a}=s,l=hw(n,e,t),u=o.replaceSelectionWith(l),c=it.findFrom(u.doc.resolve(a),1,!0);return c&&u.setSelection(c),i?.(u),!0});ot(lL,{displayName:"Command<insertTableCommand>",group:"Table"});const mw=st("MoveRow",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:s}=r;return Due({tr:s,origin:n??0,target:e??0,pos:t??r.selection.from})?(i?.(s),!0):!1});ot(mw,{displayName:"Command<moveRowCommand>",group:"Table"});const gw=st("MoveCol",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:s}=r;return Pue({tr:s,origin:n??0,target:e??0,pos:t??r.selection.from})?(i?.(s),!0):!1});ot(gw,{displayName:"Command<moveColCommand>",group:"Table"});const xu=st("SelectRow",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!t?.(Oue(n.index,n.pos)(r))});ot(xu,{displayName:"Command<selectRowCommand>",group:"Table"});const wu=st("SelectCol",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!t?.(Iue(n.index,n.pos)(r))});ot(wu,{displayName:"Command<selectColCommand>",group:"Table"});const uL=st("SelectTable",()=>()=>(n,e)=>{const{tr:t}=n;return!!e?.(_ue(t))});ot(uL,{displayName:"Command<selectTableCommand>",group:"Table"});const yw=st("DeleteSelectedCells",()=>()=>(n,e)=>{const{selection:t}=n;if(!(t instanceof Xt))return!1;const r=t.isRowSelection(),i=t.isColSelection();return r&&i?Sae(n,e):i?gae(n,e):vae(n,e)});ot(yw,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const vw=st("AddColBefore",()=>()=>dae);ot(vw,{displayName:"Command<addColBeforeCommand>",group:"Table"});const bw=st("AddColAfter",()=>()=>pae);ot(bw,{displayName:"Command<addColAfterCommand>",group:"Table"});const xw=st("AddRowBefore",n=>()=>(e,t)=>{if(!ks(e))return!1;if(t){const r=Vl(e);t(iL(n,e.tr,r,r.top))}return!0});ot(xw,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const ww=st("AddRowAfter",n=>()=>(e,t)=>{if(!ks(e))return!1;if(t){const r=Vl(e);t(iL(n,e.tr,r,r.bottom))}return!0});ot(ww,{displayName:"Command<addRowAfterCommand>",group:"Table"});const Sw=st("SetAlign",()=>(n="left")=>bae("alignment",n));ot(Sw,{displayName:"Command<setAlignCommand>",group:"Table"});const cL=$r(n=>new Si(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,t,r,i)=>{const s=e.doc.resolve(r);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),ac.type(n)))return null;const o=Math.max(Number(t.groups?.row??0),2),a=hw(n,o,Number(t.groups?.col)),l=e.tr.replaceRangeWith(r,i,a);return l.setSelection(Be.create(l.doc,r+3)).scrollIntoView()}));ot(cL,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const kw=Ti("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:n=>{const e=n.get(Pe);return()=>e.call(dw.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const e=n.get(Pe);return()=>e.call(fw.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const e=n.get(Pe);return()=>e.call(pw.key)}}});ot(kw.ctx,{displayName:"KeymapCtx<table>",group:"Table"});ot(kw.shortcuts,{displayName:"Keymap<table>",group:"Table"});const Q4="footnote_definition",RT="footnoteDefinition",Cw=Fn("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${Q4}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw qs(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const e=n.attrs.label;return["dl",{"data-label":e,"data-type":Q4},["dt",e],["dd",0]]},parseMarkdown:{match:({type:n})=>n===RT,runner:(n,e,t)=>{n.openNode(t,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:n=>n.type.name===Q4,runner:(n,e)=>{n.openNode(RT,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));ot(Cw.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});ot(Cw.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const eb="footnote_reference",Tw=Fn("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${eb}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw qs(n);return{label:n.dataset.label}}}],toDOM:n=>{const e=n.attrs.label;return["sup",{"data-label":e,"data-type":eb},e]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,e,t)=>{n.addNode(t,{label:e.label})}},toMarkdown:{match:n=>n.type.name===eb,runner:(n,e)=>{n.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));ot(Tw.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});ot(Tw.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const Ew=Gs.extendSchema(n=>e=>{const t=n(e);return{...t,attrs:{...t.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw qs(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...t?.parseDOM||[]],toDOM:r=>t.toDOM&&r.attrs.checked==null?t.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,s)=>{if(i.checked==null){t.parseMarkdown.runner(r,i,s);return}const o=i.label!=null?`${i.label}.`:"•",a=i.checked!=null?!!i.checked:null,l=i.label!=null?"ordered":"bullet",u=i.spread!=null?`${i.spread}`:"true";r.openNode(s,{label:o,listType:l,spread:u,checked:a}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){t.toMarkdown.runner(r,i);return}const s=i.attrs.label,o=i.attrs.listType,a=i.attrs.spread==="true",l=i.attrs.checked;r.openNode("listItem",void 0,{label:s,listType:o,spread:a,checked:l}),r.next(i.content),r.closeNode()}}}});ot(Ew.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});ot(Ew.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const hL=$r(()=>new Si(/^\[(?<checked>\s|x)\]\s$/,(n,e,t,r)=>{const i=n.doc.resolve(t);let s=0,o=i.node(s);for(;o&&o.type.name!=="list_item";)s--,o=i.node(s);if(!o||o.attrs.checked!=null)return null;const a=e.groups?.checked==="x",l=i.before(s),u=n.tr;return u.deleteRange(t,r).setNodeMarkup(l,void 0,{...o.attrs,checked:a}),u}));ot(hL,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const Bue=[cw,kw].flat(),Fue=[cL,hL],$ue=[nL],fL=ir(()=>Jae);ot(fL,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const zue=ir(()=>Nae({}));ot(zue,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const dL=ir(()=>Hae({allowTableNodeSelection:!0}));ot(dL,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const Aw=Ao("remarkGFM",()=>Mue);ot(Aw.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});ot(Aw.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const Vue=new En("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function Hue(n,e){let t=0;return e.forEach((r,i,s)=>{r===n&&(t=s)}),t}const pL=ir(()=>new gn({key:Vue,appendTransaction:(n,e,t)=>{let r;const i=(s,o)=>{if(r||(r=t.tr),s.type.name!=="table_cell")return;const a=t.doc.resolve(o),l=a.node(a.depth),c=a.node(a.depth-1).firstChild;if(!c)return;const h=Hue(s,l),f=c.maybeChild(h);if(!f)return;const d=f.attrs.alignment,p=s.attrs.alignment;d!==p&&r.setNodeMarkup(o,void 0,{...s.attrs,alignment:d})};return e.doc!==t.doc&&t.doc.descendants(i),r}}));ot(pL,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const jue=[pL,fL,Aw,dL].flat(),Wue=[Ew,ac,Vv,Mp,Hv,Op,Cw,Tw,uw,Xh].flat(),que=[dw,fw,pw,lL,mw,gw,xu,wu,uL,yw,xw,ww,vw,bw,Sw,zv],Uue=[Wue,Fue,$ue,Bue,que,jue].flat(),Gue=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Ow(n.state,t.from);return r.line?Kue(n):r.block?Yue(n):!1};function Mw(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const Kue=Mw(Que,0),Xue=Mw(mL,0),Yue=Mw((n,e)=>mL(n,e,Zue(e)),0);function Ow(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Lf=50;function Jue(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-Lf,r),o=n.sliceDoc(i,i+Lf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,h;i-r<=2*Lf?c=h=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+Lf),h=n.sliceDoc(i-Lf,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,p=h.length-d-t.length;return c.slice(f,f+e.length)==e&&h.slice(p,p+t.length)==t?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-t.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function Zue(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function mL(n,e,t=e.selection.ranges){let r=t.map(s=>Ow(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>Jue(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function Que(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,u=Ow(e,s).line;if(u){for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>i&&(s==o||o>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,p=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<l&&(l=f),r.push({line:h,comment:p,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const P3=Ma.define(),ece=Ma.define(),tce=Ae.define(),gL=Ae.define({combine(n){return Eo(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),yL=cr.define({create(){return t0.empty},update(n,e){let t=e.state.facet(gL),r=e.annotation(P3);if(r){let l=bi.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=fy(c,c.length,t.minDepth,l):c=xL(c,e.startState.selection),new t0(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(ece);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Kr.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=bi.fromTransaction(e),o=e.annotation(Kr.time),a=e.annotation(Kr.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new t0(n.done.map(bi.fromJSON),n.undone.map(bi.fromJSON))}});function nce(n={}){return[yL,gL.of(n),Oe.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?vL:e.inputType=="historyRedo"?R3:null;return r?(e.preventDefault(),r(t)):!1}})]}function jv(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(yL,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const vL=jv(0,!1),R3=jv(1,!1),rce=jv(0,!0),ice=jv(1,!0);class bi{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new bi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new bi(e.changes&&Qn.fromJSON(e.changes),[],e.mapped&&mo.fromJSON(e.mapped),e.startSelection&&ne.fromJSON(e.startSelection),e.selectionsAfter.map(ne.fromJSON))}static fromTransaction(e,t){let r=as;for(let i of e.startState.facet(tce)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new bi(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,as)}static selection(e){return new bi(void 0,as,void 0,void 0,e)}}function fy(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function sce(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];a>=u&&o<=c&&(r=!0)}}),r}function oce(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function bL(n,e){return n.length?e.length?n.concat(e):n:e}const as=[],ace=200;function xL(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-ace));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),fy(n,n.length-1,1e9,t.setSelAfter(r)))}else return[bi.selection([e])]}function lce(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function tb(n,e){if(!n.length)return n;let t=n.length,r=as;for(;t;){let i=uce(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[bi.selection(r)]:as}function uce(n,e,t){let r=bL(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):as,t);if(!n.changes)return bi.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new bi(i,ht.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const cce=/^(input\.type|delete)($|\.)/;let t0=class ld{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ld(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||cce.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,sce(a.changes,e.changes))||r=="input.type.compose")?o=fy(o,o.length-1,i.minDepth,new bi(e.changes.compose(a.changes),bL(ht.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,as)):o=fy(o,o.length,i.minDepth,e),new ld(o,as,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:as;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&oce(s[s.length-1],e)?this:new ld(xL(this.done,e),this.undone,t,r)}addMapping(e){return new ld(tb(this.done,e),tb(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:P3.of({side:e,rest:lce(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?as:i.slice(0,i.length-1);return s.mapped&&(a=tb(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:P3.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};t0.empty=new t0(as,as);const hce=[{key:"Mod-z",run:vL,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:R3,preventDefault:!0},{linux:"Ctrl-Shift-z",run:R3,preventDefault:!0},{key:"Mod-u",run:rce,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ice,preventDefault:!0}];function Jh(n,e){return ne.create(n.ranges.map(e),n.mainIndex)}function Io(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Xs({state:n,dispatch:e},t){let r=Jh(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Io(n,r)),!0)}function Wv(n,e){return ne.cursor(e?n.to:n.from)}function wL(n,e){return Xs(n,t=>t.empty?n.moveByChar(t,e):Wv(t,e))}function zr(n){return n.textDirectionAt(n.state.selection.main.head)==an.LTR}const SL=n=>wL(n,!zr(n)),kL=n=>wL(n,zr(n));function CL(n,e){return Xs(n,t=>t.empty?n.moveByGroup(t,e):Wv(t,e))}const fce=n=>CL(n,!zr(n)),dce=n=>CL(n,zr(n));function pce(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function qv(n,e,t){let r=kr(n).resolveInner(e.head),i=t?kt.closedBy:kt.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;pce(n,u,i)?r=u:l=t?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=t?uo(n,r.from,1):uo(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,ne.cursor(a,t?-1:1)}const mce=n=>Xs(n,e=>qv(n.state,e,!zr(n))),gce=n=>Xs(n,e=>qv(n.state,e,zr(n)));function TL(n,e){return Xs(n,t=>{if(!t.empty)return Wv(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const EL=n=>TL(n,!1),AL=n=>TL(n,!0);function ML(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(Oe.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function OL(n,e){let t=ML(n),{state:r}=n,i=Jh(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Wv(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Oe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Io(r,i),{effects:s}),!0}const LT=n=>OL(n,!1),L3=n=>OL(n,!0);function Hl(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ne.cursor(r.from+s))}return i}const yce=n=>Xs(n,e=>Hl(n,e,!0)),vce=n=>Xs(n,e=>Hl(n,e,!1)),bce=n=>Xs(n,e=>Hl(n,e,!zr(n))),xce=n=>Xs(n,e=>Hl(n,e,zr(n))),wce=n=>Xs(n,e=>ne.cursor(n.lineBlockAt(e.head).from,1)),Sce=n=>Xs(n,e=>ne.cursor(n.lineBlockAt(e.head).to,-1));function kce(n,e,t){let r=!1,i=Jh(n.selection,s=>{let o=uo(n,s.head,-1)||uo(n,s.head,1)||s.head>0&&uo(n,s.head-1,1)||s.head<n.doc.length&&uo(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ne.cursor(a)});return r?(e(Io(n,i)),!0):!1}const Cce=({state:n,dispatch:e})=>kce(n,e);function Cs(n,e){let t=Jh(n.state.selection,r=>{let i=e(r);return ne.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Io(n.state,t)),!0)}function IL(n,e){return Cs(n,t=>n.moveByChar(t,e))}const DL=n=>IL(n,!zr(n)),NL=n=>IL(n,zr(n));function PL(n,e){return Cs(n,t=>n.moveByGroup(t,e))}const Tce=n=>PL(n,!zr(n)),Ece=n=>PL(n,zr(n)),Ace=n=>Cs(n,e=>qv(n.state,e,!zr(n))),Mce=n=>Cs(n,e=>qv(n.state,e,zr(n)));function RL(n,e){return Cs(n,t=>n.moveVertically(t,e))}const LL=n=>RL(n,!1),_L=n=>RL(n,!0);function BL(n,e){return Cs(n,t=>n.moveVertically(t,e,ML(n).height))}const _T=n=>BL(n,!1),BT=n=>BL(n,!0),Oce=n=>Cs(n,e=>Hl(n,e,!0)),Ice=n=>Cs(n,e=>Hl(n,e,!1)),Dce=n=>Cs(n,e=>Hl(n,e,!zr(n))),Nce=n=>Cs(n,e=>Hl(n,e,zr(n))),Pce=n=>Cs(n,e=>ne.cursor(n.lineBlockAt(e.head).from)),Rce=n=>Cs(n,e=>ne.cursor(n.lineBlockAt(e.head).to)),FT=({state:n,dispatch:e})=>(e(Io(n,{anchor:0})),!0),$T=({state:n,dispatch:e})=>(e(Io(n,{anchor:n.doc.length})),!0),zT=({state:n,dispatch:e})=>(e(Io(n,{anchor:n.selection.main.anchor,head:0})),!0),VT=({state:n,dispatch:e})=>(e(Io(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Lce=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),_ce=({state:n,dispatch:e})=>{let t=Uv(n).map(({from:r,to:i})=>ne.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:ne.create(t),userEvent:"select"})),!0},Bce=({state:n,dispatch:e})=>{let t=Jh(n.selection,r=>{let i=kr(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return ne.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(Io(n,t)),!0)},Fce=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ne.create([t.main]):t.main.empty||(r=ne.create([ne.cursor(t.main.head)])),r?(e(Io(n,r)),!0):!1};function Ip(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=Dm(n,l,!1)):l>o&&(t="delete.forward",l=Dm(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Dm(n,o,!1),a=Dm(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ne.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Oe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Dm(n,e,t){if(n instanceof Oe)for(let r of n.state.facet(Oe.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const FL=(n,e,t)=>Ip(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=Hh(a,s.tabSize),c=u%Gu(s)||Gu(s);for(let h=0;h<c&&a[a.length-1-h]==" ";h++)i--;l=i}else l=wr(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=wr(o.text,l-o.from,!1,!1)+o.from);return l}),_3=n=>FL(n,!1,!0),$L=n=>FL(n,!0,!1),zL=(n,e)=>Ip(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=wr(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=t.head)&&(a=c),r=l}return r}),VL=n=>zL(n,!1),$ce=n=>zL(n,!0),zce=n=>Ip(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Vce=n=>Ip(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Hce=n=>Ip(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),jce=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Pt.of(["",""])},range:ne.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Wce=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:wr(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:wr(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:ne.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Uv(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function HL(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of Uv(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(ne.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(ne.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ne.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const qce=({state:n,dispatch:e})=>HL(n,e,!1),Uce=({state:n,dispatch:e})=>HL(n,e,!0);function jL(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Uv(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Gce=({state:n,dispatch:e})=>jL(n,e,!1),Kce=({state:n,dispatch:e})=>jL(n,e,!0),Xce=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Uv(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Jh(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Yce(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=kr(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(kt.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const HT=WL(!1),Jce=WL(!0);function WL(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&Yce(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new lv(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=E6(u,s);for(c==null&&(c=Hh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",E0(e,c)];return l&&h.push(E0(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Pt.of(h)},range:ne.cursor(s+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Iw(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:ne.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Zce=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new lv(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=Iw(n,(s,o,a)=>{let l=E6(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=E0(n,l);(u!=c||a.from<s.from+u.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},qL=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Iw(n,(t,r)=>{r.push({from:t.from,insert:n.facet(av)})}),{userEvent:"input.indent"})),!0),UL=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Iw(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Hh(i,n.tabSize),o=0,a=E0(n,Math.max(0,s-Gu(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Qce=n=>(n.setTabFocusMode(),!0),ehe=[{key:"Ctrl-b",run:SL,shift:DL,preventDefault:!0},{key:"Ctrl-f",run:kL,shift:NL},{key:"Ctrl-p",run:EL,shift:LL},{key:"Ctrl-n",run:AL,shift:_L},{key:"Ctrl-a",run:wce,shift:Pce},{key:"Ctrl-e",run:Sce,shift:Rce},{key:"Ctrl-d",run:$L},{key:"Ctrl-h",run:_3},{key:"Ctrl-k",run:zce},{key:"Ctrl-Alt-h",run:VL},{key:"Ctrl-o",run:jce},{key:"Ctrl-t",run:Wce},{key:"Ctrl-v",run:L3}],the=[{key:"ArrowLeft",run:SL,shift:DL,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:fce,shift:Tce,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:bce,shift:Dce,preventDefault:!0},{key:"ArrowRight",run:kL,shift:NL,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dce,shift:Ece,preventDefault:!0},{mac:"Cmd-ArrowRight",run:xce,shift:Nce,preventDefault:!0},{key:"ArrowUp",run:EL,shift:LL,preventDefault:!0},{mac:"Cmd-ArrowUp",run:FT,shift:zT},{mac:"Ctrl-ArrowUp",run:LT,shift:_T},{key:"ArrowDown",run:AL,shift:_L,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$T,shift:VT},{mac:"Ctrl-ArrowDown",run:L3,shift:BT},{key:"PageUp",run:LT,shift:_T},{key:"PageDown",run:L3,shift:BT},{key:"Home",run:vce,shift:Ice,preventDefault:!0},{key:"Mod-Home",run:FT,shift:zT},{key:"End",run:yce,shift:Oce,preventDefault:!0},{key:"Mod-End",run:$T,shift:VT},{key:"Enter",run:HT,shift:HT},{key:"Mod-a",run:Lce},{key:"Backspace",run:_3,shift:_3},{key:"Delete",run:$L},{key:"Mod-Backspace",mac:"Alt-Backspace",run:VL},{key:"Mod-Delete",mac:"Alt-Delete",run:$ce},{mac:"Mod-Backspace",run:Vce},{mac:"Mod-Delete",run:Hce}].concat(ehe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),GL=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:mce,shift:Ace},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:gce,shift:Mce},{key:"Alt-ArrowUp",run:qce},{key:"Shift-Alt-ArrowUp",run:Gce},{key:"Alt-ArrowDown",run:Uce},{key:"Shift-Alt-ArrowDown",run:Kce},{key:"Escape",run:Fce},{key:"Mod-Enter",run:Jce},{key:"Alt-l",mac:"Ctrl-l",run:_ce},{key:"Mod-i",run:Bce,preventDefault:!0},{key:"Mod-[",run:UL},{key:"Mod-]",run:qL},{key:"Mod-Alt-\\",run:Zce},{key:"Shift-Mod-k",run:Xce},{key:"Shift-Mod-\\",run:Cce},{key:"Mod-/",run:Gue},{key:"Alt-A",run:Xue},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Qce}].concat(the),nhe={key:"Tab",run:qL,shift:UL};var dy=200,ur=function(){};ur.prototype.append=function(e){return e.length?(e=ur.from(e),!this.length&&e||e.length<dy&&this.leafAppend(e)||this.length<dy&&e.leafPrepend(this)||this.appendInner(e)):this};ur.prototype.prepend=function(e){return e.length?ur.from(e).append(this):this};ur.prototype.appendInner=function(e){return new rhe(this,e)};ur.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ur.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ur.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ur.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ur.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};ur.from=function(e){return e instanceof ur?e:e&&e.length?new KL(e):ur.empty};var KL=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=dy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=dy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ur);ur.empty=new KL([]);var rhe=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ur);const ihe=500;class Ls{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,c.push(h);return}if(i){c.push(new io(h.map));let d=h.step.map(i.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new io(p,void 0,void 0,u.length+c.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new Ls(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let h=e.steps[c].invert(e.docs[c]),f=new io(e.mapping.maps[c],h,t),d;(d=l&&l.merge(f))&&(f=d,c?s.pop():a=a.slice(0,a.length-1)),s.push(f),t&&(o++,t=void 0),i||(l=f)}let u=o-r.depth;return u>ohe&&(a=she(a,u),o-=u),new Ls(a.append(s),o)}remapping(e,t){let r=new I0;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new Ls(this.items.append(e.map(t=>new io(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=t;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=e.steps[d].invert(e.docs[d]),g=f.selection&&f.selection.map(s.slice(l+1,d));g&&a++,r.push(new io(p,m,g))}else r.push(new io(p))},i);let u=[];for(let f=t;f<o;f++)u.push(new io(s.maps[f]));let c=this.items.slice(0,i).append(u).append(r),h=new Ls(c,a);return h.emptyItemCount()>ihe&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),u=l&&l.getMap();if(r--,u&&t.appendMap(u,r),l){let c=o.selection&&o.selection.map(t.slice(r));c&&s++;let h=new io(u.invert(),l,c),f,d=i.length-1;(f=i.length&&i[d].merge(h))?i[d]=f:i.push(h)}}else o.map&&r--},this.items.length,0),new Ls(ur.from(i.reverse()),s)}}Ls.empty=new Ls(ur.empty,0);function she(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class io{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new io(t.getMap().invert(),t,this.selection)}}}class el{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ohe=20;function ahe(n,e,t,r){let i=t.getMeta(Pu),s;if(i)return i.historyState;t.getMeta(che)&&(n=new el(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Pu))return o.getMeta(Pu).redo?new el(n.done.addTransform(t,void 0,r,G1(e)),n.undone,jT(t.mapping.maps),n.prevTime,n.prevComposition):new el(n.done,n.undone.addTransform(t,void 0,r,G1(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!lhe(t,n.prevRanges)),u=o?nb(n.prevRanges,t.mapping):jT(t.mapping.maps);return new el(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,G1(e)),Ls.empty,u,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new el(n.done.rebased(t,s),n.undone.rebased(t,s),nb(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new el(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),nb(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function lhe(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function jT(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,o)=>e.push(s,o));return e}function nb(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function uhe(n,e,t){let r=G1(e),i=Pu.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new el(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Pu,{redo:t,historyState:l})}let rb=!1,WT=null;function G1(n){let e=n.plugins;if(WT!=e){rb=!1,WT=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){rb=!0;break}}return rb}const Pu=new En("history"),che=new En("closeHistory");function hhe(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new gn({key:Pu,state:{init(){return new el(Ls.empty,Ls.empty,null,0,-1)},apply(e,t,r){return ahe(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Gv:r=="historyRedo"?Mh:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function XL(n,e){return(t,r)=>{let i=Pu.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=uhe(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const Gv=XL(!1,!0),Mh=XL(!0,!0);var fhe=Object.defineProperty,qT=Object.getOwnPropertySymbols,dhe=Object.prototype.hasOwnProperty,phe=Object.prototype.propertyIsEnumerable,UT=(n,e,t)=>e in n?fhe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mhe=(n,e)=>{for(var t in e||(e={}))dhe.call(e,t)&&UT(n,t,e[t]);if(qT)for(var t of qT(e))phe.call(e,t)&&UT(n,t,e[t]);return n};function YL(n,e){return Object.assign(n,{meta:mhe({package:"@milkdown/components"},e)}),n}const ghe={extensions:[],languages:[],expandIcon:"⬇",searchIcon:"🔍",clearSearchIcon:"⌫",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"📋",onCopy:()=>{},renderLanguage:n=>n,renderPreview:()=>null,previewToggleButton:n=>n?"Edit":"Hide",previewLabel:"Preview"},Dp=Vt(ghe,"codeBlockConfigCtx");YL(Dp,{displayName:"Config<code-block>",group:"CodeBlock"});class yhe{constructor(e){this.languages=e,this.map={},e.forEach(t=>{t.alias.forEach(r=>{this.map[r]=t})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){const r=this.map[e.toLowerCase()];return r?r.support?Promise.resolve(r.support):r.load():Promise.resolve(void 0)}}function Qc({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}Qc.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var vhe=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(u){i(u)}},o=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});function bhe(n){return vhe(this,null,function*(){try{return navigator.clipboard.writeText(n)}catch{const t=document.createElement("textarea"),r=document.activeElement;t.value=n,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const i=document.getSelection(),s=i?i.rangeCount>0&&i.getRangeAt(0):null;document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=n.length,document.execCommand("copy"),document.body.removeChild(t),s&&(i.removeAllRanges(),i.addRange(s)),r&&r.focus()}})}const xhe=He({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(n){const e=()=>{bhe(n.text).then(()=>n.onCopy(n.text)).catch(console.error)};return()=>X(er,null,X("button",{type:"button",class:"copy-button",onClick:e},X(Qc,{icon:n.copyIcon}),n.copyText))}}),whe=He({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:n,config:e,setLanguage:t,getAllLanguages:r,getReadOnly:i}){const s=le(),o=le(!1),a=le(),l=le(),u=le("");oa([o,s,l],()=>{u.value="";const m=s.value,g=l.value;!m||!g||$s(m,g,{placement:"bottom-start"}).then(({x:y,y:v})=>{Object.assign(g.style,{left:`${y}px`,top:`${v}px`})}).catch(console.error)});const c=m=>{if(m.preventDefault(),m.stopPropagation(),i())return;const g=!o.value;o.value=g,g&&setTimeout(()=>{var y;return(y=a.value)==null?void 0:y.focus()},0)},h=m=>{const g=m.target;u.value=g.value},f=m=>{m.key==="Escape"&&(u.value="")},d=Te(()=>{var m;if(!o.value)return[];const g=(m=r())!=null?m:[],y=g.find(x=>x.name.toLowerCase()===n.value.toLowerCase()),v=g.filter(x=>{const k=u.value.toLowerCase();return(x.name.toLowerCase().includes(k)||x.alias.some(C=>C.toLowerCase().includes(k)))&&x!==y});return v.length===0?[]:y?[y,...v]:v}),p=m=>{const g=m.target;if(s.value&&s.value.contains(g))return;const y=l.value,v=s.value;!v||!y||v.dataset.expanded==="true"&&(y.contains(g)||(o.value=!1))};return ko(()=>{window.addEventListener("click",p)}),Q0(()=>{window.removeEventListener("click",p)}),()=>X(er,null,X("button",{type:"button",ref:s,class:"language-button",onClick:c,"data-expanded":String(o.value)},n.value||"Text",X("div",{class:"expand-icon"},X(Qc,{icon:e.expandIcon}))),X("div",{ref:l,class:"language-picker"},o.value?X("div",{class:"list-wrapper"},X("div",{class:"search-box"},X("div",{class:"search-icon"},X(Qc,{icon:e.searchIcon})),X("input",{ref:a,class:"search-input",placeholder:e.searchPlaceholder,value:u.value,onInput:h,onKeydown:f}),X("div",{class:Cr("clear-icon",u.value.length===0&&"hidden"),onMousedown:m=>{m.preventDefault(),u.value=""}},X(Qc,{icon:e.clearSearchIcon}))),X("ul",{class:"language-list",role:"listbox",onKeydown:m=>{if(m.key==="Enter"){const g=document.activeElement;g instanceof HTMLElement&&g.dataset.language&&t(g.dataset.language)}}},d.value.length?d.value.map(m=>X("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":m.name.toLowerCase()===n.value.toLowerCase(),"data-language":m.name,onClick:()=>{t(m.name),o.value=!1}},e.renderLanguage(m.name,m.name.toLowerCase()===n.value.toLowerCase()))):X("li",{class:"language-list-item no-result"},e.noResultText))):null))}}),She=He({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(n){const{previewOnlyMode:e,config:t,preview:r}=n,i=le();return Rh(()=>{const s=i.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const o=r.value;(typeof o=="string"||o instanceof Element)&&(s.innerHTML=Ks.sanitize(o))}),()=>r.value?X("div",{class:"preview-panel"},!e.value&&X(er,null,X("div",{class:"preview-divider"}),X("div",{class:Cr("preview-label",e&&"hidden")},t.previewLabel)),X("div",{ref:i,class:"preview"})):null}}),khe=He({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){const e=le(!1),t=le();ko(()=>{for(var s;(s=t.value)!=null&&s.firstChild;)t.value.removeChild(t.value.firstChild);t.value&&t.value.appendChild(n.codemirror.dom)});const r=Te(()=>{const s=n.text.value,o=n.language.value;return n.config.renderPreview(o,s)}),i=()=>{};return()=>{var s;return X(er,null,X("div",{class:"tools"},X(whe,{language:n.language,config:n.config,setLanguage:n.setLanguage,getAllLanguages:n.getAllLanguages,getReadOnly:n.getReadOnly}),X("div",{class:"tools-button-group"},X(xhe,{copyIcon:n.config.copyIcon,copyText:n.config.copyText,onCopy:(s=n.config.onCopy)!=null?s:i,text:n.text.value}),r.value?X("button",{class:"preview-toggle-button",onClick:()=>e.value=!e.value},X(Qc,{icon:n.config.previewToggleButton(e.value)})):null)),X("div",{ref:t,class:Cr("codemirror-host",r.value&&e.value&&"hidden")}),X(She,{text:n.text,language:n.language,config:n.config,previewOnlyMode:e,preview:r}))}}});class Che{constructor(e,t,r,i,s){this.node=e,this.view=t,this.getPos=r,this.loader=i,this.config=s,this.selected=le(!1),this.language=le(""),this.text=le(""),this.updating=!1,this.languageName="",this.forwardUpdate=o=>{var a;if(this.updating||!this.cm.hasFocus)return;let l=((a=this.getPos())!=null?a:0)+1;const{main:u}=o.state.selection,c=l+u.from,h=l+u.to,f=this.view.state.selection;if(o.docChanged||f.from!==c||f.to!==h){const d=this.view.state.tr;o.changes.iterChanges((p,m,g,y,v)=>{v.length?d.replaceWith(l+p,l+m,this.view.state.schema.text(v.toString())):d.delete(l+p,l+m),l+=y-g-(m-p)}),d.setSelection(Be.create(d.doc,c,h)),this.view.dispatch(d)}},this.createApp=()=>Ws(khe,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const o=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>lP(o.state,o.dispatch)?(o.focus(),!0):!1},{key:"Mod-z",run:()=>Gv(o.state,o.dispatch)},{key:"Shift-Mod-z",run:()=>Mh(o.state,o.dispatch)},{key:"Mod-y",run:()=>Mh(o.state,o.dispatch)},{key:"Backspace",run:()=>{var a;const l=this.cm.state.selection.ranges;if(l.length>1)return!1;const u=l[0];if(u&&(!u.empty||u.anchor>0)||this.cm.state.doc.lines>=2)return!1;const c=this.view.state,h=(a=this.getPos())!=null?a:0,f=c.tr.replaceWith(h,h+this.node.nodeSize,c.schema.nodes.paragraph.createChecked({},this.node.content));return f.setSelection(Be.near(f.doc.resolve(h))),this.view.dispatch(f),this.view.focus(),!0}}]},this.maybeEscape=(o,a)=>{var l;const{state:u}=this.cm;let c=u.selection.main;if(!c.empty||(o==="line"&&(c=u.doc.lineAt(c.head)),a<0?c.from>0:c.to<u.doc.length))return!1;const h=((l=this.getPos())!=null?l:0)+(a<0?0:this.node.nodeSize),f=Be.near(this.view.state.doc.resolve(h),a),d=this.view.state.tr.setSelection(f).scrollIntoView();return this.view.dispatch(d),this.view.focus(),!0},this.setLanguage=o=>{var a;this.view.dispatch(this.view.state.tr.setNodeAttribute((a=this.getPos())!=null?a:0,"language",o))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new yh,this.readOnlyConf=new yh,this.cm=new Oe({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(pn.readOnly.of(!this.view.editable)),tD(),jh.of(this.codeMirrorKeymap()),this.languageConf.of([]),pn.changeFilter.of(()=>this.view.editable),...s.extensions,Oe.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=Rh(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){const t=document.createElement("div");return t.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(t),t}updateLanguage(){const e=this.node.attrs.language;if(e===this.languageName)return;this.language.value=e,this.loader.load(e??"").then(r=>{r&&(this.cm.dispatch({effects:this.languageConf.reconfigure(r)}),this.languageName=e)}).catch(console.error)}setSelection(e,t){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:t}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(pn.readOnly.of(!this.view.editable))});const t=The(this.cm.state.doc.toString(),e.textContent);return t&&(this.updating=!0,this.cm.dispatch({changes:{from:t.from,to:t.to,insert:t.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function The(n,e){if(n===e)return null;let t=0,r=n.length,i=e.length;for(;t<r&&n.charCodeAt(t)===e.charCodeAt(t);)++t;for(;r>t&&i>t&&n.charCodeAt(r-1)===e.charCodeAt(i-1);)r--,i--;return{from:t,to:r,text:e.slice(t,i)}}const JL=Sp(So.node,n=>{const e=n.get(Dp.key),t=new yhe(e.languages);return(r,i,s)=>new Che(r,i,s,t,e)});YL(JL,{displayName:"NodeView<code-block>",group:"CodeBlock"});const Ehe=[JL,Dp],GT=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Oh{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(GT(a)):GT,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return hi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=c6(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=oo(e);let i=this.normalize(t);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Oh.prototype[Symbol.iterator]=function(){return this});const ZL={from:-1,to:-1,match:/.*/.exec("")},Dw="gm"+(/x/.unicode==null?"":"u");class QL{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=ZL,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new e_(e,t,r,i,s);this.re=new RegExp(t,Dw+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=py(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=py(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ib=new WeakMap;class eh{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=ib.get(e);if(!i||i.from>=r||i.to<=t){let a=new eh(t,e.sliceString(t,r));return ib.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),ib.set(e,new eh(o,s)),new eh(t,s.slice(t-o,r-o))}}class e_{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=ZL,this.matchPos=py(e,i),this.re=new RegExp(t,Dw+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=eh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=py(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=eh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(QL.prototype[Symbol.iterator]=e_.prototype[Symbol.iterator]=function(){return this});function Ahe(n){try{return new RegExp(n,Dw),!0}catch{return!1}}function py(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function B3(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Wt("input",{class:"cm-textfield",name:"line",value:e}),r=Wt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:n0.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Wt("label",n.state.phrase("Go to line"),": ",t)," ",Wt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Wt("button",{name:"close",onclick:()=>{n.dispatch({effects:n0.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:a.number;if(u&&h){let g=d/100;l&&(g=g*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else u&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=ne.cursor(p.from+Math.max(0,Math.min(f,p.length)));n.dispatch({effects:[n0.of(!1),Oe.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:r}}const n0=ht.define(),KT=cr.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(n0)&&(n=t.value);return n},provide:n=>T0.from(n,e=>e?B3:null)}),Mhe=n=>{let e=C0(n,B3);if(!e){let t=[n0.of(!0)];n.state.field(KT,!1)==null&&t.push(ht.appendConfig.of([KT,Ohe])),n.dispatch({effects:t}),e=C0(n,B3)}return e&&e.dom.querySelector("input").select(),!0},Ohe=Oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ihe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Dhe=Ae.define({combine(n){return Eo(n,Ihe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Nhe(n){return[Bhe,_he]}const Phe=Xe.mark({class:"cm-selectionMatch"}),Rhe=Xe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function XT(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=dn.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=dn.Word)}function Lhe(n,e,t,r){return n(e.sliceDoc(t,t+1))==dn.Word&&n(e.sliceDoc(r-1,r))==dn.Word}const _he=Un.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Dhe),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Xe.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Xe.none;let l=t.wordAt(i.head);if(!l)return Xe.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Xe.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(XT(o,t,i.from,i.to)&&Lhe(o,t,i.from,i.to)))return Xe.none}else if(s=t.sliceDoc(i.from,i.to),!s)return Xe.none}let a=[];for(let l of n.visibleRanges){let u=new Oh(t.doc,s,l.from,l.to);for(;!u.next().done;){let{from:c,to:h}=u.value;if((!o||XT(o,t,c,h))&&(i.empty&&c<=i.from&&h>=i.to?a.push(Rhe.range(c,h)):(c>=i.to||h<=i.from)&&a.push(Phe.range(c,h)),a.length>e.maxMatches))return Xe.none}}return Xe.set(a)}},{decorations:n=>n.decorations}),Bhe=Oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Fhe=({state:n,dispatch:e})=>{let{selection:t}=n,r=ne.create(t.ranges.map(i=>n.wordAt(i.head)||ne.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function $he(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new Oh(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Oh(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const zhe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return Fhe({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=$he(n,r);return i?(e(n.update({selection:n.selection.addRange(ne.range(i.from,i.to),!1),effects:Oe.scrollIntoView(i.to)})),!0):!1},Zh=Ae.define({combine(n){return Eo(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Zhe(e),scrollToMatch:e=>Oe.scrollIntoView(e)})}});class t_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ahe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Whe(this):new Hhe(this)}getCursor(e,t=0,r){let i=e.doc?e:pn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Rc(this,i,t,r):Pc(this,i,t,r)}}class n_{constructor(e){this.spec=e}}function Pc(n,e,t,r){return new Oh(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?Vhe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Vhe(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(my(i,t-s))!=dn.Word||e(gy(i,t-s))!=dn.Word)&&(e(gy(i,r-s))!=dn.Word||e(my(i,r-s))!=dn.Word))}class Hhe extends n_{constructor(e){super(e)}nextMatch(e,t,r){let i=Pc(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=Pc(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=Pc(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=Pc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Pc(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Rc(n,e,t,r){return new QL(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?jhe(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function my(n,e){return n.slice(wr(n,e,!1),e)}function gy(n,e){return n.slice(e,wr(n,e))}function jhe(n){return(e,t,r)=>!r[0].length||(n(my(r.input,r.index))!=dn.Word||n(gy(r.input,r.index))!=dn.Word)&&(n(gy(r.input,r.index+r[0].length))!=dn.Word||n(my(r.input,r.index+r[0].length))!=dn.Word)}class Whe extends n_{nextMatch(e,t,r){let i=Rc(this.spec,e,r,e.doc.length).next();return i.done&&(i=Rc(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=Rc(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=Rc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Rc(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const z0=ht.define(),Nw=ht.define(),xl=cr.define({create(n){return new sb(F3(n).create(),null)},update(n,e){for(let t of e.effects)t.is(z0)?n=new sb(t.value.create(),n.panel):t.is(Nw)&&(n=new sb(n.query,t.value?Pw:null));return n},provide:n=>T0.from(n,e=>e.panel)});class sb{constructor(e,t){this.query=e,this.panel=t}}const qhe=Xe.mark({class:"cm-searchMatch"}),Uhe=Xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ghe=Un.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(xl))}update(n){let e=n.state.field(xl);(e!=n.startState.field(xl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Xe.none;let{view:t}=this,r=new va;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-500;)l=s[++i].to;n.highlight(t.state,a,l,(u,c)=>{let h=t.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?Uhe:qhe)})}return r.finish()}},{decorations:n=>n.decorations});function Np(n){return e=>{let t=e.state.field(xl,!1);return t&&t.query.spec.valid?n(e,t):s_(e)}}const yy=Np((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=ne.single(r.from,r.to),s=n.state.facet(Zh);return n.dispatch({selection:i,effects:[Rw(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),i_(n),!0}),vy=Np((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=ne.single(i.from,i.to),o=n.state.facet(Zh);return n.dispatch({selection:s,effects:[Rw(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),i_(n),!0}),Khe=Np((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:ne.create(t.map(r=>ne.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Xhe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new Oh(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(ne.range(a.value.from,a.value.to))}return e(n.update({selection:ne.create(s,o),userEvent:"select.search.matches"})),!0},YT=Np((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,a=[],l,u,c=[];o.from==r&&o.to==i&&(u=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(t,o.from,o.to),c.push(Oe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+".")));let h=n.state.changes(a);return o&&(l=ne.single(o.from,o.to).map(h),c.push(Rw(n,o)),c.push(t.facet(Zh).scrollToMatch(l.main,n))),n.dispatch({changes:h,selection:l,effects:c,userEvent:"input.replace"}),!0}),Yhe=Np((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Oe.announce.of(r),userEvent:"input.replace.all"}),!0});function Pw(n){return n.state.facet(Zh).createPanel(n)}function F3(n,e){var t,r,i,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=n.facet(Zh);return new t_({search:((t=e?.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function r_(n){let e=C0(n,Pw);return e&&e.dom.querySelector("[main-field]")}function i_(n){let e=r_(n);e&&e==n.root.activeElement&&e.select()}const s_=n=>{let e=n.state.field(xl,!1);if(e&&e.panel){let t=r_(n);if(t&&t!=n.root.activeElement){let r=F3(n.state,e.query.spec);r.valid&&n.dispatch({effects:z0.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[Nw.of(!0),e?z0.of(F3(n.state,e.query.spec)):ht.appendConfig.of(efe)]});return!0},o_=n=>{let e=n.state.field(xl,!1);if(!e||!e.panel)return!1;let t=C0(n,Pw);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Nw.of(!1)}),!0},Jhe=[{key:"Mod-f",run:s_,scope:"editor search-panel"},{key:"F3",run:yy,shift:vy,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:yy,shift:vy,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:o_,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Xhe},{key:"Mod-Alt-g",run:Mhe},{key:"Mod-d",run:zhe,preventDefault:!0}];class Zhe{constructor(e){this.view=e;let t=this.query=e.state.field(xl).query.spec;this.commit=this.commit.bind(this),this.searchField=Wt("input",{value:t.search,placeholder:Oi(e,"Find"),"aria-label":Oi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Wt("input",{value:t.replace,placeholder:Oi(e,"Replace"),"aria-label":Oi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Wt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Wt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Wt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return Wt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Wt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>yy(e),[Oi(e,"next")]),r("prev",()=>vy(e),[Oi(e,"previous")]),r("select",()=>Khe(e),[Oi(e,"all")]),Wt("label",null,[this.caseField,Oi(e,"match case")]),Wt("label",null,[this.reField,Oi(e,"regexp")]),Wt("label",null,[this.wordField,Oi(e,"by word")]),...e.state.readOnly?[]:[Wt("br"),this.replaceField,r("replace",()=>YT(e),[Oi(e,"replace")]),r("replaceAll",()=>Yhe(e),[Oi(e,"replace all")])],Wt("button",{name:"close",onclick:()=>o_(e),"aria-label":Oi(e,"close"),type:"button"},["×"])])}commit(){let e=new t_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:z0.of(e)}))}keydown(e){VX(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?vy:yy)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),YT(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(z0)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zh).top}}function Oi(n,e){return n.state.phrase(e)}const Nm=30,Pm=/[\s\.,:;?!]/;function Rw(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Nm),o=Math.min(i,t+Nm),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Nm;l++)if(!Pm.test(a[l+1])&&Pm.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Nm;l--)if(!Pm.test(a[l-1])&&Pm.test(a[l])){a=a.slice(0,l);break}}return Oe.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const Qhe=Oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),efe=[xl,Ll.low(Ghe),Qhe];class a_{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=kr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(l_(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function JT(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function tfe(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=JT(e)+JT(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function nfe(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:tfe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function Pye(n,e){return t=>{for(let r=kr(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class ZT{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Ru(n){return n.selection.main.from}function l_(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Lw=Ma.define();function rfe(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:ne.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const QT=new WeakMap;function ife(n){if(!Array.isArray(n))return n;let e=QT.get(n);return e||QT.set(n,e=nfe(n)),e}const by=ht.define(),V0=ht.define();class sfe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=hi(e,t),i=oo(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(hi(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let v=hi(e,0),x=oo(v),k=x==e.length?0:-100;if(v!=t[0])if(v==r[0])k+=-200;else return null;return this.ret(k,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(a<0){for(let v=0,x=Math.min(e.length,200);v<x&&u<l;){let k=hi(e,v);(k==t[u]||k==r[u])&&(i[u++]=v),v+=oo(k)}if(u<l)return null}let c=0,h=0,f=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),y=!0;for(let v=0,x=Math.min(e.length,200),k=0;v<x&&h<l;){let C=hi(e,v);a<0&&(c<l&&C==t[c]&&(s[c++]=v),d<l&&(C==t[d]||C==r[d]?(d==0&&(p=v),m=v+1,d++):d=0));let w,M=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(w=c6(C))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!v||M==1&&g||k==0&&M!=0)&&(t[h]==C||r[h]==C&&(f=!0)?o[h++]=v:o.length&&(y=!1)),k=M,v+=oo(C)}return h==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[p,m]):h==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?oo(hi(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class ofe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const lr=Ae.define({combine(n){return Eo(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:afe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>eE(e(r),t(r)),optionClass:(e,t)=>r=>eE(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function eE(n,e){return n?e?n+" "+e:n:e}function afe(n,e,t,r,i,s){let o=n.textDirection==an.RTL,a=o,l=!1,u="top",c,h,f=e.left-i.left,d=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&f<Math.min(p,d)?a=!1:!a&&d<Math.min(p,f)&&(a=!0),p<=(a?f:d))c=Math.max(i.top,Math.min(t.top,i.bottom-m))-e.top,h=Math.min(400,a?f:d);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let v=i.bottom-e.bottom;v>=m||v>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let g=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/g}px; max-width: ${h/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function lfe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let u=0;u<s.length;){let c=s[u++],h=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(c,h))),f.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function ob(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class ufe{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(lr);this.optionContent=lfe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=ob(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(lr).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:V0.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=ob(s.length,o,e.state.facet(lr).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ob(t.options.length,t.selected,this.view.state.facet(lr).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>yi(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&hfe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(lr).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let f=typeof u=="string"?u:u.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let h=this.optionClass(a);h&&(c.className=h);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function cfe(n,e){return t=>new ufe(t,n,e)}function hfe(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function tE(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function ffe(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let h=typeof c=="string"?c:c.name;r.some(f=>f.name==h)||r.push(typeof c=="string"?{name:h}:c)}},s=e.facet(lr);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)i(new ZT(h,u.source,c?c(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),f,d=s.filterStrict?new ofe(h):new sfe(h);for(let p of u.result.options)if(f=d.match(p.label)){let m=p.displayLabel?c?c(p,f.matched):[]:f.matched;i(new ZT(p,u.source,m,f.score+(p.boost||0)))}}}if(r){let u=Object.create(null),c=0,h=(f,d)=>{var p,m;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(f.name<d.name?-1:1)};for(let f of r.sort(h))c-=1e5,u[f.name]=c;for(let f of t){let{section:d}=f.completion;d&&(f.score+=u[typeof d=="string"?d:d.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of t.sort((c,h)=>h.score-c.score||l(c.completion,h.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):tE(u.completion)>tE(a)&&(o[o.length-1]=u),a=u.completion}return o}class Vc{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Vc(this.options,nE(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let a=ffe(e,t);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=t.facet(lr).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Vc(a,nE(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:vfe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Vc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Vc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class xy{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new xy(gfe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(lr),s=(r.override||t.languageDataAt("autocomplete",Ru(t)).map(ife)).map(l=>(this.active.find(c=>c.source==l)||new ls(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(_w));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!dfe(s,this.active)||a?o=Vc.build(s,t,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ls(l.source,0):l));for(let l of e.effects)l.is(c_)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new xy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?pfe:mfe}}function dfe(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const pfe={"aria-autocomplete":"list"},mfe={};function nE(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const gfe=[];function u_(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(Lw);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class ls{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=u_(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new ls(i.source,0)),r&4&&i.state==0&&(i=new ls(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(by))i=new ls(i.source,1,s.value);else if(s.is(V0))i=new ls(i.source,0);else if(s.is(_w))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ru(e.state))}}class th extends ls{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Ru(e.state);if(a>o||!i||t&2&&(Ru(e.startState)==this.from||a<this.limit))return new ls(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return yfe(i.validFor,e.state,s,o)?new th(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new a_(e.state,a,!1)))?new th(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Ru(e.state)):new ls(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new th(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ls(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function yfe(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):l_(n,!0).test(i)}const _w=ht.define({map(n,e){return n.map(t=>t.map(e))}}),c_=ht.define(),di=cr.define({create(){return xy.start()},update(n,e){return n.update(e)},provide:n=>[T6.from(n,e=>e.tooltip),Oe.contentAttributes.from(n,e=>e.attrs)]});function Bw(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(di).active.find(i=>i.source==e.source);return r instanceof th?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},rfe(n.state,t,r.from,r.to)),{annotations:Lw.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const vfe=cfe(di,Bw);function Rm(n,e="option"){return t=>{let r=t.state.field(di,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(lr).interactionDelay)return!1;let i=1,s;e=="page"&&(s=sD(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:c_.of(a)}),!0}}const bfe=n=>{let e=n.state.field(di,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(lr).interactionDelay?!1:Bw(n,e.open.options[e.open.selected])},rE=n=>n.state.field(di,!1)?(n.dispatch({effects:by.of(!0)}),!0):!1,xfe=n=>{let e=n.state.field(di,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:V0.of(null)}),!0)};class wfe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Sfe=50,kfe=1e3,Cfe=Un.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(di).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(di),t=n.state.facet(lr);if(!n.selectionSet&&!n.docChanged&&n.startState.field(di)==e)return;let r=n.transactions.some(s=>{let o=u_(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>Sfe&&Date.now()-o.time>kfe){for(let a of o.context.abortListeners)try{a()}catch(l){yi(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(by)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(di);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(lr).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Ru(e),r=new a_(e,t,n.explicit,this.view),i=new wfe(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:V0.of(null)}),yi(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(lr).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(lr),r=this.view.state.field(di);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Ru(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),u=new th(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let c of s.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new ls(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:_w.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(di,!1);if(e&&e.tooltip&&this.view.state.facet(lr).closeOnBlur){let t=e.open&&sD(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:V0.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:by.of(!1)}),20),this.composing=0}}}),Tfe=typeof navigator=="object"&&/Win/.test(navigator.platform),Efe=Ll.highest(Oe.domEventHandlers({keydown(n,e){let t=e.state.field(di,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(Tfe&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Bw(e,r),!1}})),h_=Oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Afe{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class Fw{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,xr.TrackDel),r=e.mapPos(this.to,1,xr.TrackDel);return t==null||r==null?null:new Fw(this.field,t,r)}}class $w{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,c=/^\t*/.exec(l)[0].length;for(let h=0;h<c;h++)u+=e.facet(av);i.push(t+u.length-c),l=u+l.slice(c)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Fw(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1,c=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<t.length;h++)(a!=null?t[h].seq==a:c&&t[h].name==c)&&(u=h);if(u<0){let h=0;for(;h<t.length&&(a==null||t[h].seq!=null&&t[h].seq<a);)h++;t.splice(h,0,{seq:a,name:c}),u=h;for(let f of i)f.field>=u&&f.field++}i.push(new Afe(u,r.length,s.index,s.index+c.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let c of i)c.line==r.length&&c.from>u&&(c.from--,c.to--);return l}),r.push(o)}return new $w(r,i)}}let Mfe=Xe.widget({widget:new class extends Oa{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),Ofe=Xe.mark({class:"cm-snippetField"});class Qh{constructor(e,t){this.ranges=e,this.active=t,this.deco=Xe.set(e.map(r=>(r.from==r.to?Mfe:Ofe).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new Qh(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const Pp=ht.define({map(n,e){return n&&n.map(e)}}),Ife=ht.define(),H0=cr.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Pp))return t.value;if(t.is(Ife)&&n)return new Qh(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Oe.decorations.from(n,e=>e?e.deco:Xe.none)});function zw(n,e){return ne.create(n.filter(t=>t.field==e).map(t=>ne.range(t.from,t.to)))}function Dfe(n){let e=$w.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),{main:l}=t.state.selection,u={changes:{from:i,to:s==l.from?l.to:s,insert:Pt.of(o)},scrollIntoView:!0,annotations:r?[Lw.of(r),Kr.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=zw(a,0)),a.some(c=>c.field>0)){let c=new Qh(a,0),h=u.effects=[Pp.of(c)];t.state.field(H0,!1)===void 0&&h.push(ht.appendConfig.of([H0,_fe,Bfe,h_]))}t.dispatch(t.state.update(u))}}function f_(n){return({state:e,dispatch:t})=>{let r=e.field(H0,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:zw(r.ranges,i),effects:Pp.of(s?null:new Qh(r.ranges,i)),scrollIntoView:!0})),!0}}const Nfe=({state:n,dispatch:e})=>n.field(H0,!1)?(e(n.update({effects:Pp.of(null)})),!0):!1,Pfe=f_(1),Rfe=f_(-1),Lfe=[{key:"Tab",run:Pfe,shift:Rfe},{key:"Escape",run:Nfe}],iE=Ae.define({combine(n){return n.length?n[0]:Lfe}}),_fe=Ll.highest(jh.compute([iE],n=>n.facet(iE)));function Rye(n,e){return Object.assign(Object.assign({},e),{apply:Dfe(n)})}const Bfe=Oe.domEventHandlers({mousedown(n,e){let t=e.state.field(H0,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:zw(t.ranges,i.field),effects:Pp.of(t.ranges.some(s=>s.field>i.field)?new Qh(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),j0={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Su=ht.define({map(n,e){let t=e.mapPos(n,-1,xr.TrackAfter);return t??void 0}}),Vw=new class extends ju{};Vw.startSide=1;Vw.endSide=-1;const d_=cr.define({create(){return Rt.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Su)&&(n=n.update({add:[Vw.range(t.value,t.value+1)]}));return n}});function Ffe(){return[zfe,d_]}const ab="()[]{}<>«»»«［］｛｝";function p_(n){for(let e=0;e<ab.length;e+=2)if(ab.charCodeAt(e)==n)return ab.charAt(e+1);return c6(n<128?n:n+1)}function m_(n,e){return n.languageDataAt("closeBrackets",e)[0]||j0}const $fe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),zfe=Oe.inputHandler.of((n,e,t,r)=>{if(($fe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&oo(hi(r,0))==1||e!=i.from||t!=i.to)return!1;let s=jfe(n.state,r);return s?(n.dispatch(s),!0):!1}),Vfe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=m_(n,n.selection.main.head).brackets||j0.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=Wfe(n.doc,o.head);for(let l of r)if(l==a&&Kv(n.doc,o.head)==p_(hi(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ne.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Hfe=[{key:"Backspace",run:Vfe}];function jfe(n,e){let t=m_(n,n.selection.main.head),r=t.brackets||j0.brackets;for(let i of r){let s=p_(hi(i,0));if(e==i)return s==i?Gfe(n,i,r.indexOf(i+i+i)>-1,t):qfe(n,i,s,t.before||j0.before);if(e==s&&g_(n,n.selection.main.from))return Ufe(n,i,s)}return null}function g_(n,e){let t=!1;return n.field(d_).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Kv(n,e){let t=n.sliceString(e,e+2);return t.slice(0,oo(hi(t,0)))}function Wfe(n,e){let t=n.sliceString(e-2,e);return oo(hi(t,0))==t.length?t:t.slice(1)}function qfe(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Su.of(o.to+e.length),range:ne.range(o.anchor+e.length,o.head+e.length)};let a=Kv(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:Su.of(o.head+e.length),range:ne.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Ufe(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&Kv(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:ne.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Gfe(n,e,t,r){let i=r.stringPrefixes||j0.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Su.of(a.to+e.length),range:ne.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=Kv(n.doc,l),c;if(u==e){if(sE(n,l))return{changes:{insert:e+e,from:l},effects:Su.of(l+e.length),range:ne.cursor(l+e.length)};if(g_(n,l)){let f=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:ne.cursor(l+f.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=oE(n,l-2*e.length,i))>-1&&sE(n,c))return{changes:{insert:e+e+e+e,from:l},effects:Su.of(l+e.length),range:ne.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=dn.Word&&oE(n,l,i)>-1&&!Kfe(n,l,e,i))return{changes:{insert:e+e,from:l},effects:Su.of(l+e.length),range:ne.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function sE(n,e){let t=kr(n).resolveInner(e+1);return t.parent&&t.from==e}function Kfe(n,e,t,r){let i=kr(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function oE(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=dn.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=dn.Word)return s}return-1}function Xfe(n={}){return[Efe,di,lr.of(n),Cfe,Yfe,h_]}const y_=[{key:"Ctrl-Space",run:rE},{mac:"Alt-`",run:rE},{key:"Escape",run:xfe},{key:"ArrowDown",run:Rm(!0)},{key:"ArrowUp",run:Rm(!1)},{key:"PageDown",run:Rm(!0,"page")},{key:"PageUp",run:Rm(!1,"page")},{key:"Enter",run:bfe}],Yfe=Ll.highest(jh.computeN([lr],n=>n.facet(lr).defaultKeymap?[y_]:[]));class aE{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class du{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(W0).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((c,h)=>c.from-h.from||c.to-h.to),o=new va,a=[],l=0;for(let c=0;;){let h=c==s.length?null:s[c];if(!h&&!a.length)break;let f,d;for(a.length?(f=l,d=a.reduce((m,g)=>Math.min(m,g.to),h&&h.from>f?h.from:1e8)):(f=h.from,d=h.to,a.push(h),c++);c<s.length;){let m=s[c];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),c++,d=Math.min(m.to,d);else{d=Math.min(m.from,d);break}}let p=ude(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&r.doc.lineAt(m.from).to==m.from))o.add(f,f,Xe.widget({widget:new sde(p),diagnostics:a.slice()}));else{let m=a.reduce((g,y)=>y.markClass?g+" "+y.markClass:g,"");o.add(f,d,Xe.mark({class:"cm-lintRange cm-lintRange-"+p+m,diagnostics:a.slice(),inclusiveEnd:a.some(g=>g.to>d)}))}l=d;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let u=o.finish();return new du(u,t,Ih(u))}}function Ih(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new aE(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new aE(r.from,s,r.diagnostic)}}),r}function Jfe(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(W0).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(v_))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function Zfe(n,e){return n.field(Wi,!1)?e:e.concat(ht.appendConfig.of(cde))}const v_=ht.define(),Hw=ht.define(),b_=ht.define(),Wi=cr.define({create(){return new du(Xe.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Ih(t,n.selected.diagnostic,s)||Ih(t,null,s)}!t.size&&i&&e.state.facet(W0).autoPanel&&(i=null),n=new du(t,i,r)}for(let t of e.effects)if(t.is(v_)){let r=e.state.facet(W0).autoPanel?t.value.length?q0.open:null:n.panel;n=du.init(t.value,r,e.state)}else t.is(Hw)?n=new du(n.diagnostics,t.value?q0.open:null,n.selected):t.is(b_)&&(n=new du(n.diagnostics,n.panel,t.value));return n},provide:n=>[T0.from(n,e=>e.panel),Oe.decorations.from(n,e=>e.diagnostics)]}),Qfe=Xe.mark({class:"cm-lintRange cm-lintRange-active"});function ede(n,e,t){let{diagnostics:r}=n.state.field(Wi),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{if(e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0)))return i=c.diagnostics,s=l,o=u,!1});let a=n.state.facet(W0).tooltipFilter;return i&&a&&(i=a(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:tde(n,i)}}}:null}function tde(n,e){return Wt("ul",{class:"cm-tooltip-lint"},e.map(t=>w_(n,t,!1)))}const nde=n=>{let e=n.state.field(Wi,!1);(!e||!e.panel)&&n.dispatch({effects:Zfe(n.state,[Hw.of(!0)])});let t=C0(n,q0.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},lE=n=>{let e=n.state.field(Wi,!1);return!e||!e.panel?!1:(n.dispatch({effects:Hw.of(!1)}),!0)},rde=n=>{let e=n.state.field(Wi,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},ide=[{key:"Mod-Shift-m",run:nde,preventDefault:!0},{key:"F8",run:rde}],W0=Ae.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Eo(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function x_(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function w_(n,e,t){var r;let i=t?x_(e.actions):[];return Wt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Wt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let d=Ih(n.state.field(Wi).diagnostics,e);d&&s.apply(n,d.from,d.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,h=c<0?u:[u.slice(0,c),Wt("u",u.slice(c,c+1)),u.slice(c+1)];return Wt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&Wt("div",{class:"cm-diagnosticSource"},e.source))}class sde extends Oa{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Wt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class uE{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=w_(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class q0{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)lE(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=x_(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ih(this.view.state.field(Wi).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Wt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=Wt("div",{class:"cm-panel-lint"},this.list,Wt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>lE(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Wi).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Wi),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let h=-1,f;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c){h=d;break}h<0?(f=new uE(this.view,c),this.items.splice(r,0,f),i=!0):(f=this.items[h],h>r&&(this.items.splice(r,h-r),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new uE(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let u=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/u:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Wi),r=Ih(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:b_.of(r)})}static open(e){return new q0(e)}}function ode(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Lm(n){return ode(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ade=Oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Lm("#d11")},".cm-lintRange-warning":{backgroundImage:Lm("orange")},".cm-lintRange-info":{backgroundImage:Lm("#999")},".cm-lintRange-hint":{backgroundImage:Lm("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function lde(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function ude(n){let e="hint",t=1;for(let r of n){let i=lde(r.severity);i>t&&(t=i,e=r.severity)}return e}const cde=[Wi,Oe.decorations.compute([Wi],n=>{let{selected:e,panel:t}=n.field(Wi);return!e||!t||e.from==e.to?Xe.none:Xe.set([Qfe.range(e.from,e.to)])}),EY(ede,{hideOn:Jfe}),ade],hde=[BY(),zY(),rY(),nce(),SJ(),tD(),JX(),pn.allowMultipleSelections.of(!0),lJ(),CD(EJ,{fallback:!0}),PJ(),Ffe(),Xfe(),mY(),vY(),uY(),Nhe(),jh.of([...Hfe,...GL,...Jhe,...hce,...vJ,...y_,...ide])];function fde(n={}){return new gn({view(e){return new dde(e,n)}})}class dde{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(t){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let d=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(d){let p=d.getBoundingClientRect(),m=h?p.bottom:p.top;h&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*a;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,d=h.height/l.offsetHeight;u=h.left-l.scrollLeft*f,c=h.top-l.scrollTop*d}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=oN(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Nn extends it{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Nn.valid(r)?new Nn(r):it.near(r)}content(){return Ce.empty}eq(e){return e instanceof Nn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Nn(e.resolve(t.pos))}getBookmark(){return new jw(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!pde(e)||!mde(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Nn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(Nn.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ye.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(Nn.valid(a))return a}return null}}}Nn.prototype.visible=!1;Nn.findFrom=Nn.findGapCursorFrom;it.jsonID("gapcursor",Nn);class jw{constructor(e){this.pos=e}map(e){return new jw(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Nn.valid(t)?new Nn(t):it.near(t)}}function pde(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function mde(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function gde(){return new gn({props:{decorations:xde,createSelectionBetween(n,e,t){return e.pos==t.pos&&Nn.valid(t)?new Nn(t):null},handleClick:vde,handleKeyDown:yde,handleDOMEvents:{beforeinput:bde}}})}const yde=Z6({ArrowLeft:_m("horiz",-1),ArrowRight:_m("horiz",1),ArrowUp:_m("vert",-1),ArrowDown:_m("vert",1)});function _m(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Nn.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new Nn(u))),!0):!1}}function vde(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Nn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Ye.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Nn(r))),!0)}function bde(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Nn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=se.empty;for(let o=r.length-1;o>=0;o--)i=se.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new Ce(i,0,0));return s.setSelection(Be.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function xde(n){if(!(n.selection instanceof Nn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ut.create(n.doc,[qn.widget(n.selection.head,e,{key:"gapcursor"})])}function Ww(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-cursor",...e}}),n}const Xv=Vt({},"dropCursorConfig");Ww(Xv,{displayName:"Ctx<dropCursor>"});const S_=ir(n=>fde(n.get(Xv.key)));Ww(S_,{displayName:"Prose<dropCursor>"});const k_=ir(()=>gde());Ww(k_,{displayName:"Prose<gapCursor>"});const wde=[Xv,S_,k_];function Sde(n){var e;const t=(e=void 0)!=null?e:!1;let r=typeof document>"u"?null:document.createElement("div");return new gn({key:kde,view:i=>{t!==!0&&Ade(i.state.schema,t||[]);const s=i.dom.ownerDocument;r=r||document.createElement("div");const o=r,a=()=>{Tde(i,o)};let l;return window.ResizeObserver&&(l=new window.ResizeObserver(()=>a()),l.observe(i.dom)),s.addEventListener("selectionchange",a),{update:()=>{a()},destroy:()=>{s.removeEventListener("selectionchange",a),l&&l.unobserve(i.dom)}}},props:{handleKeyDown:(i,s)=>{var o;const{selection:a}=i.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!$3(a)||!a.empty)return!1;const l=a.$head,[u,c]=C_(l),h=i.state.storedMarks||l.marks();if(u&&c&&!yt.sameSet(u,c)){if(s.key==="ArrowLeft"&&!yt.sameSet(u,h))return i.dispatch(i.state.tr.setStoredMarks(u)),!0;if(s.key==="ArrowRight"&&!yt.sameSet(c,h))return i.dispatch(i.state.tr.setStoredMarks(c)),!0}return s.key==="ArrowLeft"&&l.textOffset===1?(i.dispatch(i.state.tr.setSelection(Be.create(i.state.doc,l.pos-1)).setStoredMarks(l.marks())),!0):s.key==="ArrowRight"&&l.textOffset+1===((o=l.parent.maybeChild(l.index()))==null?void 0:o.nodeSize)?(i.dispatch(i.state.tr.setSelection(Be.create(i.state.doc,l.pos+1)).setStoredMarks(l.marks())),!0):!1},decorations:i=>{if(!(!r||!$3(i.selection)||!i.selection.empty))return Ut.create(i.doc,[qn.widget(0,r,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var kde=new En("prosemirror-virtual-cursor");function Cde(n,e){var t;const r=window.getSelection();if(!r||!r.rangeCount)return null;const i=(t=r?.getRangeAt(0))==null?void 0:t.cloneRange();if(!i)return null;i.collapse(e);const s=i.getClientRects(),o=s?.length?s[s.length-1]:null;return o?.height?o:n.coordsAtPos(n.state.selection.head)}function C_(n){const e=n.index(),t=n.parent.maybeChild(e);let r=n.textOffset?t:null;return!r&&e>0&&(r=n.parent.maybeChild(e-1)),[r?.marks,t?.marks]}function $3(n){return n&&typeof n=="object"&&"$cursor"in n}function Tde(n,e){if(!n||!n.dom||n.isDestroyed||!e)return;const{state:t,dom:r}=n,{selection:i}=t;if(!$3(i))return;const s=Cde(n,i.$head===i.$from);if(!s)return e;const o=r.getBoundingClientRect();let a="prosemirror-virtual-cursor";const l=t.selection.$head,[u,c]=C_(l),h=t.storedMarks||l.marks();i.$cursor&&u&&c&&h&&!yt.sameSet(u,c)&&(yt.sameSet(u,h)?a+=" prosemirror-virtual-cursor-left":yt.sameSet(c,h)&&(a+=" prosemirror-virtual-cursor-right")),e.className=a,Ede(e,"prosemirror-virtual-cursor-animation"),e.style.height=`${s.bottom-s.top}px`,e.style.left=`${s.left-o.left}px`,e.style.top=`${s.top-o.top}px`}function Ede(n,e){n.classList.remove(e),n.offsetWidth,n.classList.add(e)}function Ade(n,e){for(const[t,r]of Object.entries(n.marks))r.spec.inclusive===!1&&!e.includes(t)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${t}" mark or adding it to the "skipWarning" option.`)}var Mde=Object.defineProperty,cE=Object.getOwnPropertySymbols,Ode=Object.prototype.hasOwnProperty,Ide=Object.prototype.propertyIsEnumerable,hE=(n,e,t)=>e in n?Mde(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dde=(n,e)=>{for(var t in e||(e={}))Ode.call(e,t)&&hE(n,t,e[t]);if(cE)for(var t of cE(e))Ide.call(e,t)&&hE(n,t,e[t]);return n};function T_(n,e){return Object.assign(n,{meta:Dde({package:"@milkdown/components"},e)}),n}const Nde={imageIcon:"🌌",uploadButton:"Upload",confirmButton:"⏎",uploadPlaceholderText:"/Paste",onUpload:n=>Promise.resolve(URL.createObjectURL(n))},Yv=Vt(Nde,"inlineImageConfigCtx");T_(Yv,{displayName:"Config<image-inline>",group:"ImageInline"});function K1({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}K1.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Pde=cx("abcdefg",8),Rde=He({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:n,src:e,setLink:t,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:a,className:l}){var u,c;const h=le(!1),f=le(),d=le((u=e.value)!=null?u:""),p=le(Pde()),m=le(((c=e.value)==null?void 0:c.length)!==0),g=k=>{const w=k.target.value;m.value=w.length!==0,d.value=w},y=k=>{var C,w;k.key==="Enter"&&t((w=(C=f.value)==null?void 0:C.value)!=null?w:"")},v=()=>{var k,C;t((C=(k=f.value)==null?void 0:k.value)!=null?C:"")},x=k=>{var C;const w=(C=k.target.files)==null?void 0:C[0];w&&r(w).then(M=>{M&&(t(M),m.value=!0)}).catch(M=>{console.error("An error occurred while uploading image"),console.error(M)})};return()=>X("div",{class:Cr("image-edit",l)},X(K1,{icon:i,class:"image-icon"}),X("div",{class:Cr("link-importer",h.value&&"focus")},X("input",{ref:f,draggable:"true",onDragstart:k=>{k.preventDefault(),k.stopPropagation()},disabled:n.value,class:"link-input-area",value:d.value,onInput:g,onKeydown:y,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&X("div",{class:"placeholder"},X("input",{disabled:n.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:x}),X("label",{class:"uploader",for:p.value},X(K1,{icon:s})),X("span",{class:"text",onClick:()=>{var k;return(k=f.value)==null?void 0:k.focus()}},a))),d.value&&X("div",{class:"confirm",onClick:()=>v()},X(K1,{icon:o})))}}),Lde=He({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(n){const{src:e,alt:t,title:r}=n;return()=>{var i;return(i=e.value)!=null&&i.length?X("img",{class:"image-inline",src:e.value,alt:t.value,title:r.value}):X(Rde,{src:n.src,selected:n.selected,readonly:n.readonly,setLink:s=>n.setAttr("src",s),imageIcon:n.config.imageIcon,uploadButton:n.config.uploadButton,confirmButton:n.config.confirmButton,uploadPlaceholderText:n.config.uploadPlaceholderText,onUpload:n.config.onUpload,className:"empty-image-inline"})}}}),E_=Sp(ic.node,n=>(e,t,r)=>{const i=le(e.attrs.src),s=le(e.attrs.alt),o=le(e.attrs.title),a=le(!1),l=le(!t.editable),u=(g,y)=>{if(!t.editable)return;const v=r();v!=null&&t.dispatch(t.state.tr.setNodeAttribute(v,g,g==="src"?Ks.sanitize(y):y))},c=n.get(Yv.key),h=Ws(Lde,{src:i,alt:s,title:o,selected:a,readonly:l,setAttr:u,config:c}),f=document.createElement("span");f.className="milkdown-image-inline",h.mount(f);const d=Rh(()=>{a.value?f.classList.add("selected"):f.classList.remove("selected")}),p=c.proxyDomURL,m=g=>{if(!p)i.value=g.attrs.src;else{const y=p(g.attrs.src);typeof y=="string"?i.value=y:y.then(v=>{i.value=v}).catch(console.error)}s.value=g.attrs.alt,o.value=g.attrs.title};return m(e),{dom:f,update:g=>g.type!==e.type?!1:(m(g),!0),stopEvent:g=>g.target instanceof HTMLInputElement,selectNode:()=>{a.value=!0},deselectNode:()=>{a.value=!1},destroy:()=>{d(),h.unmount(),f.remove()}}});T_(E_,{displayName:"NodeView<image-inline>",group:"ImageInline"});const _de=[Yv,E_];class Fi{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Fi(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class ms{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new ms(t,Fi.range(this,e))}}class ue{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;i=o.start,s=o.end,i===a.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var l=a.slice(i,s).replace(/[^]/g,"$&̲"),u;i>15?u="…"+a.slice(i-15,i):u=a.slice(0,i);var c;s+15<a.length?c=a.slice(s,s+15)+"…":c=a.slice(s),r+=u+l+c}var h=new Error(r);return h.name="ParseError",h.__proto__=ue.prototype,h.position=i,i!=null&&s!=null&&(h.length=s-i),h.rawMessage=e,h}}ue.prototype.__proto__=Error.prototype;var Bde=function(e,t){return e.indexOf(t)!==-1},Fde=function(e,t){return e===void 0?t:e},$de=/([A-Z])/g,zde=function(e){return e.replace($de,"-$1").toLowerCase()},Vde={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Hde=/[&><"']/g;function jde(n){return String(n).replace(Hde,e=>Vde[e])}var A_=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},Wde=function(e){var t=A_(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},qde=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Ude=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},Ge={contains:Bde,deflt:Fde,escape:jde,hyphenate:zde,getBaseElem:A_,isCharacterBox:Wde,protocolFromUrl:Ude},X1={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function Gde(n){if(n.default)return n.default;var e=n.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class qw{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in X1)if(X1.hasOwnProperty(t)){var r=X1[t];this[t]=e[t]!==void 0?r.processor?r.processor(e[t]):e[t]:Gde(r)}}reportNonstrict(e,t,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new ue("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,r){var i=this.strict;if(typeof i=="function")try{i=i(e,t,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=Ge.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class $a{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return so[Kde[this.id]]}sub(){return so[Xde[this.id]]}fracNum(){return so[Yde[this.id]]}fracDen(){return so[Jde[this.id]]}cramp(){return so[Zde[this.id]]}text(){return so[Qde[this.id]]}isTight(){return this.size>=2}}var Uw=0,wy=1,nh=2,pa=3,U0=4,us=5,Dh=6,Gr=7,so=[new $a(Uw,0,!1),new $a(wy,0,!0),new $a(nh,1,!1),new $a(pa,1,!0),new $a(U0,2,!1),new $a(us,2,!0),new $a(Dh,3,!1),new $a(Gr,3,!0)],Kde=[U0,us,U0,us,Dh,Gr,Dh,Gr],Xde=[us,us,us,us,Gr,Gr,Gr,Gr],Yde=[nh,pa,U0,us,Dh,Gr,Dh,Gr],Jde=[pa,pa,us,us,Gr,Gr,Gr,Gr],Zde=[wy,wy,pa,pa,us,us,Gr,Gr],Qde=[Uw,wy,nh,pa,nh,pa,nh,pa],tt={DISPLAY:so[Uw],TEXT:so[nh],SCRIPT:so[U0],SCRIPTSCRIPT:so[Dh]},z3=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function e0e(n){for(var e=0;e<z3.length;e++)for(var t=z3[e],r=0;r<t.blocks.length;r++){var i=t.blocks[r];if(n>=i[0]&&n<=i[1])return t.name}return null}var Y1=[];z3.forEach(n=>n.blocks.forEach(e=>Y1.push(...e)));function M_(n){for(var e=0;e<Y1.length;e+=2)if(n>=Y1[e]&&n<=Y1[e+1])return!0;return!1}var Sc=80,t0e=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},n0e=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},r0e=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},i0e=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},s0e=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},o0e=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},a0e=function(e,t,r){var i=r-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},l0e=function(e,t,r){t=1e3*t;var i="";switch(e){case"sqrtMain":i=t0e(t,Sc);break;case"sqrtSize1":i=n0e(t,Sc);break;case"sqrtSize2":i=r0e(t,Sc);break;case"sqrtSize3":i=i0e(t,Sc);break;case"sqrtSize4":i=s0e(t,Sc);break;case"sqrtTall":i=a0e(t,Sc,r)}return i},u0e=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},fE={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},c0e=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Rp{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Ge.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var ho={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Bm={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},dE={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function h0e(n,e){ho[n]=e}function Gw(n,e,t){if(!ho[e])throw new Error("Font metrics not found for font: "+e+".");var r=n.charCodeAt(0),i=ho[e][r];if(!i&&n[0]in dE&&(r=dE[n[0]].charCodeAt(0),i=ho[e][r]),!i&&t==="text"&&M_(r)&&(i=ho[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var lb={};function f0e(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!lb[e]){var t=lb[e]={cssEmPerMu:Bm.quad[e]/18};for(var r in Bm)Bm.hasOwnProperty(r)&&(t[r]=Bm[r][e])}return lb[e]}var d0e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],pE=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],mE=function(e,t){return t.size<2?e:d0e[e-1][t.size-1]};class Xo{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Xo.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=pE[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new Xo(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:mE(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:pE[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=mE(Xo.BASESIZE,e);return this.size===t&&this.textSize===Xo.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Xo.BASESIZE?["sizing","reset-size"+this.size,"size"+Xo.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=f0e(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Xo.BASESIZE=6;var V3={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},p0e={ex:!0,em:!0,mu:!0},O_=function(e){return typeof e!="string"&&(e=e.unit),e in V3||e in p0e||e==="ex"},Cn=function(e,t){var r;if(e.unit in V3)r=V3[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")r=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new ue("Invalid unit: '"+e.unit+"'");i!==t&&(r*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},pe=function(e){return+e.toFixed(4)+"em"},Dl=function(e){return e.filter(t=>t).join(" ")},I_=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},D_=function(e){var t=document.createElement(e);t.className=Dl(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},m0e=/[\s"'>/=\x00-\x1f]/,N_=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Ge.escape(Dl(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Ge.hyphenate(i)+":"+this.style[i]+";");r&&(t+=' style="'+Ge.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(m0e.test(s))throw new ue("Invalid attribute name '"+s+"'");t+=" "+s+'="'+Ge.escape(this.attributes[s])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t};class Lp{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,I_.call(this,e,r,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Ge.contains(this.classes,e)}toNode(){return D_.call(this,"span")}toMarkup(){return N_.call(this,"span")}}class Kw{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,I_.call(this,t,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Ge.contains(this.classes,e)}toNode(){return D_.call(this,"a")}toMarkup(){return N_.call(this,"a")}}class g0e{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return Ge.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Ge.escape(this.src)+'"'+(' alt="'+Ge.escape(this.alt)+'"'),t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=Ge.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+Ge.escape(t)+'"'),e+="'/>",e}}var y0e={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class ws{constructor(e,t,r,i,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var u=e0e(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=y0e[this.text])}hasClass(e){return Ge.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=pe(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Dl(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(t=t||document.createElement("span"),t.style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Ge.escape(Dl(this.classes)),t+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Ge.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,t+=' style="'+Ge.escape(r)+'"');var s=Ge.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class Sa{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ge.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class Nl{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",fE[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+Ge.escape(this.alternate)+'"/>':'<path d="'+Ge.escape(fE[this.pathName])+'"/>'}}class H3{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ge.escape(this.attributes[t])+'"');return e+="/>",e}}function gE(n){if(n instanceof ws)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function v0e(n){if(n instanceof Lp)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var b0e={bin:1,close:1,inner:1,open:1,punct:1,rel:1},x0e={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},en={math:{},text:{}};function b(n,e,t,r,i,s){en[n][i]={font:e,group:t,replace:r},s&&r&&(en[n][r]=en[n][i])}var S="math",oe="text",T="main",_="ams",yn="accent-token",Me="bin",ri="close",ef="inner",et="mathord",Gn="op-token",Ki="open",Jv="punct",B="rel",Na="spacing",z="textord";b(S,T,B,"≡","\\equiv",!0);b(S,T,B,"≺","\\prec",!0);b(S,T,B,"≻","\\succ",!0);b(S,T,B,"∼","\\sim",!0);b(S,T,B,"⊥","\\perp");b(S,T,B,"⪯","\\preceq",!0);b(S,T,B,"⪰","\\succeq",!0);b(S,T,B,"≃","\\simeq",!0);b(S,T,B,"∣","\\mid",!0);b(S,T,B,"≪","\\ll",!0);b(S,T,B,"≫","\\gg",!0);b(S,T,B,"≍","\\asymp",!0);b(S,T,B,"∥","\\parallel");b(S,T,B,"⋈","\\bowtie",!0);b(S,T,B,"⌣","\\smile",!0);b(S,T,B,"⊑","\\sqsubseteq",!0);b(S,T,B,"⊒","\\sqsupseteq",!0);b(S,T,B,"≐","\\doteq",!0);b(S,T,B,"⌢","\\frown",!0);b(S,T,B,"∋","\\ni",!0);b(S,T,B,"∝","\\propto",!0);b(S,T,B,"⊢","\\vdash",!0);b(S,T,B,"⊣","\\dashv",!0);b(S,T,B,"∋","\\owns");b(S,T,Jv,".","\\ldotp");b(S,T,Jv,"⋅","\\cdotp");b(S,T,z,"#","\\#");b(oe,T,z,"#","\\#");b(S,T,z,"&","\\&");b(oe,T,z,"&","\\&");b(S,T,z,"ℵ","\\aleph",!0);b(S,T,z,"∀","\\forall",!0);b(S,T,z,"ℏ","\\hbar",!0);b(S,T,z,"∃","\\exists",!0);b(S,T,z,"∇","\\nabla",!0);b(S,T,z,"♭","\\flat",!0);b(S,T,z,"ℓ","\\ell",!0);b(S,T,z,"♮","\\natural",!0);b(S,T,z,"♣","\\clubsuit",!0);b(S,T,z,"℘","\\wp",!0);b(S,T,z,"♯","\\sharp",!0);b(S,T,z,"♢","\\diamondsuit",!0);b(S,T,z,"ℜ","\\Re",!0);b(S,T,z,"♡","\\heartsuit",!0);b(S,T,z,"ℑ","\\Im",!0);b(S,T,z,"♠","\\spadesuit",!0);b(S,T,z,"§","\\S",!0);b(oe,T,z,"§","\\S");b(S,T,z,"¶","\\P",!0);b(oe,T,z,"¶","\\P");b(S,T,z,"†","\\dag");b(oe,T,z,"†","\\dag");b(oe,T,z,"†","\\textdagger");b(S,T,z,"‡","\\ddag");b(oe,T,z,"‡","\\ddag");b(oe,T,z,"‡","\\textdaggerdbl");b(S,T,ri,"⎱","\\rmoustache",!0);b(S,T,Ki,"⎰","\\lmoustache",!0);b(S,T,ri,"⟯","\\rgroup",!0);b(S,T,Ki,"⟮","\\lgroup",!0);b(S,T,Me,"∓","\\mp",!0);b(S,T,Me,"⊖","\\ominus",!0);b(S,T,Me,"⊎","\\uplus",!0);b(S,T,Me,"⊓","\\sqcap",!0);b(S,T,Me,"∗","\\ast");b(S,T,Me,"⊔","\\sqcup",!0);b(S,T,Me,"◯","\\bigcirc",!0);b(S,T,Me,"∙","\\bullet",!0);b(S,T,Me,"‡","\\ddagger");b(S,T,Me,"≀","\\wr",!0);b(S,T,Me,"⨿","\\amalg");b(S,T,Me,"&","\\And");b(S,T,B,"⟵","\\longleftarrow",!0);b(S,T,B,"⇐","\\Leftarrow",!0);b(S,T,B,"⟸","\\Longleftarrow",!0);b(S,T,B,"⟶","\\longrightarrow",!0);b(S,T,B,"⇒","\\Rightarrow",!0);b(S,T,B,"⟹","\\Longrightarrow",!0);b(S,T,B,"↔","\\leftrightarrow",!0);b(S,T,B,"⟷","\\longleftrightarrow",!0);b(S,T,B,"⇔","\\Leftrightarrow",!0);b(S,T,B,"⟺","\\Longleftrightarrow",!0);b(S,T,B,"↦","\\mapsto",!0);b(S,T,B,"⟼","\\longmapsto",!0);b(S,T,B,"↗","\\nearrow",!0);b(S,T,B,"↩","\\hookleftarrow",!0);b(S,T,B,"↪","\\hookrightarrow",!0);b(S,T,B,"↘","\\searrow",!0);b(S,T,B,"↼","\\leftharpoonup",!0);b(S,T,B,"⇀","\\rightharpoonup",!0);b(S,T,B,"↙","\\swarrow",!0);b(S,T,B,"↽","\\leftharpoondown",!0);b(S,T,B,"⇁","\\rightharpoondown",!0);b(S,T,B,"↖","\\nwarrow",!0);b(S,T,B,"⇌","\\rightleftharpoons",!0);b(S,_,B,"≮","\\nless",!0);b(S,_,B,"","\\@nleqslant");b(S,_,B,"","\\@nleqq");b(S,_,B,"⪇","\\lneq",!0);b(S,_,B,"≨","\\lneqq",!0);b(S,_,B,"","\\@lvertneqq");b(S,_,B,"⋦","\\lnsim",!0);b(S,_,B,"⪉","\\lnapprox",!0);b(S,_,B,"⊀","\\nprec",!0);b(S,_,B,"⋠","\\npreceq",!0);b(S,_,B,"⋨","\\precnsim",!0);b(S,_,B,"⪹","\\precnapprox",!0);b(S,_,B,"≁","\\nsim",!0);b(S,_,B,"","\\@nshortmid");b(S,_,B,"∤","\\nmid",!0);b(S,_,B,"⊬","\\nvdash",!0);b(S,_,B,"⊭","\\nvDash",!0);b(S,_,B,"⋪","\\ntriangleleft");b(S,_,B,"⋬","\\ntrianglelefteq",!0);b(S,_,B,"⊊","\\subsetneq",!0);b(S,_,B,"","\\@varsubsetneq");b(S,_,B,"⫋","\\subsetneqq",!0);b(S,_,B,"","\\@varsubsetneqq");b(S,_,B,"≯","\\ngtr",!0);b(S,_,B,"","\\@ngeqslant");b(S,_,B,"","\\@ngeqq");b(S,_,B,"⪈","\\gneq",!0);b(S,_,B,"≩","\\gneqq",!0);b(S,_,B,"","\\@gvertneqq");b(S,_,B,"⋧","\\gnsim",!0);b(S,_,B,"⪊","\\gnapprox",!0);b(S,_,B,"⊁","\\nsucc",!0);b(S,_,B,"⋡","\\nsucceq",!0);b(S,_,B,"⋩","\\succnsim",!0);b(S,_,B,"⪺","\\succnapprox",!0);b(S,_,B,"≆","\\ncong",!0);b(S,_,B,"","\\@nshortparallel");b(S,_,B,"∦","\\nparallel",!0);b(S,_,B,"⊯","\\nVDash",!0);b(S,_,B,"⋫","\\ntriangleright");b(S,_,B,"⋭","\\ntrianglerighteq",!0);b(S,_,B,"","\\@nsupseteqq");b(S,_,B,"⊋","\\supsetneq",!0);b(S,_,B,"","\\@varsupsetneq");b(S,_,B,"⫌","\\supsetneqq",!0);b(S,_,B,"","\\@varsupsetneqq");b(S,_,B,"⊮","\\nVdash",!0);b(S,_,B,"⪵","\\precneqq",!0);b(S,_,B,"⪶","\\succneqq",!0);b(S,_,B,"","\\@nsubseteqq");b(S,_,Me,"⊴","\\unlhd");b(S,_,Me,"⊵","\\unrhd");b(S,_,B,"↚","\\nleftarrow",!0);b(S,_,B,"↛","\\nrightarrow",!0);b(S,_,B,"⇍","\\nLeftarrow",!0);b(S,_,B,"⇏","\\nRightarrow",!0);b(S,_,B,"↮","\\nleftrightarrow",!0);b(S,_,B,"⇎","\\nLeftrightarrow",!0);b(S,_,B,"△","\\vartriangle");b(S,_,z,"ℏ","\\hslash");b(S,_,z,"▽","\\triangledown");b(S,_,z,"◊","\\lozenge");b(S,_,z,"Ⓢ","\\circledS");b(S,_,z,"®","\\circledR");b(oe,_,z,"®","\\circledR");b(S,_,z,"∡","\\measuredangle",!0);b(S,_,z,"∄","\\nexists");b(S,_,z,"℧","\\mho");b(S,_,z,"Ⅎ","\\Finv",!0);b(S,_,z,"⅁","\\Game",!0);b(S,_,z,"‵","\\backprime");b(S,_,z,"▲","\\blacktriangle");b(S,_,z,"▼","\\blacktriangledown");b(S,_,z,"■","\\blacksquare");b(S,_,z,"⧫","\\blacklozenge");b(S,_,z,"★","\\bigstar");b(S,_,z,"∢","\\sphericalangle",!0);b(S,_,z,"∁","\\complement",!0);b(S,_,z,"ð","\\eth",!0);b(oe,T,z,"ð","ð");b(S,_,z,"╱","\\diagup");b(S,_,z,"╲","\\diagdown");b(S,_,z,"□","\\square");b(S,_,z,"□","\\Box");b(S,_,z,"◊","\\Diamond");b(S,_,z,"¥","\\yen",!0);b(oe,_,z,"¥","\\yen",!0);b(S,_,z,"✓","\\checkmark",!0);b(oe,_,z,"✓","\\checkmark");b(S,_,z,"ℶ","\\beth",!0);b(S,_,z,"ℸ","\\daleth",!0);b(S,_,z,"ℷ","\\gimel",!0);b(S,_,z,"ϝ","\\digamma",!0);b(S,_,z,"ϰ","\\varkappa");b(S,_,Ki,"┌","\\@ulcorner",!0);b(S,_,ri,"┐","\\@urcorner",!0);b(S,_,Ki,"└","\\@llcorner",!0);b(S,_,ri,"┘","\\@lrcorner",!0);b(S,_,B,"≦","\\leqq",!0);b(S,_,B,"⩽","\\leqslant",!0);b(S,_,B,"⪕","\\eqslantless",!0);b(S,_,B,"≲","\\lesssim",!0);b(S,_,B,"⪅","\\lessapprox",!0);b(S,_,B,"≊","\\approxeq",!0);b(S,_,Me,"⋖","\\lessdot");b(S,_,B,"⋘","\\lll",!0);b(S,_,B,"≶","\\lessgtr",!0);b(S,_,B,"⋚","\\lesseqgtr",!0);b(S,_,B,"⪋","\\lesseqqgtr",!0);b(S,_,B,"≑","\\doteqdot");b(S,_,B,"≓","\\risingdotseq",!0);b(S,_,B,"≒","\\fallingdotseq",!0);b(S,_,B,"∽","\\backsim",!0);b(S,_,B,"⋍","\\backsimeq",!0);b(S,_,B,"⫅","\\subseteqq",!0);b(S,_,B,"⋐","\\Subset",!0);b(S,_,B,"⊏","\\sqsubset",!0);b(S,_,B,"≼","\\preccurlyeq",!0);b(S,_,B,"⋞","\\curlyeqprec",!0);b(S,_,B,"≾","\\precsim",!0);b(S,_,B,"⪷","\\precapprox",!0);b(S,_,B,"⊲","\\vartriangleleft");b(S,_,B,"⊴","\\trianglelefteq");b(S,_,B,"⊨","\\vDash",!0);b(S,_,B,"⊪","\\Vvdash",!0);b(S,_,B,"⌣","\\smallsmile");b(S,_,B,"⌢","\\smallfrown");b(S,_,B,"≏","\\bumpeq",!0);b(S,_,B,"≎","\\Bumpeq",!0);b(S,_,B,"≧","\\geqq",!0);b(S,_,B,"⩾","\\geqslant",!0);b(S,_,B,"⪖","\\eqslantgtr",!0);b(S,_,B,"≳","\\gtrsim",!0);b(S,_,B,"⪆","\\gtrapprox",!0);b(S,_,Me,"⋗","\\gtrdot");b(S,_,B,"⋙","\\ggg",!0);b(S,_,B,"≷","\\gtrless",!0);b(S,_,B,"⋛","\\gtreqless",!0);b(S,_,B,"⪌","\\gtreqqless",!0);b(S,_,B,"≖","\\eqcirc",!0);b(S,_,B,"≗","\\circeq",!0);b(S,_,B,"≜","\\triangleq",!0);b(S,_,B,"∼","\\thicksim");b(S,_,B,"≈","\\thickapprox");b(S,_,B,"⫆","\\supseteqq",!0);b(S,_,B,"⋑","\\Supset",!0);b(S,_,B,"⊐","\\sqsupset",!0);b(S,_,B,"≽","\\succcurlyeq",!0);b(S,_,B,"⋟","\\curlyeqsucc",!0);b(S,_,B,"≿","\\succsim",!0);b(S,_,B,"⪸","\\succapprox",!0);b(S,_,B,"⊳","\\vartriangleright");b(S,_,B,"⊵","\\trianglerighteq");b(S,_,B,"⊩","\\Vdash",!0);b(S,_,B,"∣","\\shortmid");b(S,_,B,"∥","\\shortparallel");b(S,_,B,"≬","\\between",!0);b(S,_,B,"⋔","\\pitchfork",!0);b(S,_,B,"∝","\\varpropto");b(S,_,B,"◀","\\blacktriangleleft");b(S,_,B,"∴","\\therefore",!0);b(S,_,B,"∍","\\backepsilon");b(S,_,B,"▶","\\blacktriangleright");b(S,_,B,"∵","\\because",!0);b(S,_,B,"⋘","\\llless");b(S,_,B,"⋙","\\gggtr");b(S,_,Me,"⊲","\\lhd");b(S,_,Me,"⊳","\\rhd");b(S,_,B,"≂","\\eqsim",!0);b(S,T,B,"⋈","\\Join");b(S,_,B,"≑","\\Doteq",!0);b(S,_,Me,"∔","\\dotplus",!0);b(S,_,Me,"∖","\\smallsetminus");b(S,_,Me,"⋒","\\Cap",!0);b(S,_,Me,"⋓","\\Cup",!0);b(S,_,Me,"⩞","\\doublebarwedge",!0);b(S,_,Me,"⊟","\\boxminus",!0);b(S,_,Me,"⊞","\\boxplus",!0);b(S,_,Me,"⋇","\\divideontimes",!0);b(S,_,Me,"⋉","\\ltimes",!0);b(S,_,Me,"⋊","\\rtimes",!0);b(S,_,Me,"⋋","\\leftthreetimes",!0);b(S,_,Me,"⋌","\\rightthreetimes",!0);b(S,_,Me,"⋏","\\curlywedge",!0);b(S,_,Me,"⋎","\\curlyvee",!0);b(S,_,Me,"⊝","\\circleddash",!0);b(S,_,Me,"⊛","\\circledast",!0);b(S,_,Me,"⋅","\\centerdot");b(S,_,Me,"⊺","\\intercal",!0);b(S,_,Me,"⋒","\\doublecap");b(S,_,Me,"⋓","\\doublecup");b(S,_,Me,"⊠","\\boxtimes",!0);b(S,_,B,"⇢","\\dashrightarrow",!0);b(S,_,B,"⇠","\\dashleftarrow",!0);b(S,_,B,"⇇","\\leftleftarrows",!0);b(S,_,B,"⇆","\\leftrightarrows",!0);b(S,_,B,"⇚","\\Lleftarrow",!0);b(S,_,B,"↞","\\twoheadleftarrow",!0);b(S,_,B,"↢","\\leftarrowtail",!0);b(S,_,B,"↫","\\looparrowleft",!0);b(S,_,B,"⇋","\\leftrightharpoons",!0);b(S,_,B,"↶","\\curvearrowleft",!0);b(S,_,B,"↺","\\circlearrowleft",!0);b(S,_,B,"↰","\\Lsh",!0);b(S,_,B,"⇈","\\upuparrows",!0);b(S,_,B,"↿","\\upharpoonleft",!0);b(S,_,B,"⇃","\\downharpoonleft",!0);b(S,T,B,"⊶","\\origof",!0);b(S,T,B,"⊷","\\imageof",!0);b(S,_,B,"⊸","\\multimap",!0);b(S,_,B,"↭","\\leftrightsquigarrow",!0);b(S,_,B,"⇉","\\rightrightarrows",!0);b(S,_,B,"⇄","\\rightleftarrows",!0);b(S,_,B,"↠","\\twoheadrightarrow",!0);b(S,_,B,"↣","\\rightarrowtail",!0);b(S,_,B,"↬","\\looparrowright",!0);b(S,_,B,"↷","\\curvearrowright",!0);b(S,_,B,"↻","\\circlearrowright",!0);b(S,_,B,"↱","\\Rsh",!0);b(S,_,B,"⇊","\\downdownarrows",!0);b(S,_,B,"↾","\\upharpoonright",!0);b(S,_,B,"⇂","\\downharpoonright",!0);b(S,_,B,"⇝","\\rightsquigarrow",!0);b(S,_,B,"⇝","\\leadsto");b(S,_,B,"⇛","\\Rrightarrow",!0);b(S,_,B,"↾","\\restriction");b(S,T,z,"‘","`");b(S,T,z,"$","\\$");b(oe,T,z,"$","\\$");b(oe,T,z,"$","\\textdollar");b(S,T,z,"%","\\%");b(oe,T,z,"%","\\%");b(S,T,z,"_","\\_");b(oe,T,z,"_","\\_");b(oe,T,z,"_","\\textunderscore");b(S,T,z,"∠","\\angle",!0);b(S,T,z,"∞","\\infty",!0);b(S,T,z,"′","\\prime");b(S,T,z,"△","\\triangle");b(S,T,z,"Γ","\\Gamma",!0);b(S,T,z,"Δ","\\Delta",!0);b(S,T,z,"Θ","\\Theta",!0);b(S,T,z,"Λ","\\Lambda",!0);b(S,T,z,"Ξ","\\Xi",!0);b(S,T,z,"Π","\\Pi",!0);b(S,T,z,"Σ","\\Sigma",!0);b(S,T,z,"Υ","\\Upsilon",!0);b(S,T,z,"Φ","\\Phi",!0);b(S,T,z,"Ψ","\\Psi",!0);b(S,T,z,"Ω","\\Omega",!0);b(S,T,z,"A","Α");b(S,T,z,"B","Β");b(S,T,z,"E","Ε");b(S,T,z,"Z","Ζ");b(S,T,z,"H","Η");b(S,T,z,"I","Ι");b(S,T,z,"K","Κ");b(S,T,z,"M","Μ");b(S,T,z,"N","Ν");b(S,T,z,"O","Ο");b(S,T,z,"P","Ρ");b(S,T,z,"T","Τ");b(S,T,z,"X","Χ");b(S,T,z,"¬","\\neg",!0);b(S,T,z,"¬","\\lnot");b(S,T,z,"⊤","\\top");b(S,T,z,"⊥","\\bot");b(S,T,z,"∅","\\emptyset");b(S,_,z,"∅","\\varnothing");b(S,T,et,"α","\\alpha",!0);b(S,T,et,"β","\\beta",!0);b(S,T,et,"γ","\\gamma",!0);b(S,T,et,"δ","\\delta",!0);b(S,T,et,"ϵ","\\epsilon",!0);b(S,T,et,"ζ","\\zeta",!0);b(S,T,et,"η","\\eta",!0);b(S,T,et,"θ","\\theta",!0);b(S,T,et,"ι","\\iota",!0);b(S,T,et,"κ","\\kappa",!0);b(S,T,et,"λ","\\lambda",!0);b(S,T,et,"μ","\\mu",!0);b(S,T,et,"ν","\\nu",!0);b(S,T,et,"ξ","\\xi",!0);b(S,T,et,"ο","\\omicron",!0);b(S,T,et,"π","\\pi",!0);b(S,T,et,"ρ","\\rho",!0);b(S,T,et,"σ","\\sigma",!0);b(S,T,et,"τ","\\tau",!0);b(S,T,et,"υ","\\upsilon",!0);b(S,T,et,"ϕ","\\phi",!0);b(S,T,et,"χ","\\chi",!0);b(S,T,et,"ψ","\\psi",!0);b(S,T,et,"ω","\\omega",!0);b(S,T,et,"ε","\\varepsilon",!0);b(S,T,et,"ϑ","\\vartheta",!0);b(S,T,et,"ϖ","\\varpi",!0);b(S,T,et,"ϱ","\\varrho",!0);b(S,T,et,"ς","\\varsigma",!0);b(S,T,et,"φ","\\varphi",!0);b(S,T,Me,"∗","*",!0);b(S,T,Me,"+","+");b(S,T,Me,"−","-",!0);b(S,T,Me,"⋅","\\cdot",!0);b(S,T,Me,"∘","\\circ",!0);b(S,T,Me,"÷","\\div",!0);b(S,T,Me,"±","\\pm",!0);b(S,T,Me,"×","\\times",!0);b(S,T,Me,"∩","\\cap",!0);b(S,T,Me,"∪","\\cup",!0);b(S,T,Me,"∖","\\setminus",!0);b(S,T,Me,"∧","\\land");b(S,T,Me,"∨","\\lor");b(S,T,Me,"∧","\\wedge",!0);b(S,T,Me,"∨","\\vee",!0);b(S,T,z,"√","\\surd");b(S,T,Ki,"⟨","\\langle",!0);b(S,T,Ki,"∣","\\lvert");b(S,T,Ki,"∥","\\lVert");b(S,T,ri,"?","?");b(S,T,ri,"!","!");b(S,T,ri,"⟩","\\rangle",!0);b(S,T,ri,"∣","\\rvert");b(S,T,ri,"∥","\\rVert");b(S,T,B,"=","=");b(S,T,B,":",":");b(S,T,B,"≈","\\approx",!0);b(S,T,B,"≅","\\cong",!0);b(S,T,B,"≥","\\ge");b(S,T,B,"≥","\\geq",!0);b(S,T,B,"←","\\gets");b(S,T,B,">","\\gt",!0);b(S,T,B,"∈","\\in",!0);b(S,T,B,"","\\@not");b(S,T,B,"⊂","\\subset",!0);b(S,T,B,"⊃","\\supset",!0);b(S,T,B,"⊆","\\subseteq",!0);b(S,T,B,"⊇","\\supseteq",!0);b(S,_,B,"⊈","\\nsubseteq",!0);b(S,_,B,"⊉","\\nsupseteq",!0);b(S,T,B,"⊨","\\models");b(S,T,B,"←","\\leftarrow",!0);b(S,T,B,"≤","\\le");b(S,T,B,"≤","\\leq",!0);b(S,T,B,"<","\\lt",!0);b(S,T,B,"→","\\rightarrow",!0);b(S,T,B,"→","\\to");b(S,_,B,"≱","\\ngeq",!0);b(S,_,B,"≰","\\nleq",!0);b(S,T,Na," ","\\ ");b(S,T,Na," ","\\space");b(S,T,Na," ","\\nobreakspace");b(oe,T,Na," ","\\ ");b(oe,T,Na," "," ");b(oe,T,Na," ","\\space");b(oe,T,Na," ","\\nobreakspace");b(S,T,Na,null,"\\nobreak");b(S,T,Na,null,"\\allowbreak");b(S,T,Jv,",",",");b(S,T,Jv,";",";");b(S,_,Me,"⊼","\\barwedge",!0);b(S,_,Me,"⊻","\\veebar",!0);b(S,T,Me,"⊙","\\odot",!0);b(S,T,Me,"⊕","\\oplus",!0);b(S,T,Me,"⊗","\\otimes",!0);b(S,T,z,"∂","\\partial",!0);b(S,T,Me,"⊘","\\oslash",!0);b(S,_,Me,"⊚","\\circledcirc",!0);b(S,_,Me,"⊡","\\boxdot",!0);b(S,T,Me,"△","\\bigtriangleup");b(S,T,Me,"▽","\\bigtriangledown");b(S,T,Me,"†","\\dagger");b(S,T,Me,"⋄","\\diamond");b(S,T,Me,"⋆","\\star");b(S,T,Me,"◃","\\triangleleft");b(S,T,Me,"▹","\\triangleright");b(S,T,Ki,"{","\\{");b(oe,T,z,"{","\\{");b(oe,T,z,"{","\\textbraceleft");b(S,T,ri,"}","\\}");b(oe,T,z,"}","\\}");b(oe,T,z,"}","\\textbraceright");b(S,T,Ki,"{","\\lbrace");b(S,T,ri,"}","\\rbrace");b(S,T,Ki,"[","\\lbrack",!0);b(oe,T,z,"[","\\lbrack",!0);b(S,T,ri,"]","\\rbrack",!0);b(oe,T,z,"]","\\rbrack",!0);b(S,T,Ki,"(","\\lparen",!0);b(S,T,ri,")","\\rparen",!0);b(oe,T,z,"<","\\textless",!0);b(oe,T,z,">","\\textgreater",!0);b(S,T,Ki,"⌊","\\lfloor",!0);b(S,T,ri,"⌋","\\rfloor",!0);b(S,T,Ki,"⌈","\\lceil",!0);b(S,T,ri,"⌉","\\rceil",!0);b(S,T,z,"\\","\\backslash");b(S,T,z,"∣","|");b(S,T,z,"∣","\\vert");b(oe,T,z,"|","\\textbar",!0);b(S,T,z,"∥","\\|");b(S,T,z,"∥","\\Vert");b(oe,T,z,"∥","\\textbardbl");b(oe,T,z,"~","\\textasciitilde");b(oe,T,z,"\\","\\textbackslash");b(oe,T,z,"^","\\textasciicircum");b(S,T,B,"↑","\\uparrow",!0);b(S,T,B,"⇑","\\Uparrow",!0);b(S,T,B,"↓","\\downarrow",!0);b(S,T,B,"⇓","\\Downarrow",!0);b(S,T,B,"↕","\\updownarrow",!0);b(S,T,B,"⇕","\\Updownarrow",!0);b(S,T,Gn,"∐","\\coprod");b(S,T,Gn,"⋁","\\bigvee");b(S,T,Gn,"⋀","\\bigwedge");b(S,T,Gn,"⨄","\\biguplus");b(S,T,Gn,"⋂","\\bigcap");b(S,T,Gn,"⋃","\\bigcup");b(S,T,Gn,"∫","\\int");b(S,T,Gn,"∫","\\intop");b(S,T,Gn,"∬","\\iint");b(S,T,Gn,"∭","\\iiint");b(S,T,Gn,"∏","\\prod");b(S,T,Gn,"∑","\\sum");b(S,T,Gn,"⨂","\\bigotimes");b(S,T,Gn,"⨁","\\bigoplus");b(S,T,Gn,"⨀","\\bigodot");b(S,T,Gn,"∮","\\oint");b(S,T,Gn,"∯","\\oiint");b(S,T,Gn,"∰","\\oiiint");b(S,T,Gn,"⨆","\\bigsqcup");b(S,T,Gn,"∫","\\smallint");b(oe,T,ef,"…","\\textellipsis");b(S,T,ef,"…","\\mathellipsis");b(oe,T,ef,"…","\\ldots",!0);b(S,T,ef,"…","\\ldots",!0);b(S,T,ef,"⋯","\\@cdots",!0);b(S,T,ef,"⋱","\\ddots",!0);b(S,T,z,"⋮","\\varvdots");b(oe,T,z,"⋮","\\varvdots");b(S,T,yn,"ˊ","\\acute");b(S,T,yn,"ˋ","\\grave");b(S,T,yn,"¨","\\ddot");b(S,T,yn,"~","\\tilde");b(S,T,yn,"ˉ","\\bar");b(S,T,yn,"˘","\\breve");b(S,T,yn,"ˇ","\\check");b(S,T,yn,"^","\\hat");b(S,T,yn,"⃗","\\vec");b(S,T,yn,"˙","\\dot");b(S,T,yn,"˚","\\mathring");b(S,T,et,"","\\@imath");b(S,T,et,"","\\@jmath");b(S,T,z,"ı","ı");b(S,T,z,"ȷ","ȷ");b(oe,T,z,"ı","\\i",!0);b(oe,T,z,"ȷ","\\j",!0);b(oe,T,z,"ß","\\ss",!0);b(oe,T,z,"æ","\\ae",!0);b(oe,T,z,"œ","\\oe",!0);b(oe,T,z,"ø","\\o",!0);b(oe,T,z,"Æ","\\AE",!0);b(oe,T,z,"Œ","\\OE",!0);b(oe,T,z,"Ø","\\O",!0);b(oe,T,yn,"ˊ","\\'");b(oe,T,yn,"ˋ","\\`");b(oe,T,yn,"ˆ","\\^");b(oe,T,yn,"˜","\\~");b(oe,T,yn,"ˉ","\\=");b(oe,T,yn,"˘","\\u");b(oe,T,yn,"˙","\\.");b(oe,T,yn,"¸","\\c");b(oe,T,yn,"˚","\\r");b(oe,T,yn,"ˇ","\\v");b(oe,T,yn,"¨",'\\"');b(oe,T,yn,"˝","\\H");b(oe,T,yn,"◯","\\textcircled");var P_={"--":!0,"---":!0,"``":!0,"''":!0};b(oe,T,z,"–","--",!0);b(oe,T,z,"–","\\textendash");b(oe,T,z,"—","---",!0);b(oe,T,z,"—","\\textemdash");b(oe,T,z,"‘","`",!0);b(oe,T,z,"‘","\\textquoteleft");b(oe,T,z,"’","'",!0);b(oe,T,z,"’","\\textquoteright");b(oe,T,z,"“","``",!0);b(oe,T,z,"“","\\textquotedblleft");b(oe,T,z,"”","''",!0);b(oe,T,z,"”","\\textquotedblright");b(S,T,z,"°","\\degree",!0);b(oe,T,z,"°","\\degree");b(oe,T,z,"°","\\textdegree",!0);b(S,T,z,"£","\\pounds");b(S,T,z,"£","\\mathsterling",!0);b(oe,T,z,"£","\\pounds");b(oe,T,z,"£","\\textsterling",!0);b(S,_,z,"✠","\\maltese");b(oe,_,z,"✠","\\maltese");var yE='0123456789/@."';for(var ub=0;ub<yE.length;ub++){var vE=yE.charAt(ub);b(S,T,z,vE,vE)}var bE='0123456789!@*()-=+";:?/.,';for(var cb=0;cb<bE.length;cb++){var xE=bE.charAt(cb);b(oe,T,z,xE,xE)}var Sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var hb=0;hb<Sy.length;hb++){var Fm=Sy.charAt(hb);b(S,T,et,Fm,Fm),b(oe,T,z,Fm,Fm)}b(S,_,z,"C","ℂ");b(oe,_,z,"C","ℂ");b(S,_,z,"H","ℍ");b(oe,_,z,"H","ℍ");b(S,_,z,"N","ℕ");b(oe,_,z,"N","ℕ");b(S,_,z,"P","ℙ");b(oe,_,z,"P","ℙ");b(S,_,z,"Q","ℚ");b(oe,_,z,"Q","ℚ");b(S,_,z,"R","ℝ");b(oe,_,z,"R","ℝ");b(S,_,z,"Z","ℤ");b(oe,_,z,"Z","ℤ");b(S,T,et,"h","ℎ");b(oe,T,et,"h","ℎ");var rt="";for(var Hr=0;Hr<Sy.length;Hr++){var Mn=Sy.charAt(Hr);rt=String.fromCharCode(55349,56320+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56372+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56424+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56580+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56684+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56736+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56788+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56840+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56944+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),Hr<26&&(rt=String.fromCharCode(55349,56632+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt),rt=String.fromCharCode(55349,56476+Hr),b(S,T,et,Mn,rt),b(oe,T,z,Mn,rt))}rt="𝕜";b(S,T,et,"k",rt);b(oe,T,z,"k",rt);for(var Yl=0;Yl<10;Yl++){var za=Yl.toString();rt=String.fromCharCode(55349,57294+Yl),b(S,T,et,za,rt),b(oe,T,z,za,rt),rt=String.fromCharCode(55349,57314+Yl),b(S,T,et,za,rt),b(oe,T,z,za,rt),rt=String.fromCharCode(55349,57324+Yl),b(S,T,et,za,rt),b(oe,T,z,za,rt),rt=String.fromCharCode(55349,57334+Yl),b(S,T,et,za,rt),b(oe,T,z,za,rt)}var j3="ÐÞþ";for(var fb=0;fb<j3.length;fb++){var $m=j3.charAt(fb);b(S,T,et,$m,$m),b(oe,T,z,$m,$m)}var zm=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wE=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],w0e=function(e,t){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,o=t==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[zm[a][2],zm[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[wE[l][2],wE[l][o]]}else{if(s===120485||s===120486)return[zm[0][2],zm[0][o]];if(120486<s&&s<120782)return["",""];throw new ue("Unsupported character: "+e)}},Zv=function(e,t,r){return en[r][e]&&en[r][e].replace&&(e=en[r][e].replace),{value:e,metrics:Gw(e,t,r)}},Ps=function(e,t,r,i,s){var o=Zv(e,t,r),a=o.metrics;e=o.value;var l;if(a){var u=a.italic;(r==="text"||i&&i.font==="mathit")&&(u=0),l=new ws(e,a.height,a.depth,u,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+r+"'")),l=new ws(e,0,0,0,0,0,s);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var c=i.getColor();c&&(l.style.color=c)}return l},S0e=function(e,t,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&Zv(e,"Main-Bold",t).metrics?Ps(e,"Main-Bold",t,r,i.concat(["mathbf"])):e==="\\"||en[t][e].font==="main"?Ps(e,"Main-Regular",t,r,i):Ps(e,"AMS-Regular",t,r,i.concat(["amsrm"]))},k0e=function(e,t,r,i,s){return s!=="textord"&&Zv(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},C0e=function(e,t,r){var i=e.mode,s=e.text,o=["mord"],a=i==="math"||i==="text"&&t.font,l=a?t.font:t.fontFamily,u="",c="";if(s.charCodeAt(0)===55349&&([u,c]=w0e(s,i)),u.length>0)return Ps(s,u,i,t,o.concat(c));if(l){var h,f;if(l==="boldsymbol"){var d=k0e(s,i,t,o,r);h=d.fontName,f=[d.fontClass]}else a?(h=__[l].fontName,f=[l]):(h=Vm(l,t.fontWeight,t.fontShape),f=[l,t.fontWeight,t.fontShape]);if(Zv(s,h,i).metrics)return Ps(s,h,i,t,o.concat(f));if(P_.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<s.length;m++)p.push(Ps(s[m],h,i,t,o.concat(f)));return L_(p)}}if(r==="mathord")return Ps(s,"Math-Italic",i,t,o.concat(["mathnormal"]));if(r==="textord"){var g=en[i][s]&&en[i][s].font;if(g==="ams"){var y=Vm("amsrm",t.fontWeight,t.fontShape);return Ps(s,y,i,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(g==="main"||!g){var v=Vm("textrm",t.fontWeight,t.fontShape);return Ps(s,v,i,t,o.concat(t.fontWeight,t.fontShape))}else{var x=Vm(g,t.fontWeight,t.fontShape);return Ps(s,x,i,t,o.concat(x,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},T0e=(n,e)=>{if(Dl(n.classes)!==Dl(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var t=n.classes[0];if(t==="mbin"||t==="mord")return!1}for(var r in n.style)if(n.style.hasOwnProperty(r)&&n.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&n.style[i]!==e.style[i])return!1;return!0},E0e=n=>{for(var e=0;e<n.length-1;e++){var t=n[e],r=n[e+1];t instanceof ws&&r instanceof ws&&T0e(t,r)&&(t.text+=r.text,t.height=Math.max(t.height,r.height),t.depth=Math.max(t.depth,r.depth),t.italic=r.italic,n.splice(e+1,1),e--)}return n},Xw=function(e){for(var t=0,r=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>t&&(t=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=i},ci=function(e,t,r,i){var s=new Lp(e,t,r,i);return Xw(s),s},R_=(n,e,t,r)=>new Lp(n,e,t,r),A0e=function(e,t,r){var i=ci([e],[],t);return i.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=pe(i.height),i.maxFontSize=1,i},M0e=function(e,t,r,i){var s=new Kw(e,t,r,i);return Xw(s),s},L_=function(e){var t=new Rp(e);return Xw(t),t},O0e=function(e,t){return e instanceof Rp?ci([],[e],t):e},I0e=function(e){if(e.positionType==="individualShift"){for(var t=e.children,r=[t[0]],i=-t[0].shift-t[0].elem.depth,s=i,o=1;o<t.length;o++){var a=-t[o].shift-s-t[o].elem.depth,l=a-(t[o-1].elem.height+t[o-1].elem.depth);s=s+a,r.push({type:"kern",size:l}),r.push(t[o])}return{children:r,depth:i}}var u;if(e.positionType==="top"){for(var c=e.positionData,h=0;h<e.children.length;h++){var f=e.children[h];c-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}u=c}else if(e.positionType==="bottom")u=-e.positionData;else{var d=e.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")u=-d.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")u=-d.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:u}},D0e=function(e,t){for(var{children:r,depth:i}=I0e(e),s=0,o=0;o<r.length;o++){var a=r[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var u=ci(["pstrut"],[]);u.style.height=pe(s);for(var c=[],h=i,f=i,d=i,p=0;p<r.length;p++){var m=r[p];if(m.type==="kern")d+=m.size;else{var g=m.elem,y=m.wrapperClasses||[],v=m.wrapperStyle||{},x=ci(y,[u,g],void 0,v);x.style.top=pe(-s-d-g.depth),m.marginLeft&&(x.style.marginLeft=m.marginLeft),m.marginRight&&(x.style.marginRight=m.marginRight),c.push(x),d+=g.height+g.depth}h=Math.min(h,d),f=Math.max(f,d)}var k=ci(["vlist"],c);k.style.height=pe(f);var C;if(h<0){var w=ci([],[]),M=ci(["vlist"],[w]);M.style.height=pe(-h);var D=ci(["vlist-s"],[new ws("​")]);C=[ci(["vlist-r"],[k,D]),ci(["vlist-r"],[M])]}else C=[ci(["vlist-r"],[k])];var A=ci(["vlist-t"],C);return C.length===2&&A.classes.push("vlist-t2"),A.height=f,A.depth=-h,A},N0e=(n,e)=>{var t=ci(["mspace"],[],e),r=Cn(n,e);return t.style.marginRight=pe(r),t},Vm=function(e,t,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return t==="textbf"&&r==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",i+"-"+s},__={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},B_={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},P0e=function(e,t){var[r,i,s]=B_[e],o=new Nl(r),a=new Sa([o],{width:pe(i),height:pe(s),style:"width:"+pe(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=R_(["overlay"],[a],t);return l.height=s,l.style.height=pe(s),l.style.width=pe(i),l},q={fontMap:__,makeSymbol:Ps,mathsym:S0e,makeSpan:ci,makeSvgSpan:R_,makeLineSpan:A0e,makeAnchor:M0e,makeFragment:L_,wrapFragment:O0e,makeVList:D0e,makeOrd:C0e,makeGlue:N0e,staticSvg:P0e,svgData:B_,tryCombineChars:E0e},wn={number:3,unit:"mu"},Jl={number:4,unit:"mu"},Fo={number:5,unit:"mu"},R0e={mord:{mop:wn,mbin:Jl,mrel:Fo,minner:wn},mop:{mord:wn,mop:wn,mrel:Fo,minner:wn},mbin:{mord:Jl,mop:Jl,mopen:Jl,minner:Jl},mrel:{mord:Fo,mop:Fo,mopen:Fo,minner:Fo},mopen:{},mclose:{mop:wn,mbin:Jl,mrel:Fo,minner:wn},mpunct:{mord:wn,mop:wn,mrel:Fo,mopen:wn,mclose:wn,mpunct:wn,minner:wn},minner:{mord:wn,mop:wn,mbin:Jl,mrel:Fo,mopen:wn,mpunct:wn,minner:wn}},L0e={mord:{mop:wn},mop:{mord:wn,mop:wn},mbin:{},mrel:{},mopen:{},mclose:{mop:wn},mpunct:{},minner:{mop:wn}},F_={},ky={},Cy={};function ke(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<t.length;++l)F_[t[l]]=a;e&&(s&&(ky[e]=s),o&&(Cy[e]=o))}function lc(n){var{type:e,htmlBuilder:t,mathmlBuilder:r}=n;ke({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:r})}var Ty=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},_n=function(e){return e.type==="ordgroup"?e.body:[e]},ka=q.makeSpan,_0e=["leftmost","mbin","mopen","mrel","mop","mpunct"],B0e=["rightmost","mrel","mclose","mpunct"],F0e={display:tt.DISPLAY,text:tt.TEXT,script:tt.SCRIPT,scriptscript:tt.SCRIPTSCRIPT},$0e={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},nr=function(e,t,r,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=Lt(e[o],t);if(a instanceof Rp){var l=a.children;s.push(...l)}else s.push(a)}if(q.tryCombineChars(s),!r)return s;var u=t;if(e.length===1){var c=e[0];c.type==="sizing"?u=t.havingSize(c.size):c.type==="styling"&&(u=t.havingStyle(F0e[c.style]))}var h=ka([i[0]||"leftmost"],[],t),f=ka([i[1]||"rightmost"],[],t),d=r==="root";return SE(s,(p,m)=>{var g=m.classes[0],y=p.classes[0];g==="mbin"&&Ge.contains(B0e,y)?m.classes[0]="mord":y==="mbin"&&Ge.contains(_0e,g)&&(p.classes[0]="mord")},{node:h},f,d),SE(s,(p,m)=>{var g=W3(m),y=W3(p),v=g&&y?p.hasClass("mtight")?L0e[g][y]:R0e[g][y]:null;if(v)return q.makeGlue(v,u)},{node:h},f,d),s},SE=function n(e,t,r,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var a=e[o],l=$_(a);if(l){n(l.children,t,r,null,s);continue}var u=!a.hasClass("mspace");if(u){var c=t(a,r.node);c&&(r.insertAfter?r.insertAfter(c):(e.unshift(c),o++))}u?r.node=a:s&&a.hasClass("newline")&&(r.node=ka(["leftmost"])),r.insertAfter=(h=>f=>{e.splice(h+1,0,f),o++})(o)}i&&e.pop()},$_=function(e){return e instanceof Rp||e instanceof Kw||e instanceof Lp&&e.hasClass("enclosing")?e:null},z0e=function n(e,t){var r=$_(e);if(r){var i=r.children;if(i.length){if(t==="right")return n(i[i.length-1],"right");if(t==="left")return n(i[0],"left")}}return e},W3=function(e,t){return e?(t&&(e=z0e(e,t)),$0e[e.classes[0]]||null):null},G0=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return ka(t.concat(r))},Lt=function(e,t,r){if(!e)return ka();if(ky[e.type]){var i=ky[e.type](e,t);if(r&&t.size!==r.size){i=ka(t.sizingClasses(r),[i],t);var s=t.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new ue("Got group of unknown type: '"+e.type+"'")};function Hm(n,e){var t=ka(["base"],n,e),r=ka(["strut"]);return r.style.height=pe(t.height+t.depth),t.depth&&(r.style.verticalAlign=pe(-t.depth)),t.children.unshift(r),t}function q3(n,e){var t=null;n.length===1&&n[0].type==="tag"&&(t=n[0].tag,n=n[0].body);var r=nr(n,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],o=[],a=0;a<r.length;a++)if(o.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,o.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(s.push(Hm(o,e)),o=[])}else r[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Hm(o,e)),o=[]),s.push(r[a]));o.length>0&&s.push(Hm(o,e));var u;t?(u=Hm(nr(t,e,!0)),u.classes=["tag"],s.push(u)):i&&s.push(i);var c=ka(["katex-html"],s);if(c.setAttribute("aria-hidden","true"),u){var h=u.children[0];h.style.height=pe(c.height+c.depth),c.depth&&(h.style.verticalAlign=pe(-c.depth))}return c}function z_(n){return new Rp(n)}class Hi{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Dl(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof fo&&this.children[r+1]instanceof fo){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof fo;)i+=this.children[++r].toText();e.appendChild(new fo(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Ge.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Ge.escape(Dl(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class fo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ge.escape(this.toText())}toText(){return this.text}}class V0e{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",pe(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+pe(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ae={MathNode:Hi,TextNode:fo,SpaceNode:V0e,newDocumentFragment:z_},Ss=function(e,t,r){return en[t][e]&&en[t][e].replace&&e.charCodeAt(0)!==55349&&!(P_.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=en[t][e].replace),new ae.TextNode(e)},Yw=function(e){return e.length===1?e[0]:new ae.MathNode("mrow",e)},Jw=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var r=t.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(Ge.contains(["\\imath","\\jmath"],s))return null;en[i][s]&&en[i][s].replace&&(s=en[i][s].replace);var o=q.fontMap[r].fontName;return Gw(s,o,i)?q.fontMap[r].variant:null};function db(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof fo&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var t=n.children[0];return t instanceof fo&&t.text===","}else return!1}var Ei=function(e,t,r){if(e.length===1){var i=Yt(e[0],t);return r&&i instanceof Hi&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,a=0;a<e.length;a++){var l=Yt(e[a],t);if(l instanceof Hi&&o instanceof Hi){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(db(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&db(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||db(o))){var u=l.children[0];u instanceof Hi&&u.type==="mn"&&(u.children=[...o.children,...u.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var c=o.children[0];if(c instanceof fo&&c.text==="̸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof fo&&h.text.length>0&&(h.text=h.text.slice(0,1)+"̸"+h.text.slice(1),s.pop())}}}s.push(l),o=l}return s},Pl=function(e,t,r){return Yw(Ei(e,t,r))},Yt=function(e,t){if(!e)return new ae.MathNode("mrow");if(Cy[e.type]){var r=Cy[e.type](e,t);return r}else throw new ue("Got group of unknown type: '"+e.type+"'")};function kE(n,e,t,r,i){var s=Ei(n,t),o;s.length===1&&s[0]instanceof Hi&&Ge.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new ae.MathNode("mrow",s);var a=new ae.MathNode("annotation",[new ae.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new ae.MathNode("semantics",[o,a]),u=new ae.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&u.setAttribute("display","block");var c=i?"katex":"katex-mathml";return q.makeSpan([c],[u])}var V_=function(e){return new Xo({style:e.displayMode?tt.DISPLAY:tt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},H_=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=q.makeSpan(r,[e])}return e},H0e=function(e,t,r){var i=V_(r),s;if(r.output==="mathml")return kE(e,t,i,r.displayMode,!0);if(r.output==="html"){var o=q3(e,i);s=q.makeSpan(["katex"],[o])}else{var a=kE(e,t,i,r.displayMode,!1),l=q3(e,i);s=q.makeSpan(["katex"],[a,l])}return H_(s,r)},j0e=function(e,t,r){var i=V_(r),s=q3(e,i),o=q.makeSpan(["katex"],[s]);return H_(o,r)},W0e={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},q0e=function(e){var t=new ae.MathNode("mo",[new ae.TextNode(W0e[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},U0e={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},G0e=function(e){return e.type==="ordgroup"?e.body.length:1},K0e=function(e,t){function r(){var a=4e5,l=e.label.slice(1);if(Ge.contains(["widehat","widecheck","widetilde","utilde"],l)){var u=e,c=G0e(u.base),h,f,d;if(c>5)l==="widehat"||l==="widecheck"?(h=420,a=2364,d=.42,f=l+"4"):(h=312,a=2340,d=.34,f="tilde4");else{var p=[1,1,2,2,3,3][c];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][p],h=[0,239,300,360,420][p],d=[0,.24,.3,.3,.36,.42][p],f=l+p):(a=[0,600,1033,2339,2340][p],h=[0,260,286,306,312][p],d=[0,.26,.286,.3,.306,.34][p],f="tilde"+p)}var m=new Nl(f),g=new Sa([m],{width:"100%",height:pe(d),viewBox:"0 0 "+a+" "+h,preserveAspectRatio:"none"});return{span:q.makeSvgSpan([],[g],t),minWidth:0,height:d}}else{var y=[],v=U0e[l],[x,k,C]=v,w=C/1e3,M=x.length,D,A;if(M===1){var E=v[3];D=["hide-tail"],A=[E]}else if(M===2)D=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(M===3)D=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var N=0;N<M;N++){var I=new Nl(x[N]),L=new Sa([I],{width:"400em",height:pe(w),viewBox:"0 0 "+a+" "+C,preserveAspectRatio:A[N]+" slice"}),F=q.makeSvgSpan([D[N]],[L],t);if(M===1)return{span:F,minWidth:k,height:w};F.style.height=pe(w),y.push(F)}return{span:q.makeSpan(["stretchy"],y,t),minWidth:k,height:w}}}var{span:i,minWidth:s,height:o}=r();return i.height=o,i.style.height=pe(o),s>0&&(i.style.minWidth=pe(s)),i},X0e=function(e,t,r,i,s){var o,a=e.height+e.depth+r+i;if(/fbox|color|angl/.test(t)){if(o=q.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(t)&&u.push(new H3({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&u.push(new H3({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new Sa(u,{width:"100%",height:pe(a)});o=q.makeSvgSpan([],[c],s)}return o.height=a,o.style.height=pe(a),o},Ca={encloseSpan:X0e,mathMLnode:q0e,svgSpan:K0e};function pt(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function Zw(n){var e=Qv(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function Qv(n){return n&&(n.type==="atom"||x0e.hasOwnProperty(n.type))?n:null}var Qw=(n,e)=>{var t,r,i;n&&n.type==="supsub"?(r=pt(n.base,"accent"),t=r.base,n.base=t,i=v0e(Lt(n,e)),n.base=r):(r=pt(n,"accent"),t=r.base);var s=Lt(t,e.havingCrampedStyle()),o=r.isShifty&&Ge.isCharacterBox(t),a=0;if(o){var l=Ge.getBaseElem(t),u=Lt(l,e.havingCrampedStyle());a=gE(u).skew}var c=r.label==="\\c",h=c?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(r.isStretchy)f=Ca.svgSpan(r,e),f=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+pe(2*a)+")",marginLeft:pe(2*a)}:void 0}]},e);else{var d,p;r.label==="\\vec"?(d=q.staticSvg("vec",e),p=q.svgData.vec[1]):(d=q.makeOrd({mode:r.mode,text:r.label},e,"textord"),d=gE(d),d.italic=0,p=d.width,c&&(h+=d.depth)),f=q.makeSpan(["accent-body"],[d]);var m=r.label==="\\textcircled";m&&(f.classes.push("accent-full"),h=s.height);var g=a;m||(g-=p/2),f.style.left=pe(g),r.label==="\\textcircled"&&(f.style.top=".2em"),f=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:f}]},e)}var y=q.makeSpan(["mord","accent"],[f],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},j_=(n,e)=>{var t=n.isStretchy?Ca.mathMLnode(n.label):new ae.MathNode("mo",[Ss(n.label,n.mode)]),r=new ae.MathNode("mover",[Yt(n.base,e),t]);return r.setAttribute("accent","true"),r},Y0e=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));ke({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var t=Ty(e[0]),r=!Y0e.test(n.funcName),i=!r||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:r,isShifty:i,base:t}},htmlBuilder:Qw,mathmlBuilder:j_});ke({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var t=e[0],r=n.parser.mode;return r==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:n.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:Qw,mathmlBuilder:j_});ke({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"accentUnder",mode:t.mode,label:r,base:i}},htmlBuilder:(n,e)=>{var t=Lt(n.base,e),r=Ca.svgSpan(n,e),i=n.label==="\\utilde"?.12:0,s=q.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return q.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(n,e)=>{var t=Ca.mathMLnode(n.label),r=new ae.MathNode("munder",[Yt(n.base,e),t]);return r.setAttribute("accentunder","true"),r}});var jm=n=>{var e=new ae.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ke({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r,funcName:i}=n;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(n,e){var t=e.style,r=e.havingStyle(t.sup()),i=q.wrapFragment(Lt(n.body,r,e),e),s=n.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;n.below&&(r=e.havingStyle(t.sub()),o=q.wrapFragment(Lt(n.below,r,e),e),o.classes.push(s+"-arrow-pad"));var a=Ca.svgSpan(n,e),l=-e.fontMetrics().axisHeight+.5*a.height,u=-e.fontMetrics().axisHeight-.5*a.height-.111;(i.depth>.25||n.label==="\\xleftequilibrium")&&(u-=i.depth);var c;if(o){var h=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;c=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:u},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:h}]},e)}else c=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:u},{type:"elem",elem:a,shift:l}]},e);return c.children[0].children[0].children[1].classes.push("svg-align"),q.makeSpan(["mrel","x-arrow"],[c],e)},mathmlBuilder(n,e){var t=Ca.mathMLnode(n.label);t.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(n.body){var i=jm(Yt(n.body,e));if(n.below){var s=jm(Yt(n.below,e));r=new ae.MathNode("munderover",[t,s,i])}else r=new ae.MathNode("mover",[t,i])}else if(n.below){var o=jm(Yt(n.below,e));r=new ae.MathNode("munder",[t,o])}else r=jm(),r=new ae.MathNode("mover",[t,r]);return r}});var J0e=q.makeSpan;function W_(n,e){var t=nr(n.body,e,!0);return J0e([n.mclass],t,e)}function q_(n,e){var t,r=Ei(n.body,e);return n.mclass==="minner"?t=new ae.MathNode("mpadded",r):n.mclass==="mord"?n.isCharacterBox?(t=r[0],t.type="mi"):t=new ae.MathNode("mi",r):(n.isCharacterBox?(t=r[0],t.type="mo"):t=new ae.MathNode("mo",r),n.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):n.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):n.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}ke({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+r.slice(5),body:_n(i),isCharacterBox:Ge.isCharacterBox(i)}},htmlBuilder:W_,mathmlBuilder:q_});var e2=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};ke({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:t}=n;return{type:"mclass",mode:t.mode,mclass:e2(e[0]),body:_n(e[1]),isCharacterBox:Ge.isCharacterBox(e[1])}}});ke({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:t,funcName:r}=n,i=e[1],s=e[0],o;r!=="\\stackrel"?o=e2(i):o="mrel";var a={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:_n(i)},l={type:"supsub",mode:s.mode,base:a,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:o,body:[l],isCharacterBox:Ge.isCharacterBox(l)}},htmlBuilder:W_,mathmlBuilder:q_});ke({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"pmb",mode:t.mode,mclass:e2(e[0]),body:_n(e[0])}},htmlBuilder(n,e){var t=nr(n.body,e,!0),r=q.makeSpan([n.mclass],t,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(n,e){var t=Ei(n.body,e),r=new ae.MathNode("mstyle",t);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var Z0e={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},CE=()=>({type:"styling",body:[],mode:"math",style:"display"}),TE=n=>n.type==="textord"&&n.text==="@",Q0e=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function epe(n,e,t){var r=Z0e[n];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=t.callFunction("\\Big",[s],[]),a=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[i,o,a]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function tpe(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var t=n.fetch().text;if(t==="&"||t==="\\\\")n.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ue("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var o=e[s],a=CE(),l=0;l<o.length;l++)if(!TE(o[l]))a.body.push(o[l]);else{r.push(a),l+=1;var u=Zw(o[l]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var h=0;h<2;h++){for(var f=!0,d=l+1;d<o.length;d++){if(Q0e(o[d],u)){f=!1,l=d;break}if(TE(o[d]))throw new ue("Missing a "+u+" character to complete a CD arrow.",o[d]);c[h].body.push(o[d])}if(f)throw new ue("Missing a "+u+" character to complete a CD arrow.",o[l])}else throw new ue('Expected one of "<>AV=|." after @',o[l]);var p=epe(u,c,n),m={type:"styling",body:[p],mode:"math",style:"display"};r.push(m),a=CE()}s%2===0?r.push(a):r.shift(),r=[],i.push(r)}n.gullet.endGroup(),n.gullet.endGroup();var g=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}ke({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"cdlabel",mode:t.mode,side:r.slice(4),label:e[0]}},htmlBuilder(n,e){var t=e.havingStyle(e.style.sup()),r=q.wrapFragment(Lt(n.label,t,e),e);return r.classes.push("cd-label-"+n.side),r.style.bottom=pe(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(n,e){var t=new ae.MathNode("mrow",[Yt(n.label,e)]);return t=new ae.MathNode("mpadded",[t]),t.setAttribute("width","0"),n.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new ae.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});ke({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:t}=n;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(n,e){var t=q.wrapFragment(Lt(n.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(n,e){return new ae.MathNode("mrow",[Yt(n.fragment,e)])}});ke({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:t}=n,r=pt(e[0],"ordgroup"),i=r.body,s="",o=0;o<i.length;o++){var a=pt(i[o],"textord");s+=a.text}var l=parseInt(s),u;if(isNaN(l))throw new ue("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new ue("\\@char with invalid code point "+s);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:u}}});var U_=(n,e)=>{var t=nr(n.body,e.withColor(n.color),!1);return q.makeFragment(t)},G_=(n,e)=>{var t=Ei(n.body,e.withColor(n.color)),r=new ae.MathNode("mstyle",t);return r.setAttribute("mathcolor",n.color),r};ke({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:t}=n,r=pt(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:r,body:_n(i)}},htmlBuilder:U_,mathmlBuilder:G_});ke({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:t,breakOnTokenText:r}=n,i=pt(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var s=t.parseExpression(!0,r);return{type:"color",mode:t.mode,color:i,body:s}},htmlBuilder:U_,mathmlBuilder:G_});ke({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,t){var{parser:r}=n,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&pt(i,"size").value}},htmlBuilder(n,e){var t=q.makeSpan(["mspace"],[],e);return n.newLine&&(t.classes.push("newline"),n.size&&(t.style.marginTop=pe(Cn(n.size,e)))),t},mathmlBuilder(n,e){var t=new ae.MathNode("mspace");return n.newLine&&(t.setAttribute("linebreak","newline"),n.size&&t.setAttribute("height",pe(Cn(n.size,e)))),t}});var U3={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},K_=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ue("Expected a control sequence",n);return e},npe=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},X_=(n,e,t,r)=>{var i=n.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!n.gullet.isExpandable(t.text)}),n.gullet.macros.set(e,i,r)};ke({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:t}=n;e.consumeSpaces();var r=e.fetch();if(U3[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=U3[r.text]),pt(e.parseFunction(),"internal");throw new ue("Invalid token after macro prefix",r)}});ke({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new ue("Expected a control sequence",r);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new ue('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new ue('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if(r.text==="EOF")throw new ue("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},t===U3[t]),{type:"internal",mode:e.mode}}});ke({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=K_(e.gullet.popToken());e.gullet.consumeSpaces();var i=npe(e);return X_(e,r,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});ke({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=K_(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return X_(e,r,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var ud=function(e,t,r){var i=en.math[e]&&en.math[e].replace,s=Gw(i||e,t,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},e8=function(e,t,r,i){var s=r.havingBaseStyle(t),o=q.makeSpan(i.concat(s.sizingClasses(r)),[e],r),a=s.sizeMultiplier/r.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},Y_=function(e,t,r){var i=t.havingBaseStyle(r),s=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=pe(s),e.height-=s,e.depth+=s},rpe=function(e,t,r,i,s,o){var a=q.makeSymbol(e,"Main-Regular",s,i),l=e8(a,t,i,o);return r&&Y_(l,i,t),l},ipe=function(e,t,r,i){return q.makeSymbol(e,"Size"+t+"-Regular",r,i)},J_=function(e,t,r,i,s,o){var a=ipe(e,t,s,i),l=e8(q.makeSpan(["delimsizing","size"+t],[a],i),tt.TEXT,i,o);return r&&Y_(l,i,tt.TEXT),l},pb=function(e,t,r){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=q.makeSpan(["delimsizinginner",i],[q.makeSpan([],[q.makeSymbol(e,t,r)])]);return{type:"elem",elem:s}},mb=function(e,t,r){var i=ho["Size4-Regular"][e.charCodeAt(0)]?ho["Size4-Regular"][e.charCodeAt(0)][4]:ho["Size1-Regular"][e.charCodeAt(0)][4],s=new Nl("inner",u0e(e,Math.round(1e3*t))),o=new Sa([s],{width:pe(i),height:pe(t),style:"width:"+pe(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=q.makeSvgSpan([],[o],r);return a.height=t,a.style.height=pe(t),a.style.width=pe(i),{type:"elem",elem:a}},G3=.008,Wm={type:"kern",size:-1*G3},spe=["|","\\lvert","\\rvert","\\vert"],ope=["\\|","\\lVert","\\rVert","\\Vert"],Z_=function(e,t,r,i,s,o){var a,l,u,c,h="",f=0;a=u=c=e,l=null;var d="Size1-Regular";e==="\\uparrow"?u=c="⏐":e==="\\Uparrow"?u=c="‖":e==="\\downarrow"?a=u="⏐":e==="\\Downarrow"?a=u="‖":e==="\\updownarrow"?(a="\\uparrow",u="⏐",c="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",u="‖",c="\\Downarrow"):Ge.contains(spe,e)?(u="∣",h="vert",f=333):Ge.contains(ope,e)?(u="∥",h="doublevert",f=556):e==="["||e==="\\lbrack"?(a="⎡",u="⎢",c="⎣",d="Size4-Regular",h="lbrack",f=667):e==="]"||e==="\\rbrack"?(a="⎤",u="⎥",c="⎦",d="Size4-Regular",h="rbrack",f=667):e==="\\lfloor"||e==="⌊"?(u=a="⎢",c="⎣",d="Size4-Regular",h="lfloor",f=667):e==="\\lceil"||e==="⌈"?(a="⎡",u=c="⎢",d="Size4-Regular",h="lceil",f=667):e==="\\rfloor"||e==="⌋"?(u=a="⎥",c="⎦",d="Size4-Regular",h="rfloor",f=667):e==="\\rceil"||e==="⌉"?(a="⎤",u=c="⎥",d="Size4-Regular",h="rceil",f=667):e==="("||e==="\\lparen"?(a="⎛",u="⎜",c="⎝",d="Size4-Regular",h="lparen",f=875):e===")"||e==="\\rparen"?(a="⎞",u="⎟",c="⎠",d="Size4-Regular",h="rparen",f=875):e==="\\{"||e==="\\lbrace"?(a="⎧",l="⎨",c="⎩",u="⎪",d="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="⎫",l="⎬",c="⎭",u="⎪",d="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(a="⎧",c="⎩",u="⎪",d="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(a="⎫",c="⎭",u="⎪",d="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(a="⎧",c="⎭",u="⎪",d="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(a="⎫",c="⎩",u="⎪",d="Size4-Regular");var p=ud(a,d,s),m=p.height+p.depth,g=ud(u,d,s),y=g.height+g.depth,v=ud(c,d,s),x=v.height+v.depth,k=0,C=1;if(l!==null){var w=ud(l,d,s);k=w.height+w.depth,C=2}var M=m+x+k,D=Math.max(0,Math.ceil((t-M)/(C*y))),A=M+D*C*y,E=i.fontMetrics().axisHeight;r&&(E*=i.sizeMultiplier);var N=A/2-E,I=[];if(h.length>0){var L=A-m-x,F=Math.round(A*1e3),W=c0e(h,Math.round(L*1e3)),G=new Nl(h,W),ee=(f/1e3).toFixed(3)+"em",de=(F/1e3).toFixed(3)+"em",ge=new Sa([G],{width:ee,height:de,viewBox:"0 0 "+f+" "+F}),R=q.makeSvgSpan([],[ge],i);R.height=F/1e3,R.style.width=ee,R.style.height=de,I.push({type:"elem",elem:R})}else{if(I.push(pb(c,d,s)),I.push(Wm),l===null){var fe=A-m-x+2*G3;I.push(mb(u,fe,i))}else{var xe=(A-m-x-k)/2+2*G3;I.push(mb(u,xe,i)),I.push(Wm),I.push(pb(l,d,s)),I.push(Wm),I.push(mb(u,xe,i))}I.push(Wm),I.push(pb(a,d,s))}var P=i.havingBaseStyle(tt.TEXT),$e=q.makeVList({positionType:"bottom",positionData:N,children:I},P);return e8(q.makeSpan(["delimsizing","mult"],[$e],P),tt.TEXT,i,o)},gb=80,yb=.08,vb=function(e,t,r,i,s){var o=l0e(e,i,r),a=new Nl(e,o),l=new Sa([a],{width:"400em",height:pe(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return q.makeSvgSpan(["hide-tail"],[l],s)},ape=function(e,t){var r=t.havingBaseSizing(),i=nB("\\surd",e*r.sizeMultiplier,tB,r),s=r.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),a,l=0,u=0,c=0,h;return i.type==="small"?(c=1e3+1e3*o+gb,e<1?s=1:e<1.4&&(s=.7),l=(1+o+yb)/s,u=(1+o)/s,a=vb("sqrtMain",l,c,o,t),a.style.minWidth="0.853em",h=.833/s):i.type==="large"?(c=(1e3+gb)*r0[i.size],u=(r0[i.size]+o)/s,l=(r0[i.size]+o+yb)/s,a=vb("sqrtSize"+i.size,l,c,o,t),a.style.minWidth="1.02em",h=1/s):(l=e+o+yb,u=e+o,c=Math.floor(1e3*e+o)+gb,a=vb("sqrtTall",l,c,o,t),a.style.minWidth="0.742em",h=1.056),a.height=u,a.style.height=pe(l),{span:a,advanceWidth:h,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},Q_=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],lpe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],eB=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],r0=[0,1.2,1.8,2.4,3],upe=function(e,t,r,i,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),Ge.contains(Q_,e)||Ge.contains(eB,e))return J_(e,t,!1,r,i,s);if(Ge.contains(lpe,e))return Z_(e,r0[t],!1,r,i,s);throw new ue("Illegal delimiter: '"+e+"'")},cpe=[{type:"small",style:tt.SCRIPTSCRIPT},{type:"small",style:tt.SCRIPT},{type:"small",style:tt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],hpe=[{type:"small",style:tt.SCRIPTSCRIPT},{type:"small",style:tt.SCRIPT},{type:"small",style:tt.TEXT},{type:"stack"}],tB=[{type:"small",style:tt.SCRIPTSCRIPT},{type:"small",style:tt.SCRIPT},{type:"small",style:tt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],fpe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},nB=function(e,t,r,i){for(var s=Math.min(2,3-i.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var a=ud(e,fpe(r[o]),"math"),l=a.height+a.depth;if(r[o].type==="small"){var u=i.havingBaseStyle(r[o].style);l*=u.sizeMultiplier}if(l>t)return r[o]}return r[r.length-1]},rB=function(e,t,r,i,s,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var a;Ge.contains(eB,e)?a=cpe:Ge.contains(Q_,e)?a=tB:a=hpe;var l=nB(e,t,a,i);return l.type==="small"?rpe(e,l.style,r,i,s,o):l.type==="large"?J_(e,l.size,r,i,s,o):Z_(e,t,r,i,s,o)},dpe=function(e,t,r,i,s,o){var a=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,u=5/i.fontMetrics().ptPerEm,c=Math.max(t-a,r+a),h=Math.max(c/500*l,2*c-u);return rB(e,h,!0,i,s,o)},ma={sqrtImage:ape,sizedDelim:upe,sizeToMaxHeight:r0,customSizedDelim:rB,leftRightDelim:dpe},EE={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},ppe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function t2(n,e){var t=Qv(n);if(t&&Ge.contains(ppe,t.text))return t;throw t?new ue("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",n):new ue("Invalid delimiter type '"+n.type+"'",n)}ke({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var t=t2(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:EE[n.funcName].size,mclass:EE[n.funcName].mclass,delim:t.text}},htmlBuilder:(n,e)=>n.delim==="."?q.makeSpan([n.mclass]):ma.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(Ss(n.delim,n.mode));var t=new ae.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var r=pe(ma.sizeToMaxHeight[n.size]);return t.setAttribute("minsize",r),t.setAttribute("maxsize",r),t}});function AE(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ke({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=n.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new ue("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:t2(e[0],n).text,color:t}}});ke({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=t2(e[0],n),r=n.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=pt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(n,e)=>{AE(n);for(var t=nr(n.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,o=0;o<t.length;o++)t[o].isMiddle?s=!0:(r=Math.max(t[o].height,r),i=Math.max(t[o].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var a;if(n.left==="."?a=G0(e,["mopen"]):a=ma.leftRightDelim(n.left,r,i,e,n.mode,["mopen"]),t.unshift(a),s)for(var l=1;l<t.length;l++){var u=t[l],c=u.isMiddle;c&&(t[l]=ma.leftRightDelim(c.delim,r,i,c.options,n.mode,[]))}var h;if(n.right===".")h=G0(e,["mclose"]);else{var f=n.rightColor?e.withColor(n.rightColor):e;h=ma.leftRightDelim(n.right,r,i,f,n.mode,["mclose"])}return t.push(h),q.makeSpan(["minner"],t,e)},mathmlBuilder:(n,e)=>{AE(n);var t=Ei(n.body,e);if(n.left!=="."){var r=new ae.MathNode("mo",[Ss(n.left,n.mode)]);r.setAttribute("fence","true"),t.unshift(r)}if(n.right!=="."){var i=new ae.MathNode("mo",[Ss(n.right,n.mode)]);i.setAttribute("fence","true"),n.rightColor&&i.setAttribute("mathcolor",n.rightColor),t.push(i)}return Yw(t)}});ke({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=t2(e[0],n);if(!n.parser.leftrightDepth)throw new ue("\\middle without preceding \\left",t);return{type:"middle",mode:n.parser.mode,delim:t.text}},htmlBuilder:(n,e)=>{var t;if(n.delim===".")t=G0(e,[]);else{t=ma.sizedDelim(n.delim,1,e,n.mode,[]);var r={delim:n.delim,options:e};t.isMiddle=r}return t},mathmlBuilder:(n,e)=>{var t=n.delim==="\\vert"||n.delim==="|"?Ss("|","text"):Ss(n.delim,n.mode),r=new ae.MathNode("mo",[t]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var t8=(n,e)=>{var t=q.wrapFragment(Lt(n.body,e),e),r=n.label.slice(1),i=e.sizeMultiplier,s,o=0,a=Ge.isCharacterBox(n.body);if(r==="sout")s=q.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var l=Cn({number:.6,unit:"pt"},e),u=Cn({number:.35,unit:"ex"},e),c=e.havingBaseSizing();i=i/c.sizeMultiplier;var h=t.height+t.depth+l+u;t.style.paddingLeft=pe(h/2+l);var f=Math.floor(1e3*h*i),d=o0e(f),p=new Sa([new Nl("phase",d)],{width:"400em",height:pe(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=q.makeSvgSpan(["hide-tail"],[p],e),s.style.height=pe(h),o=t.depth+l+u}else{/cancel/.test(r)?a||t.classes.push("cancel-pad"):r==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var m=0,g=0,y=0;/box/.test(r)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(r==="colorbox"?0:y),g=m):r==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*y,g=Math.max(0,.25-t.depth)):(m=a?.2:0,g=m),s=Ca.encloseSpan(t,r,m,g,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=pe(y)):r==="angl"&&y!==.049&&(s.style.borderTopWidth=pe(y),s.style.borderRightWidth=pe(y)),o=t.depth+g,n.backgroundColor&&(s.style.backgroundColor=n.backgroundColor,n.borderColor&&(s.style.borderColor=n.borderColor))}var v;if(n.backgroundColor)v=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:t,shift:0}]},e);else{var x=/cancel|phase/.test(r)?["svg-align"]:[];v=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:x}]},e)}return/cancel/.test(r)&&(v.height=t.height,v.depth=t.depth),/cancel/.test(r)&&!a?q.makeSpan(["mord","cancel-lap"],[v],e):q.makeSpan(["mord"],[v],e)},n8=(n,e)=>{var t=0,r=new ae.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Yt(n.body,e)]);switch(n.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*t+"pt"),r.setAttribute("height","+"+2*t+"pt"),r.setAttribute("lspace",t+"pt"),r.setAttribute("voffset",t+"pt"),n.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(n.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&r.setAttribute("mathbackground",n.backgroundColor),r};ke({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=pt(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:t8,mathmlBuilder:n8});ke({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=pt(e[0],"color-token").color,o=pt(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:t8,mathmlBuilder:n8});ke({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});ke({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"enclose",mode:t.mode,label:r,body:i}},htmlBuilder:t8,mathmlBuilder:n8});ke({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var iB={};function Do(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<t.length;++l)iB[t[l]]=a;s&&(ky[e]=s),o&&(Cy[e]=o)}var sB={};function O(n,e){sB[n]=e}function ME(n){var e=[];n.consumeSpaces();var t=n.fetch().text;for(t==="\\relax"&&(n.consume(),n.consumeSpaces(),t=n.fetch().text);t==="\\hline"||t==="\\hdashline";)n.consume(),e.push(t==="\\hdashline"),n.consumeSpaces(),t=n.fetch().text;return e}var n2=n=>{var e=n.parser.settings;if(!e.displayMode)throw new ue("{"+n.envName+"} can be used only in display mode.")};function r8(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function jl(n,e,t){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:u,emptySingleRow:c,maxNumCols:h,leqno:f}=e;if(n.gullet.beginGroup(),u||n.gullet.macros.set("\\cr","\\\\\\relax"),!o){var d=n.gullet.expandMacroAsText("\\arraystretch");if(d==null)o=1;else if(o=parseFloat(d),!o||o<0)throw new ue("Invalid \\arraystretch: "+d)}n.gullet.beginGroup();var p=[],m=[p],g=[],y=[],v=l!=null?[]:void 0;function x(){l&&n.gullet.macros.set("\\@eqnsw","1",!0)}function k(){v&&(n.gullet.macros.get("\\df@tag")?(v.push(n.subparse([new ms("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):v.push(!!l&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(x(),y.push(ME(n));;){var C=n.parseExpression(!1,u?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),C={type:"ordgroup",mode:n.mode,body:C},t&&(C={type:"styling",mode:n.mode,style:t,body:[C]}),p.push(C);var w=n.fetch().text;if(w==="&"){if(h&&p.length===h){if(u||a)throw new ue("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(w==="\\end"){k(),p.length===1&&C.type==="styling"&&C.body[0].body.length===0&&(m.length>1||!c)&&m.pop(),y.length<m.length+1&&y.push([]);break}else if(w==="\\\\"){n.consume();var M=void 0;n.gullet.future().text!==" "&&(M=n.parseSizeGroup(!0)),g.push(M?M.value:null),k(),y.push(ME(n)),p=[],m.push(p),x()}else throw new ue("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:r,hLinesBeforeRow:y,colSeparationType:a,tags:v,leqno:f}}function i8(n){return n.slice(0,1)==="d"?"display":"text"}var No=function(e,t){var r,i,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),u=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,f=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var d=t.havingStyle(tt.SCRIPT).sizeMultiplier;f=.2778*(d/t.sizeMultiplier)}var p=e.colSeparationType==="CD"?Cn({number:3,unit:"ex"},t):12*h,m=3*h,g=e.arraystretch*p,y=.7*g,v=.3*g,x=0;function k(Kn){for(var Xn=0;Xn<Kn.length;++Xn)Xn>0&&(x+=.25),u.push({pos:x,isDashed:Kn[Xn]})}for(k(o[0]),r=0;r<e.body.length;++r){var C=e.body[r],w=y,M=v;a<C.length&&(a=C.length);var D=new Array(C.length);for(i=0;i<C.length;++i){var A=Lt(C[i],t);M<A.depth&&(M=A.depth),w<A.height&&(w=A.height),D[i]=A}var E=e.rowGaps[r],N=0;E&&(N=Cn(E,t),N>0&&(N+=v,M<N&&(M=N),N=0)),e.addJot&&(M+=m),D.height=w,D.depth=M,x+=w,D.pos=x,x+=M+N,l[r]=D,k(o[r+1])}var I=x/2+t.fontMetrics().axisHeight,L=e.cols||[],F=[],W,G,ee=[];if(e.tags&&e.tags.some(Kn=>Kn))for(r=0;r<s;++r){var de=l[r],ge=de.pos-I,R=e.tags[r],fe=void 0;R===!0?fe=q.makeSpan(["eqn-num"],[],t):R===!1?fe=q.makeSpan([],[],t):fe=q.makeSpan([],nr(R,t,!0),t),fe.depth=de.depth,fe.height=de.height,ee.push({type:"elem",elem:fe,shift:ge})}for(i=0,G=0;i<a||G<L.length;++i,++G){for(var xe=L[G]||{},P=!0;xe.type==="separator";){if(P||(W=q.makeSpan(["arraycolsep"],[]),W.style.width=pe(t.fontMetrics().doubleRuleSep),F.push(W)),xe.separator==="|"||xe.separator===":"){var $e=xe.separator==="|"?"solid":"dashed",Z=q.makeSpan(["vertical-separator"],[],t);Z.style.height=pe(x),Z.style.borderRightWidth=pe(c),Z.style.borderRightStyle=$e,Z.style.margin="0 "+pe(-c/2);var we=x-I;we&&(Z.style.verticalAlign=pe(-we)),F.push(Z)}else throw new ue("Invalid separator type: "+xe.separator);G++,xe=L[G]||{},P=!1}if(!(i>=a)){var Se=void 0;(i>0||e.hskipBeforeAndAfter)&&(Se=Ge.deflt(xe.pregap,f),Se!==0&&(W=q.makeSpan(["arraycolsep"],[]),W.style.width=pe(Se),F.push(W)));var Ie=[];for(r=0;r<s;++r){var Je=l[r],Ct=Je[i];if(Ct){var tn=Je.pos-I;Ct.depth=Je.depth,Ct.height=Je.height,Ie.push({type:"elem",elem:Ct,shift:tn})}}Ie=q.makeVList({positionType:"individualShift",children:Ie},t),Ie=q.makeSpan(["col-align-"+(xe.align||"c")],[Ie]),F.push(Ie),(i<a-1||e.hskipBeforeAndAfter)&&(Se=Ge.deflt(xe.postgap,f),Se!==0&&(W=q.makeSpan(["arraycolsep"],[]),W.style.width=pe(Se),F.push(W)))}}if(l=q.makeSpan(["mtable"],F),u.length>0){for(var at=q.makeLineSpan("hline",t,c),It=q.makeLineSpan("hdashline",t,c),vt=[{type:"elem",elem:l,shift:0}];u.length>0;){var ln=u.pop(),vn=ln.pos-I;ln.isDashed?vt.push({type:"elem",elem:It,shift:vn}):vt.push({type:"elem",elem:at,shift:vn})}l=q.makeVList({positionType:"individualShift",children:vt},t)}if(ee.length===0)return q.makeSpan(["mord"],[l],t);var Ht=q.makeVList({positionType:"individualShift",children:ee},t);return Ht=q.makeSpan(["tag"],[Ht],t),q.makeFragment([l,Ht])},mpe={c:"center ",l:"left ",r:"right "},Po=function(e,t){for(var r=[],i=new ae.MathNode("mtd",[],["mtr-glue"]),s=new ae.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],u=0;u<a.length;u++)l.push(new ae.MathNode("mtd",[Yt(a[u],t)]));e.tags&&e.tags[o]&&(l.unshift(i),l.push(i),e.leqno?l.unshift(s):l.push(s)),r.push(new ae.MathNode("mtr",l))}var c=new ae.MathNode("mtable",r),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",pe(h));var f="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,m="",g=!1,y=0,v=p.length;p[0].type==="separator"&&(f+="top ",y=1),p[p.length-1].type==="separator"&&(f+="bottom ",v-=1);for(var x=y;x<v;x++)p[x].type==="align"?(d+=mpe[p[x].align],g&&(m+="none "),g=!0):p[x].type==="separator"&&g&&(m+=p[x].separator==="|"?"solid ":"dashed ",g=!1);c.setAttribute("columnalign",d.trim()),/[sd]/.test(m)&&c.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var k=e.cols||[],C="",w=1;w<k.length;w++)C+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",C.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?c.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?c.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var M="",D=e.hLinesBeforeRow;f+=D[0].length>0?"left ":"",f+=D[D.length-1].length>0?"right ":"";for(var A=1;A<D.length-1;A++)M+=D[A].length===0?"none ":D[A][0]?"dashed ":"solid ";return/[sd]/.test(M)&&c.setAttribute("rowlines",M.trim()),f!==""&&(c=new ae.MathNode("menclose",[c]),c.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(c=new ae.MathNode("mstyle",[c]),c.setAttribute("scriptlevel","1")),c},oB=function(e,t){e.envName.indexOf("ed")===-1&&n2(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=jl(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:r8(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,u={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var c="",h=0;h<t[0].body.length;h++){var f=pt(t[0].body[h],"textord");c+=f.text}a=Number(c),l=a*2}var d=!l;o.body.forEach(function(y){for(var v=1;v<y.length;v+=2){var x=pt(y[v],"styling"),k=pt(x.body[0],"ordgroup");k.body.unshift(u)}if(d)l<y.length&&(l=y.length);else{var C=y.length/2;if(a<C)throw new ue("Too many math in a row: "+("expected "+a+", but got "+C),y[0])}});for(var p=0;p<l;++p){var m="r",g=0;p%2===1?m="l":p>0&&d&&(g=1),r[p]={type:"align",align:m,pregap:g,postgap:0}}return o.colSeparationType=d?"align":"alignat",o};Do({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var t=Qv(e[0]),r=t?[e[0]]:pt(e[0],"ordgroup").body,i=r.map(function(o){var a=Zw(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new ue("Unknown column alignment: "+l,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return jl(n.parser,s,i8(n.envName))},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],t="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(n.envName.charAt(n.envName.length-1)==="*"){var i=n.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new ue("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:t}]}}var s=jl(n.parser,r,i8(n.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:n.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},t=jl(n.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var t=Qv(e[0]),r=t?[e[0]]:pt(e[0],"ordgroup").body,i=r.map(function(o){var a=Zw(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new ue("Unknown column alignment: "+l,o)});if(i.length>1)throw new ue("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=jl(n.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new ue("{subarray} can contain only one column");return s},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=jl(n.parser,e,i8(n.envName));return{type:"leftright",mode:n.mode,body:[t],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:oB,htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){Ge.contains(["gather","gather*"],n.envName)&&n2(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:r8(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return jl(n.parser,e,"display")},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:oB,htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){n2(n);var e={autoTag:r8(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return jl(n.parser,e,"display")},htmlBuilder:No,mathmlBuilder:Po});Do({type:"array",names:["CD"],props:{numArgs:0},handler(n){return n2(n),tpe(n.parser)},htmlBuilder:No,mathmlBuilder:Po});O("\\nonumber","\\gdef\\@eqnsw{0}");O("\\notag","\\nonumber");ke({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new ue(n.funcName+" valid only within array environment")}});var OE=iB;ke({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];if(i.type!=="ordgroup")throw new ue("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=pt(i.body[o],"textord").text;if(r==="\\begin"){if(!OE.hasOwnProperty(s))throw new ue("No such environment: "+s,i);var a=OE[s],{args:l,optArgs:u}=t.parseArguments("\\begin{"+s+"}",a),c={mode:t.mode,envName:s,parser:t},h=a.handler(c,l,u);t.expect("\\end",!1);var f=t.nextToken,d=pt(t.parseFunction(),"environment");if(d.name!==s)throw new ue("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",f);return h}return{type:"environment",mode:t.mode,name:s,nameGroup:i}}});var aB=(n,e)=>{var t=n.font,r=e.withFont(t);return Lt(n.body,r)},lB=(n,e)=>{var t=n.font,r=e.withFont(t);return Yt(n.body,r)},IE={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ke({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=Ty(e[0]),s=r;return s in IE&&(s=IE[s]),{type:"font",mode:t.mode,font:s.slice(1),body:i}},htmlBuilder:aB,mathmlBuilder:lB});ke({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:t}=n,r=e[0],i=Ge.isCharacterBox(r);return{type:"mclass",mode:t.mode,mclass:e2(r),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});ke({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,breakOnTokenText:i}=n,{mode:s}=t,o=t.parseExpression(!0,i),a="math"+r.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:aB,mathmlBuilder:lB});var uB=(n,e)=>{var t=e;return n==="display"?t=t.id>=tt.SCRIPT.id?t.text():tt.DISPLAY:n==="text"&&t.size===tt.DISPLAY.size?t=tt.TEXT:n==="script"?t=tt.SCRIPT:n==="scriptscript"&&(t=tt.SCRIPTSCRIPT),t},s8=(n,e)=>{var t=uB(n.size,e.style),r=t.fracNum(),i=t.fracDen(),s;s=e.havingStyle(r);var o=Lt(n.numer,s,e);if(n.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(i);var u=Lt(n.denom,s,e),c,h,f;n.hasBarLine?(n.barSize?(h=Cn(n.barSize,e),c=q.makeLineSpan("frac-line",e,h)):c=q.makeLineSpan("frac-line",e),h=c.height,f=c.height):(c=null,h=0,f=e.fontMetrics().defaultRuleThickness);var d,p,m;t.size===tt.DISPLAY.size||n.size==="display"?(d=e.fontMetrics().num1,h>0?p=3*f:p=7*f,m=e.fontMetrics().denom1):(h>0?(d=e.fontMetrics().num2,p=f):(d=e.fontMetrics().num3,p=3*f),m=e.fontMetrics().denom2);var g;if(c){var v=e.fontMetrics().axisHeight;d-o.depth-(v+.5*h)<p&&(d+=p-(d-o.depth-(v+.5*h))),v-.5*h-(u.height-m)<p&&(m+=p-(v-.5*h-(u.height-m)));var x=-(v-.5*h);g=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:c,shift:x},{type:"elem",elem:o,shift:-d}]},e)}else{var y=d-o.depth-(u.height-m);y<p&&(d+=.5*(p-y),m+=.5*(p-y)),g=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:o,shift:-d}]},e)}s=e.havingStyle(t),g.height*=s.sizeMultiplier/e.sizeMultiplier,g.depth*=s.sizeMultiplier/e.sizeMultiplier;var k;t.size===tt.DISPLAY.size?k=e.fontMetrics().delim1:t.size===tt.SCRIPTSCRIPT.size?k=e.havingStyle(tt.SCRIPT).fontMetrics().delim2:k=e.fontMetrics().delim2;var C,w;return n.leftDelim==null?C=G0(e,["mopen"]):C=ma.customSizedDelim(n.leftDelim,k,!0,e.havingStyle(t),n.mode,["mopen"]),n.continued?w=q.makeSpan([]):n.rightDelim==null?w=G0(e,["mclose"]):w=ma.customSizedDelim(n.rightDelim,k,!0,e.havingStyle(t),n.mode,["mclose"]),q.makeSpan(["mord"].concat(s.sizingClasses(e)),[C,q.makeSpan(["mfrac"],[g]),w],e)},o8=(n,e)=>{var t=new ae.MathNode("mfrac",[Yt(n.numer,e),Yt(n.denom,e)]);if(!n.hasBarLine)t.setAttribute("linethickness","0px");else if(n.barSize){var r=Cn(n.barSize,e);t.setAttribute("linethickness",pe(r))}var i=uB(n.size,e.style);if(i.size!==e.style.size){t=new ae.MathNode("mstyle",[t]);var s=i.size===tt.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var o=[];if(n.leftDelim!=null){var a=new ae.MathNode("mo",[new ae.TextNode(n.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(t),n.rightDelim!=null){var l=new ae.MathNode("mo",[new ae.TextNode(n.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Yw(o)}return t};ke({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1],o,a=null,l=null,u="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:u,barSize:null}},htmlBuilder:s8,mathmlBuilder:o8});ke({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});ke({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:t,token:r}=n,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var DE=["display","text","script","scriptscript"],NE=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};ke({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:t}=n,r=e[4],i=e[5],s=Ty(e[0]),o=s.type==="atom"&&s.family==="open"?NE(s.text):null,a=Ty(e[1]),l=a.type==="atom"&&a.family==="close"?NE(a.text):null,u=pt(e[2],"size"),c,h=null;u.isBlank?c=!0:(h=u.value,c=h.number>0);var f="auto",d=e[3];if(d.type==="ordgroup"){if(d.body.length>0){var p=pt(d.body[0],"textord");f=DE[Number(p.text)]}}else d=pt(d,"textord"),f=DE[Number(d.text)];return{type:"genfrac",mode:t.mode,numer:r,denom:i,continued:!1,hasBarLine:c,barSize:h,leftDelim:o,rightDelim:l,size:f}},htmlBuilder:s8,mathmlBuilder:o8});ke({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:t,funcName:r,token:i}=n;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:pt(e[0],"size").value,token:i}}});ke({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=qde(pt(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:s8,mathmlBuilder:o8});var cB=(n,e)=>{var t=e.style,r,i;n.type==="supsub"?(r=n.sup?Lt(n.sup,e.havingStyle(t.sup()),e):Lt(n.sub,e.havingStyle(t.sub()),e),i=pt(n.base,"horizBrace")):i=pt(n,"horizBrace");var s=Lt(i.base,e.havingBaseStyle(tt.DISPLAY)),o=Ca.svgSpan(i,e),a;if(i.isOver?(a=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=q.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=q.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e);i.isOver?a=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):a=q.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return q.makeSpan(["mord",i.isOver?"mover":"munder"],[a],e)},gpe=(n,e)=>{var t=Ca.mathMLnode(n.label);return new ae.MathNode(n.isOver?"mover":"munder",[Yt(n.base,e),t])};ke({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"horizBrace",mode:t.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:cB,mathmlBuilder:gpe});ke({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[1],i=pt(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:_n(r)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var t=nr(n.body,e,!1);return q.makeAnchor(n.href,[],t,e)},mathmlBuilder:(n,e)=>{var t=Pl(n.body,e);return t instanceof Hi||(t=new Hi("mrow",[t])),t.setAttribute("href",n.href),t}});ke({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=pt(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:r}))return t.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:r,body:_n(a)}}});ke({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:t}=n;return{type:"hbox",mode:t.mode,body:_n(e[0])}},htmlBuilder(n,e){var t=nr(n.body,e,!1);return q.makeFragment(t)},mathmlBuilder(n,e){return new ae.MathNode("mrow",Ei(n.body,e))}});ke({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,token:i}=n,s=pt(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var u=s.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(h.length!==2)throw new ue("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(a)?{type:"html",mode:t.mode,attributes:l,body:_n(o)}:t.formatUnsupportedCmd(r)},htmlBuilder:(n,e)=>{var t=nr(n.body,e,!1),r=["enclosing"];n.attributes.class&&r.push(...n.attributes.class.trim().split(/\s+/));var i=q.makeSpan(r,t,e);for(var s in n.attributes)s!=="class"&&n.attributes.hasOwnProperty(s)&&i.setAttribute(s,n.attributes[s]);return i},mathmlBuilder:(n,e)=>Pl(n.body,e)});ke({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"htmlmathml",mode:t.mode,html:_n(e[0]),mathml:_n(e[1])}},htmlBuilder:(n,e)=>{var t=nr(n.html,e,!1);return q.makeFragment(t)},mathmlBuilder:(n,e)=>Pl(n.mathml,e)});var bb=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new ue("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!O_(r))throw new ue("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};ke({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,t)=>{var{parser:r}=n,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(t[0])for(var l=pt(t[0],"raw").string,u=l.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(h.length===2){var f=h[1].trim();switch(h[0].trim()){case"alt":a=f;break;case"width":i=bb(f);break;case"height":s=bb(f);break;case"totalheight":o=bb(f);break;default:throw new ue("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var d=pt(e[0],"url").url;return a===""&&(a=d,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:r.mode,alt:a,width:i,height:s,totalheight:o,src:d}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var t=Cn(n.height,e),r=0;n.totalheight.number>0&&(r=Cn(n.totalheight,e)-t);var i=0;n.width.number>0&&(i=Cn(n.width,e));var s={height:pe(t+r)};i>0&&(s.width=pe(i)),r>0&&(s.verticalAlign=pe(-r));var o=new g0e(n.src,n.alt,s);return o.height=t,o.depth=r,o},mathmlBuilder:(n,e)=>{var t=new ae.MathNode("mglyph",[]);t.setAttribute("alt",n.alt);var r=Cn(n.height,e),i=0;if(n.totalheight.number>0&&(i=Cn(n.totalheight,e)-r,t.setAttribute("valign",pe(-i))),t.setAttribute("height",pe(r+i)),n.width.number>0){var s=Cn(n.width,e);t.setAttribute("width",pe(s))}return t.setAttribute("src",n.src),t}});ke({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=pt(e[0],"size");if(t.settings.strict){var s=r[1]==="m",o=i.value.unit==="mu";s?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(n,e){return q.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var t=Cn(n.dimension,e);return new ae.SpaceNode(t)}});ke({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"lap",mode:t.mode,alignment:r.slice(5),body:i}},htmlBuilder:(n,e)=>{var t;n.alignment==="clap"?(t=q.makeSpan([],[Lt(n.body,e)]),t=q.makeSpan(["inner"],[t],e)):t=q.makeSpan(["inner"],[Lt(n.body,e)]);var r=q.makeSpan(["fix"],[]),i=q.makeSpan([n.alignment],[t,r],e),s=q.makeSpan(["strut"]);return s.style.height=pe(i.height+i.depth),i.depth&&(s.style.verticalAlign=pe(-i.depth)),i.children.unshift(s),i=q.makeSpan(["thinbox"],[i],e),q.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(n,e)=>{var t=new ae.MathNode("mpadded",[Yt(n.body,e)]);if(n.alignment!=="rlap"){var r=n.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",r+"width")}return t.setAttribute("width","0px"),t}});ke({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:t,parser:r}=n,i=r.mode;r.switchMode("math");var s=t==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}});ke({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new ue("Mismatched "+n.funcName)}});var PE=(n,e)=>{switch(e.style.size){case tt.DISPLAY.size:return n.display;case tt.TEXT.size:return n.text;case tt.SCRIPT.size:return n.script;case tt.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};ke({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"mathchoice",mode:t.mode,display:_n(e[0]),text:_n(e[1]),script:_n(e[2]),scriptscript:_n(e[3])}},htmlBuilder:(n,e)=>{var t=PE(n,e),r=nr(t,e,!1);return q.makeFragment(r)},mathmlBuilder:(n,e)=>{var t=PE(n,e);return Pl(t,e)}});var hB=(n,e,t,r,i,s,o)=>{n=q.makeSpan([],[n]);var a=t&&Ge.isCharacterBox(t),l,u;if(e){var c=Lt(e,r.havingStyle(i.sup()),r);u={elem:c,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-c.depth)}}if(t){var h=Lt(t,r.havingStyle(i.sub()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-h.height)}}var f;if(u&&l){var d=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+n.depth+o;f=q.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:pe(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:pe(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var p=n.height-o;f=q.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:pe(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n}]},r)}else if(u){var m=n.depth+o;f=q.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:n},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:pe(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return n;var g=[f];if(l&&s!==0&&!a){var y=q.makeSpan(["mspace"],[],r);y.style.marginRight=pe(s),g.unshift(y)}return q.makeSpan(["mop","op-limits"],g,r)},fB=["\\smallint"],tf=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=pt(n.base,"op"),i=!0):s=pt(n,"op");var o=e.style,a=!1;o.size===tt.DISPLAY.size&&s.symbol&&!Ge.contains(fB,s.name)&&(a=!0);var l;if(s.symbol){var u=a?"Size2-Regular":"Size1-Regular",c="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(c=s.name.slice(1),s.name=c==="oiint"?"\\iint":"\\iiint"),l=q.makeSymbol(s.name,u,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),c.length>0){var h=l.italic,f=q.staticSvg(c+"Size"+(a?"2":"1"),e);l=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:f,shift:a?.08:0}]},e),s.name="\\"+c,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var d=nr(s.body,e,!0);d.length===1&&d[0]instanceof ws?(l=d[0],l.classes[0]="mop"):l=q.makeSpan(["mop"],d,e)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(q.mathsym(s.name[m],s.mode,e));l=q.makeSpan(["mop"],p,e)}var g=0,y=0;return(l instanceof ws||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(l.height-l.depth)/2-e.fontMetrics().axisHeight,y=l.italic),i?hB(l,t,r,e,o,y,g):(g&&(l.style.position="relative",l.style.top=pe(g)),l)},_p=(n,e)=>{var t;if(n.symbol)t=new Hi("mo",[Ss(n.name,n.mode)]),Ge.contains(fB,n.name)&&t.setAttribute("largeop","false");else if(n.body)t=new Hi("mo",Ei(n.body,e));else{t=new Hi("mi",[new fo(n.name.slice(1))]);var r=new Hi("mo",[Ss("⁡","text")]);n.parentIsSupSub?t=new Hi("mrow",[t,r]):t=z_([t,r])}return t},ype={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};ke({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=r;return i.length===1&&(i=ype[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:tf,mathmlBuilder:_p});ke({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:_n(r)}},htmlBuilder:tf,mathmlBuilder:_p});var vpe={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};ke({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:tf,mathmlBuilder:_p});ke({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:tf,mathmlBuilder:_p});ke({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n,r=t;return r.length===1&&(r=vpe[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:tf,mathmlBuilder:_p});var dB=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=pt(n.base,"operatorname"),i=!0):s=pt(n,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(h=>{var f=h.text;return typeof f=="string"?{type:"textord",mode:h.mode,text:f}:h}),l=nr(a,e.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof ws&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=q.makeSpan(["mop"],l,e)}else o=q.makeSpan(["mop"],[],e);return i?hB(o,t,r,e,e.style,0,0):o},bpe=(n,e)=>{for(var t=Ei(n.body,e.withFont("mathrm")),r=!0,i=0;i<t.length;i++){var s=t[i];if(!(s instanceof ae.SpaceNode))if(s instanceof ae.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof ae.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=t.map(c=>c.toText()).join("");t=[new ae.TextNode(a)]}var l=new ae.MathNode("mi",t);l.setAttribute("mathvariant","normal");var u=new ae.MathNode("mo",[Ss("⁡","text")]);return n.parentIsSupSub?new ae.MathNode("mrow",[l,u]):ae.newDocumentFragment([l,u])};ke({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"operatorname",mode:t.mode,body:_n(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:dB,mathmlBuilder:bpe});O("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");lc({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?q.makeFragment(nr(n.body,e,!1)):q.makeSpan(["mord"],nr(n.body,e,!0),e)},mathmlBuilder(n,e){return Pl(n.body,e,!0)}});ke({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:t}=n,r=e[0];return{type:"overline",mode:t.mode,body:r}},htmlBuilder(n,e){var t=Lt(n.body,e.havingCrampedStyle()),r=q.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return q.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(n,e){var t=new ae.MathNode("mo",[new ae.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new ae.MathNode("mover",[Yt(n.body,e),t]);return r.setAttribute("accent","true"),r}});ke({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"phantom",mode:t.mode,body:_n(r)}},htmlBuilder:(n,e)=>{var t=nr(n.body,e.withPhantom(),!1);return q.makeFragment(t)},mathmlBuilder:(n,e)=>{var t=Ei(n.body,e);return new ae.MathNode("mphantom",t)}});ke({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"hphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=q.makeSpan([],[Lt(n.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var r=0;r<t.children.length;r++)t.children[r].height=0,t.children[r].depth=0;return t=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),q.makeSpan(["mord"],[t],e)},mathmlBuilder:(n,e)=>{var t=Ei(_n(n.body),e),r=new ae.MathNode("mphantom",t),i=new ae.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});ke({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"vphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=q.makeSpan(["inner"],[Lt(n.body,e.withPhantom())]),r=q.makeSpan(["fix"],[]);return q.makeSpan(["mord","rlap"],[t,r],e)},mathmlBuilder:(n,e)=>{var t=Ei(_n(n.body),e),r=new ae.MathNode("mphantom",t),i=new ae.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});ke({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n,r=pt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:r,body:i}},htmlBuilder(n,e){var t=Lt(n.body,e),r=Cn(n.dy,e);return q.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){var t=new ae.MathNode("mpadded",[Yt(n.body,e)]),r=n.dy.number+n.dy.unit;return t.setAttribute("voffset",r),t}});ke({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}});ke({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,t){var{parser:r}=n,i=t[0],s=pt(e[0],"size"),o=pt(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&pt(i,"size").value,width:s.value,height:o.value}},htmlBuilder(n,e){var t=q.makeSpan(["mord","rule"],[],e),r=Cn(n.width,e),i=Cn(n.height,e),s=n.shift?Cn(n.shift,e):0;return t.style.borderRightWidth=pe(r),t.style.borderTopWidth=pe(i),t.style.bottom=pe(s),t.width=r,t.height=i+s,t.depth=-s,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(n,e){var t=Cn(n.width,e),r=Cn(n.height,e),i=n.shift?Cn(n.shift,e):0,s=e.color&&e.getColor()||"black",o=new ae.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",pe(t)),o.setAttribute("height",pe(r));var a=new ae.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height",pe(i)):(a.setAttribute("height",pe(i)),a.setAttribute("depth",pe(-i))),a.setAttribute("voffset",pe(i)),a}});function pB(n,e,t){for(var r=nr(n,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(t)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+t.size),r[s].height*=i,r[s].depth*=i}return q.makeFragment(r)}var RE=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],xpe=(n,e)=>{var t=e.havingSize(n.size);return pB(n.body,t,e)};ke({type:"sizing",names:RE,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:RE.indexOf(r)+1,body:s}},htmlBuilder:xpe,mathmlBuilder:(n,e)=>{var t=e.havingSize(n.size),r=Ei(n.body,t),i=new ae.MathNode("mstyle",r);return i.setAttribute("mathsize",pe(t.sizeMultiplier)),i}});ke({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,t)=>{var{parser:r}=n,i=!1,s=!1,o=t[0]&&pt(t[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var u=o.body[l];if(a=u.text,a==="t")i=!0;else if(a==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var c=e[0];return{type:"smash",mode:r.mode,body:c,smashHeight:i,smashDepth:s}},htmlBuilder:(n,e)=>{var t=q.makeSpan([],[Lt(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return t;if(n.smashHeight&&(t.height=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].height=0;if(n.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var s=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return q.makeSpan(["mord"],[s],e)},mathmlBuilder:(n,e)=>{var t=new ae.MathNode("mpadded",[Yt(n.body,e)]);return n.smashHeight&&t.setAttribute("height","0px"),n.smashDepth&&t.setAttribute("depth","0px"),t}});ke({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r}=n,i=t[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(n,e){var t=Lt(n.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=q.wrapFragment(t,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<tt.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,a=t.height+t.depth+o+i,{span:l,ruleWidth:u,advanceWidth:c}=ma.sqrtImage(a,e),h=l.height-u;h>t.height+t.depth+o&&(o=(o+h-t.height-t.depth)/2);var f=l.height-t.height-o-u;t.style.paddingLeft=pe(c);var d=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+f)},{type:"elem",elem:l},{type:"kern",size:u}]},e);if(n.index){var p=e.havingStyle(tt.SCRIPTSCRIPT),m=Lt(n.index,p,e),g=.6*(d.height-d.depth),y=q.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},e),v=q.makeSpan(["root"],[y]);return q.makeSpan(["mord","sqrt"],[v,d],e)}else return q.makeSpan(["mord","sqrt"],[d],e)},mathmlBuilder(n,e){var{body:t,index:r}=n;return r?new ae.MathNode("mroot",[Yt(t,e),Yt(r,e)]):new ae.MathNode("msqrt",[Yt(t,e)])}});var LE={display:tt.DISPLAY,text:tt.TEXT,script:tt.SCRIPT,scriptscript:tt.SCRIPTSCRIPT};ke({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!0,t),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(n,e){var t=LE[n.style],r=e.havingStyle(t).withFont("");return pB(n.body,r,e)},mathmlBuilder(n,e){var t=LE[n.style],r=e.havingStyle(t),i=Ei(n.body,r),s=new ae.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[n.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var wpe=function(e,t){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(t.style.size===tt.DISPLAY.size||r.alwaysHandleSupSub);return i?tf:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(t.style.size===tt.DISPLAY.size||r.limits);return s?dB:null}else{if(r.type==="accent")return Ge.isCharacterBox(r.base)?Qw:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?cB:null}else return null}else return null};lc({type:"supsub",htmlBuilder(n,e){var t=wpe(n,e);if(t)return t(n,e);var{base:r,sup:i,sub:s}=n,o=Lt(r,e),a,l,u=e.fontMetrics(),c=0,h=0,f=r&&Ge.isCharacterBox(r);if(i){var d=e.havingStyle(e.style.sup());a=Lt(i,d,e),f||(c=o.height-d.fontMetrics().supDrop*d.sizeMultiplier/e.sizeMultiplier)}if(s){var p=e.havingStyle(e.style.sub());l=Lt(s,p,e),f||(h=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var m;e.style===tt.DISPLAY?m=u.sup1:e.style.cramped?m=u.sup3:m=u.sup2;var g=e.sizeMultiplier,y=pe(.5/u.ptPerEm/g),v=null;if(l){var x=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(o instanceof ws||x)&&(v=pe(-o.italic))}var k;if(a&&l){c=Math.max(c,m,a.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var C=u.defaultRuleThickness,w=4*C;if(c-a.depth-(l.height-h)<w){h=w-(c-a.depth)+l.height;var M=.8*u.xHeight-(c-a.depth);M>0&&(c+=M,h-=M)}var D=[{type:"elem",elem:l,shift:h,marginRight:y,marginLeft:v},{type:"elem",elem:a,shift:-c,marginRight:y}];k=q.makeVList({positionType:"individualShift",children:D},e)}else if(l){h=Math.max(h,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:v,marginRight:y}];k=q.makeVList({positionType:"shift",positionData:h,children:A},e)}else if(a)c=Math.max(c,m,a.depth+.25*u.xHeight),k=q.makeVList({positionType:"shift",positionData:-c,children:[{type:"elem",elem:a,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var E=W3(o,"right")||"mord";return q.makeSpan([E],[o,q.makeSpan(["msupsub"],[k])],e)},mathmlBuilder(n,e){var t=!1,r,i;n.base&&n.base.type==="horizBrace"&&(i=!!n.sup,i===n.base.isOver&&(t=!0,r=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var s=[Yt(n.base,e)];n.sub&&s.push(Yt(n.sub,e)),n.sup&&s.push(Yt(n.sup,e));var o;if(t)o=r?"mover":"munder";else if(n.sub)if(n.sup){var u=n.base;u&&u.type==="op"&&u.limits&&e.style===tt.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(e.style===tt.DISPLAY||u.limits)?o="munderover":o="msubsup"}else{var l=n.base;l&&l.type==="op"&&l.limits&&(e.style===tt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===tt.DISPLAY)?o="munder":o="msub"}else{var a=n.base;a&&a.type==="op"&&a.limits&&(e.style===tt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===tt.DISPLAY)?o="mover":o="msup"}return new ae.MathNode(o,s)}});lc({type:"atom",htmlBuilder(n,e){return q.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var t=new ae.MathNode("mo",[Ss(n.text,n.mode)]);if(n.family==="bin"){var r=Jw(n,e);r==="bold-italic"&&t.setAttribute("mathvariant",r)}else n.family==="punct"?t.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&t.setAttribute("stretchy","false");return t}});var mB={mi:"italic",mn:"normal",mtext:"normal"};lc({type:"mathord",htmlBuilder(n,e){return q.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var t=new ae.MathNode("mi",[Ss(n.text,n.mode,e)]),r=Jw(n,e)||"italic";return r!==mB[t.type]&&t.setAttribute("mathvariant",r),t}});lc({type:"textord",htmlBuilder(n,e){return q.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var t=Ss(n.text,n.mode,e),r=Jw(n,e)||"normal",i;return n.mode==="text"?i=new ae.MathNode("mtext",[t]):/[0-9]/.test(n.text)?i=new ae.MathNode("mn",[t]):n.text==="\\prime"?i=new ae.MathNode("mo",[t]):i=new ae.MathNode("mi",[t]),r!==mB[i.type]&&i.setAttribute("mathvariant",r),i}});var xb={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wb={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};lc({type:"spacing",htmlBuilder(n,e){if(wb.hasOwnProperty(n.text)){var t=wb[n.text].className||"";if(n.mode==="text"){var r=q.makeOrd(n,e,"textord");return r.classes.push(t),r}else return q.makeSpan(["mspace",t],[q.mathsym(n.text,n.mode,e)],e)}else{if(xb.hasOwnProperty(n.text))return q.makeSpan(["mspace",xb[n.text]],[],e);throw new ue('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var t;if(wb.hasOwnProperty(n.text))t=new ae.MathNode("mtext",[new ae.TextNode(" ")]);else{if(xb.hasOwnProperty(n.text))return new ae.MathNode("mspace");throw new ue('Unknown type of space "'+n.text+'"')}return t}});var _E=()=>{var n=new ae.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};lc({type:"tag",mathmlBuilder(n,e){var t=new ae.MathNode("mtable",[new ae.MathNode("mtr",[_E(),new ae.MathNode("mtd",[Pl(n.body,e)]),_E(),new ae.MathNode("mtd",[Pl(n.tag,e)])])]);return t.setAttribute("width","100%"),t}});var BE={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},FE={"\\textbf":"textbf","\\textmd":"textmd"},Spe={"\\textit":"textit","\\textup":"textup"},$E=(n,e)=>{var t=n.font;if(t){if(BE[t])return e.withTextFontFamily(BE[t]);if(FE[t])return e.withTextFontWeight(FE[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Spe[t])};ke({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"text",mode:t.mode,body:_n(i),font:r}},htmlBuilder(n,e){var t=$E(n,e),r=nr(n.body,t,!0);return q.makeSpan(["mord","text"],r,t)},mathmlBuilder(n,e){var t=$E(n,e);return Pl(n.body,t)}});ke({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Lt(n.body,e),r=q.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=q.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return q.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(n,e){var t=new ae.MathNode("mo",[new ae.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new ae.MathNode("munder",[Yt(n.body,e),t]);return r.setAttribute("accentunder","true"),r}});ke({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Lt(n.body,e),r=e.fontMetrics().axisHeight,i=.5*(t.height-r-(t.depth+r));return q.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){return new ae.MathNode("mpadded",[Yt(n.body,e)],["vcenter"])}});ke({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,t){throw new ue("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var t=zE(n),r=[],i=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var o=t[s];o==="~"&&(o="\\textasciitilde"),r.push(q.makeSymbol(o,"Typewriter-Regular",n.mode,i,["mord","texttt"]))}return q.makeSpan(["mord","text"].concat(i.sizingClasses(e)),q.tryCombineChars(r),i)},mathmlBuilder(n,e){var t=new ae.TextNode(zE(n)),r=new ae.MathNode("mtext",[t]);return r.setAttribute("mathvariant","monospace"),r}});var zE=n=>n.body.replace(/ /g,n.star?"␣":" "),pl=F_,gB=`[ \r
	]`,kpe="\\\\[a-zA-Z@]+",Cpe="\\\\[^\uD800-\uDFFF]",Tpe="("+kpe+")"+gB+"*",Epe=`\\\\(
|[ \r	]+
?)[ \r	]*`,K3="[̀-ͯ]",Ape=new RegExp(K3+"+$"),Mpe="("+gB+"+)|"+(Epe+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(K3+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(K3+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Tpe)+("|"+Cpe+")");class VE{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Mpe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new ms("EOF",new Fi(this,t,t));var r=this.tokenRegex.exec(e);if(r===null||r.index!==t)throw new ue("Unexpected character: '"+e[t]+"'",new ms(e[t],new Fi(this,t,t+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new ms(i,new Fi(this,t,this.tokenRegex.lastIndex))}}class Ope{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ue("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Ipe=sB;O("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});O("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}});O("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}});O("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}});O("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var t=n.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});O("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");O("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var HE={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};O("\\char",function(n){var e=n.popToken(),t,r="";if(e.text==="'")t=8,e=n.popToken();else if(e.text==='"')t=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ue("\\char` missing argument");r=e.text.charCodeAt(0)}else t=10;if(t){if(r=HE[e.text],r==null||r>=t)throw new ue("Invalid base-"+t+" digit "+e.text);for(var i;(i=HE[n.future().text])!=null&&i<t;)r*=t,r+=i,n.popToken()}return"\\@char{"+r+"}"});var a8=(n,e,t,r)=>{var i=n.consumeArg().tokens;if(i.length!==1)throw new ue("\\newcommand's first argument must be a macro name");var s=i[0].text,o=n.isDefined(s);if(o&&!e)throw new ue("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!t)throw new ue("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(i=n.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var l="",u=n.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=n.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new ue("Invalid number of arguments: "+l);a=parseInt(l),i=n.consumeArg().tokens}return o&&r||n.macros.set(s,{tokens:i,numArgs:a}),""};O("\\newcommand",n=>a8(n,!1,!0,!1));O("\\renewcommand",n=>a8(n,!0,!1,!1));O("\\providecommand",n=>a8(n,!0,!0,!0));O("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});O("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});O("\\show",n=>{var e=n.popToken(),t=e.text;return console.log(e,n.macros.get(t),pl[t],en.math[t],en.text[t]),""});O("\\bgroup","{");O("\\egroup","}");O("~","\\nobreakspace");O("\\lq","`");O("\\rq","'");O("\\aa","\\r a");O("\\AA","\\r A");O("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");O("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");O("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");O("ℬ","\\mathscr{B}");O("ℰ","\\mathscr{E}");O("ℱ","\\mathscr{F}");O("ℋ","\\mathscr{H}");O("ℐ","\\mathscr{I}");O("ℒ","\\mathscr{L}");O("ℳ","\\mathscr{M}");O("ℛ","\\mathscr{R}");O("ℭ","\\mathfrak{C}");O("ℌ","\\mathfrak{H}");O("ℨ","\\mathfrak{Z}");O("\\Bbbk","\\Bbb{k}");O("·","\\cdotp");O("\\llap","\\mathllap{\\textrm{#1}}");O("\\rlap","\\mathrlap{\\textrm{#1}}");O("\\clap","\\mathclap{\\textrm{#1}}");O("\\mathstrut","\\vphantom{(}");O("\\underbar","\\underline{\\text{#1}}");O("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');O("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");O("\\ne","\\neq");O("≠","\\neq");O("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");O("∉","\\notin");O("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");O("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");O("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");O("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");O("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");O("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");O("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");O("⟂","\\perp");O("‼","\\mathclose{!\\mkern-0.8mu!}");O("∌","\\notni");O("⌜","\\ulcorner");O("⌝","\\urcorner");O("⌞","\\llcorner");O("⌟","\\lrcorner");O("©","\\copyright");O("®","\\textregistered");O("️","\\textregistered");O("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');O("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');O("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');O("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');O("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");O("⋮","\\vdots");O("\\varGamma","\\mathit{\\Gamma}");O("\\varDelta","\\mathit{\\Delta}");O("\\varTheta","\\mathit{\\Theta}");O("\\varLambda","\\mathit{\\Lambda}");O("\\varXi","\\mathit{\\Xi}");O("\\varPi","\\mathit{\\Pi}");O("\\varSigma","\\mathit{\\Sigma}");O("\\varUpsilon","\\mathit{\\Upsilon}");O("\\varPhi","\\mathit{\\Phi}");O("\\varPsi","\\mathit{\\Psi}");O("\\varOmega","\\mathit{\\Omega}");O("\\substack","\\begin{subarray}{c}#1\\end{subarray}");O("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");O("\\boxed","\\fbox{$\\displaystyle{#1}$}");O("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");O("\\implies","\\DOTSB\\;\\Longrightarrow\\;");O("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");O("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");O("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var jE={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};O("\\dots",function(n){var e="\\dotso",t=n.expandAfterFuture().text;return t in jE?e=jE[t]:(t.slice(0,4)==="\\not"||t in en.math&&Ge.contains(["bin","rel"],en.math[t].group))&&(e="\\dotsb"),e});var l8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};O("\\dotso",function(n){var e=n.future().text;return e in l8?"\\ldots\\,":"\\ldots"});O("\\dotsc",function(n){var e=n.future().text;return e in l8&&e!==","?"\\ldots\\,":"\\ldots"});O("\\cdots",function(n){var e=n.future().text;return e in l8?"\\@cdots\\,":"\\@cdots"});O("\\dotsb","\\cdots");O("\\dotsm","\\cdots");O("\\dotsi","\\!\\cdots");O("\\dotsx","\\ldots\\,");O("\\DOTSI","\\relax");O("\\DOTSB","\\relax");O("\\DOTSX","\\relax");O("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");O("\\,","\\tmspace+{3mu}{.1667em}");O("\\thinspace","\\,");O("\\>","\\mskip{4mu}");O("\\:","\\tmspace+{4mu}{.2222em}");O("\\medspace","\\:");O("\\;","\\tmspace+{5mu}{.2777em}");O("\\thickspace","\\;");O("\\!","\\tmspace-{3mu}{.1667em}");O("\\negthinspace","\\!");O("\\negmedspace","\\tmspace-{4mu}{.2222em}");O("\\negthickspace","\\tmspace-{5mu}{.277em}");O("\\enspace","\\kern.5em ");O("\\enskip","\\hskip.5em\\relax");O("\\quad","\\hskip1em\\relax");O("\\qquad","\\hskip2em\\relax");O("\\tag","\\@ifstar\\tag@literal\\tag@paren");O("\\tag@paren","\\tag@literal{({#1})}");O("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new ue("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});O("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");O("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");O("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");O("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");O("\\newline","\\\\\\relax");O("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var yB=pe(ho["Main-Regular"][84][1]-.7*ho["Main-Regular"][65][1]);O("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+yB+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");O("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+yB+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");O("\\hspace","\\@ifstar\\@hspacer\\@hspace");O("\\@hspace","\\hskip #1\\relax");O("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");O("\\ordinarycolon",":");O("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");O("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');O("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');O("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');O("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');O("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');O("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');O("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');O("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');O("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');O("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');O("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');O("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');O("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');O("∷","\\dblcolon");O("∹","\\eqcolon");O("≔","\\coloneqq");O("≕","\\eqqcolon");O("⩴","\\Coloneqq");O("\\ratio","\\vcentcolon");O("\\coloncolon","\\dblcolon");O("\\colonequals","\\coloneqq");O("\\coloncolonequals","\\Coloneqq");O("\\equalscolon","\\eqqcolon");O("\\equalscoloncolon","\\Eqqcolon");O("\\colonminus","\\coloneq");O("\\coloncolonminus","\\Coloneq");O("\\minuscolon","\\eqcolon");O("\\minuscoloncolon","\\Eqcolon");O("\\coloncolonapprox","\\Colonapprox");O("\\coloncolonsim","\\Colonsim");O("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");O("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");O("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");O("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");O("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");O("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");O("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");O("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");O("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");O("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");O("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");O("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");O("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");O("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");O("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");O("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");O("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");O("\\nleqq","\\html@mathml{\\@nleqq}{≰}");O("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");O("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");O("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");O("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");O("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");O("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");O("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");O("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");O("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");O("\\imath","\\html@mathml{\\@imath}{ı}");O("\\jmath","\\html@mathml{\\@jmath}{ȷ}");O("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");O("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");O("⟦","\\llbracket");O("⟧","\\rrbracket");O("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");O("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");O("⦃","\\lBrace");O("⦄","\\rBrace");O("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");O("⦵","\\minuso");O("\\darr","\\downarrow");O("\\dArr","\\Downarrow");O("\\Darr","\\Downarrow");O("\\lang","\\langle");O("\\rang","\\rangle");O("\\uarr","\\uparrow");O("\\uArr","\\Uparrow");O("\\Uarr","\\Uparrow");O("\\N","\\mathbb{N}");O("\\R","\\mathbb{R}");O("\\Z","\\mathbb{Z}");O("\\alef","\\aleph");O("\\alefsym","\\aleph");O("\\Alpha","\\mathrm{A}");O("\\Beta","\\mathrm{B}");O("\\bull","\\bullet");O("\\Chi","\\mathrm{X}");O("\\clubs","\\clubsuit");O("\\cnums","\\mathbb{C}");O("\\Complex","\\mathbb{C}");O("\\Dagger","\\ddagger");O("\\diamonds","\\diamondsuit");O("\\empty","\\emptyset");O("\\Epsilon","\\mathrm{E}");O("\\Eta","\\mathrm{H}");O("\\exist","\\exists");O("\\harr","\\leftrightarrow");O("\\hArr","\\Leftrightarrow");O("\\Harr","\\Leftrightarrow");O("\\hearts","\\heartsuit");O("\\image","\\Im");O("\\infin","\\infty");O("\\Iota","\\mathrm{I}");O("\\isin","\\in");O("\\Kappa","\\mathrm{K}");O("\\larr","\\leftarrow");O("\\lArr","\\Leftarrow");O("\\Larr","\\Leftarrow");O("\\lrarr","\\leftrightarrow");O("\\lrArr","\\Leftrightarrow");O("\\Lrarr","\\Leftrightarrow");O("\\Mu","\\mathrm{M}");O("\\natnums","\\mathbb{N}");O("\\Nu","\\mathrm{N}");O("\\Omicron","\\mathrm{O}");O("\\plusmn","\\pm");O("\\rarr","\\rightarrow");O("\\rArr","\\Rightarrow");O("\\Rarr","\\Rightarrow");O("\\real","\\Re");O("\\reals","\\mathbb{R}");O("\\Reals","\\mathbb{R}");O("\\Rho","\\mathrm{P}");O("\\sdot","\\cdot");O("\\sect","\\S");O("\\spades","\\spadesuit");O("\\sub","\\subset");O("\\sube","\\subseteq");O("\\supe","\\supseteq");O("\\Tau","\\mathrm{T}");O("\\thetasym","\\vartheta");O("\\weierp","\\wp");O("\\Zeta","\\mathrm{Z}");O("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");O("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");O("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");O("\\bra","\\mathinner{\\langle{#1}|}");O("\\ket","\\mathinner{|{#1}\\rangle}");O("\\braket","\\mathinner{\\langle{#1}\\rangle}");O("\\Bra","\\left\\langle#1\\right|");O("\\Ket","\\left|#1\\right\\rangle");var vB=n=>e=>{var t=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=h=>f=>{n&&(f.macros.set("|",o),i.length&&f.macros.set("\\|",a));var d=h;if(!h&&i.length){var p=f.future();p.text==="|"&&(f.popToken(),d=!0)}return{tokens:d?i:r,numArgs:0}};e.macros.set("|",l(!1)),i.length&&e.macros.set("\\|",l(!0));var u=e.consumeArg().tokens,c=e.expandTokens([...s,...u,...t]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};O("\\bra@ket",vB(!1));O("\\bra@set",vB(!0));O("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");O("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");O("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");O("\\angln","{\\angl n}");O("\\blue","\\textcolor{##6495ed}{#1}");O("\\orange","\\textcolor{##ffa500}{#1}");O("\\pink","\\textcolor{##ff00af}{#1}");O("\\red","\\textcolor{##df0030}{#1}");O("\\green","\\textcolor{##28ae7b}{#1}");O("\\gray","\\textcolor{gray}{#1}");O("\\purple","\\textcolor{##9d38bd}{#1}");O("\\blueA","\\textcolor{##ccfaff}{#1}");O("\\blueB","\\textcolor{##80f6ff}{#1}");O("\\blueC","\\textcolor{##63d9ea}{#1}");O("\\blueD","\\textcolor{##11accd}{#1}");O("\\blueE","\\textcolor{##0c7f99}{#1}");O("\\tealA","\\textcolor{##94fff5}{#1}");O("\\tealB","\\textcolor{##26edd5}{#1}");O("\\tealC","\\textcolor{##01d1c1}{#1}");O("\\tealD","\\textcolor{##01a995}{#1}");O("\\tealE","\\textcolor{##208170}{#1}");O("\\greenA","\\textcolor{##b6ffb0}{#1}");O("\\greenB","\\textcolor{##8af281}{#1}");O("\\greenC","\\textcolor{##74cf70}{#1}");O("\\greenD","\\textcolor{##1fab54}{#1}");O("\\greenE","\\textcolor{##0d923f}{#1}");O("\\goldA","\\textcolor{##ffd0a9}{#1}");O("\\goldB","\\textcolor{##ffbb71}{#1}");O("\\goldC","\\textcolor{##ff9c39}{#1}");O("\\goldD","\\textcolor{##e07d10}{#1}");O("\\goldE","\\textcolor{##a75a05}{#1}");O("\\redA","\\textcolor{##fca9a9}{#1}");O("\\redB","\\textcolor{##ff8482}{#1}");O("\\redC","\\textcolor{##f9685d}{#1}");O("\\redD","\\textcolor{##e84d39}{#1}");O("\\redE","\\textcolor{##bc2612}{#1}");O("\\maroonA","\\textcolor{##ffbde0}{#1}");O("\\maroonB","\\textcolor{##ff92c6}{#1}");O("\\maroonC","\\textcolor{##ed5fa6}{#1}");O("\\maroonD","\\textcolor{##ca337c}{#1}");O("\\maroonE","\\textcolor{##9e034e}{#1}");O("\\purpleA","\\textcolor{##ddd7ff}{#1}");O("\\purpleB","\\textcolor{##c6b9fc}{#1}");O("\\purpleC","\\textcolor{##aa87ff}{#1}");O("\\purpleD","\\textcolor{##7854ab}{#1}");O("\\purpleE","\\textcolor{##543b78}{#1}");O("\\mintA","\\textcolor{##f5f9e8}{#1}");O("\\mintB","\\textcolor{##edf2df}{#1}");O("\\mintC","\\textcolor{##e0e5cc}{#1}");O("\\grayA","\\textcolor{##f6f7f7}{#1}");O("\\grayB","\\textcolor{##f0f1f2}{#1}");O("\\grayC","\\textcolor{##e3e5e6}{#1}");O("\\grayD","\\textcolor{##d6d8da}{#1}");O("\\grayE","\\textcolor{##babec2}{#1}");O("\\grayF","\\textcolor{##888d93}{#1}");O("\\grayG","\\textcolor{##626569}{#1}");O("\\grayH","\\textcolor{##3b3e40}{#1}");O("\\grayI","\\textcolor{##21242c}{#1}");O("\\kaBlue","\\textcolor{##314453}{#1}");O("\\kaGreen","\\textcolor{##71B307}{#1}");var bB={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Dpe{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Ope(Ipe,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new VE(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:t,end:r}=this.consumeArg());return this.pushToken(new ms("EOF",r.loc)),this.pushTokens(i),t.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,o=0,a=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new ue("Extra }",s)}else if(s.text==="EOF")throw new ue("Unexpected end of input in a macro argument, expected '"+(e&&r?e[a]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){t.splice(-a,a);break}}else a=0}while(o!==0||r);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new ue("The length of delimiters doesn't match the number of args!");for(var r=t[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new ue("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ue("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,i=t.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new ue("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new ue("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new ue("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new ms(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(r=>r.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new VE(i,this.settings),l=[],u=a.lex();u.text!=="EOF";)l.push(u),u=a.lex();l.reverse();var c={tokens:l,numArgs:s};return c}return i}isDefined(e){return this.macros.has(e)||pl.hasOwnProperty(e)||en.math.hasOwnProperty(e)||en.text.hasOwnProperty(e)||bB.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:pl.hasOwnProperty(e)&&!pl[e].primitive}}var WE=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,qm=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Sb={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},qE={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class r2{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Dpe(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new ue("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new ms("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(r2.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&pl[i.text]&&pl[i.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new ue("only one infix operator per group",e[i].token);t=i,r=e[i].replaceWith}if(t!==-1&&r){var s,o,a=e.slice(0,t),l=e.slice(t+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var u;return r==="\\\\abovefrac"?u=this.callFunction(r,[s,e[t],o],[]):u=this.callFunction(r,[s,o],[]),[u]}else return e}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new ue("Expected group after '"+r+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var o=s.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new ue("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new ue("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new ue("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new ue("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(qm[s.text]){var u=WE.test(s.text),c=[];for(c.push(new ms(qm[s.text])),this.consume();;){var h=this.fetch().text;if(!qm[h]||WE.test(h)!==u)break;c.unshift(new ms(qm[h])),this.consume()}var f=this.subparse(c);u?i={type:"ordgroup",mode:"math",body:f}:r={type:"ordgroup",mode:"math",body:f}}else break}return r||i?{type:"supsub",mode:this.mode,base:t,sup:r,sub:i}:t}parseFunction(e,t){var r=this.fetch(),i=r.text,s=pl[i];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new ue("Got function '"+i+"' with no arguments"+(t?" as "+t:""),r);if(this.mode==="text"&&!s.allowedInText)throw new ue("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new ue("Can't use function '"+i+"' in math mode",r);var{args:o,optArgs:a}=this.parseArguments(i,s);return this.callFunction(i,o,a,r,e)}callFunction(e,t,r,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},a=pl[e];if(a&&a.handler)return a.handler(o,t,r);throw new ue("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<r;o++){var a=t.argTypes&&t.argTypes[o],l=o<t.numOptionalArgs;(t.primitive&&a==null||t.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(u);else if(u!=null)i.push(u);else throw new ue("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new ue("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ue("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new ue("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r=this.fetch(),i=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new ue("Invalid "+t+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new ue("Invalid color: '"+t.text+"'",t);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new ue("Invalid size: '"+t.text+"'",t);var s={number:+(i[1]+i[2]),unit:i[3]};if(!O_(s))throw new ue("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return t&&this.switchMode(i),o}parseGroup(e,t){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Fi.range(r,l),body:a,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!bB.hasOwnProperty(i)){if(this.settings.throwOnError)throw new ue("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<t&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:Fi.range(i,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:Fi.range(i,e[r+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:Fi.range(i,e[r+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new ue(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}qE.hasOwnProperty(t[0])&&!en[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=qE[t[0]]+t.slice(1));var s=Ape.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var o;if(en[this.mode][t]){this.settings.strict&&this.mode==="math"&&j3.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a=en[this.mode][t].group,l=Fi.range(e),u;if(b0e.hasOwnProperty(a)){var c=a;u={type:"atom",mode:this.mode,family:c,loc:l,text:t}}else u={type:a,mode:this.mode,loc:l,text:t};o=u}else if(t.charCodeAt(0)>=128)this.settings.strict&&(M_(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Fi.range(e),text:t};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var f=s[0][h];if(!Sb[f])throw new ue("Unknown accent ' "+f+"'",e);var d=Sb[f][this.mode]||Sb[f].text;if(!d)throw new ue("Accent "+f+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Fi.range(e),label:d,isStretchy:!1,isShifty:!0,base:o}}return o}}r2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var u8=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new r2(e,t);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new ue("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new ms("\\df@tag")])}]}return i},xB=function(e,t,r){t.textContent="";var i=c8(e,r).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),xB=function(){throw new ue("KaTeX doesn't work in quirks mode.")});var Npe=function(e,t){var r=c8(e,t).toMarkup();return r},Ppe=function(e,t){var r=new qw(t);return u8(e,r)},wB=function(e,t,r){if(r.throwOnError||!(e instanceof ue))throw e;var i=q.makeSpan(["katex-error"],[new ws(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},c8=function(e,t){var r=new qw(t);try{var i=u8(e,r);return H0e(i,e,r)}catch(s){return wB(s,e,r)}},Rpe=function(e,t){var r=new qw(t);try{var i=u8(e,r);return j0e(i,e,r)}catch(s){return wB(s,e,r)}},Lpe="0.16.22",_pe={Span:Lp,Anchor:Kw,SymbolNode:ws,SvgNode:Sa,PathNode:Nl,LineNode:H3},SB={version:Lpe,render:xB,renderToString:Npe,ParseError:ue,SETTINGS_SCHEMA:X1,__parse:Ppe,__renderToDomTree:c8,__renderToHTMLTree:Rpe,__setFontMetrics:h0e,__defineSymbol:b,__defineFunction:ke,__defineMacro:O,__domTree:_pe};class i2{constructor(e){this.#i=!1,this.onShow=()=>{},this.onHide=()=>{},this.#u=(t,r)=>{const{state:i,composing:s}=t,{selection:o,doc:a}=i,{ranges:l}=o,u=Math.min(...l.map(d=>d.$from.pos)),c=Math.max(...l.map(d=>d.$to.pos)),h=r&&r.doc.eq(a)&&r.selection.eq(o);if(this.#i||((this.#l??t.dom.parentElement??document.body).appendChild(this.element),this.#i=!0),s||h)return;if(!this.#e(t,r)){this.hide();return}$s({getBoundingClientRect:()=>vv(t,u,c)},this.element,{placement:this.#n.placement??"top",middleware:[vg(),Sl(this.#s),N8(this.#o),...this.#r]}).then(({x:d,y:p})=>{Object.assign(this.element.style,{left:`${d}px`,top:`${p}px`})}).catch(console.error),this.show()},this.update=(t,r)=>{this.#a(t,r)},this.destroy=()=>{this.#a.cancel()},this.show=t=>{this.element.dataset.show="true",t&&$s(t,this.element,{placement:"top",middleware:[vg(),Sl(this.#s),N8(this.#o),...this.#r],...this.#n}).then(({x:r,y:i})=>{Object.assign(this.element.style,{left:`${r}px`,top:`${i}px`})}).catch(console.error),this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,this.#t=e.debounce??200,this.#e=e.shouldShow??this.#c,this.#s=e.offset,this.#o=e.shift,this.#r=e.middleware??[],this.#n=e.floatingUIOptions??{},this.#l=e.root,this.element.dataset.show="false",this.#a=Av(this.#u,this.#t)}#t;#e;#r;#n;#l;#i;#s;#o;#a;#u;#c(e){const{doc:t,selection:r}=e.state,{empty:i,from:s,to:o}=r,a=!t.textBetween(s,o).length&&e.state.selection instanceof Be,l=this.element.contains(document.activeElement),u=!e.hasFocus()&&!l,c=!e.editable;return!(u||i||a||c)}}function s2(n){const e=Vt({},`${n}_TOOLTIP_SPEC`),t=ir(i=>{const s=i.get(e.key);return new gn({key:new En(`${n}_TOOLTIP`),...s})}),r=[e,t];return r.key=e.key,r.pluginKey=t.key,e.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${n}`},t.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${n}`},r}function Bpe(){return{enter:{mathFlow:n,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:t,mathFlowValue:a,mathText:o,mathTextData:a}};function n(l){const u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},l)}function e(){this.buffer()}function t(){const l=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){const u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c=this.stack[this.stack.length-1];c.type,this.exit(l),c.value=u;const h=c.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function s(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function o(l){const u=this.resume(),c=this.stack[this.stack.length-1];c.type,this.exit(l),c.value=u,c.data.hChildren.push({type:"text",value:u})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function Fpe(n){let e=(n||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:t,inlineMath:r}};function t(s,o,a,l){const u=s.value||"",c=a.createTracker(l),h="$".repeat(Math.max(VN(u,"$")+1,2)),f=a.enter("mathFlow");let d=c.move(h);if(s.meta){const p=a.enter("mathFlowMeta");d+=c.move(a.safe(s.meta,{after:`
`,before:d,encode:["$"],...c.current()})),p()}return d+=c.move(`
`),u&&(d+=c.move(u+`
`)),d+=c.move(h),f(),d}function r(s,o,a){let l=s.value||"",u=1;for(e||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(l);)u++;const c="$".repeat(u);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let h=-1;for(;++h<a.unsafe.length;){const f=a.unsafe[h];if(!f.atBreak)continue;const d=a.compilePattern(f);let p;for(;p=d.exec(l);){let m=p.index;l.codePointAt(m)===10&&l.codePointAt(m-1)===13&&m--,l=l.slice(0,m)+" "+l.slice(p.index+1)}}return c+l+c}function i(){return"$"}}const $pe={tokenize:zpe,concrete:!0,name:"mathFlow"},UE={tokenize:Vpe,partial:!0};function zpe(n,e,t){const r=this,i=r.events[r.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return a;function a(v){return n.enter("mathFlow"),n.enter("mathFlowFence"),n.enter("mathFlowFenceSequence"),l(v)}function l(v){return v===36?(n.consume(v),o++,l):o<2?t(v):(n.exit("mathFlowFenceSequence"),St(n,u,"whitespace")(v))}function u(v){return v===null||Fe(v)?h(v):(n.enter("mathFlowFenceMeta"),n.enter("chunkString",{contentType:"string"}),c(v))}function c(v){return v===null||Fe(v)?(n.exit("chunkString"),n.exit("mathFlowFenceMeta"),h(v)):v===36?t(v):(n.consume(v),c)}function h(v){return n.exit("mathFlowFence"),r.interrupt?e(v):n.attempt(UE,f,g)(v)}function f(v){return n.attempt({tokenize:y,partial:!0},g,d)(v)}function d(v){return(s?St(n,p,"linePrefix",s+1):p)(v)}function p(v){return v===null?g(v):Fe(v)?n.attempt(UE,f,g)(v):(n.enter("mathFlowValue"),m(v))}function m(v){return v===null||Fe(v)?(n.exit("mathFlowValue"),p(v)):(n.consume(v),m)}function g(v){return n.exit("mathFlow"),e(v)}function y(v,x,k){let C=0;return St(v,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function w(A){return v.enter("mathFlowFence"),v.enter("mathFlowFenceSequence"),M(A)}function M(A){return A===36?(C++,v.consume(A),M):C<o?k(A):(v.exit("mathFlowFenceSequence"),St(v,D,"whitespace")(A))}function D(A){return A===null||Fe(A)?(v.exit("mathFlowFence"),x(A)):k(A)}}}function Vpe(n,e,t){const r=this;return i;function i(o){return o===null?e(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function Hpe(n){let t=(n||{}).singleDollarTextMath;return t==null&&(t=!0),{tokenize:r,resolve:jpe,previous:Wpe,name:"mathText"};function r(i,s,o){let a=0,l,u;return c;function c(m){return i.enter("mathText"),i.enter("mathTextSequence"),h(m)}function h(m){return m===36?(i.consume(m),a++,h):a<2&&!t?o(m):(i.exit("mathTextSequence"),f(m))}function f(m){return m===null?o(m):m===36?(u=i.enter("mathTextSequence"),l=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),f):Fe(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),f):(i.enter("mathTextData"),d(m))}function d(m){return m===null||m===32||m===36||Fe(m)?(i.exit("mathTextData"),f(m)):(i.consume(m),d)}function p(m){return m===36?(i.consume(m),l++,p):l===a?(i.exit("mathTextSequence"),i.exit("mathText"),s(m)):(u.type="mathTextData",d(m))}}}function jpe(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="mathTextData"){n[e][1].type="mathTextPadding",n[t][1].type="mathTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="mathTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function Wpe(n){return n!==36||this.events[this.events.length-1][1].type==="characterEscape"}function qpe(n){return{flow:{36:$pe},text:{36:Hpe(n)}}}const Upe={};function Gpe(n){const e=this,t=n||Upe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(qpe(t)),s.push(Bpe()),o.push(Fpe(t))}var Kpe=Object.defineProperty,GE=Object.getOwnPropertySymbols,Xpe=Object.prototype.hasOwnProperty,Ype=Object.prototype.propertyIsEnumerable,KE=(n,e,t)=>e in n?Kpe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jpe=(n,e)=>{for(var t in e||(e={}))Xpe.call(e,t)&&KE(n,t,e[t]);if(GE)for(var t of GE(e))Ype.call(e,t)&&KE(n,t,e[t]);return n};function uc(n,e){return Object.assign(n,{meta:Jpe({package:"@milkdown/components"},e)}),n}var Zpe=Object.defineProperty,XE=Object.getOwnPropertySymbols,Qpe=Object.prototype.hasOwnProperty,eme=Object.prototype.propertyIsEnumerable,YE=(n,e,t)=>e in n?Zpe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,h8=(n,e)=>{for(var t in e||(e={}))Qpe.call(e,t)&&YE(n,t,e[t]);if(XE)for(var t of XE(e))eme.call(e,t)&&YE(n,t,e[t]);return n};const tme={mode:"preview"},Ta=Vt(h8({},tme),"linkTooltipStateCtx");uc(Ta,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const nme={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},Nh=Vt(h8({},nme),"linkTooltipAPICtx");uc(Ta,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const rme={linkIcon:"🔗",editButton:"✎",removeButton:"⌫",confirmButton:"Confirm ⏎",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},Ph=Vt(h8({},rme),"linkTooltipConfigCtx");uc(Ta,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const kB=st("ToggleLink",n=>()=>e=>{const{doc:t,selection:r}=e,i=Fs.type(n);return t.rangeHasMark(r.from,r.to,i)?(n.get(Nh.key).removeLink(r.from,r.to),!0):(n.get(Nh.key).addLink(r.from,r.to),!0)}),Bp=s2("LINK_PREVIEW");uc(Bp[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});uc(Bp[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const o2=s2("LINK_EDIT");uc(o2[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});uc(o2[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function i0({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}i0.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const ime=He({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:n,src:e,onConfirm:t,onCancel:r}){const i=le(e);oa(e,a=>{i.value=a});const s=()=>{t(i.value)},o=a=>{a.stopPropagation(),a.key==="Enter"&&(a.preventDefault(),s()),a.key==="Escape"&&(a.preventDefault(),r())};return()=>X("div",{class:"link-edit"},X("input",{class:"input-area",placeholder:n.value.inputPlaceholder,onKeydown:o,onInput:a=>{i.value=a.target.value},value:i.value}),i.value?X(i0,{class:"button confirm",icon:n.value.confirmButton,onClick:s}):null)}});var sme=Object.defineProperty,ome=Object.defineProperties,ame=Object.getOwnPropertyDescriptors,JE=Object.getOwnPropertySymbols,lme=Object.prototype.hasOwnProperty,ume=Object.prototype.propertyIsEnumerable,CB=n=>{throw TypeError(n)},ZE=(n,e,t)=>e in n?sme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Um=(n,e)=>{for(var t in e||(e={}))lme.call(e,t)&&ZE(n,t,e[t]);if(JE)for(var t of JE(e))ume.call(e,t)&&ZE(n,t,e[t]);return n},QE=(n,e)=>ome(n,ame(e)),TB=(n,e,t)=>e.has(n)||CB("Cannot "+t),xn=(n,e,t)=>(TB(n,e,"read from private field"),t?t.call(n):e.get(n)),$o=(n,e,t)=>e.has(n)?CB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Zl=(n,e,t,r)=>(TB(n,e,"write to private field"),e.set(n,t),t),cd,Wa,qa,J1,hd,Z1,ou,X3,Q1;const eA={from:-1,to:-1,mark:null};class cme{constructor(e,t){this.ctx=e,$o(this,cd),$o(this,Wa),$o(this,qa,Um({},eA)),$o(this,J1),$o(this,hd),$o(this,Z1,le("")),$o(this,ou,()=>{xn(this,Wa).hide(),this.ctx.update(Ta.key,s=>QE(Um({},s),{mode:"preview"})),Zl(this,qa,Um({},eA))}),$o(this,X3,s=>{const o=this.ctx.get(Zt),{from:a,to:l,mark:u}=xn(this,qa),c=Fs.type(this.ctx),h=Ks.sanitize(s);if(u&&u.attrs.href===h){xn(this,ou).call(this);return}const f=o.state.tr;u&&f.removeMark(a,l,u),f.addMark(a,l,c.create({href:h})),o.dispatch(f),xn(this,ou).call(this)}),$o(this,Q1,(s,o,a)=>{const l=this.ctx.get(Ph.key);xn(this,hd).value=l,xn(this,Z1).value=s,this.ctx.update(Ta.key,c=>QE(Um({},c),{mode:"edit"}));const u=this.ctx.get(Zt);u.dispatch(u.state.tr.setSelection(Be.create(u.state.doc,o,a))),xn(this,Wa).show({getBoundingClientRect:()=>vv(u,o,a)}),requestAnimationFrame(()=>{var c;(c=xn(this,cd).querySelector("input"))==null||c.focus()})}),this.update=s=>{const{state:o}=s,{selection:a}=o;if(!(a instanceof Be))return;const{from:l,to:u}=a;l===xn(this,qa).from&&u===xn(this,qa).to||xn(this,ou).call(this)},this.destroy=()=>{xn(this,J1).unmount(),xn(this,Wa).destroy(),xn(this,cd).remove()},this.addLink=(s,o)=>{Zl(this,qa,{from:s,to:o,mark:null}),xn(this,Q1).call(this,"",s,o)},this.editLink=(s,o,a)=>{Zl(this,qa,{from:o,to:a,mark:s}),xn(this,Q1).call(this,s.attrs.href,o,a)},this.removeLink=(s,o)=>{const a=this.ctx.get(Zt),l=a.state.tr;l.removeMark(s,o,Fs.type(this.ctx)),a.dispatch(l),xn(this,ou).call(this)},Zl(this,hd,le(this.ctx.get(Ph.key)));const r=document.createElement("div");r.className="milkdown-link-edit";const i=Ws(ime,{config:xn(this,hd),src:xn(this,Z1),onConfirm:xn(this,X3),onCancel:xn(this,ou)});i.mount(r),Zl(this,J1,i),Zl(this,cd,r),Zl(this,Wa,new i2({content:r,debounce:0,shouldShow:()=>!1})),xn(this,Wa).onHide=()=>{requestAnimationFrame(()=>{t.dom.focus({preventScroll:!0})})},xn(this,Wa).update(t)}}cd=new WeakMap;Wa=new WeakMap;qa=new WeakMap;J1=new WeakMap;hd=new WeakMap;Z1=new WeakMap;ou=new WeakMap;X3=new WeakMap;Q1=new WeakMap;var hme=Object.defineProperty,fme=Object.defineProperties,dme=Object.getOwnPropertyDescriptors,tA=Object.getOwnPropertySymbols,pme=Object.prototype.hasOwnProperty,mme=Object.prototype.propertyIsEnumerable,nA=(n,e,t)=>e in n?hme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gme=(n,e)=>{for(var t in e||(e={}))pme.call(e,t)&&nA(n,t,e[t]);if(tA)for(var t of tA(e))mme.call(e,t)&&nA(n,t,e[t]);return n},yme=(n,e)=>fme(n,dme(e));function vme(n){let e;n.update(Nh.key,t=>yme(gme({},t),{addLink:(r,i)=>{e?.addLink(r,i)},editLink:(r,i,s)=>{e?.editLink(r,i,s)},removeLink:(r,i)=>{e?.removeLink(r,i)}})),n.set(o2.key,{view:t=>(e=new cme(n,t),e)})}function bme(n,e,t,r,i){let s={start:-1,end:-1};return t.nodesBetween(r,i,(o,a)=>{if(s.start>-1)return!1;s.start===-1&&n.isInSet(o.marks)&&e===o&&(s={start:a,end:a+Math.max(o.textContent.length,1)})}),s}function xme(n,e,t){const r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return;const{pos:i}=r,s=e.state.doc.nodeAt(i);if(!s)return;const o=s.marks.find(l=>l.type===Fs.mark.type(n));if(!(!o||!Bp.pluginKey()))return{show:!0,pos:i,node:s,mark:o}}const wme=He({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:n,src:e,onEdit:t,onRemove:r}){const i=a=>{a.preventDefault(),a.stopPropagation(),t.value()},s=a=>{a.preventDefault(),a.stopPropagation(),r.value()},o=a=>{a.preventDefault();const l=e.value;navigator.clipboard&&l&&navigator.clipboard.writeText(l).then(()=>{n.value.onCopyLink(l)}).catch(u=>console.error(u))};return()=>X("div",{class:"link-preview"},X(i0,{class:"button link-icon",icon:n.value.linkIcon,onClick:o}),X("a",{href:e.value,target:"_blank",class:"link-display"},e.value),X(i0,{class:"button link-edit-button",icon:n.value.editButton,onClick:i}),X(i0,{class:"button link-remove-button",icon:n.value.removeButton,onClick:s}))}});var EB=n=>{throw TypeError(n)},AB=(n,e,t)=>e.has(n)||EB("Cannot "+t),Nt=(n,e,t)=>(AB(n,e,"read from private field"),t?t.call(n):e.get(n)),Ii=(n,e,t)=>e.has(n)?EB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ql=(n,e,t,r)=>(AB(n,e,"write to private field"),e.set(n,t),t),au,Is,fd,dd,eg,tg,ng,pd,md,rg,ig,sg,gd;class Sme{constructor(e,t){this.ctx=e,Ii(this,au),Ii(this,Is),Ii(this,fd,this.ctx.use(Ta.key)),Ii(this,dd),Ii(this,eg,le("")),Ii(this,tg,le(()=>{})),Ii(this,ng,le(()=>{})),Ii(this,pd),Ii(this,md,!1),Ii(this,rg,({mode:r})=>{r==="edit"&&Nt(this,gd).call(this)}),Ii(this,ig,()=>{Ql(this,md,!0)}),Ii(this,sg,()=>{Ql(this,md,!1)}),Ii(this,gd,()=>{Nt(this,Is).hide(),Nt(this,Is).element.removeEventListener("mouseenter",Nt(this,ig)),Nt(this,Is).element.removeEventListener("mouseleave",Nt(this,sg))}),this.show=(r,i,s,o)=>{Nt(this,dd).value=this.ctx.get(Ph.key),Nt(this,eg).value=r.attrs.href,Nt(this,tg).value=()=>{this.ctx.get(Nh.key).editLink(r,i,s)},Nt(this,ng).value=()=>{this.ctx.get(Nh.key).removeLink(i,s),Nt(this,gd).call(this)},Nt(this,Is).show({getBoundingClientRect:()=>o}),Nt(this,Is).element.addEventListener("mouseenter",Nt(this,ig)),Nt(this,Is).element.addEventListener("mouseleave",Nt(this,sg))},this.hide=()=>{Nt(this,md)||Nt(this,gd).call(this)},this.update=()=>{},this.destroy=()=>{Nt(this,pd).unmount(),Nt(this,fd).off(Nt(this,rg)),Nt(this,Is).destroy(),Nt(this,au).remove()},Ql(this,dd,le(this.ctx.get(Ph.key))),Ql(this,pd,Ws(wme,{config:Nt(this,dd),src:Nt(this,eg),onEdit:Nt(this,tg),onRemove:Nt(this,ng)})),Ql(this,au,document.createElement("div")),Nt(this,au).className="milkdown-link-preview",Nt(this,pd).mount(Nt(this,au)),Ql(this,Is,new i2({debounce:0,content:Nt(this,au),shouldShow:()=>!1})),Nt(this,Is).update(t),Ql(this,fd,e.use(Ta.key)),Nt(this,fd).on(Nt(this,rg))}}au=new WeakMap;Is=new WeakMap;fd=new WeakMap;dd=new WeakMap;eg=new WeakMap;tg=new WeakMap;ng=new WeakMap;pd=new WeakMap;md=new WeakMap;rg=new WeakMap;ig=new WeakMap;sg=new WeakMap;gd=new WeakMap;function kme(n){let e;const r=rw((s,o)=>{if(!e||!s.hasFocus()||n.get(Ta.key).mode==="edit")return;const l=xme(n,s,o);if(l){const u=s.state.doc.resolve(l.pos),c=bme(l.mark,l.node,s.state.doc,u.before(),u.after()),h=c.start,f=c.end;e.show(l.mark,h,f,vv(s,h,f));return}e.hide()},50),i=()=>{setTimeout(()=>{e?.hide()},50)};n.set(Bp.key,{props:{handleDOMEvents:{mousemove:r,mouseleave:i}},view:s=>(e=new Sme(n,s),e)})}function Cme(n){kme(n),vme(n)}const Tme=[Ta,Nh,Ph,Bp,o2,kB].flat();var Eme=Object.defineProperty,rA=Object.getOwnPropertySymbols,Ame=Object.prototype.hasOwnProperty,Mme=Object.prototype.propertyIsEnumerable,iA=(n,e,t)=>e in n?Eme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ome=(n,e)=>{for(var t in e||(e={}))Ame.call(e,t)&&iA(n,t,e[t]);if(rA)for(var t of rA(e))Mme.call(e,t)&&iA(n,t,e[t]);return n};function MB(n,e){return Object.assign(n,{meta:Ome({package:"@milkdown/components"},e)}),n}const Ime={renderLabel:({label:n,listType:e,checked:t})=>t==null?e==="bullet"?"⦿":n:t?"☑":"□"},a2=Vt(Ime,"listItemBlockConfigCtx");MB(a2,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function OB({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}OB.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const Dme=He({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:n,checked:e,listType:t,config:r,readonly:i,setAttr:s,onMount:o,selected:a}){const l=f=>{f!=null&&f instanceof Element&&o(f)},u=f=>{f.stopPropagation(),f.preventDefault(),e.value!=null&&s("checked",!e.value)},c=Te(()=>r.renderLabel({label:n.value,listType:t.value,checked:e.value,readonly:i.value})),h=Te(()=>e.value==null?t.value==="bullet"?"bullet":"ordered":e.value?"checked":"unchecked");return()=>X("li",{class:Cr("list-item",a.value&&"ProseMirror-selectednode")},X("div",{class:"label-wrapper",onPointerdown:u,contenteditable:!1},X(OB,{class:Cr("label",i.value&&"readonly",h.value),icon:c.value})),X("div",{class:"children",ref:l}))}}),IB=Sp(Gs.node,n=>(e,t,r)=>{const i=document.createElement("div");i.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const o=le(e.attrs.label),a=le(e.attrs.checked),l=le(e.attrs.listType),u=le(!t.editable),c=n.get(a2.key),h=le(!1),f=(x,k)=>{if(!t.editable)return;const C=r();C!=null&&(t.hasFocus()||t.focus(),t.dispatch(t.state.tr.setNodeAttribute(C,x,k)))},d=Rh(()=>{h.value?i.classList.add("selected"):i.classList.remove("selected")});let p=0;const g=Ws(Dme,{label:o,checked:a,listType:l,readonly:u,config:c,selected:h,setAttr:f,onMount:x=>{const{anchor:k,head:C}=t.state.selection;x.appendChild(s);const w=t.state.doc.resolve(k),M=t.state.doc.resolve(C);p=requestAnimationFrame(()=>{cancelAnimationFrame(p),t.dispatch(t.state.tr.setSelection(new Be(w,M)))})}});g.mount(i);const y=x=>{l.value=x.attrs.listType,o.value=x.attrs.label,a.value=x.attrs.checked,u.value=!t.editable};y(e);let v=e;return{dom:i,contentDOM:s,update:x=>x.type!==e.type?!1:(x.sameMarkup(v)&&x.content.eq(v.content)||(v=x,y(x)),!0),ignoreMutation:x=>!i||!s?!0:x.type==="selection"?!1:s===x.target&&x.type==="attributes"?!0:!s.contains(x.target),selectNode:()=>{h.value=!0},deselectNode:()=>{h.value=!1},destroy:()=>{d(),g.unmount(),i.remove(),s.remove()}}});MB(IB,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const Nme=[a2,IB];var Pme=Object.defineProperty,sA=Object.getOwnPropertySymbols,Rme=Object.prototype.hasOwnProperty,Lme=Object.prototype.propertyIsEnumerable,oA=(n,e,t)=>e in n?Pme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_me=(n,e)=>{for(var t in e||(e={}))Rme.call(e,t)&&oA(n,t,e[t]);if(sA)for(var t of sA(e))Lme.call(e,t)&&oA(n,t,e[t]);return n};function DB(n,e){return Object.assign(n,{meta:_me({package:"@milkdown/components"},e)}),n}var Bme=Object.defineProperty,aA=Object.getOwnPropertySymbols,Fme=Object.prototype.hasOwnProperty,$me=Object.prototype.propertyIsEnumerable,lA=(n,e,t)=>e in n?Bme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zme=(n,e)=>{for(var t in e||(e={}))Fme.call(e,t)&&lA(n,t,e[t]);if(aA)for(var t of aA(e))$me.call(e,t)&&lA(n,t,e[t]);return n};const Vme={renderButton:n=>{switch(n){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},l2=Vt(zme({},Vme),"tableBlockConfigCtx");DB(l2,{displayName:"Config<table-block>",group:"TableBlock"});function no({icon:n,class:e,onClick:t}){return X("span",{class:Cr("milkdown-icon",e),onPointerdown:t,ref:r=>{r&&n&&(r.innerHTML=Ks.sanitize(n.trim()))}})}no.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function NB(n){const{dragPreviewRef:e,tableWrapperRef:t,contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a}=n,l=e.value;if(!l)return;const u=t.value;if(!u)return;const c=r.value;if(!c)return;const h=c.querySelector("tbody");if(!h)return;const f=l.querySelector("tbody");if(!f)return;const d=i.value;if(!d)return;const p=s.value;if(!p)return;const m=o.value;if(!m)return;const g=a.value;return g?{preview:l,wrapper:u,content:c,contentRoot:h,previewRoot:f,yHandle:d,xHandle:p,colHandle:m,rowHandle:g}:void 0}function PB(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function RB(n,e,t,r,i){const{width:s,height:o}=r.querySelector("tbody").getBoundingClientRect();if(n==="y"){const l=r.querySelectorAll("tr")[i];if(!l)return;t.appendChild(l.cloneNode(!0));const u=l.getBoundingClientRect().height;Object.assign(e.style,{width:`${s}px`,height:`${u}px`}),e.dataset.show="true";return}if(n==="x"){const a=r.querySelectorAll("tr");let l;Array.from(a).forEach(u=>{const c=u.children[i];if(!c)return;l===void 0&&(l=c.getBoundingClientRect().width);const h=c.parentElement.cloneNode(!1),f=c.cloneNode(!0);h.appendChild(f),t.appendChild(h)}),Object.assign(e.style,{width:`${l}px`,height:`${o}px`}),e.dataset.show="true";return}}function Hme(n,e){return t=>{_B(n,t,e,r=>{LB("y",t,r,n);const{preview:i,content:s,previewRoot:o}=r;PB(o);const{hoverIndex:a}=n,[l]=a.value;RB("y",i,o,s,l)})}}function jme(n,e){return t=>{_B(n,t,e,r=>{LB("x",t,r,n);const{preview:i,content:s,previewRoot:o}=r,{hoverIndex:a}=n,[l,u]=a.value;PB(o),RB("x",i,o,s,u)})}}function LB(n,e,t,r){const{xHandle:i,yHandle:s,colHandle:o,rowHandle:a,preview:l}=t;i.dataset.displayType=n==="y"?"indicator":"none",s.dataset.displayType=n==="x"?"indicator":"none",n==="y"?(o.dataset.show="false",uA(a)):(a.dataset.show="false",uA(o));const{hoverIndex:u,dragInfo:c}=r,[h,f]=u.value;c.value={startCoords:[e.clientX,e.clientY],startIndex:n==="y"?h:f,endIndex:n==="y"?h:f,type:n==="y"?"row":"col"},l.dataset.direction=n==="y"?"vertical":"horizontal"}function _B(n,e,t,r){const i=t?.get(Zt);if(!i?.editable)return;e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.effectAllowed="move");const s=NB(n);s&&requestAnimationFrame(()=>{r(s)})}function uA(n){var e;(e=n.querySelector(".button-group"))==null||e.setAttribute("data-show","false")}function Y3(n,e){for(let t=0;t<n.childCount;t++)if(n.child(t)===e)return t;return-1}function Wme(n,e){var t,r,i;if(e)try{const s=e.posAtCoords({left:n.clientX,top:n.clientY});if(!s)return;const o=s?.inside;if(o==null||o<0)return;const a=e.state.doc.resolve(o),l=e.state.doc.nodeAt(o);if(!l)return;const u=["table_cell","table_header"],c=["table_row","table_header_row"],h=u.includes(l.type.name)?l:(t=go(g=>u.includes(g.type.name))(a))==null?void 0:t.node,f=(r=go(g=>c.includes(g.type.name))(a))==null?void 0:r.node,d=(i=go(g=>g.type.name==="table")(a))==null?void 0:i.node;if(!h||!f||!d)return;const p=Y3(f,h);return[Y3(d,f),p]}catch{return}}function u2(n,[e,t]){const r=n.value;if(!r)return;const i=r.querySelectorAll("tr"),s=i[e];if(!s)return;const o=i[0];if(!o)return;const a=o.children[t];if(!a)return;const l=s.children[t];if(l)return{row:s,col:l,headerCol:a}}function qme(n,e,t){if(!t||!e)return;const{selection:r}=e.state;if(!(r instanceof Xt))return;const{$from:i}=r,s=Yh(i);if(!(!s||s.node!==t)){if(r.isColSelection()){const{$head:o}=r,a=o.index(o.depth-1);f8({refs:n,index:[0,a],before:l=>{var u;(u=l.querySelector(".button-group"))==null||u.setAttribute("data-show","true")}});return}if(r.isRowSelection()){const{$head:o}=r,a=go(u=>u.type.name==="table_row"||u.type.name==="table_header_row")(o);if(!a)return;const l=Y3(s.node,a.node);d8({refs:n,index:[l,0],before:u=>{var c;l>0&&((c=u.querySelector(".button-group"))==null||c.setAttribute("data-show","true"))}})}}}function f8({refs:n,index:e,before:t,after:r}){const{contentWrapperRef:i,colHandleRef:s,hoverIndex:o}=n,a=s.value;if(!a)return;o.value=e;const l=u2(i,e);if(!l)return;const{headerCol:u}=l;a.dataset.show="true",t&&t(a),$s(u,a,{placement:"top"}).then(({x:c,y:h})=>{Object.assign(a.style,{left:`${c}px`,top:`${h}px`}),r&&r(a)}).catch(console.error)}function d8({refs:n,index:e,before:t,after:r}){const{contentWrapperRef:i,rowHandleRef:s,hoverIndex:o}=n,a=s.value;if(!a)return;o.value=e;const l=u2(i,e);if(!l)return;const{row:u}=l;a.dataset.show="true",t&&t(a),$s(u,a,{placement:"left"}).then(({x:c,y:h})=>{Object.assign(a.style,{left:`${c}px`,top:`${h}px`}),r&&r(a)}).catch(console.error)}function BB(n,e,t){const r=t==="x"?"left":"top",i=t==="x"?"right":"bottom",s=n.length-1,o=n.findIndex((l,u)=>{const c=l.getBoundingClientRect(),h=c[r],f=c[i];return h<=e&&e<=f||u===s&&e>f||u===0&&e<h}),a=n[o];return a?[a,o]:void 0}function Ume(n,e){const t=n.querySelector("tr");if(!t)return;const r=Array.from(t.children);return BB(r,e,"x")}function Gme(n,e){const t=Array.from(n.querySelectorAll("tr"));return BB(t,e,"y")}function Kme(n){return Av(e=>{const t=NB(n);if(!t)return;const{preview:r,content:i,contentRoot:s,xHandle:o,yHandle:a}=t,{dragInfo:l,hoverIndex:u}=n;if(r.dataset.show==="false")return;const c=u2(n.contentWrapperRef,u.value);if(!c||!s.querySelector("tr"))return;const f=l.value;if(!f||!s.offsetParent)return;const d=s.offsetParent.offsetTop,p=s.offsetParent.offsetLeft;if(f.type==="col"){const m=c.col.getBoundingClientRect().width,{left:g,width:y}=s.getBoundingClientRect(),v=p-g,x=e.clientX+v-m/2,[k]=f.startCoords,C=k<e.clientX?"right":"left";r.style.top=`${d}px`;const w=x<g+v-20?g+v-20:x>g+y+v-m+20?g+y+v-m+20:x;r.style.left=`${w}px`;const M=Ume(s,e.clientX);if(M){const[D,A]=M,E=a.getBoundingClientRect().width,N=i.getBoundingClientRect();f.endIndex=A,$s(D,a,{placement:C==="left"?"left":"right",middleware:[Sl(C==="left"?-1*E:0)]}).then(({x:I})=>{a.dataset.show="true",Object.assign(a.style,{height:`${N.height}px`,left:`${I}px`,top:`${d}px`})}).catch(console.error)}}else if(f.type==="row"){const m=c.row.getBoundingClientRect().height,{top:g,height:y}=s.getBoundingClientRect(),v=d-g,x=e.clientY+v-m/2,[k,C]=f.startCoords,w=C<e.clientY?"down":"up",M=x<g+v-20?g+v-20:x>g+y+v-m+20?g+y+v-m+20:x;r.style.top=`${M}px`,r.style.left=`${p}px`;const D=Gme(s,e.clientY);if(D){const[A,E]=D,N=o.getBoundingClientRect().height,I=i.getBoundingClientRect();f.endIndex=E,$s(A,o,{placement:w==="up"?"top":"bottom",middleware:[Sl(w==="up"?-1*N:0)]}).then(({y:L})=>{o.dataset.show="true",Object.assign(o.style,{width:`${I.width}px`,top:`${L}px`})}).catch(console.error)}}},20)}function Xme(n,e,t){const{dragPreviewRef:r,yLineHandleRef:i,xLineHandleRef:s,dragInfo:o}=n,a=Hme(n,e),l=jme(n,e),u=()=>{const f=r.value;if(!f||f.dataset.show==="false")return;const d=f?.querySelector("tbody");for(;d?.firstChild;)d?.removeChild(d.firstChild);f&&(f.dataset.show="false")},c=()=>{var f;const d=r.value;if(!d)return;const p=i.value;if(!p)return;const m=s.value;if(!m)return;const g=o.value;if(!g||!e||d.dataset.show==="false"||!n.colHandleRef.value||!n.rowHandleRef.value||(p.dataset.show="false",m.dataset.show="false",g.startIndex===g.endIndex))return;const x=e.get(Pe),k={from:g.startIndex,to:g.endIndex,pos:((f=t?.())!=null?f:0)+1};if(g.type==="col"){x.call(wu.key,{pos:k.pos,index:g.startIndex}),x.call(gw.key,k);const C=[0,g.endIndex];f8({refs:n,index:C})}else{x.call(xu.key,{pos:k.pos,index:g.startIndex}),x.call(mw.key,k);const C=[g.endIndex,0];d8({refs:n,index:C})}requestAnimationFrame(()=>{e.get(Zt).focus()})},h=Kme(n);return ko(()=>{window.addEventListener("dragover",h),window.addEventListener("dragend",u),window.addEventListener("drop",c)}),Q0(()=>{window.removeEventListener("dragover",h),window.removeEventListener("dragend",u),window.removeEventListener("drop",c)}),{dragRow:a,dragCol:l}}function Yme(n,e,t){const{xLineHandleRef:r,contentWrapperRef:i,colHandleRef:s,rowHandleRef:o,hoverIndex:a,lineHoverIndex:l}=n;return{onAddRow:()=>{var m,g,y;if(!e)return;const v=r.value;if(!v)return;const[x]=l.value;if(x<0||!e.get(Zt).editable)return;const k=Array.from((g=(m=i.value)==null?void 0:m.querySelectorAll("tr"))!=null?g:[]),C=e.get(Pe),w=((y=t?.())!=null?y:0)+1;k.length===x?(C.call(xu.key,{pos:w,index:x-1}),C.call(ww.key)):(C.call(xu.key,{pos:w,index:x}),C.call(xw.key)),C.call(xu.key,{pos:w,index:x}),v.dataset.show="false"},onAddCol:()=>{var m,g,y,v;if(!e||!r.value)return;const[k,C]=l.value;if(C<0||!e.get(Zt).editable)return;const w=Array.from((y=(g=(m=i.value)==null?void 0:m.querySelector("tr"))==null?void 0:g.children)!=null?y:[]),M=e.get(Pe),D=((v=t?.())!=null?v:0)+1;w.length===C?(M.call(wu.key,{pos:D,index:C-1}),M.call(bw.key)):(M.call(wu.key,{pos:D,index:C}),M.call(vw.key)),M.call(wu.key,{pos:D,index:C})},selectCol:()=>{var m,g;if(!e)return;const[y,v]=a.value,x=e.get(Pe),k=((m=t?.())!=null?m:0)+1;x.call(wu.key,{pos:k,index:v});const C=(g=s.value)==null?void 0:g.querySelector(".button-group");C&&(C.dataset.show=C.dataset.show==="true"?"false":"true")},selectRow:()=>{var m,g;if(!e)return;const[y,v]=a.value,x=e.get(Pe),k=((m=t?.())!=null?m:0)+1;x.call(xu.key,{pos:k,index:y});const C=(g=o.value)==null?void 0:g.querySelector(".button-group");C&&y>0&&(C.dataset.show=C.dataset.show==="true"?"false":"true")},deleteSelected:m=>{if(!e||!e.get(Zt).editable)return;m.preventDefault(),m.stopPropagation(),e.get(Pe).call(yw.key),requestAnimationFrame(()=>{e.get(Zt).focus()})},onAlign:m=>g=>{if(!e||!e.get(Zt).editable)return;g.preventDefault(),g.stopPropagation(),e.get(Pe).call(Sw.key,m),requestAnimationFrame(()=>{e.get(Zt).focus()})}}}function Jme(n,e){return Av(t=>{if(!e?.editable)return;const{contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:a,hoverIndex:l,lineHoverIndex:u}=n,c=i.value;if(!c)return;const h=s.value;if(!h)return;const f=r.value;if(!f)return;const d=a.value;if(!d)return;const p=o.value;if(!p)return;const m=Wme(t,e);if(!m)return;const g=u2(r,m);if(!g)return;const[y,v]=m,x=g.col.getBoundingClientRect(),k=Math.abs(t.clientX-x.left)<8,C=Math.abs(x.right-t.clientX)<8,w=Math.abs(t.clientY-x.top)<8,M=Math.abs(x.bottom-t.clientY)<8,D=k||C||w||M,A=d.querySelector(".button-group"),E=p.querySelector(".button-group");if(A&&(A.dataset.show="false"),E&&(E.dataset.show="false"),D){const N=f.getBoundingClientRect();d.dataset.show="false",p.dataset.show="false",h.dataset.displayType="tool",c.dataset.displayType="tool";const I=c.getBoundingClientRect().width,L=h.getBoundingClientRect().height;k||C?(u.value[1]=k?v:v+1,$s(g.col,c,{placement:k?"left":"right",middleware:[Sl(k?-1*I:0)]}).then(({x:F})=>{c.dataset.show="true",Object.assign(c.style,{height:`${N.height}px`,left:`${F}px`})}).catch(console.error)):c.dataset.show="false",m[0]!==0&&(w||M)?(u.value[0]=w?y:y+1,$s(g.row,h,{placement:w?"top":"bottom",middleware:[Sl(w?-1*L:0)]}).then(({y:F})=>{h.dataset.show="true",Object.assign(h.style,{width:`${N.width}px`,top:`${F}px`})}).catch(console.error)):h.dataset.show="false";return}u.value=[-1,-1],c.dataset.show="false",h.dataset.show="false",d.dataset.show="true",p.dataset.show="true",d8({refs:n,index:m}),f8({refs:n,index:m}),l.value=m},20)}function Zme(n){return()=>{const{rowHandleRef:e,colHandleRef:t,yLineHandleRef:r,xLineHandleRef:i}=n;setTimeout(()=>{const s=e.value;if(!s)return;const o=t.value;if(!o)return;const a=r.value;if(!a)return;const l=i.value;l&&(s.dataset.show="false",o.dataset.show="false",a.dataset.show="false",l.dataset.show="false")},200)}}function Qme(n,e){const t=Jme(n,e),r=Zme(n);return{pointerMove:t,pointerLeave:r}}const e1e=He({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:n,node:e,ctx:t,getPos:r,config:i,onMount:s}){const o=le(),a=I=>{I!=null&&(I instanceof HTMLElement?(o.value=I,s(I)):o.value=void 0)},l=le(),u=le(),c=le(),h=le(),f=le(),d=le(),p=le([0,0]),m=le([-1,-1]),g=le(),y={dragPreviewRef:d,tableWrapperRef:f,contentWrapperRef:o,yLineHandleRef:h,xLineHandleRef:c,colHandleRef:l,rowHandleRef:u,hoverIndex:p,lineHoverIndex:m,dragInfo:g},{pointerLeave:v,pointerMove:x}=Qme(y,n),{dragRow:k,dragCol:C}=Xme(y,t,r),{onAddRow:w,onAddCol:M,selectCol:D,selectRow:A,deleteSelected:E,onAlign:N}=Yme(y,t,r);return ko(()=>{requestAnimationFrame(()=>{n.editable&&qme(y,n,e.value)})}),()=>X("div",{onDragstart:I=>I.preventDefault(),onDragover:I=>I.preventDefault(),onDragleave:I=>I.preventDefault(),onPointermove:x,onPointerleave:v},X("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:C,onClick:D,onPointerdown:I=>I.stopPropagation(),onPointermove:I=>I.stopPropagation(),ref:l},X(no,{icon:i.renderButton("col_drag_handle")}),X("div",{"data-show":"false",class:"button-group",onPointermove:I=>I.stopPropagation()},X("button",{type:"button",onPointerdown:N("left")},X(no,{icon:i.renderButton("align_col_left")})),X("button",{type:"button",onPointerdown:N("center")},X(no,{icon:i.renderButton("align_col_center")})),X("button",{type:"button",onPointerdown:N("right")},X(no,{icon:i.renderButton("align_col_right")})),X("button",{type:"button",onPointerdown:E},X(no,{icon:i.renderButton("delete_col")})))),X("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:k,onClick:A,onPointerdown:I=>I.stopPropagation(),onPointermove:I=>I.stopPropagation(),ref:u},X(no,{icon:i.renderButton("row_drag_handle")}),X("div",{"data-show":"false",class:"button-group",onPointermove:I=>I.stopPropagation()},X("button",{type:"button",onPointerdown:E},X(no,{icon:i.renderButton("delete_row")})))),X("div",{class:"table-wrapper",ref:f},X("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:d},X("table",null,X("tbody",null))),X("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:I=>I.stopPropagation(),ref:c},X("button",{type:"button",onClick:w,class:"add-button"},X(no,{icon:i.renderButton("add_row")}))),X("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:I=>I.stopPropagation(),ref:h},X("button",{type:"button",onClick:M,class:"add-button"},X(no,{icon:i.renderButton("add_col")}))),X("table",{ref:a,class:"children"})))}});var FB=n=>{throw TypeError(n)},t1e=(n,e,t)=>e.has(n)||FB("Cannot "+t),n1e=(n,e,t)=>e.has(n)?FB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),r1e=(n,e,t)=>(t1e(n,e,"access private method"),t),J3,$B;class i1e{constructor(e,t,r,i){this.ctx=e,this.node=t,this.view=r,this.getPos=i,n1e(this,J3);const s=document.createElement("div");s.className="milkdown-table-block";const o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=ih(t);const a=Ws(e1e,{view:r,ctx:e,getPos:i,config:e.get(l2.key),onMount:l=>{l.appendChild(o)},node:this.nodeRef});a.mount(s),this.app=a,this.dom=s}update(e){return e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)?!1:(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if(e.type==="drop"||e.type.startsWith("drag"))return!0;if(e.type==="mousedown"||e.type==="pointerdown"){if(e.target instanceof Element&&e.target.closest("button"))return!0;const t=e.target;if(t instanceof HTMLElement&&(t.closest("th")||t.closest("td"))){const r=e;return r1e(this,J3,$B).call(this,r)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}J3=new WeakSet;$B=function(n){const e=this.view;if(!e.editable)return!1;const{state:t,dispatch:r}=e,i=e.posAtCoords({left:n.clientX,top:n.clientY});if(!i)return!1;const s=t.doc.resolve(i.inside),o=go(u=>u.type.name==="table_cell"||u.type.name==="table_header")(s);if(!o)return!1;if(t.selection instanceof Be){const u=go(c=>c.type.name==="table_cell"||c.type.name==="table_header")(t.selection.$from);if(u?.node===o.node)return!1}const{from:a}=o,l=Ye.create(t.doc,a+1);return t.selection.eq(l)?!1:(t.selection instanceof Xt?setTimeout(()=>{r(t.tr.setSelection(l).scrollIntoView())},20):requestAnimationFrame(()=>{r(t.tr.setSelection(l).scrollIntoView())}),!0)};const zB=Sp(ac.node,n=>(e,t,r)=>new i1e(n,e,t,r));DB(zB,{displayName:"NodeView<table-block>",group:"TableBlock"});const s1e=[l2,zB];function Z3(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:Z3(n[0]);const e=n.content;return e?Z3(e):n.type==="text"}const VB=ir(n=>{const e=n.get(yo);n.update(Zc,i=>({...i,editable:i.editable??(()=>!0)}));const t=new En("MILKDOWN_CLIPBOARD");return new gn({key:t,props:{handlePaste:(i,s)=>{const o=n.get(Zd),a=i.props.editable?.(i.state),{clipboardData:l}=s;if(!a||!l||i.state.selection.$from.node().type.spec.code)return!1;const c=l.getData("text/plain"),h=l.getData("vscode-editor-data");if(h){const v=JSON.parse(h)?.mode;if(c&&v){const{tr:x}=i.state,k=IQ("code_block",e);return x.replaceSelectionWith(k.create({language:v})).setSelection(Be.near(x.doc.resolve(Math.max(0,x.selection.from-2)))).insertText(c.replace(/\r\n?/g,`
`)),i.dispatch(x),!0}}const f=l.getData("text/html");if(f.length===0&&c.length===0)return!1;const d=Yu.fromSchema(e);let p;if(f.length===0){const y=o(c);if(!y||typeof y=="string")return!1;p=nc.fromSchema(e).serializeFragment(y.content)}else{const y=document.createElement("template");y.innerHTML=f,p=y.content.cloneNode(!0),y.remove()}const m=d.parseSlice(p),g=MQ(m);return g?(i.dispatch(i.state.tr.replaceSelectionWith(g,!0)),!0):(i.dispatch(i.state.tr.replaceSelection(m)),!0)},clipboardTextSerializer:i=>{const s=n.get(Jc);if(Z3(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const a=e.topNodeType.createAndFill(void 0,i.content);return a?s(a):""}}})});VB.meta={displayName:"Prose<clipboard>",package:"@milkdown/plugin-clipboard"};function nf(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const p8=st("Undo",()=>()=>Gv);nf(p8,{displayName:"Command<undo>"});const m8=st("Redo",()=>()=>Mh);nf(m8,{displayName:"Command<redo>"});const g8=Vt({},"historyProviderConfig");nf(g8,{displayName:"Ctx<historyProviderConfig>"});const HB=ir(n=>hhe(n.get(g8.key)));nf(HB,{displayName:"Ctx<historyProviderPlugin>"});const y8=Ti("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(Pe);return()=>e.call(p8.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(Pe);return()=>e.call(m8.key)}}});nf(y8.ctx,{displayName:"KeymapCtx<history>"});nf(y8.shortcuts,{displayName:"Keymap<history>"});const o1e=[g8,HB,y8,p8,m8].flat();function a1e(n,e){const{doc:t,selection:r}=n;if(!t||!r||!(r instanceof Be||r instanceof xi))return n;const{to:i}=r,s=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return n.insertText(s,i)}const c2=Vt({type:"space",size:2},"indentConfig");c2.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const jB=rR(n=>({Tab:(e,t)=>{const r=n.get(c2.key),{tr:i}=e,s=a1e(i,r);return s.docChanged?(t?.(s),!0):!1}}));jB.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const l1e=[c2,jB];class WB{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const K0=Ot(new WB,"listener"),u1e=new En("MILKDOWN_LISTENER"),v8=n=>(n.inject(K0,new WB),async()=>{await n.wait(Du);const e=n.get(K0),{listeners:t}=e;t.beforeMount.forEach(l=>l(n)),await n.wait(Qd);const r=n.get(Jc);let i=null,s=null,o=null;const a=new gn({key:u1e,view:()=>({destroy:()=>{t.destroy.forEach(l=>l(n))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(l=>l(n)),!1),blur:()=>(t.blur.forEach(l=>l(n)),!1)}},state:{init:(l,u)=>{i=u.doc,s=r(u.doc)},apply:l=>{const u=l.selection;return(!o&&u||o&&!u.eq(o))&&(t.selectionUpdated.forEach(h=>{h(n,u,o)}),o=u),!l.docChanged||l.getMeta("addToHistory")===!1?void 0:rw(()=>{const{doc:h}=l;if(t.updated.length>0&&i&&!i.eq(h)&&t.updated.forEach(f=>{f(n,h,i)}),t.markdownUpdated.length>0&&i&&!i.eq(h)){const f=r(h);t.markdownUpdated.forEach(d=>{d(n,f,s)}),s=f}i=h},200)()}}});n.update(Il,l=>l.concat(a)),await n.wait(H1),t.mounted.forEach(l=>l(n))});v8.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const b8=Vt({shouldAppend:n=>!(!n||["heading","paragraph"].includes(n.type.name)),getNode:n=>n.schema.nodes.paragraph.create()},"trailingConfig");b8.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const qB=ir(n=>{const e=new En("MILKDOWN_TRAILING"),{shouldAppend:t,getNode:r}=n.get(b8.key),i=new gn({key:e,state:{init:(s,o)=>{const a=o.tr.doc.lastChild;return t(a,o)},apply:(s,o,a,l)=>{if(!s.docChanged)return o;const u=s.doc.lastChild;return t(u,l)}},appendTransaction:(s,o,a)=>{const{doc:l,tr:u}=a,c=r?.(a),h=i.getState(a),f=l.content.size;if(!(!h||!c))return u.insert(f,c)}});return i});qB.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const c1e=[b8,qB];var zt=(n=>(n.CodeMirror="code-mirror",n.ListItem="list-item",n.LinkTooltip="link-tooltip",n.Cursor="cursor",n.ImageBlock="image-block",n.BlockEdit="block-edit",n.Toolbar="toolbar",n.Placeholder="placeholder",n.Table="table",n.Latex="latex",n))(zt||{});const h1e={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},f1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,d1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,p1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,m1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,g1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,y1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,v1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,b1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,x1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,UB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,GB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,KB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,x8=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,XB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,w1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,cA=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,w8=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,S1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,k1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,C1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,T1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,E1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,A1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,Q3=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,M1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,O1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,I1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,D1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,e7=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,N1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,t7=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,YB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,P1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,R1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,L1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,_1e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,JB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,ZB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,B1e={[zt.CodeMirror]:{theme:tZ,languages:WJ,expandIcon:UB,searchIcon:YB,clearSearchIcon:GB,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:n=>n?w8:ZB}},F1e=Ot([],"FeaturesCtx"),$1e=Ot({},"CrepeCtx");function z1e(n){return n.get("CrepeCtx")}function h2(n){return n.use("FeaturesCtx")}function Ro(n){return e=>{h2(e).update(t=>t.includes(n)?t:[...t,n])}}function QB(n){return n.$from.parent.type.name==="code_block"}function eF(n){var e;const t=(e=n.$from.node(n.$from.depth-1))==null?void 0:e.type;return t?.name==="list_item"}var tF=n=>{throw TypeError(n)},nF=(n,e,t)=>e.has(n)||tF("Cannot "+t),_f=(n,e,t)=>(nF(n,e,"read from private field"),t?t.call(n):e.get(n)),hA=(n,e,t)=>e.has(n)?tF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),V1e=(n,e,t,r)=>(nF(n,e,"write to private field"),e.set(n,t),t),Lc,og;class rF{constructor(){hA(this,Lc,[]),this.clear=()=>(V1e(this,Lc,[]),this),hA(this,og,e=>{const t={group:e,addItem:(r,i)=>{const s={...i,key:r};return e.items.push(s),t},clear:()=>(e.items=[],t)};return t}),this.addGroup=(e,t)=>{const i={key:e,label:t,items:[]};return _f(this,Lc).push(i),_f(this,og).call(this,i)},this.getGroup=e=>{const t=_f(this,Lc).find(r=>r.key===e);if(!t)throw new Error(`Group with key ${e} not found`);return _f(this,og).call(this,t)},this.build=()=>_f(this,Lc)}}Lc=new WeakMap;og=new WeakMap;function H1e(n,e,t){var r,i,s,o,a,l,u,c,h,f,d,p,m,g,y,v,x,k,C,w,M,D,A,E,N,I,L,F,W,G,ee,de,ge,R,fe,xe,P,$e,Z,we,Se,Ie,Je,Ct,tn,at,It,vt,ln,vn,Ht,Kn,Xn,$n,Tr,Ai,ii,Er,hr,J,he,qe,H,j,U,ie,ye,Ne,je,Ze,Dt,Le,De,ze,mt,ft,Yn,Pa,bn,si,Fp,rf,cc,sf,of,$p,Mi,Lo,af,lf,hc,uf,Xi,cf,hf,ff,df,zp,Ve,V,ce,Re,jt,Jn,An,fr,Yi,Ra,fc,Zn,pf,mf,k8,C8,T8,E8,A8,M8,O8;const dc=t&&h2(t).get(),gF=dc?.includes(zt.Latex),yF=dc?.includes(zt.ImageBlock),vF=dc?.includes(zt.Table),gf=new rF;if(e?.textGroup!==null){const Ft=gf.addGroup("text",(i=(r=e?.textGroup)==null?void 0:r.label)!=null?i:"Text");((s=e?.textGroup)==null?void 0:s.text)!==null&&Ft.addItem("text",{label:(l=(a=(o=e?.textGroup)==null?void 0:o.text)==null?void 0:a.label)!=null?l:"Text",icon:(h=(c=(u=e?.textGroup)==null?void 0:u.text)==null?void 0:c.icon)!=null?h:L1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Mo.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t})}}),((f=e?.textGroup)==null?void 0:f.h1)!==null&&Ft.addItem("h1",{label:(m=(p=(d=e?.textGroup)==null?void 0:d.h1)==null?void 0:p.label)!=null?m:"Heading 1",icon:(v=(y=(g=e?.textGroup)==null?void 0:g.h1)==null?void 0:y.icon)!=null?v:S1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:1}})}}),((x=e?.textGroup)==null?void 0:x.h2)!==null&&Ft.addItem("h2",{label:(w=(C=(k=e?.textGroup)==null?void 0:k.h2)==null?void 0:C.label)!=null?w:"Heading 2",icon:(A=(D=(M=e?.textGroup)==null?void 0:M.h2)==null?void 0:D.icon)!=null?A:k1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:2}})}}),((E=e?.textGroup)==null?void 0:E.h3)!==null&&Ft.addItem("h3",{label:(L=(I=(N=e?.textGroup)==null?void 0:N.h3)==null?void 0:I.label)!=null?L:"Heading 3",icon:(G=(W=(F=e?.textGroup)==null?void 0:F.h3)==null?void 0:W.icon)!=null?G:C1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:3}})}}),((ee=e?.textGroup)==null?void 0:ee.h4)!==null&&Ft.addItem("h4",{label:(R=(ge=(de=e?.textGroup)==null?void 0:de.h4)==null?void 0:ge.label)!=null?R:"Heading 4",icon:(P=(xe=(fe=e?.textGroup)==null?void 0:fe.h4)==null?void 0:xe.icon)!=null?P:T1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:4}})}}),(($e=e?.textGroup)==null?void 0:$e.h5)!==null&&Ft.addItem("h5",{label:(Se=(we=(Z=e?.textGroup)==null?void 0:Z.h5)==null?void 0:we.label)!=null?Se:"Heading 5",icon:(Ct=(Je=(Ie=e?.textGroup)==null?void 0:Ie.h5)==null?void 0:Je.icon)!=null?Ct:E1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:5}})}}),((tn=e?.textGroup)==null?void 0:tn.h6)!==null&&Ft.addItem("h6",{label:(vt=(It=(at=e?.textGroup)==null?void 0:at.h6)==null?void 0:It.label)!=null?vt:"Heading 6",icon:(Ht=(vn=(ln=e?.textGroup)==null?void 0:ln.h6)==null?void 0:vn.icon)!=null?Ht:A1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=$i.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t,attrs:{level:6}})}}),((Kn=e?.textGroup)==null?void 0:Kn.quote)!==null&&Ft.addItem("quote",{label:(Tr=($n=(Xn=e?.textGroup)==null?void 0:Xn.quote)==null?void 0:$n.label)!=null?Tr:"Quote",icon:(Er=(ii=(Ai=e?.textGroup)==null?void 0:Ai.quote)==null?void 0:ii.icon)!=null?Er:N1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Gh.type(Ue);Ke.call(dr.key),Ke.call(od.key,{nodeType:_t})}}),((hr=e?.textGroup)==null?void 0:hr.divider)!==null&&Ft.addItem("divider",{label:(qe=(he=(J=e?.textGroup)==null?void 0:J.divider)==null?void 0:he.label)!=null?qe:"Divider",icon:(U=(j=(H=e?.textGroup)==null?void 0:H.divider)==null?void 0:j.icon)!=null?U:w1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Kh.type(Ue);Ke.call(dr.key),Ke.call(ad.key,{nodeType:_t})}})}if(e?.listGroup!==null){const Ft=gf.addGroup("list",(ye=(ie=e?.listGroup)==null?void 0:ie.label)!=null?ye:"List");((Ne=e?.listGroup)==null?void 0:Ne.bulletList)!==null&&Ft.addItem("bullet-list",{label:(Dt=(Ze=(je=e?.listGroup)==null?void 0:je.bulletList)==null?void 0:Ze.label)!=null?Dt:"Bullet List",icon:(ze=(De=(Le=e?.listGroup)==null?void 0:Le.bulletList)==null?void 0:De.icon)!=null?ze:y1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=sc.type(Ue);Ke.call(dr.key),Ke.call(od.key,{nodeType:_t})}}),((mt=e?.listGroup)==null?void 0:mt.orderedList)!==null&&Ft.addItem("ordered-list",{label:(Pa=(Yn=(ft=e?.listGroup)==null?void 0:ft.orderedList)==null?void 0:Yn.label)!=null?Pa:"Ordered List",icon:(Fp=(si=(bn=e?.listGroup)==null?void 0:bn.orderedList)==null?void 0:si.icon)!=null?Fp:D1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=oc.type(Ue);Ke.call(dr.key),Ke.call(od.key,{nodeType:_t})}}),((rf=e?.listGroup)==null?void 0:rf.taskList)!==null&&Ft.addItem("task-list",{label:(of=(sf=(cc=e?.listGroup)==null?void 0:cc.taskList)==null?void 0:sf.label)!=null?of:"Task List",icon:(Lo=(Mi=($p=e?.listGroup)==null?void 0:$p.taskList)==null?void 0:Mi.icon)!=null?Lo:_1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Gs.type(Ue);Ke.call(dr.key),Ke.call(od.key,{nodeType:_t,attrs:{checked:!1}})}})}if(e?.advancedGroup!==null){const Ft=gf.addGroup("advanced",(lf=(af=e?.advancedGroup)==null?void 0:af.label)!=null?lf:"Advanced");((hc=e?.advancedGroup)==null?void 0:hc.image)!==null&&yF&&Ft.addItem("image",{label:(cf=(Xi=(uf=e?.advancedGroup)==null?void 0:uf.image)==null?void 0:Xi.label)!=null?cf:"Image",icon:(df=(ff=(hf=e?.advancedGroup)==null?void 0:hf.image)==null?void 0:ff.icon)!=null?df:Q3,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Fv.type(Ue);Ke.call(dr.key),Ke.call(ad.key,{nodeType:_t})}}),((zp=e?.advancedGroup)==null?void 0:zp.codeBlock)!==null&&Ft.addItem("code",{label:(ce=(V=(Ve=e?.advancedGroup)==null?void 0:Ve.codeBlock)==null?void 0:V.label)!=null?ce:"Code",icon:(Jn=(jt=(Re=e?.advancedGroup)==null?void 0:Re.codeBlock)==null?void 0:jt.icon)!=null?Jn:KB,onRun:Ue=>{const Ke=Ue.get(Pe),_t=So.type(Ue);Ke.call(dr.key),Ke.call(jo.key,{nodeType:_t})}}),((An=e?.advancedGroup)==null?void 0:An.table)!==null&&vF&&Ft.addItem("table",{label:(Ra=(Yi=(fr=e?.advancedGroup)==null?void 0:fr.table)==null?void 0:Yi.label)!=null?Ra:"Table",icon:(pf=(Zn=(fc=e?.advancedGroup)==null?void 0:fc.table)==null?void 0:Zn.icon)!=null?pf:R1e,onRun:Ue=>{const Ke=Ue.get(Pe),_t=Ue.get(Zt);Ke.call(dr.key);const{from:bF}=_t.state.selection;Ke.call(ad.key,{nodeType:hw(Ue,3,3)}),Ke.call(kR.key,{pos:bF})}}),((mf=e?.advancedGroup)==null?void 0:mf.math)!==null&&gF&&Ft.addItem("math",{label:(T8=(C8=(k8=e?.advancedGroup)==null?void 0:k8.math)==null?void 0:C8.label)!=null?T8:"Math",icon:(M8=(A8=(E8=e?.advancedGroup)==null?void 0:E8.math)==null?void 0:A8.icon)!=null?M8:JB,onRun:Ue=>{const Ke=Ue.get(Pe),_t=So.type(Ue);Ke.call(dr.key),Ke.call(ad.key,{nodeType:_t,attrs:{language:"LaTex"}})}})}(O8=e?.buildMenu)==null||O8.call(e,gf);let yf=gf.build();n&&(yf=yf.map(Ft=>{const Ue=Ft.items.filter(Ke=>Ke.label.toLowerCase().includes(n.toLowerCase()));return{...Ft,items:Ue}}).filter(Ft=>Ft.items.length>0));const I8=yf.flatMap(Ft=>Ft.items);return I8.forEach((Ft,Ue)=>{Object.assign(Ft,{index:Ue})}),yf.reduce((Ft,Ue)=>{const Ke=Ft+Ue.items.length;return Object.assign(Ue,{range:[Ft,Ke]}),Ke},0),{groups:yf,size:I8.length}}const j1e=He({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:n,show:e,filter:t,hide:r,config:i}){const s=le(),o=Te(()=>H1e(t.value,i,n)),a=le(0),l=le({x:-999,y:-999}),u=m=>{const{x:g,y}=m;l.value={x:g,y}};oa([o,e],()=>{const{size:m}=o.value;m===0&&e.value?r():a.value>=m&&(a.value=0)});const c=(m,g)=>{const y=a.value,v=typeof m=="function"?m(y):m;g?.(v),a.value=v},h=m=>{var g,y;const v=(g=s.value)==null?void 0:g.querySelector(`[data-index="${m}"]`),x=(y=s.value)==null?void 0:y.querySelector(".menu-groups");!v||!x||(x.scrollTop=v.offsetTop-x.offsetTop)},f=m=>{const g=o.value.groups.flatMap(y=>y.items).at(m);g&&n&&g.onRun(n),r()},d=m=>{const{size:g,groups:y}=o.value;if(m.key==="Escape"){m.preventDefault(),r?.();return}if(m.key==="ArrowDown")return m.preventDefault(),c(v=>v<g-1?v+1:v,h);if(m.key==="ArrowUp")return m.preventDefault(),c(v=>v<=0?v:v-1,h);if(m.key==="ArrowLeft")return m.preventDefault(),c(v=>{const x=y.find(C=>C.range[0]<=v&&C.range[1]>v);if(!x)return v;const k=y[y.indexOf(x)-1];return k?k.range[1]-1:v},h);if(m.key==="ArrowRight")return m.preventDefault(),c(v=>{const x=y.find(C=>C.range[0]<=v&&C.range[1]>v);if(!x)return v;const k=y[y.indexOf(x)+1];return k?k.range[0]:v},h);m.key==="Enter"&&(m.preventDefault(),f(a.value))},p=m=>g=>{const y=l.value;if(!y)return;const{x:v,y:x}=g;v===y.x&&x===y.y||c(m)};return Rh(()=>{e.value?window.addEventListener("keydown",d,{capture:!0}):window.removeEventListener("keydown",d,{capture:!0})}),Q0(()=>{window.removeEventListener("keydown",d,{capture:!0})}),()=>X("div",{ref:s,onPointerdown:m=>m.preventDefault()},X("nav",{class:"tab-group"},X("ul",null,o.value.groups.map(m=>X("li",{key:m.key,onPointerdown:()=>c(m.range[0],h),class:a.value>=m.range[0]&&a.value<m.range[1]?"selected":""},m.label)))),X("div",{class:"menu-groups",onPointermove:u},o.value.groups.map(m=>X("div",{key:m.key,class:"menu-group"},X("h6",null,m.label),X("ul",null,m.items.map(g=>X("li",{key:g.key,"data-index":g.index,class:a.value===g.index?"hover":"",onPointerenter:p(g.index),onPointerdown:()=>{var y,v;(v=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||v.classList.add("active")},onPointerup:()=>{var y,v;(v=(y=s.value)==null?void 0:y.querySelector(`[data-index="${g.index}"]`))==null||v.classList.remove("active"),f(g.index)}},X(Ah,{icon:g.icon}),X("span",null,g.label))))))))}});var iF=n=>{throw TypeError(n)},sF=(n,e,t)=>e.has(n)||iF("Cannot "+t),As=(n,e,t)=>(sF(n,e,"read from private field"),t?t.call(n):e.get(n)),Bf=(n,e,t)=>e.has(n)?iF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),eu=(n,e,t,r)=>(sF(n,e,"write to private field"),e.set(n,t),t),yd,ag,lg,Uo,_c;const oF=aoe("CREPE_MENU"),S8=Vt({show:()=>{},hide:()=>{}},"menuAPICtx");function W1e(n,e){n.set(oF.key,{view:t=>new q1e(n,t,e)})}class q1e{constructor(e,t,r){Bf(this,yd),Bf(this,ag),Bf(this,lg),Bf(this,Uo),Bf(this,_c,null),this.update=c=>{As(this,Uo).update(c)},this.show=c=>{eu(this,_c,c),As(this,lg).value="",As(this,Uo).show()},this.hide=()=>{eu(this,_c,null),As(this,Uo).hide()},this.destroy=()=>{As(this,Uo).destroy(),As(this,ag).unmount(),As(this,yd).remove()};const i=document.createElement("div");i.classList.add("milkdown-slash-menu");const s=le(!1),o=le("");eu(this,lg,o);const a=this.hide,l=Ws(j1e,{ctx:e,config:r,show:s,filter:o,hide:a});eu(this,ag,l),l.mount(i),eu(this,yd,i);const u=this;eu(this,Uo,new loe({content:As(this,yd),debounce:20,shouldShow(c){if(QB(c.state.selection)||eF(c.state.selection))return!1;const h=this.getContent(c,d=>["paragraph","heading"].includes(d.type.name));if(h==null||!U1e(c.state.selection))return!1;const f=As(u,_c);if(o.value=h.startsWith("/")?h.slice(1):h,typeof f=="number"){const d=c.state.doc.nodeSize-2,p=Math.min(f,d);return c.state.doc.resolve(p).node()!==c.state.doc.resolve(c.state.selection.from).node()?(eu(u,_c,null),!1):!0}return!!h.startsWith("/")},offset:10})),As(this,Uo).onShow=()=>{s.value=!0},As(this,Uo).onHide=()=>{s.value=!1},this.update(t),e.set(S8.key,{show:c=>this.show(c),hide:()=>this.hide()})}}yd=new WeakMap;ag=new WeakMap;lg=new WeakMap;Uo=new WeakMap;_c=new WeakMap;function U1e(n){if(!(n instanceof Be))return!1;const{$head:e}=n,t=e.parent;return e.parentOffset===t.content.size}const G1e=He({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(n){const e=le();return()=>X(er,null,X("div",{ref:e,class:"operation-item",onPointerdown:t=>{var r;t.preventDefault(),t.stopPropagation(),(r=e.value)==null||r.classList.add("active")},onPointerup:t=>{var r;t.preventDefault(),t.stopPropagation(),(r=e.value)==null||r.classList.remove("active"),n.onAdd()}},X(Ah,{icon:n.addIcon})),X("div",{class:"operation-item"},X(Ah,{icon:n.handleIcon})))}});var aF=n=>{throw TypeError(n)},lF=(n,e,t)=>e.has(n)||aF("Cannot "+t),tu=(n,e,t)=>(lF(n,e,"read from private field"),t?t.call(n):e.get(n)),Gm=(n,e,t)=>e.has(n)?aF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Km=(n,e,t,r)=>(lF(n,e,"write to private field"),e.set(n,t),t),ug,lu,cg,hg;class K1e{constructor(e,t){Gm(this,ug),Gm(this,lu),Gm(this,cg),Gm(this,hg),this.update=()=>{tu(this,lu).update()},this.destroy=()=>{tu(this,lu).destroy(),tu(this,ug).remove(),tu(this,cg).unmount()},this.onAdd=()=>{const u=tu(this,hg),c=u.get(Zt);c.hasFocus()||c.focus();const{state:h,dispatch:f}=c,d=tu(this,lu).active;if(!d)return;const m=d.$pos.pos+d.node.nodeSize;let g=h.tr.insert(m,Mo.type(u).create());g=g.setSelection(Be.near(g.doc.resolve(m))),f(g.scrollIntoView()),tu(this,lu).hide(),u.get(S8.key).show(g.selection.from)};var r,i,s;Km(this,hg,e);const o=document.createElement("div");o.classList.add("milkdown-block-handle");const a=Ws(G1e,{onAdd:this.onAdd,addIcon:(r=t?.handleAddIcon)!=null?r:e7,handleIcon:(i=t?.handleDragIcon)!=null?i:I1e});a.mount(o),Km(this,cg,a),Km(this,ug,o);const l=(s=t?.blockHandle)!=null?s:{};Km(this,lu,new Pse({ctx:e,content:o,getOffset:()=>16,getPlacement:({active:u,blockDom:c})=>{if(u.node.type.name==="heading")return"left";let h=0;u.node.descendants(k=>{h+=k.childCount});const f=u.el,d=f.getBoundingClientRect(),p=c.getBoundingClientRect(),m=window.getComputedStyle(f),g=Number.parseInt(m.paddingTop,10)||0,y=Number.parseInt(m.paddingBottom,10)||0,v=d.height-g-y,x=p.height;return h>2||x<v?"left-start":"left"},...l})),this.update()}}ug=new WeakMap;lu=new WeakMap;cg=new WeakMap;hg=new WeakMap;function X1e(n,e){n.set(Mv.key,{filterNodes:t=>!go(i=>["table","blockquote","math_inline"].includes(i.type.name))(t)}),n.set(Dv.key,{view:()=>new K1e(n,e)})}const Y1e=(n,e)=>{n.config(Ro(zt.BlockEdit)).config(t=>X1e(t,e)).config(t=>W1e(t,e)).use(S8).use(Dv).use(oF)},J1e=(n,e={})=>{n.config(Ro(zt.CodeMirror)).config(t=>{const{languages:r=[],theme:i}=e,s=[jh.of(GL.concat(nhe)),hde];i&&s.push(i),e.extensions&&s.push(...e.extensions),t.update(Dp.key,o=>({extensions:s,languages:r,expandIcon:e.expandIcon||UB,searchIcon:e.searchIcon||YB,clearSearchIcon:e.clearSearchIcon||GB,searchPlaceholder:e.searchPlaceholder||"Search language",copyText:e.copyText||"Copy",copyIcon:e.copyIcon||XB,onCopy:e.onCopy||(()=>{}),noResultText:e.noResultText||"No result",renderLanguage:e.renderLanguage||o.renderLanguage,renderPreview:e.renderPreview||o.renderPreview,previewToggleButton:a=>{var l,u;const c=((l=e.previewToggleIcon)==null?void 0:l.call(e,a))||(a?w8:ZB),h=((u=e.previewToggleText)==null?void 0:u.call(e,a))||(a?"Edit":"Hide");return[c,h].map(f=>f.trim()).join(" ")},previewLabel:e.previewLabel||o.previewLabel}))}).use(Ehe)},Z1e=(n,e)=>{if(n.config(Ro(zt.Cursor)).config(r=>{r.update(Xv.key,()=>{var i,s;return{class:"crepe-drop-cursor",width:(i=e?.width)!=null?i:4,color:(s=e?.color)!=null?s:!1}})}).use(wde),e?.virtual===!1)return;const t=Sde();n.use(ir(()=>t))},Q1e=(n,e)=>{n.config(Ro(zt.ImageBlock)).config(t=>{t.update(Yv.key,r=>{var i,s,o,a,l,u;return{uploadButton:(i=e?.inlineUploadButton)!=null?i:"Upload",imageIcon:(s=e?.inlineImageIcon)!=null?s:Q3,confirmButton:(o=e?.inlineConfirmButton)!=null?o:x8,uploadPlaceholderText:(a=e?.inlineUploadPlaceholderText)!=null?a:"or paste link",onUpload:(u=(l=e?.inlineOnUpload)!=null?l:e?.onUpload)!=null?u:r.onUpload,proxyDomURL:e?.proxyDomURL}}),t.update(Bv.key,r=>{var i,s,o,a,l,u,c,h;return{uploadButton:(i=e?.blockUploadButton)!=null?i:"Upload file",imageIcon:(s=e?.blockImageIcon)!=null?s:Q3,captionIcon:(o=e?.blockCaptionIcon)!=null?o:v1e,confirmButton:(a=e?.blockConfirmButton)!=null?a:"Confirm",captionPlaceholderText:(l=e?.blockCaptionPlaceholderText)!=null?l:"Write Image Caption",uploadPlaceholderText:(u=e?.blockUploadPlaceholderText)!=null?u:"or paste link",onUpload:(h=(c=e?.blockOnUpload)!=null?c:e?.onUpload)!=null?h:r.onUpload,proxyDomURL:e?.proxyDomURL}})}).use(Koe).use(_de)},ege=So.extendSchema(n=>e=>{const t=n(e);return{...t,toMarkdown:{match:t.toMarkdown.match,runner:(r,i)=>{var s,o;if(((s=i.attrs.language)!=null?s:"").toLowerCase()==="latex")r.addNode("math",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"");else return t.toMarkdown.runner(r,i)}}}}),vd="math_inline",X0=Fn(vd,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${vd}"]`,getAttrs:n=>{var e;return{value:(e=n.dataset.value)!=null?e:""}}}],toDOM:n=>{const e=n.attrs.value,t=document.createElement("span");return t.dataset.type=vd,t.dataset.value=e,SB.render(e,t,{throwOnError:!1}),t},parseMarkdown:{match:n=>n.type==="inlineMath",runner:(n,e,t)=>{n.addNode(t,{value:e.value})}},toMarkdown:{match:n=>n.type.name===vd,runner:(n,e)=>{n.addNode("inlineMath",void 0,e.attrs.value)}}})),uF=st("ToggleLatex",n=>()=>(e,t)=>{const{hasNode:r,pos:i,target:s}=SN(e,X0.type(n)),{selection:o,doc:a,tr:l}=e;if(!r){const d=a.textBetween(o.from,o.to);let p=l.replaceSelectionWith(X0.type(n).create({value:d}));return t&&t(p.setSelection(Ye.create(p.doc,o.from))),!0}const{from:u,to:c}=o;if(!s||i<0)return!1;let h=l.delete(i,i+1);const f=s.attrs.value;return h=h.insertText(f,i),t&&t(h.setSelection(Be.create(h.doc,u,c+f.length-1))),!0}),fA=s2("INLINE_LATEX"),tge=He({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(n){const e=r=>{if(!(!r||!(r instanceof HTMLElement))){for(;r.firstChild;)r.removeChild(r.firstChild);n.innerView.value&&r.appendChild(n.innerView.value.dom)}},t=r=>{r.preventDefault(),n.updateValue.value()};return()=>X("div",{class:"container"},n.innerView&&X("div",{ref:e}),X("button",{onPointerdown:t},X(Ah,{icon:n.config.inlineEditConfirm})))}});var cF=n=>{throw TypeError(n)},hF=(n,e,t)=>e.has(n)||cF("Cannot "+t),sr=(n,e,t)=>(hF(n,e,"read from private field"),t?t.call(n):e.get(n)),Va=(n,e,t)=>e.has(n)?cF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Xm=(n,e,t,r)=>(hF(n,e,"write to private field"),e.set(n,t),t),bd,Bc,fg,uu,xd,wd,n7,r7;class nge{constructor(e,t,r){this.ctx=e,Va(this,bd),Va(this,Bc),Va(this,fg),Va(this,uu,ih(null)),Va(this,xd,ih(()=>{})),Va(this,wd),Va(this,n7,()=>{sr(this,uu).value&&(sr(this,uu).value.destroy(),sr(this,uu).value=null)}),Va(this,r7,s=>{const a=(()=>{const{selection:l,schema:u}=s.state;if(l.empty||!(l instanceof Ye))return!1;const c=l.node;if(c.type.name!==vd)return!1;const h=l.from,f=u.nodes.paragraph.create(null,u.text(c.attrs.value)),d=new lx(sr(this,fg),{state:yu.create({doc:f,schema:new YD({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[fP({"Mod-z":Gv,"Mod-Z":Mh,"Mod-y":Mh,Enter:()=>(sr(this,xd).value(),!0)})]})});return sr(this,uu).value=d,sr(this,xd).value=()=>{const{tr:p}=s.state;p.setNodeAttribute(h,"value",d.state.doc.textContent),s.dispatch(p),requestAnimationFrame(()=>{s.focus()})},!0})();return a||sr(this,n7).call(this),a}),this.update=(s,o)=>{sr(this,Bc).update(s,o)},this.destroy=()=>{sr(this,wd).unmount(),sr(this,Bc).destroy(),sr(this,bd).remove()};const i=document.createElement("div");i.className="milkdown-latex-inline-edit",Xm(this,bd,i),Xm(this,wd,Ws(tge,{config:r,innerView:sr(this,uu),updateValue:sr(this,xd)})),sr(this,wd).mount(i),Xm(this,Bc,new i2({debounce:0,content:sr(this,bd),shouldShow:sr(this,r7),offset:10,floatingUIOptions:{placement:"bottom"}})),sr(this,Bc).update(t),Xm(this,fg,document.createElement("div"))}}bd=new WeakMap;Bc=new WeakMap;fg=new WeakMap;uu=new WeakMap;xd=new WeakMap;wd=new WeakMap;n7=new WeakMap;r7=new WeakMap;const rge=$r(n=>bQ(/(?:\$)([^$]+)(?:\$)$/,X0.type(n),{getAttr:e=>{var t;return{value:(t=e[1])!=null?t:""}}})),ige=$r(n=>_6(/^\$\$[\s\n]$/,So.type(n),()=>({language:"LaTeX"}))),sge=Ao("remarkMath",()=>Gpe);function oge(n){return Fl(n,"math",(e,t,r)=>{const{value:i}=e,s={type:"code",lang:"LaTeX",value:i};r.children.splice(t,1,s)})}const age=Ao("remarkMathBlock",()=>()=>oge),lge=(n,e)=>{n.config(Ro(zt.Latex)).config(t=>{if(!h2(t).get().includes(zt.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");t.update(Dp.key,s=>({...s,renderPreview:(o,a)=>{if(o.toLowerCase()==="latex"&&a.length>0)return uge(a,e?.katexOptions);const l=s.renderPreview;return l(o,a)}})),t.set(fA.key,{view:s=>{var o;return new nge(t,s,{inlineEditConfirm:(o=e?.inlineEditConfirm)!=null?o:x8,...e})}})}).use(sge).use(age).use(X0).use(fA).use(rge).use(ige).use(ege).use(uF)};function uge(n,e){return SB.renderToString(n,{...e,throwOnError:!1,displayMode:!0})}const cge=(n,e)=>{n.config(Ro(zt.LinkTooltip)).config(Cme).config(t=>{t.update(Ph.key,r=>{var i,s,o,a,l,u;return{...r,linkIcon:(i=e?.linkIcon)!=null?i:XB,editButton:(s=e?.editButton)!=null?s:w8,removeButton:(o=e?.removeButton)!=null?o:t7,confirmButton:(a=e?.confirmButton)!=null?a:x8,inputPlaceholder:(l=e?.inputPlaceholder)!=null?l:"Paste link...",onCopyLink:(u=e?.onCopyLink)!=null?u:()=>{}}})}).use(Tme)};function hge(n,e){n.set(a2.key,{renderLabel:({label:t,listType:r,checked:i})=>{var s,o,a;return i==null?r==="bullet"?(s=e?.bulletIcon)!=null?s:g1e:t:i?(o=e?.checkBoxCheckedIcon)!=null?o:b1e:(a=e?.checkBoxUncheckedIcon)!=null?a:x1e}})}const fge=(n,e)=>{n.config(Ro(zt.ListItem)).config(t=>hge(t,e)).use(Nme)};function dge(n){var e;return n.childCount<=1&&!((e=n.firstChild)!=null&&e.content.size)}function pge(n,e){const{selection:t}=n;if(!t.empty)return null;const r=t.$anchor,i=r.parent;if(i.content.size>0||go(a=>a.type.name==="table")(r))return null;const o=r.before();return qn.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const i7=Vt({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),mge=ir(n=>new gn({key:new En("CREPE_PLACEHOLDER"),props:{decorations:e=>{var t;if(z1e(n).readonly)return null;const i=n.get(i7.key);if(i.mode==="doc"&&!dge(e.doc)||QB(e.selection)||eF(e.selection))return null;const s=(t=i.text)!=null?t:"Please enter...",o=pge(e,s);return o?Ut.create(e.doc,[o]):null}}})),gge=(n,e)=>{n.config(Ro(zt.Placeholder)).config(t=>{e&&t.update(i7.key,r=>({...r,...e}))}).use(mge).use(i7)},yge=(n,e)=>{n.config(Ro(zt.Table)).config(t=>{t.update(l2.key,r=>({...r,renderButton:i=>{var s,o,a,l,u,c,h,f,d;switch(i){case"add_row":return(s=e?.addRowIcon)!=null?s:e7;case"add_col":return(o=e?.addColIcon)!=null?o:e7;case"delete_row":return(a=e?.deleteRowIcon)!=null?a:t7;case"delete_col":return(l=e?.deleteColIcon)!=null?l:t7;case"align_col_left":return(u=e?.alignLeftIcon)!=null?u:d1e;case"align_col_center":return(c=e?.alignCenterIcon)!=null?c:f1e;case"align_col_right":return(h=e?.alignRightIcon)!=null?h:p1e;case"col_drag_handle":return(f=e?.colDragHandleIcon)!=null?f:cA;case"row_drag_handle":return(d=e?.rowDragHandleIcon)!=null?d:cA}}}))}).use(s1e)};function vge(n,e){var t,r,i,s,o,a,l;const u=new rF;u.addGroup("formatting","Formatting").addItem("bold",{icon:(t=n?.boldIcon)!=null?t:m1e,active:d=>d.get(Pe).call(Oc.key,Uh.type(d)),onRun:d=>{d.get(Pe).call(Pv.key)}}).addItem("italic",{icon:(r=n?.italicIcon)!=null?r:M1e,active:d=>d.get(Pe).call(Oc.key,rc.type(d)),onRun:d=>{d.get(Pe).call(Nv.key)}}).addItem("strikethrough",{icon:(i=n?.strikethroughIcon)!=null?i:P1e,active:d=>d.get(Pe).call(Oc.key,Xh.type(d)),onRun:d=>{d.get(Pe).call(zv.key)}});const c=u.addGroup("function","Function");c.addItem("code",{icon:(s=n?.codeIcon)!=null?s:KB,active:d=>d.get(Pe).call(Oc.key,sa.type(d)),onRun:d=>{d.get(Pe).call(Rv.key)}});const h=e&&h2(e).get();return h?.includes(zt.Latex)&&c.addItem("latex",{icon:(o=n?.latexIcon)!=null?o:JB,active:d=>d.get(Pe).call(SR.key,X0.type(d)),onRun:d=>{d.get(Pe).call(uF.key)}}),c.addItem("link",{icon:(a=n?.linkIcon)!=null?a:O1e,active:d=>d.get(Pe).call(Oc.key,Fs.type(d)),onRun:d=>{d.get(Pe).call(kB.key)}}),(l=n?.buildToolbar)==null||l.call(n,u),u.build()}const bge=He({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(n){const{ctx:e,config:t}=n,r=o=>a=>{a.preventDefault(),e&&o(e)};function i(o){return n.selection.value,e.get(x3).status!==uy.Created?!1:o(e)}const s=Te(()=>vge(t,e));return()=>X(er,null,s.value.map(o=>o.items.map(a=>X("button",{type:"button",class:Cr("toolbar-item",e&&i(a.active)&&"active"),onPointerdown:r(a.onRun)},X(Ah,{icon:a.icon})))).reduce((o,a,l)=>(l===0?o.push(...a):o.push(X("div",{class:"divider"}),...a),o),[]))}});var fF=n=>{throw TypeError(n)},dF=(n,e,t)=>e.has(n)||fF("Cannot "+t),Di=(n,e,t)=>(dF(n,e,"read from private field"),t?t.call(n):e.get(n)),Ff=(n,e,t)=>e.has(n)?fF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ym=(n,e,t,r)=>(dF(n,e,"write to private field"),e.set(n,t),t),Ua,Sd,dg,kd,Cd;const dA=s2("CREPE_TOOLBAR");class xge{constructor(e,t,r){Ff(this,Ua),Ff(this,Sd),Ff(this,dg),Ff(this,kd),Ff(this,Cd,le(!1)),this.update=(o,a)=>{Di(this,Ua).update(o,a),Di(this,kd).value=o.state.selection},this.destroy=()=>{Di(this,Ua).destroy(),Di(this,dg).unmount(),Di(this,Sd).remove()},this.hide=()=>{Di(this,Ua).hide()};const i=document.createElement("div");i.className="milkdown-toolbar",Ym(this,kd,ih(t.state.selection));const s=Ws(bge,{ctx:e,hide:this.hide,config:r,selection:Di(this,kd),show:Di(this,Cd)});s.mount(i),Ym(this,Sd,i),Ym(this,dg,s),Ym(this,Ua,new i2({content:Di(this,Sd),debounce:20,offset:10,shouldShow(o){const{doc:a,selection:l}=o.state,{empty:u,from:c,to:h}=l,f=!a.textBetween(c,h).length&&l instanceof Be,d=!(l instanceof Be),p=o.dom.getRootNode().activeElement,m=i.contains(p),g=!o.hasFocus()&&!m,y=!o.editable;return!(g||d||u||f||y)}})),Di(this,Ua).onShow=()=>{Di(this,Cd).value=!0},Di(this,Ua).onHide=()=>{Di(this,Cd).value=!1},this.update(t)}}Ua=new WeakMap;Sd=new WeakMap;dg=new WeakMap;kd=new WeakMap;Cd=new WeakMap;const wge=(n,e)=>{n.config(Ro(zt.Toolbar)).config(t=>{t.set(dA.key,{view:r=>new xge(t,r,e)})}).use(dA)};function Sge(n,e,t){switch(n){case zt.CodeMirror:return J1e(e,t);case zt.ListItem:return fge(e,t);case zt.LinkTooltip:return cge(e,t);case zt.ImageBlock:return Q1e(e,t);case zt.Cursor:return Z1e(e,t);case zt.BlockEdit:return Y1e(e,t);case zt.Placeholder:return gge(e,t);case zt.Toolbar:return wge(e,t);case zt.Table:return yge(e,t);case zt.Latex:return lge(e,t)}}var pF=n=>{throw TypeError(n)},mF=(n,e,t)=>e.has(n)||pF("Cannot "+t),Ni=(n,e,t)=>(mF(n,e,"read from private field"),t?t.call(n):e.get(n)),kb=(n,e,t)=>e.has(n)?pF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Cb=(n,e,t,r)=>(mF(n,e,"write to private field"),e.set(n,t),t),Ri,pg,Td;class kge{constructor({root:e,defaultValue:t=""}={}){kb(this,Ri),kb(this,pg),kb(this,Td,!0),this.addFeature=(i,s)=>(i(Ni(this,Ri),s),this),this.create=()=>Ni(this,Ri).create(),this.destroy=()=>Ni(this,Ri).destroy(),this.setReadonly=i=>(Cb(this,Td,!i),Ni(this,Ri).action(s=>{Ni(this,Ri).status===uy.Created&&s.get(Zt).setProps({editable:()=>!i})}),this),this.getMarkdown=()=>Ni(this,Ri).action(Ase()),this.on=i=>Ni(this,Ri).status!==uy.Created?(Ni(this,Ri).config(s=>{const o=s.get(K0);i(o)}),this):(Ni(this,Ri).action(s=>{const o=s.get(K0);i(o)}),this);var r;Cb(this,pg,(r=typeof e=="string"?document.querySelector(e):e)!=null?r:document.body),Cb(this,Ri,ux.make().config(i=>{i.inject($1e,this),i.inject(F1e,[])}).config(i=>{i.set(j1,Ni(this,pg)),i.set(z1,t),i.set(Zc,{editable:()=>Ni(this,Td)}),i.update(c2.key,s=>({...s,size:4}))}).use(ioe).use(v8).use(o1e).use(l1e).use(c1e).use(VB).use(Uue))}get editor(){return Ni(this,Ri)}get readonly(){return!Ni(this,Td)}}Ri=new WeakMap;pg=new WeakMap;Td=new WeakMap;class mg extends kge{constructor({features:e={},featureConfigs:t={},...r}={}){super(r);const i=OG(t,B1e);Object.entries({...h1e,...e}).filter(([,o])=>o).map(([o])=>o).forEach(o=>{const a=i[o];Sge(o,this.editor,a)})}}mg.Feature=zt;const Cge=He({__name:"inline-editor",props:Ay({disabled:{type:Boolean},placeholder:{},features:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Z0(n,"modelValue");return t.value===void 0&&(t.value=""),rq(r=>{const i=new mg({root:r,defaultValue:t.value,featureConfigs:{[mg.Feature.Placeholder]:{text:e.placeholder||"Начните вводить текст..."}},features:{...e.features,[mg.Feature.Latex]:!1}});return i.editor.config(s=>{s.update(Zc,a=>({...a,editable:()=>!e.disabled})),s.get(K0).markdownUpdated((a,l)=>{t.value=l})}).use(v8),i.on(s=>{s.markdownUpdated(o=>{console.log("Markdown updated:",o)}),s.updated(()=>{console.log("Document updated")}),s.focus(()=>{console.log("Editor focused")}),s.blur(()=>{console.log("Editor blurred")})}),i}),(r,i)=>(ve(),gt("div",{class:rh({"milkdown-disabled":r.disabled,"has-content":!!t.value})},[We($(tq))],2))}}),Tge=ni(Cge,[["__scopeId","data-v-e56b4744"]]),Ege={class:"time-field-wrapper"},Age=He({__name:"time-field",props:Ay({placeholder:{default:"--:--"},disabled:{type:Boolean},readonly:{type:Boolean},hourCycle:{default:"24"}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Z0(n,"modelValue");return(t,r)=>(ve(),gt("div",Ege,[We($(NV),{id:"time-field",modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),granularity:"minute",disabled:t.disabled,readonly:"readonly"in t?t.readonly:$(JF),class:"time-field","hour-cycle":24,part:"dayPeriod"},{default:Qe(({segments:i})=>[(ve(!0),gt(er,null,ea(i,s=>(ve(),gt(er,{key:s.part},[s.part==="literal"?(ve(),bt($(iS),{key:0,part:s.part},{default:Qe(()=>[wl(pi(s.value),1)]),_:2},1032,["part"])):(ve(),bt($(iS),{key:1,part:s.part},{default:Qe(()=>[wl(pi(s.value),1)]),_:2},1032,["part"]))],64))),128))]),_:1},8,["modelValue","disabled","readonly"])]))}}),pA=ni(Age,[["__scopeId","data-v-f3ad0aa5"]]),Mge={class:"description-section"},Oge=He({__name:"description-section",props:{section:{}},emits:["update:section"],setup(n,{emit:e}){const t=n,r=e,i=To(),{isViewMode:s}=Co(i),o=Te({get:()=>t.section.text,set:a=>{r("update:section",{...t.section,text:a})}});return(a,l)=>(ve(),gt("div",Mge,[We($(_g),{modelValue:$(o),"onUpdate:modelValue":l[0]||(l[0]=u=>ku(o)?o.value=u:null),disabled:$(s),placeholder:"Добавьте заметку или описание...",class:"section-editor"},null,8,["modelValue","disabled"])]))}}),Ige=ni(Oge,[["__scopeId","data-v-a472b8d0"]]),Dge={class:"activity-section-renderer"},Nge=He({__name:"section-renderer",props:{section:{}},emits:["update:section","delete:section"],setup(n,{emit:e}){const t=e,r=To(),{isViewMode:i}=Co(r);function s(o){t("update:section",o)}return(o,a)=>(ve(),gt("div",Dge,[o.section.type===$(Jm).DESCRIPTION?(ve(),bt(Ige,{key:0,section:o.section,"onUpdate:section":s},null,8,["section"])):ar("",!0),$(i)?ar("",!0):(ve(),gt("button",{key:1,class:"delete-btn",title:"Удалить секцию",onClick:a[0]||(a[0]=l=>t("delete:section"))},[We($(_s),{icon:"mdi:close"})]))]))}}),Pge=ni(Nge,[["__scopeId","data-v-ecc1e85a"]]),Rge={key:0,class:"drag-handle"},Lge={class:"activity-header"},_ge={class:"activity-time"},Bge=["onKeydown"],Fge={class:"activity-title"},$ge={class:"activity-sections"},zge={key:0,class:"sections-list"},Vge={key:1,class:"add-section-controls"},Hge=He({__name:"item",props:{activity:{}},emits:["update","delete"],setup(n,{emit:e}){const t=n,r=e,i=To(),{isViewMode:s}=Co(i),o=le(!1),a=le(null),l=ih(null),u=ih(null);function c(x){r("update",{...t.activity,...x})}function h(x){const[k,C]=x.split(":").map(Number);return new oh(k,C)}function f(){s.value||(o.value=!0,l.value=h(t.activity.startTime),u.value=h(t.activity.endTime))}function d(){if(!o.value)return;const x=`${l.value?.hour.toString().padStart(2,"0")}:${l.value?.minute.toString().padStart(2,"0")}`,k=`${u.value?.hour.toString().padStart(2,"0")}:${u.value?.minute.toString().padStart(2,"0")}`;c({startTime:x,endTime:k}),o.value=!1}function p(){o.value=!1}const m=Te({get:()=>t.activity.title,set:x=>c({title:x})});e$(a,d);function g(x,k){const C=[...t.activity.sections||[]];C[x]=k,c({sections:C})}function y(x){if(x===Jm.DESCRIPTION){const k={id:QF(),type:Jm.DESCRIPTION,text:""},C=[...t.activity.sections||[],k];c({sections:C})}}function v(x){const k=[...t.activity.sections||[]];k.splice(x,1),c({sections:k})}return(x,k)=>(ve(),gt("div",{class:rh(["activity-item",{"view-mode":$(s)}])},[$(s)?ar("",!0):(ve(),gt("div",Rge)),lt("div",Lge,[lt("div",_ge,[$(o)?(ve(),gt("div",{key:0,ref_key:"timeEditorRef",ref:a,class:"time-editor",onKeydown:gg(yg(p,["prevent"]),["esc"])},[$(l)?(ve(),bt($(pA),{key:0,modelValue:$(l),"onUpdate:modelValue":k[0]||(k[0]=C=>ku(l)?l.value=C:null)},null,8,["modelValue"])):ar("",!0),k[4]||(k[4]=lt("span",{class:"time-separator"},"-",-1)),$(u)?(ve(),bt($(pA),{key:1,modelValue:$(u),"onUpdate:modelValue":k[1]||(k[1]=C=>ku(u)?u.value=C:null)},null,8,["modelValue"])):ar("",!0)],40,Bge)):(ve(),gt("div",{key:1,class:"time-display",onClick:f},pi(x.activity.startTime)+" - "+pi(x.activity.endTime),1))])]),lt("div",Fge,[We($(_s),{icon:"mdi:chevron-right"}),We($(_g),{modelValue:$(m),"onUpdate:modelValue":k[2]||(k[2]=C=>ku(m)?m.value=C:null),placeholder:"Описание активности",disabled:$(s),class:"activity-title-editor",features:{"block-edit":!1}},null,8,["modelValue","disabled"])]),lt("div",$ge,[x.activity.sections&&x.activity.sections.length>0?(ve(),gt("div",zge,[(ve(!0),gt(er,null,ea(x.activity.sections,(C,w)=>(ve(),bt($(Pge),{key:C.id,section:C,"onUpdate:section":M=>g(w,M),"onDelete:section":M=>v(w)},null,8,["section","onUpdate:section","onDelete:section"]))),128))])):ar("",!0),$(s)?ar("",!0):(ve(),gt("div",Vge,[We($(t$),{variant:"outlined",color:"secondary",onClick:k[3]||(k[3]=C=>y($(Jm).DESCRIPTION))},{default:Qe(()=>[We($(_s),{icon:"mdi:text-box-plus-outline"}),k[5]||(k[5]=wl(" Добавить заметку ",-1))]),_:1,__:[5]})]))])],2))}}),jge=ni(Hge,[["__scopeId","data-v-6a56c3da"]]),Wge={class:"day-activities"},qge={class:"activities-container"},Uge={key:0,class:"empty-state"},Gge=He({__name:"list",setup(n,{expose:e}){const t=To(),{getActivitiesForSelectedDay:r,getSelectedDay:i,isViewMode:s}=Co(t),{reorderActivities:o,updateActivity:a,removeActivity:l,addActivity:u}=t,c=Te({get:()=>r.value,set:d=>{i.value&&o(i.value.id,d)}});function h(d){i.value&&a(i.value.id,d)}function f(d){i.value&&l(i.value.id,d)}return e({handleAddNewActivity:()=>{if(!i.value)return;const d=r.value.at(-1),p=d?Pb(d.endTime)+15:540,m=p+60,g={title:"Новая активность",startTime:sS(p),endTime:sS(m),tag:Rs.ATTRACTION,sections:[]};u(i.value.id,g)}}),(d,p)=>(ve(),gt("div",Wge,[lt("div",qge,[We($(QW),{modelValue:$(c),"onUpdate:modelValue":p[0]||(p[0]=m=>ku(c)?c.value=m:null),"ghost-class":"ghost-activity","chosen-class":"chosen-activity",animation:"300","item-key":"id",handle:".drag-handle",disabled:$(s),class:"draggable-area"},{item:Qe(({element:m})=>[We(jge,{activity:m,onUpdate:h,onDelete:f},null,8,["activity"])]),_:1},8,["modelValue","disabled"]),$(r).length===0?(ve(),gt("div",Uge,[p[2]||(p[2]=lt("p",null,"На этот день нет запланированных активностей",-1)),$(s)?ar("",!0):(ve(),gt("button",{key:0,class:"g-button",onClick:p[1]||(p[1]=m=>d.$emit("add"))}," Добавить активность "))])):ar("",!0)])]))}}),Kge=ni(Gge,[["__scopeId","data-v-d05ba8a2"]]),Xge={key:0,class:"day-header"},Yge=He({__name:"index",setup(n){const e=To(),{getSelectedDay:t,isViewMode:r}=Co(e);function i(s){t.value&&e.updateDayDetails(t.value.id,s)}return(s,o)=>$(t)?(ve(),gt("div",Xge,[We($(_g),{"model-value":$(t).title,placeholder:"Название дня...",disabled:$(r),features:{"block-edit":!1},class:"day-title","onUpdate:modelValue":o[0]||(o[0]=a=>i({title:a}))},null,8,["model-value","disabled"]),We($(_g),{"model-value":$(t).description||"",disabled:$(r),placeholder:"Добавьте описание...",features:{"block-edit":!1},class:"day-description","onUpdate:modelValue":o[1]||(o[1]=a=>i({description:a}))},null,8,["model-value","disabled"])])):ar("",!0)}}),Jge=ni(Yge,[["__scopeId","data-v-a5e8ec32"]]),Zge={class:"trip-info-skeleton"},Qge={class:"days-controls-skeleton"},eye={class:"divider-skeleton"},tye={class:"day-header-skeleton"},nye={class:"divider-skeleton"},rye={class:"activities-list-skeleton"},iye={class:"activity-content-skeleton"},sye=He({__name:"trip-info-skeleton",setup(n){return(e,t)=>(ve(),gt("div",Zge,[lt("div",Qge,[(ve(),gt(er,null,ea(5,r=>We($(Ys),{key:r,width:"36px",height:"36px","border-radius":"50%",type:"wave"})),64)),t[0]||(t[0]=lt("div",{class:"spacer"},null,-1)),We($(Ys),{width:"36px",height:"36px","border-radius":"8px",type:"wave"})]),lt("div",eye,[We($(Ys),{width:"80px",height:"12px","border-radius":"4px",type:"wave"})]),lt("div",tye,[We($(Ys),{width:"60%",height:"32px","border-radius":"6px",type:"wave",style:{"margin-bottom":"12px"}}),We($(Ys),{width:"85%",height:"18px","border-radius":"6px",type:"wave"}),We($(Ys),{width:"75%",height:"18px","border-radius":"6px",type:"wave"})]),lt("div",nye,[We($(Ys),{width:"120px",height:"12px","border-radius":"4px",type:"wave"})]),lt("div",rye,[(ve(),gt(er,null,ea(3,r=>lt("div",{key:r,class:"activity-item-skeleton"},[We($(Ys),{width:"120px",height:"20px","border-radius":"4px",type:"wave"}),lt("div",iye,[We($(Ys),{width:"90%",height:"40px","border-radius":"6px",type:"wave"})])])),64))]),We($(Ys),{width:"100%",height:"52px","border-radius":"8px",type:"wave",style:{"margin-top":"16px"}})]))}}),oye=ni(sye,[["__scopeId","data-v-682f96b7"]]),aye={class:"trip-info"},lye=He({__name:"trip-info",setup(n){const e=To(),t=ZF(),{days:r,isLoading:i,fetchError:s,getActivitiesForSelectedDay:o,isViewMode:a}=Co(e),l=Te(()=>t.params.id),u=le(null);function c(){e.addNewDay()}function h(){u.value?.handleAddNewActivity()}return ko(()=>{l.value&&e.fetchDaysForTrip(l.value)}),(f,d)=>(ve(),bt($(wF),{loading:$(i),error:$(s),data:$(r),"retry-handler":()=>$(e).fetchDaysForTrip($(l)),class:"trip-info-wrapper"},{loading:Qe(()=>[We(oye)]),success:Qe(()=>[lt("div",aye,[We(pH),d[0]||(d[0]=lt("div",{class:"divider"}," о дне ",-1)),We(Jge),d[1]||(d[1]=lt("div",{class:"divider"}," маршрут ",-1)),We(Kge,{ref_key:"dayActivitiesListRef",ref:u,onAdd:h},null,512),$(o).length&&!$(a)?(ve(),bt(_V,{key:0,onAdd:h})):ar("",!0)])]),empty:Qe(()=>[lt("div",{class:"trip-content-empty"},[d[2]||(d[2]=lt("p",null,"Пока не создано ни одного дня для вашего путешествия.",-1)),lt("button",{class:"g-button-primary",onClick:c}," Создать первый день ")])]),_:1},8,["loading","error","data","retry-handler"]))}}),uye=He({__name:"index",setup(n){const e=To(),{isDaysPanelPinned:t}=Co(e),{mdAndDown:r}=ZA();return(i,s)=>(ve(),gt("section",{class:rh(["content-wrapper",{isPanelPinned:$(t)&&!$(r)}])},[We($(lye))],2))}}),cye=ni(uye,[["__scopeId","data-v-3ecd1504"]]),Lye=Object.freeze(Object.defineProperty({__proto__:null,default:cye},Symbol.toStringTag,{value:"Module"}));export{gu as A,pn as B,a_ as C,K as D,Oe as E,_5 as F,RJ as G,IG as H,kn as I,YY as J,Lye as K,L5 as L,yye as N,RO as P,es as T,QY as a,Pye as b,Mye as c,nfe as d,kr as e,cJ as f,Eye as g,Aye as h,dD as i,Oye as j,Rye as k,ne as l,Ui as m,kt as n,o6 as o,bye as p,Qt as q,ss as r,qY as s,Q as t,hD as u,Hh as v,uJ as w,Ll as x,jh as y,av as z};
