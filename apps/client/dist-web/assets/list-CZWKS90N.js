import{u as Y,S as m,_ as A}from"./use-database-DKumFCDg.js";import{c as f,a as h,U as c,h as n,l as e,F as s,m as t,V as d,j as $,p as N,_ as C,Y as b,Z as w,aE as E,a3 as B,n as _,v as x,X as k,aF as L,g as U,q as S}from"./index-WE5xPX2m.js";import{K as V}from"./kit-btn-cBAf5fdj.js";function j(){const{data:p,status:a,error:o,execute:u}=Y({initialData:[],immediate:!0,fn:g=>g.trips.getAll()}),v=f(()=>a.value==="pending");return{trips:p,isLoading:v,fetchError:o,fetchTrips:u}}const R={class:"state-container"},K={class:"content"},P=h({__name:"trip-list-empty",setup(p){return(a,o)=>(n(),c("div",R,[e("div",K,[s(t(d),{icon:"mdi:package-variant-closed-remove",class:"image",width:"150",height:"150"}),o[1]||(o[1]=e("h3",{class:"title"}," Путешествий пока нет ",-1)),o[2]||(o[2]=e("p",{class:"message"}," Самое время запланировать ваше следующее приключение! ",-1)),s(t(V),null,{default:$(()=>[s(t(d),{icon:"mdi:plus"}),o[0]||(o[0]=N(" Создать путешествие ",-1))]),_:1,__:[0]})])]))}}),q=C(P,[["__scopeId","data-v-844474f8"]]),z={class:"travel-card-wrapper"},M={class:"travel-card"},X={class:"card-image-container"},Z={class:"card-content"},G={class:"card-meta"},H={class:"card-footer"},J={class:"card-participants-skeleton"},O={class:"card-tags-skeleton"},Q=h({__name:"card-skeleton",setup(p){return(a,o)=>(n(),c("div",z,[e("div",M,[e("div",X,[s(t(m),{height:"200px",width:"100%","border-radius":"0"})]),e("div",Z,[e("div",G,[s(t(m),{width:"70%",height:"24px",class:"mb-4"}),s(t(m),{width:"50%",height:"18px"}),s(t(m),{width:"60%",height:"18px"}),s(t(m),{width:"40%",height:"18px"})]),e("div",H,[e("div",J,[s(t(m),{width:"32px",height:"32px","border-radius":"50%"}),s(t(m),{width:"32px",height:"32px","border-radius":"50%",style:{"margin-left":"-12px"}})]),e("div",O,[s(t(m),{width:"70px",height:"26px","border-radius":"16px"})])])])])]))}}),W=C(Q,[["__scopeId","data-v-aaccce9c"]]),tt=h({__name:"trip-list-skeleton",setup(p){return(a,o)=>(n(),c(b,null,w(3,u=>s(W,{key:u})),64))}}),et={class:"travel-card-wrapper"},st={class:"card-image-container"},at=["src","alt"],it={key:1,class:"card-no-image"},nt={class:"card-header"},rt={class:"card-title"},ot=["title"],ct={class:"card-actions"},lt={class:"card-content"},dt={class:"card-meta"},ut={class:"meta-item"},pt={class:"meta-item"},mt={key:0,class:"meta-item"},_t={class:"card-footer"},ht={key:0,class:"card-participants"},gt={key:0,class:"avatar avatar--more"},ft={key:1,class:"card-tags"},vt=h({__name:"card-item",props:{id:{},title:{},imageUrl:{},days:{},startDate:{},endDate:{},cities:{},description:{},status:{},budget:{},currency:{},participants:{default:()=>[]},tags:{default:()=>[]},visibility:{default:"private"},difficulty:{},season:{},createdAt:{},updatedAt:{}},setup(p){const a=p,o=E();function u(){o.push(L.Trip.Info(`${a.id}`))}function v(i){return i.split(" ").map(r=>r[0]).slice(0,2).join("").toUpperCase()}const g=["blue","orange","green","red","purple","cyan"];function D(i){const r=i.length%g.length;return`avatar--${g[r]}`}const F=f(()=>{const i=new Date(a.startDate),r=new Date(a.endDate),l=new Intl.DateTimeFormat("ru",{day:"numeric",month:"long"});return i.getFullYear()===r.getFullYear()?`${l.format(i)} - ${l.format(r)} ${i.getFullYear()}`:`${l.format(i)} ${i.getFullYear()} - ${l.format(r)} ${r.getFullYear()}`}),y=f(()=>{switch(a.status){case"completed":return{text:"Завершено",class:"completed",icon:"mdi:check-circle-outline"};case"in-progress":return{text:"В процессе",class:"in-progress",icon:"mdi:airplane-takeoff"};case"planned":return{text:"Запланировано",class:"planned",icon:"mdi:calendar-check-outline"};default:return{text:"Черновик",class:"draft",icon:"mdi:pencil-circle-outline"}}}),I=f(()=>!a.budget||!a.currency?null:new Intl.NumberFormat("ru-RU",{style:"currency",currency:a.currency,minimumFractionDigits:0}).format(a.budget)),T=f(()=>{switch(a.visibility){case"public":return{icon:"mdi:earth",title:"Публичное путешествие"};case"shared":return{icon:"mdi:account-multiple-outline",title:"Доступно по ссылке"};default:return{icon:"mdi:lock-outline",title:"Приватное путешествие"}}});return(i,r)=>(n(),c("div",et,[e("div",{class:"travel-card",onClick:u},[e("div",st,[i.imageUrl?(n(),c("img",{key:0,src:i.imageUrl,alt:i.title,class:"card-image"},null,8,at)):(n(),c("div",it,[s(t(d),{icon:"mdi:map-legend"})])),r[3]||(r[3]=e("div",{class:"image-overlay"},null,-1)),e("div",nt,[e("span",{class:B(["card-status",[t(y).class]])},[s(t(d),{icon:t(y).icon},null,8,["icon"]),N(" "+_(t(y).text),1)],2)]),e("h3",rt,_(i.title),1),e("span",{class:"card-visibility",title:t(T).title},[s(t(d),{icon:t(T).icon},null,8,["icon"])],8,ot),e("div",ct,[e("button",{class:"action-btn",title:"Редактировать",onClick:r[0]||(r[0]=x(()=>{},["stop"]))},[s(t(d),{icon:"mdi:pencil-outline"})]),e("button",{class:"action-btn",title:"Поделиться",onClick:r[1]||(r[1]=x(()=>{},["stop"]))},[s(t(d),{icon:"mdi:share-variant-outline"})]),e("button",{class:"action-btn",title:"Еще",onClick:r[2]||(r[2]=x(()=>{},["stop"]))},[s(t(d),{icon:"mdi:dots-vertical"})])])]),e("div",lt,[e("div",dt,[e("div",ut,[s(t(d),{icon:"mdi:calendar-month-outline"}),e("span",null,_(t(F)),1)]),e("div",pt,[s(t(d),{icon:"mdi:map-marker-outline"}),e("span",null,_(i.cities.join(", ")),1)]),t(I)?(n(),c("div",mt,[s(t(d),{icon:"mdi:wallet-outline"}),e("span",null,_(t(I)),1)])):k("",!0)]),e("div",_t,[i.participants.length?(n(),c("div",ht,[(n(!0),c(b,null,w(i.participants.slice(0,3),l=>(n(),c("div",{key:l,class:B(["avatar",D(l)])},[e("span",null,_(v(l)),1)],2))),128)),i.participants.length>3?(n(),c("div",gt,[e("span",null,"+"+_(i.participants.length-3),1)])):k("",!0)])):k("",!0),i.tags?.length?(n(),c("div",ft,[(n(!0),c(b,null,w(i.tags.slice(0,2),l=>(n(),c("span",{key:l,class:"tag"},_(l),1))),128))])):k("",!0)])])])]))}}),yt=C(vt,[["__scopeId","data-v-4f8cd071"]]),kt=h({__name:"trip-list-content",props:{trips:{}},setup(p){return(a,o)=>(n(!0),c(b,null,w(a.trips,u=>(n(),U(yt,S({key:u.id},{ref_for:!0},u),null,16))),128))}}),$t=h({__name:"trip-list",setup(p){const{trips:a,isLoading:o,fetchError:u,fetchTrips:v}=j(),g=f(()=>a.value&&a.value.length>0?a.value:null);return(D,F)=>(n(),U(t(A),{loading:t(o),error:t(u),data:t(g),"retry-handler":t(v)},{loading:$(()=>[s(tt)]),success:$(({data:y})=>[s(kt,{trips:y},null,8,["trips"])]),empty:$(()=>[s(q)]),_:1},8,["loading","error","data","retry-handler"]))}}),bt={class:"content-wrapper"},Dt=h({__name:"list",setup(p){return(a,o)=>(n(),c("section",bt,[s(t($t))]))}});export{Dt as default};
